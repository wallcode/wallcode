<!DOCTYPE html>

<html lang="zh-CN">

<head>
  
  <title>Ajaxå­¦ä¹ ç¬”è®° - wallleap</title>
  <meta charset="UTF-8">
  <meta name="description" content="luwangçš„åšå®¢ï¼Œæ­£åœ¨åŠªåŠ›å­¦ä¹ ğŸ’ª">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  
  

  <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/favicon.png" type="image/png" />
  <meta name="description" content="ä¸€ã€æ¦‚è¿° Webç¨‹åºçš„æœ€åˆçš„ç›®çš„å°±æ˜¯å°†ä¿¡æ¯(æ•°æ®)æ”¾åˆ°å…¬å…±çš„æœåŠ¡å™¨ï¼Œè®©æ‰€æœ‰çš„ç½‘ç»œç”¨æˆ·éƒ½å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®   åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼è®©æµè§ˆå™¨å‘å‡ºæœåŠ¡ç«¯çš„è¯·æ±‚ï¼Œè·å¾—æœåŠ¡ç«¯çš„æ•°æ®ï¼š  åœ°å€æ è¾“å…¥åœ°å€ï¼Œå›è½¦ï¼Œåˆ·æ–°  ç‰¹å®šå…ƒç´ çš„hrefæˆ–srcå±æ€§  è¡¨å•æäº¤   è¿™äº›æ–¹æ¡ˆéƒ½æ˜¯æˆ‘ä»¬æ— æ³•é€šè¿‡æˆ–è€…å¾ˆéš¾é€šè¿‡ä»£ç çš„æ–¹å¼è¿›è¡Œç¼–ç¨‹(å¯¹æœåŠ¡å™¨å‘å‡ºè¯·æ±‚å¹¶ä¸”æ¥æ”¶æœåŠ¡ç«¯è¿”å›çš„å“åº”)ï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥é€šè¿‡JavaScr">
<meta property="og:type" content="article">
<meta property="og:title" content="Ajaxå­¦ä¹ ç¬”è®°">
<meta property="og:url" content="https://blog.wallleap.cn/2020/08/20/AJAX/index.html">
<meta property="og:site_name" content="wallleap">
<meta property="og:description" content="ä¸€ã€æ¦‚è¿° Webç¨‹åºçš„æœ€åˆçš„ç›®çš„å°±æ˜¯å°†ä¿¡æ¯(æ•°æ®)æ”¾åˆ°å…¬å…±çš„æœåŠ¡å™¨ï¼Œè®©æ‰€æœ‰çš„ç½‘ç»œç”¨æˆ·éƒ½å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®   åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼è®©æµè§ˆå™¨å‘å‡ºæœåŠ¡ç«¯çš„è¯·æ±‚ï¼Œè·å¾—æœåŠ¡ç«¯çš„æ•°æ®ï¼š  åœ°å€æ è¾“å…¥åœ°å€ï¼Œå›è½¦ï¼Œåˆ·æ–°  ç‰¹å®šå…ƒç´ çš„hrefæˆ–srcå±æ€§  è¡¨å•æäº¤   è¿™äº›æ–¹æ¡ˆéƒ½æ˜¯æˆ‘ä»¬æ— æ³•é€šè¿‡æˆ–è€…å¾ˆéš¾é€šè¿‡ä»£ç çš„æ–¹å¼è¿›è¡Œç¼–ç¨‹(å¯¹æœåŠ¡å™¨å‘å‡ºè¯·æ±‚å¹¶ä¸”æ¥æ”¶æœåŠ¡ç«¯è¿”å›çš„å“åº”)ï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥é€šè¿‡JavaScr">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/cover/(00).jpg">
<meta property="article:published_time" content="2020-08-20T04:33:14.000Z">
<meta property="article:modified_time" content="2020-09-11T13:49:36.000Z">
<meta property="article:author" content="Luwang">
<meta property="article:tag" content="å‰ç«¯">
<meta property="article:tag" content=" web">
<meta property="article:tag" content=" Ajax">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/cover/(00).jpg">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/combine/gh/nexmoe/nexmoe.github.io@latest/css/style.css,npm/highlight.js@9.15.8/styles/atom-one-dark.css,gh/nexmoe/nexmoe.github.io@latest/lib/mdui_043tiny/css/mdui.css,gh/nexmoe/nexmoe.github.io@latest/lib/iconfont/iconfont.css" crossorigin>
  
    <link rel="stylesheet" href="//at.alicdn.com/t/font_1721693_jg94kndwhe.css">
  
  <link rel="stylesheet" href="/css/style.css?v=1599833537154">

   
    <style>
      .nexmoe-avatar img:hover {
        -webkit-transform: rotateZ(360deg);
        -moz-transform: rotateZ(360deg);
        transform: rotateZ(360deg);
      }	
    </style>
  

<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">
<script src="https://cdn.jsdelivr.net/gh/wallleap/live2d-widget@latest/autoload.js"></script> 
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/busuanzi.pure.mini.js"></script>

<link rel="stylesheet" href="/css/github-badge.css">
<link rel="stylesheet" href="/css/tags_ca.css">
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<style>
  .pace .pace-progress {  background: rgb(254, 27, 115); /*è¿›åº¦æ¡é¢œè‰²*/
  height: 3px;  }
  .pace .pace-progress-inner {  box-shadow: 0 0 10px #ff0000, 0 0 5px     #ff0000; /*é˜´å½±é¢œè‰²*/
  }
  .pace .pace-activity {  border-top-color: rgb(251, 30, 30);    /*ä¸Šè¾¹æ¡†é¢œè‰²*/
  border-left-color: rgb(251, 30, 30);    /*å·¦è¾¹æ¡†é¢œè‰²*/
}
</style>
<meta name="generator" content="Hexo 4.2.0"></head>

<body class="mdui-drawer-body-left">
  
  <div id="nexmoe-background">
    <div class="nexmoe-bg" style="background-image: url(https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg)"></div>
    <div class="mdui-appbar mdui-shadow-0">
      <div class="mdui-toolbar">
        <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
        <div class="mdui-toolbar-spacer"></div>
        <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
        <a href="/" title="Luwang" class="mdui-btn mdui-btn-icon"><img src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/custom/avatar.jpg" alt="Luwang"></a>
       </div>
    </div>
  </div>
  <div id="nexmoe-header">
      <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="Luwang">
            <img src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/custom/avatar.jpg" alt="Luwang" alt="Luwang">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>æ–‡ç« </span>54</div>
        <div><span>æ ‡ç­¾</span>57</div>
        <div><span>åˆ†ç±»</span>25</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="å›åˆ°é¦–é¡µ">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                å›åˆ°é¦–é¡µ
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/archives" title="æ–‡ç« å½’æ¡£">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                æ–‡ç« å½’æ¡£
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/categories" title="æ–‡ç« åˆ†ç±»">
            <i class="mdui-list-item-icon nexmoefont icon-appstore-fill"></i>
            <div class="mdui-list-item-content">
                æ–‡ç« åˆ†ç±»
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/friends.html" title="æˆ‘çš„æœ‹å‹">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                æˆ‘çš„æœ‹å‹
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about.html" title="å…³äºåšå®¢">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                å…³äºåšå®¢
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
  
  <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
        <form id="search_form" action_e="https://cn.bing.com/search?q=site:wallleap.cn" onsubmit="return search();">
            <label><input id="search_value" name="q" type="search" placeholder="æœç´¢"></label>
        </form>
    </div>
</div>
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">ç¤¾äº¤æŒ‰é’®</h3>
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://space.bilibili.com/157360395" target="_blank" mdui-tooltip="{content: 'å“”å“©å“”å“©'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
            <!-- <i class="fa icon-bilibili"></i> -->
        </a><a class="mdui-ripple" href="https://github.com/wallleap/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
            <!-- <i class="fa icon-github"></i> -->
        </a><a class="mdui-ripple" href="https://github.com/wallleap/" target="_blank" mdui-tooltip="{content: 'QQ'}" style="color: rgb(0 , 0, 252);background-color: rgba(0, 0, 252, .15);">
            <i class="nexmoefont icon-QQ"></i>
            <!-- <i class="fa icon-QQ"></i> -->
        </a><a class="mdui-ripple" href="https://github.com/wallleap/" target="_blank" mdui-tooltip="{content: 'å¾®ä¿¡å…¬ä¼—å·'}" style="color: rgb(0, 229, 105);background-color: rgba(0, 229, 105, .15);">
            <i class="nexmoefont icon-wechat-fill"></i>
            <!-- <i class="fa icon-wechat-fill"></i> -->
        </a><a class="mdui-ripple" href="https://github.com/wallleap/" target="_blank" mdui-tooltip="{content: 'æˆ‘çš„é‚®ç®±'}" style="color: rgb(245, 0, 0);background-color: rgba(245, 0, 0, .15);">
            <i class="nexmoefont icon-mail-fill"></i>
            <!-- <i class="fa icon-mail-fill"></i> -->
        </a><a class="mdui-ripple" href="https://github.com/wallleap/" target="_blank" mdui-tooltip="{content: 'æˆ‘çš„å¾®åš'}" style="color: rgb(245, 0, 0);background-color: rgba(245, 0, 0, .15);">
            <i class="nexmoefont icon-weibo"></i>
            <!-- <i class="fa icon-weibo"></i> -->
        </a><a class="mdui-ripple" href="https://github.com/wallleap/" target="_blank" mdui-tooltip="{content: 'RSS'}" style="color: rgb(252, 129, 0);background-color: rgba(252, 129, 0, .15);">
            <i class="nexmoefont icon-rss"></i>
            <!-- <i class="fa icon-rss"></i> -->
        </a> 
    </div>
</div>
  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">æ ‡ç­¾äº‘</h3>
    <div id="randomtagcloud" class="nexmoe-widget tagcloud">
      <a href="/tags/ACL/" style="font-size: 10px;">ACL</a> <a href="/tags/Ajax/" style="font-size: 10px;">Ajax</a> <a href="/tags/AngularJS/" style="font-size: 10px;">AngularJS</a> <a href="/tags/Blog/" style="font-size: 17.14px;">Blog</a> <a href="/tags/C-C/" style="font-size: 11.43px;">C/C++</a> <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/ES/" style="font-size: 10px;">ES</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/GitHub/" style="font-size: 15.71px;">GitHub</a> <a href="/tags/HCL/" style="font-size: 15.71px;">HCL</a> <a href="/tags/HCNA/" style="font-size: 15.71px;">HCNA</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/Hexo/" style="font-size: 17.14px;">Hexo</a> <a href="/tags/JavaScript/" style="font-size: 14.29px;">JavaScript</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/NAT/" style="font-size: 10px;">NAT</a> <a href="/tags/NodeJS/" style="font-size: 10px;">NodeJS</a> <a href="/tags/OSPF/" style="font-size: 10px;">OSPF</a> <a href="/tags/RIP/" style="font-size: 10px;">RIP</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/STP/" style="font-size: 10px;">STP</a> <a href="/tags/Sakura/" style="font-size: 10px;">Sakura</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/VLAN/" style="font-size: 10px;">VLAN</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a> <a href="/tags/Win10/" style="font-size: 10px;">Win10</a> <a href="/tags/eNSP/" style="font-size: 15.71px;">eNSP</a> <a href="/tags/eNsp/" style="font-size: 11.43px;">eNsp</a> <a href="/tags/hackintosh/" style="font-size: 10px;">hackintosh</a> <a href="/tags/hexo/" style="font-size: 11.43px;">hexo</a> <a href="/tags/jQuery/" style="font-size: 10px;">jQuery</a> <a href="/tags/w650dc/" style="font-size: 10px;">w650dc</a> <a href="/tags/web/" style="font-size: 18.57px;">web</a> <a href="/tags/%E4%B8%BB%E9%A2%98/" style="font-size: 12.86px;">ä¸»é¢˜</a> <a href="/tags/%E4%BA%94%E7%AC%94/" style="font-size: 10px;">äº”ç¬”</a> <a href="/tags/%E4%BA%A4%E6%8D%A2%E6%9C%BA/" style="font-size: 10px;">äº¤æ¢æœº</a> <a href="/tags/%E4%BC%81%E4%B8%9A%E7%BD%91/" style="font-size: 10px;">ä¼ä¸šç½‘</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 20px;">å‰ç«¯</a> <a href="/tags/%E5%8D%8E%E4%B8%89/" style="font-size: 15.71px;">åä¸‰</a> <a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 17.14px;">åšå®¢</a> <a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 11.43px;">åç«¯</a> <a href="/tags/%E5%9B%BE%E9%9B%86/" style="font-size: 10px;">å›¾é›†</a> <a href="/tags/%E5%AE%89%E8%A3%85/" style="font-size: 10px;">å®‰è£…</a> <a href="/tags/%E5%AE%9E%E9%AA%8C/" style="font-size: 12.86px;">å®éªŒ</a> <a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size: 10px;">å¾®ä¿¡</a> <a href="/tags/%E5%BE%AE%E4%BF%A1%E9%98%B2%E7%9B%97%E9%93%BE/" style="font-size: 10px;">å¾®ä¿¡é˜²ç›—é“¾</a> <a href="/tags/%E6%82%A6%E8%AF%BB/" style="font-size: 10px;">æ‚¦è¯»</a> <a href="/tags/%E6%8A%80%E6%9C%AF/" style="font-size: 10px;">æŠ€æœ¯</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 11.43px;">æ•°æ®ç»“æ„</a> <a href="/tags/%E6%A1%86%E6%9E%B6/" style="font-size: 10px;">æ¡†æ¶</a> <a href="/tags/%E6%A8%A1%E5%9D%97%E5%8C%96/" style="font-size: 10px;">æ¨¡å—åŒ–</a> <a href="/tags/%E8%80%83%E7%A0%94/" style="font-size: 10px;">è€ƒç ”</a> <a href="/tags/%E8%8B%B1%E8%AF%AD/" style="font-size: 10px;">è‹±è¯­</a> <a href="/tags/%E9%80%86%E6%B0%B4%E5%AF%92/" style="font-size: 10px;">é€†æ°´å¯’</a> <a href="/tags/%E9%85%8D%E7%BD%AE/" style="font-size: 12.86px;">é…ç½®</a> <a href="/tags/%E9%BB%91%E8%8B%B9%E6%9E%9C/" style="font-size: 10px;">é»‘è‹¹æœ</a>
    </div>
    
      <script>
        var maxTagcloud = parseInt(10);
        var tags_length = parseInt(57);
        var tags_arr = [];
        for(var i = 0; i < tags_length; i++){
          tags_arr.push(i);
        }
        tags_arr.sort(function (l, r) {
          return Math.random() > 0.5 ? -1 : 1;
        });
        tags_arr = tags_arr.slice(0, maxTagcloud < tags_length ? tags_length - maxTagcloud : 0);
        for(var tag_i = 0; tag_i < tags_arr.length; tag_i++){
          document.getElementById("randomtagcloud").children[tags_arr[tag_i]].style.display = 'none';
        }
      </script>
    
  </div>

  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">æ–‡ç« å½’æ¡£</h3>
    <div class="nexmoe-widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">å…«æœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">ä¸ƒæœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">å…­æœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">å››æœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">ä¸‰æœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">äºŒæœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">åä¸€æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">åæœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">ä¹æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">å…«æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">ä¸‰æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">åäºŒæœˆ 2018</a></li></ul>
    </div>
  </div>


  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="nexmoe-widget">
      <ul>
        
          <li>
            <a href="/2020/08/28/VUE/">Vueå­¦ä¹ ç¬”è®°</a>
          </li>
        
          <li>
            <a href="/2020/08/20/AJAX/">Ajaxå­¦ä¹ ç¬”è®°</a>
          </li>
        
          <li>
            <a href="/2020/07/12/React/">Reactå…¨å®¶æ¡¶(æŠ€æœ¯æ ˆ)å­¦ä¹ ç¬”è®°</a>
          </li>
        
          <li>
            <a href="/2020/07/04/Git/">Gitå­¦ä¹ ç¬”è®°</a>
          </li>
        
          <li>
            <a href="/2020/06/14/nodejs/">NodeJså­¦ä¹ ç¬”è®°</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
    <!-- <div class="nexmoe-copyright">
        &copy; 2020 Luwang
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://nexmoe.com/hexo-theme-nexmoe.html" target="_blank">Nexmoe</a>
    </div> -->
    <div style="text-align: center;">
        <div class="github-badge">
            <a rel="license" href="https://github.io/" target="_blank" title="é™æ€ç½‘é¡µæ‰˜ç®¡äºGithub">
            <span class="badge-subject">Hosted</span><span class="badge-value bg-brightgreen"><i class="fa fa-github" aria-hidden="true"></i> Github</span></a>
        </div>
        <div class="github-badge">
            <a rel="license" href="https://nexmoe.com/hexo-theme-nexmoe.html" target="_blank" title="ç«™ç‚¹ä½¿ç”¨ Sakura ä¸»é¢˜ï¼Œä½œè€…ï¼šMashiro & Hojun">
            <span class="badge-subject"><i class="fa fa-themeisle" aria-hidden="true"></i> Theme</span><span class="badge-value bg-theme">nexmoe</span></a>
        </div><br />
        <div class="github-badge">
            <span class="badge-subject"><i class="fa fa-user" aria-hidden="true"></i> UV</span>
            <span  class="badge-value bg-orange" id="busuanzi_value_site_uv"></span>
        </div>
        <div class="github-badge">
            <span class="badge-subject"><i class="fa fa-eye" aria-hidden="true"></i> PV</span>
            <span class="badge-value bg-brightgreen" id="busuanzi_value_site_pv"></span>
        </div>
    </div>
    <div class="site-img" style="margin: 20px 0 20px 16px;">
        <a href="#"><img width="200px" src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/wechat/wallleap.bmp"></a>
    </div>
</div><!-- .nexmoe-drawer -->
  </div>
  <div id="nexmoe-content">
    <div class="nexmoe-primary">
        <div class="nexmoe-post">
  
      <div class="nexmoe-post-cover" style="padding-bottom: 66.66666666666666%;"> 
          <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="Ajaxå­¦ä¹ ç¬”è®°" class="lazyload">
          <h1>Ajaxå­¦ä¹ ç¬”è®°</h1>
      </div>
  
  
  <link rel="stylesheet" href="/css/sharejs.css">
  <input type="hidden" id="yelog_site_posts_number" value="54">
  <input type="hidden" id="yelog_site_word_count" value="276.4k">
<div class="nexmoe-post-meta" style="margin:10px 0!important;">
    <a><i class="nexmoefont icon-calendar-fill"></i>2020å¹´08æœˆ20æ—¥</a>
    <a><i class="nexmoefont icon-areachart"></i>11.8k å­—</a>
    <a><i class="nexmoefont icon-time-circle-fill"></i>å¤§æ¦‚ 59 åˆ†é’Ÿ</a>
    <a><i class="nexmoefont icon-eye-fill"></i>é˜…è¯»æ¬¡æ•° <span id="busuanzi_value_page_pv"></span></a>
</div>

  <div class="nexmoe-post-right">
    
      <div class="nexmoe-fixed">
        <div class="nexmoe-valign">
            <div class="nexmoe-toc">
                <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸€ã€æ¦‚è¿°"><span class="toc-number">1.</span> <span class="toc-text">ä¸€ã€æ¦‚è¿°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#äºŒã€å¿«é€Ÿä¸Šæ‰‹"><span class="toc-number">2.</span> <span class="toc-text">äºŒã€å¿«é€Ÿä¸Šæ‰‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1ã€AJAXåŸºç¡€"><span class="toc-number">2.1.</span> <span class="toc-text">1ã€AJAXåŸºç¡€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2ã€ç†è§£readyState"><span class="toc-number">2.2.</span> <span class="toc-text">2ã€ç†è§£readyState</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3ã€AJAXéµå¾ªHTTPåè®®"><span class="toc-number">2.3.</span> <span class="toc-text">3ã€AJAXéµå¾ªHTTPåè®®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸‰ã€å…·ä½“ç”¨æ³•"><span class="toc-number">3.</span> <span class="toc-text">ä¸‰ã€å…·ä½“ç”¨æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1ã€æ•°æ®æ¥å£çš„æ¦‚å¿µ"><span class="toc-number">3.1.</span> <span class="toc-text">1ã€æ•°æ®æ¥å£çš„æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2ã€AJAXå‘é€GETè¯·æ±‚å¹¶ä¼ é€’å‚æ•°"><span class="toc-number">3.2.</span> <span class="toc-text">2ã€AJAXå‘é€GETè¯·æ±‚å¹¶ä¼ é€’å‚æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3ã€POSTè¯·æ±‚"><span class="toc-number">3.3.</span> <span class="toc-text">3ã€POSTè¯·æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4ã€åŒæ­¥å’Œå¼‚æ­¥"><span class="toc-number">3.4.</span> <span class="toc-text">4ã€åŒæ­¥å’Œå¼‚æ­¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5ã€å“åº”æ•°æ®æ ¼å¼"><span class="toc-number">3.5.</span> <span class="toc-text">5ã€å“åº”æ•°æ®æ ¼å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6ã€å¤„ç†æœåŠ¡å™¨ç«¯å“åº”çš„æ•°æ®"><span class="toc-number">3.6.</span> <span class="toc-text">6ã€å¤„ç†æœåŠ¡å™¨ç«¯å“åº”çš„æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7ã€å…¼å®¹æ–¹æ¡ˆ"><span class="toc-number">3.7.</span> <span class="toc-text">7ã€å…¼å®¹æ–¹æ¡ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8ã€è¡¥å……"><span class="toc-number">3.8.</span> <span class="toc-text">8ã€è¡¥å……</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å››ã€å°è£…"><span class="toc-number">4.</span> <span class="toc-text">å››ã€å°è£…</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1ã€AJAXè¯·æ±‚å°è£…"><span class="toc-number">4.1.</span> <span class="toc-text">1ã€AJAXè¯·æ±‚å°è£…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2ã€jQueryä¸­çš„Ajax"><span class="toc-number">4.2.</span> <span class="toc-text">2ã€jQueryä¸­çš„Ajax</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3ã€axios"><span class="toc-number">4.3.</span> <span class="toc-text">3ã€axios</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4ã€fetch"><span class="toc-number">5.</span> <span class="toc-text">4ã€fetch</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#äº”ã€è·¨åŸŸ"><span class="toc-number">6.</span> <span class="toc-text">äº”ã€è·¨åŸŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1ã€æ¦‚å¿µ"><span class="toc-number">6.1.</span> <span class="toc-text">1ã€æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2ã€è§£å†³æ–¹æ¡ˆ"><span class="toc-number">6.2.</span> <span class="toc-text">2ã€è§£å†³æ–¹æ¡ˆ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å…­ã€XMLHttpRequest2-0"><span class="toc-number">7.</span> <span class="toc-text">å…­ã€XMLHttpRequest2.0</span></a></li></ol>
            </div>
        </div>
      </div>
    
  </div>

  <article>
    <h2 id="ä¸€ã€æ¦‚è¿°"><a href="#ä¸€ã€æ¦‚è¿°" class="headerlink" title="ä¸€ã€æ¦‚è¿°"></a>ä¸€ã€æ¦‚è¿°</h2><blockquote>
<p>Webç¨‹åºçš„æœ€åˆçš„ç›®çš„å°±æ˜¯å°†ä¿¡æ¯(æ•°æ®)æ”¾åˆ°å…¬å…±çš„æœåŠ¡å™¨ï¼Œè®©æ‰€æœ‰çš„ç½‘ç»œç”¨æˆ·éƒ½å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®</p>
</blockquote>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815183452.png" alt="image-20200815183450778" class="lazyload"></p>
<p>åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼è®©æµè§ˆå™¨å‘å‡ºæœåŠ¡ç«¯çš„è¯·æ±‚ï¼Œè·å¾—æœåŠ¡ç«¯çš„æ•°æ®ï¼š</p>
<ul>
<li><p>åœ°å€æ è¾“å…¥åœ°å€ï¼Œå›è½¦ï¼Œåˆ·æ–°</p>
</li>
<li><p>ç‰¹å®šå…ƒç´ çš„hrefæˆ–srcå±æ€§</p>
</li>
<li><p>è¡¨å•æäº¤</p>
</li>
</ul>
<p>è¿™äº›æ–¹æ¡ˆéƒ½æ˜¯æˆ‘ä»¬æ— æ³•é€šè¿‡æˆ–è€…å¾ˆéš¾é€šè¿‡ä»£ç çš„æ–¹å¼è¿›è¡Œç¼–ç¨‹(å¯¹æœåŠ¡å™¨å‘å‡ºè¯·æ±‚å¹¶ä¸”æ¥æ”¶æœåŠ¡ç«¯è¿”å›çš„å“åº”)ï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥é€šè¿‡JavaScriptç›´æ¥å‘é€ç½‘ç»œè¯·æ±‚ï¼Œé‚£ä¹ˆwebçš„å¯èƒ½å°±ä¼šæ›´å¤šï¼Œéšä¹‹èƒ½å¤Ÿå®ç°çš„åŠŸèƒ½ä¹Ÿä¼šæ›´å¤šï¼Œè‡³å°‘ä¸å†æ˜¯â€œå•æœºæ¸¸æˆâ€ã€‚</p>
<p>1ã€AJAX(Asynchronous JavaScript and XML,å¼‚æ­¥çš„JSå’ŒXML)ï¼Œæœ€æ—©å‡ºç°åœ¨2005å¹´çš„Google Suggestï¼Œæ˜¯åœ¨æµè§ˆå™¨ç«¯è¿›è¡Œç½‘ç»œç¼–ç¨‹(å‘é€è¯·æ±‚ï¼Œæ¥æ”¶å“åº”)çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œå®ƒä½¿æˆ‘ä»¬å¯ä»¥<strong>é€šè¿‡JavaScriptç›´æ¥è·å–æœåŠ¡ç«¯æœ€æ–°çš„å†…å®¹è€Œä¸å¿…é‡æ–°åŠ è½½é¡µé¢</strong>ï¼Œè®©webæ›´èƒ½æ¥è¿‘æ¡Œé¢åº”ç”¨çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<p>è¯´ç™½äº†ï¼ŒAJAXå°±æ˜¯<strong>æµè§ˆå™¨æä¾›çš„ä¸€å¥—API</strong>ï¼Œå¯ä»¥é€šè¿‡JavaScriptè°ƒç”¨ï¼Œä»è€Œå®ç°ä»£ç æ§åˆ¶è¯·æ±‚ä¸å“åº”ï¼Œå®ç°ç½‘ç»œç¼–ç¨‹ã€‚(AJAXä¸æ˜¯æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ˜¯ä¸€ç§å°†ç°æœ‰æ ‡å‡†ç»„åˆåœ¨ä¸€èµ·ä½¿ç”¨çš„æ–°çš„æ–¹å¼)</p>
<blockquote>
<p>èƒ½åŠ›ä¸å¤ŸAPIå‡‘ã€‚</p>
</blockquote>
<blockquote>
<p>å¯¹xxxè¿›è¡Œç¼–ç¨‹æŒ‡çš„å°±æ˜¯ç”¨ä»£ç çš„æ–¹å¼æ“ä½œå®ƒ</p>
</blockquote>
<p>2ã€XML</p>
<p>å¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼Œè¢«è®¾è®¡ç”¨æ¥ä¼ è¾“å’Œå­˜å‚¨æ•°æ®ï¼Œå’ŒHTMLæœ‰ç‚¹åƒï¼Œä½†æ˜¯HTMLä¸­éƒ½æ˜¯é¢„å®šä¹‰æ ‡ç­¾ï¼Œè€ŒXMLä¸­æ²¡æœ‰é¢„å®šä¹‰æ ‡ç­¾ï¼Œå…¨éƒ½æ˜¯è‡ªå®šä¹‰æ ‡ç­¾ï¼Œç”¨æ¥è¡¨ç¤ºä¸€äº›æ•°æ®ã€‚</p>
<p>ç°åœ¨å·²ç»è¢«jsonå–ä»£äº†ã€‚</p>
<p>3ã€AJAXçš„ç‰¹ç‚¹</p>
<p>(1) ä¼˜ç‚¹</p>
<p>å¯ä»¥æ— éœ€åˆ·æ–°é¡µé¢è€Œä¸æœåŠ¡å™¨ç«¯è¿›è¡Œé€šä¿¡ã€‚</p>
<p>å…è®¸ä½ æ ¹æ®ç”¨æˆ·äº‹ä»¶æ¥æ›´æ–°éƒ¨åˆ†é¡µé¢å†…å®¹ã€‚</p>
<p>(2) ç¼ºç‚¹</p>
<p>æ²¡æœ‰æµè§ˆå†å²ï¼Œä¸èƒ½å›é€€</p>
<p>å­˜åœ¨è·¨åŸŸé—®é¢˜(åŒæº)</p>
<p>SEOä¸å‹å¥½</p>
<p>è¡¥å……ï¼šæ­å»ºç¯å¢ƒ</p>
<p><strong>ä½¿ç”¨Expressæ­å»ºåå°</strong></p>
<p><a href="https://www.expressjs.com.cn/" target="_blank" rel="noopener">Expressä¸­æ–‡ç½‘</a></p>
<p>1ã€å®‰è£…</p>
<p>éœ€è¦æœ‰nodeï¼Œæ²¡æœ‰çš„å¯ä»¥å…ˆ<a href="https://nodejs.org/en/" target="_blank" rel="noopener">ä¸‹è½½</a></p>
<p>è¿›å…¥ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè¾“å…¥å‘½ä»¤åˆ›å»ºnodeåº”ç”¨</p>
<pre><code class="bash">npm init --yes</code></pre>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200810090417637.png" alt="nodeåˆå§‹åŒ–å‘½ä»¤" class="lazyload"></p>
<p>æ¥ç€è¾“å…¥å‘½ä»¤ï¼Œå®‰è£…express</p>
<pre><code class="bash">npm install express</code></pre>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200810090617412.png" alt="expresså®‰è£…" class="lazyload"></p>
<p>2ã€åŸºæœ¬ä½¿ç”¨</p>
<p>(1) ç¼–å†™ä»£ç </p>
<pre><code class="javascript">// 1ã€å¼•å…¥express
const express = require(&#39;express&#39;)
const { response } = require(&#39;express&#39;)

// 2ã€åˆ›å»ºåº”ç”¨å¯¹è±¡
const app = express()

// 3ã€åˆ›å»ºè·¯ç”±è§„åˆ™ 
// requesæ˜¯å¯¹è¯·æ±‚æŠ¥æ–‡çš„å°è£…ï¼›responseæ˜¯å¯¹å“åº”æŠ¥æ–‡çš„å°è£…
app.get(&#39;/&#39;, (request, response) =&gt; { // å‰ç«¯è®¿é—®http://localhost:8000/
  // è®¾ç½®å“åº”
  response.send(&#39;Hello Express&#39;)
})

// 4ã€ç›‘å¬ç«¯å£å¯åŠ¨æœåŠ¡
app.listen(8000, () =&gt; {
  console.log(&#39;æœåŠ¡å·²ç»å¯åŠ¨ï¼Œ8000ç«¯å£ç›‘å¬ä¸­ï¼Œè¯·è®¿é—®http://localhost:8000/&#39;)
})</code></pre>
<p>(2) è¿è¡Œä»£ç </p>
<p>åœ¨è¯¥ç›®å½•ä¸‹è¾“å…¥å‘½ä»¤</p>
<pre><code class="bash">node æ–‡ä»¶å.js</code></pre>
<p>eg:</p>
<pre><code class="bash">node expressTest.js</code></pre>
<p>æ¥ç€è®¿é—®åœ°å€<a href="http://localhost:8000/å³å¯" target="_blank" rel="noopener">http://localhost:8000/å³å¯</a></p>
<p>3ã€å‡†å¤‡æœåŠ¡ç«¯ä»£ç </p>
<p><code>server.js</code></p>
<pre><code class="javascript">const express = require(&#39;express&#39;)
const { response } = require(&#39;express&#39;)
const app = express()
// è¿™é‡Œè®¾ç½®ä¸ºgetåˆ™è¯·æ±‚æ–¹å¼ä¸ºGETã€&#39;/server&#39;åˆ™è¯·æ±‚urléœ€è¦åŠ ä¸Šè¿™ä¸ª
app.get(&#39;/server&#39;, (request, response) =&gt; {
  // è®¾ç½®å“åº”å¤´
  response.setHeader(&#39;Access-Control-Allow-origin&#39;,&#39;*&#39;) // è®¾ç½®å…è®¸è·¨åŸŸ
  // è®¾ç½®å“åº”ä½“
  response.send(&#39;Hello AJAX&#39;)
})
// åœ¨è¿™é‡Œæ¥ç€åŠ ä¸Šæ¥å£
app.listen(8000, () =&gt; {
  console.log(&#39;æœåŠ¡å·²ç»å¯åŠ¨ï¼Œ8000ç«¯å£ç›‘å¬ä¸­ï¼Œè¯·è®¿é—®http://localhost:8000/&#39;)
})</code></pre>
<p>å…³é—­ä¸Šé¢é‚£ä¸ªï¼Œå°†è¿™ä¸ªå¯åŠ¨ï¼š</p>
<pre><code class="bash">node server.js</code></pre>
<p>reloadåŒ…â€”â€”nodemon</p>
<p>è‡ªåŠ¨æ£€æµ‹jsä»£ç å˜åŒ–ï¼ŒrestartæœåŠ¡</p>
<p>1ã€å®‰è£…</p>
<pre><code class="sh">npm install -g nodemon</code></pre>
<p>2ã€åˆ©ç”¨nodemonæ‰§è¡Œæ–‡ä»¶</p>
<pre><code class="sh">nodemon æ–‡ä»¶å.js</code></pre>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="sh">nodemon server.js</code></pre>
<h2 id="äºŒã€å¿«é€Ÿä¸Šæ‰‹"><a href="#äºŒã€å¿«é€Ÿä¸Šæ‰‹" class="headerlink" title="äºŒã€å¿«é€Ÿä¸Šæ‰‹"></a>äºŒã€å¿«é€Ÿä¸Šæ‰‹</h2><h3 id="1ã€AJAXåŸºç¡€"><a href="#1ã€AJAXåŸºç¡€" class="headerlink" title="1ã€AJAXåŸºç¡€"></a>1ã€AJAXåŸºç¡€</h3><p>(ä¸€ä¸ªæ„é€ å‡½æ•°ã€ä¸¤ä¸ªæ–¹æ³•ã€ä¸€ä¸ªäº‹ä»¶)</p>
<p>å‘é€è¯·æ±‚</p>
<pre><code class="html">&lt;style&gt;
#result{
    width:200px;
    height:100px;
    border:1px solid skyblue;
}
&lt;/style&gt;
&lt;button id=&quot;btn&quot;&gt;ç‚¹å‡»å‘é€è¯·æ±‚&lt;/button&gt;
&lt;div id=&quot;result&quot;&gt;&lt;/div&gt;
&lt;script&gt;
btn.onclick = function(){
  // æ¶‰åŠåˆ°AJAXæ“ä½œçš„é¡µé¢ä¸èƒ½ä½¿ç”¨æ–‡ä»¶åè®®è®¿é—®ï¼ˆæ–‡ä»¶çš„æ–¹å¼è®¿é—®ï¼‰
  // AJAXæ˜¯ä¸€å¥—APIï¼Œæ ¸å¿ƒæä¾›çš„ç±»å‹ï¼šXMLHttpRequest XML--&gt;JSON(ç°åœ¨ä½¿ç”¨çš„æ˜¯JSONæ ¼å¼çš„äº†)
  // 1ã€å®‰è£…æµè§ˆå™¨ï¼ˆç”¨æˆ·ä»£ç†ï¼‰â€”â€”åˆ›å»ºå¯¹è±¡
  var xhr = new XMLHttpRequest() // xhrå°±ç±»ä¼¼äºæµè§ˆå™¨çš„ä½œç”¨(å‘é€è¯·æ±‚æ¥æ”¶å“åº”)
  // 2ã€æ‰“å¼€æµè§ˆå™¨ è¾“å…¥ç½‘å€â€”â€”åˆå§‹åŒ– è®¾ç½®è¯·æ±‚æ–¹å¼å’Œurl
  xhr.open(&#39;GET&#39;, &#39;http://127.0.0.1:8000/server&#39;)  // è¿™ä¸€æ­¥åªæ˜¯åœ¨æ­æ¡¥é“ºè·¯
  // 3ã€æ•²å›è½¦é”® å¼€å§‹è¯·æ±‚â€”â€”å‘é€
  xhr.send()  // sendæ‰æ˜¯å¼€å§‹è¯·æ±‚
  /* ä¸Šé¢ä¸‰ä¸ªæ˜¯ajaxæ ¸å¿ƒä»£ç  */
}
&lt;/script&gt;</code></pre>
<p>æ¥æ”¶å“åº”</p>
<pre><code class="html">&lt;script&gt;
  var xhr = new XMLHttpRequest()
  xhr.open(&#39;GET&#39;, &#39;http://127.0.0.1:8000/server&#39;) // æ–¹å¼ï¼Œurl
  xhr.send()
  /* å› ä¸ºå“åº”éœ€è¦æ—¶é—´ï¼Œæ‰€ä»¥æ— æ³•é€šè¿‡è¿”å›å€¼çš„æ–¹å¼è¿”å›å“åº” */
  // var response = xhr.send()
  // console.log(response) // undefine

  // 4ã€ç­‰å¾…å“åº”â€”â€”äº‹ä»¶ç»‘å®š å¤„ç†æœåŠ¡ç«¯è¿”å›çš„ç»“æœ
  /* å¦‚æœéœ€è¦æ•è·çŠ¶æ€çš„å˜åŒ–ï¼Œéœ€è¦æ³¨æ„ä»£ç çš„æ‰§è¡Œé¡ºåºçš„é—®é¢˜(ä¸è¦å‡ºç°æ¥ä¸åŠçš„æƒ…å†µ)
  * å› ä¸ºå®¢æˆ·ç«¯æ°¸è¿œä¸çŸ¥é“æœåŠ¡ç«¯ä½•æ—¶æ‰èƒ½è¿”å›æˆ‘ä»¬éœ€è¦çš„å“åº”ï¼Œæ‰€ä»¥AJAX APIé‡‡ç”¨äº‹ä»¶çš„æœºåˆ¶(é€šçŸ¥çš„æ„Ÿè§‰)
  */
  xhr.onreadystatechange = function(){ // å»ºè®®äº‹ä»¶ä½¿ç”¨addEventListeneræ–¹å¼
    // è¿™ä¸ªäº‹ä»¶å¹¶ä¸æ˜¯åªåœ¨å“åº”æ—¶è§¦å‘ï¼ŒXHRçŠ¶æ€æ”¹å˜å°±è§¦å‘
    console.log(this.readyState)
    if(this.readyState!==4) return
    // æ‰€ä»¥ä¸‹é¢å°±æ˜¯ä¸º4çš„æƒ…å†µ
    // 5ã€çœ‹ç»“æœ
    console.log(this.responseText) // è·å–å“åº”å†…å®¹(å“åº”ä½“)
    result.innerHTML = xhr.response
  }
&lt;/script&gt;</code></pre>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815183735.png" alt="ajaxåŸºç¡€æ“ä½œ" class="lazyload"></p>
<h3 id="2ã€ç†è§£readyState"><a href="#2ã€ç†è§£readyState" class="headerlink" title="2ã€ç†è§£readyState"></a>2ã€ç†è§£readyState</h3><p><code>onreadystatechange</code>æ˜¯XHRçŠ¶æ€æ”¹å˜æ—¶è§¦å‘çš„</p>
<pre><code class="html">&lt;script&gt;
  var xhr = new XMLHttpRequest()
  console.log(xhr.readyState) // 0
  xhr.open(&#39;GET&#39;, &#39;./time.php&#39;)
  console.log(xhr.readyState) // 1
  xhr.send()
  // console.log(xhr.readyState) // 1 å–ä¸Šé¢é‚£ä¸ª
  xhr.addEventListener(&#39;readystatechange&#39;, function(){
    // if(this.readyState !== 4) return
    // console.log(this.responseText)
    console.log(this.readyState) // 2 3 4
  })
&lt;/script&gt;</code></pre>
<p>readyStateï¼š</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815183844.png" alt="readyStateä»£ç " class="lazyload"></p>
<p>new XMLHttpRequest â€“&gt; 0 åˆå§‹åŒ– <strong>è¯·æ±‚ä»£ç†å¯¹è±¡</strong></p>
<p>1â€“-&gt; openæ–¹æ³•å·²ç»è°ƒç”¨ï¼Œ<strong>å»ºç«‹</strong>ä¸€ä¸ªä¸æœåŠ¡ç«¯ç‰¹å®šç«¯å£çš„<strong>è¿æ¥</strong></p>
<p>2 â€“-&gt; å·²ç»<strong>æ¥æ”¶</strong>åˆ°äº†å“åº”æŠ¥æ–‡çš„<strong>å“åº”å¤´</strong> <code>console.log(this.getAllResponseHeaders())</code> å¯ä»¥æ‹¿åˆ°å“åº”å¤´ï¼Œæ‹¿ä¸åˆ°å“åº”ä½“</p>
<p>æ‹†åˆ†ï¼š<code>console.log(this.getAllResponseHeaders().splite(â€˜\nâ€™).splite(â€˜:â€™))</code></p>
<p>è·å–æŒ‡å®šé”®ï¼š<code>console.log(this.getAllResponseHeaders(â€˜dataâ€™))</code></p>
<p>3 â€“-&gt; <strong>æ­£åœ¨ä¸‹è½½å“åº”æŠ¥æ–‡çš„å“åº”ä½“</strong>ï¼Œå¯èƒ½å“åº”ä½“ä¸ºç©ºæˆ–ä¸å®Œæ•´</p>
<p>4 â€“-&gt; ä¸€åˆ‡OKï¼Œ<strong>æ•´ä¸ªå“åº”æŠ¥æ–‡å·²ç»ä¸‹è½½ä¸‹æ¥</strong>äº† <code>console.log(this.responseText)</code></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815183915.png" alt="readyState" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815183935.png" alt="image-20200815183934889" class="lazyload"></p>
<p>æ‰€ä»¥åº”è¯¥<strong>åœ¨readyStateçš„å€¼ä¸º4</strong>æ—¶ï¼Œæ‰å»å¤„ç†åç»­çš„é€»è¾‘</p>
<p>å¯ä»¥ç”¨<code>xhr.onload</code>æ›¿ä»£</p>
<pre><code class="html">&lt;script&gt;
  var xhr = new XMLHttpRequest()
  xhr.open(&#39;GET&#39;, &#39;time.php&#39;)
  xhr.send(null) // sendå¯ä»¥ä¼ è¯·æ±‚ä½“ï¼Œä¼ nullä»£è¡¨æ²¡æœ‰è¯·æ±‚ä½“
  xhr.onload = function (){ // åŠ è½½å®Œæˆ H5ä¸­æä¾›çš„XMLHttpRequest version 2.0å®šä¹‰çš„
    // ç›¸å½“äºreadyStateä¸º4ä¹‹åçš„
    console.log(this.responseText)
  }
&lt;/script&gt;</code></pre>
<p>ps: console.log(this) æ˜¾ç¤ºreadyStateæ˜¯2ã€3ã€4å¯å±•å¼€æ¥å…¨éƒ½æ˜¯4ï¼Œè¿™ä¸ªæ˜¯console.logçš„æœºåˆ¶é—®é¢˜ï¼Œå±•å¼€çš„æ—¶å€™åªä¼šæ˜¾ç¤ºæ­¤æ—¶çš„çŠ¶æ€</p>
<p>ä¾‹å¦‚ï¼š</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815184045.png" alt="logæœºåˆ¶æµ‹è¯•" class="lazyload"></p>
<p>åœ¨æµè§ˆå™¨ä¸Šçœ‹ï¼Œä¸å±•å¼€æ²¡é—®é¢˜æ˜¾ç¤º123ï¼Œå±•å¼€çš„ä¸€ç¬é—´éƒ½æ˜¯456</p>
<h3 id="3ã€AJAXéµå¾ªHTTPåè®®"><a href="#3ã€AJAXéµå¾ªHTTPåè®®" class="headerlink" title="3ã€AJAXéµå¾ªHTTPåè®®"></a>3ã€AJAXéµå¾ªHTTPåè®®</h3><p>HTTPåè®®(Hypertext Transport Protocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®)è¯¦ç»†è§„å®šäº†æµè§ˆå™¨å’Œä¸‡ç»´ç½‘æœåŠ¡å™¨ä¹‹é—´äº’ç›¸é€šä¿¡çš„è§„åˆ™ã€‚</p>
<p>æœ¬è´¨ä¸ŠXMLHttpRequestå°±æ˜¯JavaScriptåœ¨webå¹³å°ä¸­å‘é€HTTPè¯·æ±‚çš„æ‰‹æ®µï¼Œæ‰€ä»¥æˆ‘ä»¬å‘é€å‡ºå»çš„è¯·æ±‚ä»ç„¶æ˜¯HTTPè¯·æ±‚ï¼ŒåŒæ ·ç¬¦åˆHTTPçº¦å®šçš„æ ¼å¼</p>
<p>è¯·æ±‚æŠ¥æ–‡ï¼š</p>
<ul>
<li>è¯·æ±‚è¡Œ <code>POST /s?ie=utf-8 HTTP/1.1</code></li>
</ul>
<p>â€‹    <code>GET /s?ie=utf-8 HTTP/1.1</code></p>
<ul>
<li>è¯·æ±‚å¤´ <code>Host: atguigu.com</code></li>
</ul>
<p>â€‹    <code>Cookie: name=guigu</code></p>
<p>â€‹    <code>Content-Type: application/x-www-form-urlencoded</code></p>
<p>â€‹    <code>User-Agent: chrome 83</code></p>
<ul>
<li><p>ç©ºè¡Œ(å¿…é¡»å¾—æœ‰)</p>
</li>
<li><p>è¯·æ±‚ä½“ (GETè¯·æ±‚è¿™é‡Œä¸ºç©ºï¼ŒPOSTå¯ä¸ä¸ºç©º) <code>username=admin&amp;password=admin</code></p>
</li>
</ul>
<p>å“åº”æŠ¥æ–‡ï¼š</p>
<ul>
<li>è¡Œ  <code>HTTP/1.1 200 OK</code></li>
</ul>
<p>â€‹       404</p>
<p>â€‹       403</p>
<p>â€‹       401</p>
<p>â€‹       500</p>
<ul>
<li><p>å¤´  <code>Content-Type: text/html;charset=utf-8</code></p>
<p> <code>Content-length: 2048</code></p>
<p> <code>Content-encoding: gzip</code></p>
</li>
<li><p>ç©ºè¡Œ </p>
</li>
<li><p>ä½“  </p>
</li>
</ul>
<pre><code>&lt;html&gt;
  &lt;head&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;wallleap&lt;/h1&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815184354.png" alt="HTTPå“åº”æŠ¥æ–‡ä¿¡æ¯" class="lazyload"></p>
<pre><code class="html">&lt;script&gt;
  // 1ã€åˆ›å»ºå¯¹è±¡
  var xhr = new XMLHttpRequest()
  // 2ã€åˆå§‹åŒ– è®¾ç½®è¯·æ±‚æ–¹æ³•å’Œurl
xhr.open(&#39;POST&#39;, &#39;add.php&#39;) // è®¾ç½®è¯·æ±‚è¡Œ
  xhr.setRequestHeader(&#39;Foo&#39;, &#39;Bar&#39;) // è®¾ç½®ä¸€ä¸ªè¯·æ±‚å¤´
  // ä¸€æ—¦è¯·æ±‚ä½“æ˜¯urlencodedæ ¼å¼çš„å†…å®¹ï¼Œä¸€å®šè¦è®¾ç½®è¯·æ±‚å¤´ä¸­çš„Content-Typeä¸ºä¸‹é¢è¿™ä¸ª
  xhr.setRequestHeader(&#39;Content-Type&#39;, &#39;application/x-www-form-urlencoded&#39;) // è®¾ç½®ç¬¬äºŒè¯·æ±‚å¤´
  xhr.send(&#39;key1=value1&amp;key2=value2&#39;) // ä»¥urlencodedæ ¼å¼è®¾ç½®è¯·æ±‚ä½“
  // xhr.send(&#39;{&quot;foo&quot;: &quot;123&quot;}&#39;) // ä»¥jsonæ ¼å¼è®¾ç½®è¯·æ±‚ä½“ï¼Œä¸Šé¢è®¾ç½®application/json
  xhr.onload = function (){
    // å“åº”è¡Œ
    console.log(this.status) // è·å–å“åº”çŠ¶æ€ç 
    console.log(this.statusText) // è·å–å“åº”çŠ¶æ€æè¿°
    // è·å–å“åº”å¤´ä¿¡æ¯
    console.log(this.getResponseHeader(&#39;Content-Type&#39;)) // æŒ‡å®šå“åº”å¤´
    console.log(this.getAllResponseHeaders()) // å…¨éƒ¨å“åº”å¤´
    // è·å–å“åº”ä½“
    console.log(this.responseText) // æ–‡æœ¬å½¢å¼
    console.log(this.responseXML) // XMLå½¢å¼ï¼Œäº†è§£å³å¯
  }
&lt;/script&gt;</code></pre>
<p>è¡¥å……ï¼š</p>
<pre><code class="javascript">xhr.addEventListener(&#39;readystatechange&#39;, function(){
    if(this.readyState === 4 &amp;&amp; this.status === 200){
      console.log(this)
    }
})</code></pre>
<p>å¯èƒ½æœ‰çš„äººä¼šåŒæ—¶åˆ¤æ–­çŠ¶æ€ç 200ï¼Œäº‹å®ä¸Šæ²¡æœ‰å¿…è¦ï¼ŒçŠ¶æ€ç 404ä¹Ÿéœ€è¦å¤„ç†,å¯ä»¥åˆ°é‡Œé¢åµŒå¥—ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="javascript">xhr.onreadystatechange=function(){
  if(this.readyState === 4){
    if(this.status &gt;= 200  &amp;&amp; xhr.status &lt; 300){
      // å¤„ç†ç»“æœ
    }else{
      ...
    }
  }
})</code></pre>
<p>Chromeæ‰“å¼€å¼€å‘è€…æ¨¡å¼</p>
<p>ç‚¹å‡»Networkèƒ½å¤Ÿçœ‹åˆ°ä¼ è¾“çš„æ–‡ä»¶</p>
<p>ç‚¹å‡»XHRæŸ¥çœ‹</p>
<p>Request Headersâ€”â€”è¯·æ±‚å¤´</p>
<p>ç‚¹å‡»view sourceå¯ä»¥çœ‹åˆ°è¯·æ±‚è¡Œ</p>
<p>Response Headerâ€”â€”å“åº”å¤´</p>
<p>ç‚¹å‡»view sourceå¯ä»¥çœ‹åˆ°å“åº”è¡Œ</p>
<p>Responseâ€”â€”å“åº”ä½“</p>
<p>Previewâ€”â€”é¢„è§ˆï¼Œå¯¹å“åº”ä½“è§£æä¹‹åçš„é¡µé¢</p>
<h2 id="ä¸‰ã€å…·ä½“ç”¨æ³•"><a href="#ä¸‰ã€å…·ä½“ç”¨æ³•" class="headerlink" title="ä¸‰ã€å…·ä½“ç”¨æ³•"></a>ä¸‰ã€å…·ä½“ç”¨æ³•</h2><h3 id="1ã€æ•°æ®æ¥å£çš„æ¦‚å¿µ"><a href="#1ã€æ•°æ®æ¥å£çš„æ¦‚å¿µ" class="headerlink" title="1ã€æ•°æ®æ¥å£çš„æ¦‚å¿µ"></a>1ã€æ•°æ®æ¥å£çš„æ¦‚å¿µ</h3><p>æœåŠ¡å™¨ç«¯è¿”å›çš„å“åº”å°±æ˜¯ä¸€ä¸ªJSONå†…å®¹ï¼ˆè¿”å›çš„å°±æ˜¯æ•°æ®ï¼‰</p>
<p>å¯¹äºè¿”å›æ•°æ®çš„åœ°å€ä¸€èˆ¬æˆ‘ä»¬ç§°ä¹‹ä¸ºæ¥å£ï¼ˆå½¢å¼ä¸Šæ˜¯webå½¢å¼ï¼‰</p>
<p><a href="http://api.douban.com/v2/movie/top250" target="_blank" rel="noopener">http://api.douban.com/v2/movie/top250</a></p>
<p>æä¾›ä¸€å®šçš„èƒ½åŠ›ï¼Œæœ‰è¾“å…¥æœ‰è¾“å‡ºå°±å¯ä»¥ç§°ä¸ºæ¥å£</p>
<h3 id="2ã€AJAXå‘é€GETè¯·æ±‚å¹¶ä¼ é€’å‚æ•°"><a href="#2ã€AJAXå‘é€GETè¯·æ±‚å¹¶ä¼ é€’å‚æ•°" class="headerlink" title="2ã€AJAXå‘é€GETè¯·æ±‚å¹¶ä¼ é€’å‚æ•°"></a>2ã€AJAXå‘é€GETè¯·æ±‚å¹¶ä¼ é€’å‚æ•°</h3><pre><code class="html">&lt;script&gt;
  var xhr = new XMLHttpRequest()
  // GETè¯·æ±‚ä¼ é€’å‚æ•°é€šå¸¸ä½¿ç”¨URLä¸­çš„é—®å·ä¼ é€’æ•°æ®
  xhr.open(&#39;GET&#39;, &#39;http://127.0.0.1:8000/server?a=100&amp;b=200&amp;c=300&#39;)
  // ä¸€èˆ¬åœ¨GETè¯·æ±‚æ—¶æ— éœ€è®¾ç½®å“åº”ä½“ï¼Œå¯ä»¥ä¼ nullæˆ–è€…å¹²è„†ä¸ä¼ 
  xhr.send(null)
  xhr.onreadystatechange = function (){
    if(this.readyState !== 4) return
    console.log(this.responseText)
  }
&lt;/script&gt;
&lt;!-- ä¸€èˆ¬æƒ…å†µä¸‹URLä¼ é€’çš„éƒ½æ˜¯å‚æ•°æ€§è´¨çš„æ•°æ®ï¼Œè€ŒPOSTä¸€èˆ¬éƒ½æ˜¯ä¸šåŠ¡æ•°æ® --&gt;</code></pre>
<p>ä¾‹å­ï¼šå°†å¾—åˆ°çš„å››ä¸ªç”¨æˆ·åç§°{}æ”¾åˆ°ul&gt;liä¸­ï¼Œç‚¹å‡»lièƒ½å¤Ÿè·å–åˆ°è¯¥ç”¨æˆ·çš„å¹´é¾„</p>
<pre><code class="html">&lt;ul id=&quot;list&quot;&gt;&lt;/ul&gt;
&lt;script&gt;
  var listElement = document.getElementById(&#39;list&#39;)
  /* å‘é€è¯·æ±‚è·å–åˆ°åˆ—è¡¨æ•°æ®ï¼Œå‘ˆç°åœ¨é¡µé¢ä¸Š */
  var xhr = new XMLHttpRequest()
  xhr.open(&#39;POST&#39;, &#39;user.php?id=2&#39;)
  xhr.send(null)
  xhr.onreadystatechange = function (){
    if(this.readyState !== 4) return
    var data = JSON.parse(this.responseText)
    // console.log(data)
    for(var i = 0; i &lt; data.length; i++){
      // console.log(data[i])
      var liElement = document.createElement(&#39;li&#39;)
      liElement.innerHTML = data[i].name
      liElement.id = data[i].id
      listElement.appendChild(liElement)
      /* ç»™æ¯ä¸€ä¸ªliæ³¨å†Œç‚¹å‡»äº‹ä»¶ */
      // ç”±äºliæ˜¯åŠ¨æ€åˆ›å»ºçš„ï¼Œå› æ­¤éœ€è¦ç§»åˆ°åˆ›å»ºliçš„æ—¶å€™
      listElement.addEventListener(&#39;click&#39;, function (){
          // TODO: é€šè¿‡AJAXæ“ä½œè·å–æœåŠ¡ç«¯å¯¹åº”æ•°æ®çš„ä¿¡æ¯
          // è·å–å½“å‰è¢«ç‚¹å‡»å…ƒç´ å¯¹åº”æ•°æ®çš„id
          // console.log(this.id)
          var xhr1 = new XMLHttpRequest()
          xhr1.open(&#39;GET&#39;, &#39;users.php?id=&#39; + this.id)
          xhr1.send()
          xhr1.onreadystatechange = function (){
            if(this.readyState !== 4) return
            var obj = JSON.parse(this.responseText)
            alert(obj.age)
          }
      })
    }
  }
&lt;/script&gt;</code></pre>
<h3 id="3ã€POSTè¯·æ±‚"><a href="#3ã€POSTè¯·æ±‚" class="headerlink" title="3ã€POSTè¯·æ±‚"></a>3ã€POSTè¯·æ±‚</h3><p>POSTè¯·æ±‚è¿‡ç¨‹ä¸­ï¼Œéƒ½æ˜¯é‡‡ç”¨è¯·æ±‚ä½“æ‰¿è½½éœ€è¦æäº¤çš„æ•°æ®</p>
<pre><code class="javascript">// 1.åˆ›å»ºå¯¹è±¡
const xhr = new XMLHttpRequest()
// 2.åˆå§‹åŒ– è®¾ç½®ç±»å‹ä¸URL(opençš„ç¬¬ä¸€ä¸ªå‚æ•°çš„ä½œç”¨å°±æ˜¯è®¾ç½®è¯·æ±‚çš„method)
xhr.open(&#39;POST&#39;,&#39;http://127.0.0.1:8000/server&#39;)
// è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯
xhr.setRequestHeader(&#39;Content-Type&#39;,&#39;application/x-www-form-urlencoded&#39;) // è®¾ç½®è¯·æ±‚å¤´ä¸­çš„Content-Typeä¸ºapplication/x-www-form-urlencodedâ€”â€”æ ‡è¯†è¿™æ¬¡è¯·æ±‚å¾—è¯·æ±‚ä½“æ ¼å¼ä¸ºurlencodedä»¥ä¾¿äºæœåŠ¡ç«¯æ¥æ”¶æ•°æ®
// xhr.setRequestHeader(&#39;name&#39;,&#39;wallleap&#39;) // ä¹Ÿå¯ä»¥è‡ªå®šä¹‰
// 3.å‘é€ POSTæ–¹å¼éœ€è¦æäº¤åˆ°æœåŠ¡ç«¯çš„æ•°æ®å¯ä»¥é€šè¿‡sendæ–¹æ³•çš„å‚æ•°ä¼ é€’ï¼Œæ ¼å¼ï¼škey1=value1&amp;key2=value2
xhr.send(&quot;key1=value1&amp;key2=value2&quot;)
// xhr.send(&quot;key1:value1&amp;key2:value2&quot;)
// xhr.send(&quot;value1&quot;)  // ---&gt;å¯ä»¥éšæ„å†™ï¼Œä½†æ˜¯éœ€è¦æŒ‰æ ¼å¼ï¼Œæ–¹ä¾¿åå°å¤„ç†
// 4.äº‹ä»¶ç»‘å®š
xhr.onreadystatechange = function(){
  // åˆ¤æ–­
  if(xhr.readyState===4){
    if(xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300){
      // å¤„ç†æœåŠ¡ç«¯è¿”å›çš„ç»“æœ
      result.innerHTML = xhr.response
    }
  }
}</code></pre>
<p>ç”±äº<code>server.js</code>ä¸­åªè®¾ç½®äº†getçš„å…è®¸è·¨åŸŸï¼Œå› æ­¤éœ€è¦åœ¨æ–‡ä»¶ä¸­åŠ å…¥å…è®¸postè·¨åŸŸçš„ä»£ç </p>
<pre><code class="javascript">// app.get(&#39;/server&#39;, (request, response) =&gt; {
app.post(&#39;/server&#39;, (request, response) =&gt; {
  // è®¾ç½®å“åº”å¤´  è®¾ç½®å…è®¸è·¨åŸŸ
  response.setHeader(&#39;Access-Control-Allow-Origin&#39;, &#39;*&#39;);
  // è®¾ç½®å…è®¸æ‰€æœ‰å¤´ä¿¡æ¯ï¼Œå°±æ¯”å¦‚ä¸Šé¢è®¾ç½®çš„è‡ªå®šä¹‰å“åº”å¤´ä¼šæŠ¥é”™ï¼Œå°±éœ€è¦åŠ ä¸Šè¿™ä¸ª
  // response.setHeader(&#39;Access-Control-Allow-Headers&#39;, &#39;*&#39;);
  // è®¾ç½®å“åº”ä½“
  response.send(&#39;HELLO AJAX POST&#39;);
});</code></pre>
<p>å¯ä»¥æ”¹ä¸ºall</p>
<pre><code class="javascript">//å¯ä»¥æ¥æ”¶ä»»æ„ç±»å‹çš„è¯·æ±‚(get/post/options/...)
app.all(&#39;/server&#39;, (request, response) =&gt; {
  //è®¾ç½®å“åº”å¤´  è®¾ç½®å…è®¸è·¨åŸŸ
  response.setHeader(&#39;Access-Control-Allow-Origin&#39;, &#39;*&#39;);
  //å“åº”å¤´
  response.setHeader(&#39;Access-Control-Allow-Headers&#39;, &#39;*&#39;);
  //è®¾ç½®å“åº”ä½“
  response.send(&#39;HELLO AJAX POST&#39;);
});</code></pre>
<p>æµ‹è¯•</p>
<pre><code class="html">&lt;style&gt;
#result{
  width:200px;
  height:100px;
  border:solid 1px #903;
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id=&quot;result&quot;&gt;&lt;/div&gt;
&lt;script&gt;
  //è·å–å…ƒç´ å¯¹è±¡
  const result = document.getElementById(&quot;result&quot;);
  //ç»‘å®šäº‹ä»¶
  result.addEventListener(&quot;mouseover&quot;, function(){
    //1. åˆ›å»ºå¯¹è±¡
    const xhr = new XMLHttpRequest();
    //2. åˆå§‹åŒ– è®¾ç½®ç±»å‹ä¸ URL
    xhr.open(&#39;POST&#39;, &#39;http://127.0.0.1:8000/server&#39;);
    //è®¾ç½®è¯·æ±‚å¤´
    xhr.setRequestHeader(&#39;Content-Type&#39;,&#39;application/x-www-form-urlencoded&#39;);
    xhr.setRequestHeader(&#39;name&#39;,&#39;wallleap&#39;);
    //3. å‘é€
    xhr.send(&#39;a=100&amp;b=200&amp;c=300&#39;);
    // xhr.send(&#39;a:100&amp;b:200&amp;c:300&#39;);
    // xhr.send(&#39;1233211234567&#39;);
    //4. äº‹ä»¶ç»‘å®š
    xhr.onreadystatechange = function(){
      //åˆ¤æ–­
      if(xhr.readyState === 4){
        if(xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300){
          //å¤„ç†æœåŠ¡ç«¯è¿”å›çš„ç»“æœ
          result.innerHTML = xhr.response;
        }
      }
    }
  });
&lt;/script&gt;</code></pre>
<p>ä¾‹å­ï¼šç‚¹å‡»ç™»å½•æŒ‰é’®ä¸åˆ·æ–°é¡µé¢å°†æ•°æ®ä¼ åˆ°åå°</p>
<pre><code class="html">&lt;style&gt;
.loading{
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #555;
  text-align: center;
  padding-top: 200px;
  opacity: .5;
}
.loading::after{
  content: &#39;åŠ è½½ä¸­â€¦â€¦&#39;;
  font-size: 60px;
  color: #fff;
}
&lt;/style&gt;
&lt;div class=&quot;loading&quot;&gt;&lt;/div&gt;
&lt;table border=&quot;1&quot;&gt;
  &lt;tr&gt;
    &lt;td&gt;ç”¨æˆ·å&lt;/td&gt;
    &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;&quot; id=&quot;username&quot;&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;å¯†ç &lt;/td&gt;
    &lt;td&gt;&lt;input type=&quot;password&quot; name=&quot;&quot; id=&quot;password&quot;&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;&lt;/td&gt;
    &lt;td&gt;&lt;button id=&quot;btn&quot;&gt;ç™»å½•&lt;/button&gt;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;script&gt;
  // æ‰¾ä¸€ä¸ªåˆé€‚çš„æ—¶æœºï¼Œåšä¸€ä»¶åˆé€‚çš„äº‹æƒ…(æ—¶é—´ã€å†…å®¹)
  // 1ã€è·å–ç•Œé¢ä¸Šçš„å…ƒç´  value
  var textUsername = document.getElementById(&#39;username&#39;)
  var textPassword = document.getElementById(&#39;password&#39;)
  var btn = document.getElementById(&#39;btn&#39;)
  var loading = document.querySelector(&#39;.loading&#39;)
  btn.onclick = function (){
    loading.style.display = &#39;block&#39;
    var username = textUsername.value
    var password = textPassword.value
    // 2ã€é€šè¿‡XHRå‘é€ä¸€ä¸ªPOSTè¯·æ±‚
    var xhr = new XMLHttpRequest
    xhr.open(&#39;POST&#39;, &#39;login.php&#39;)
    // ä¸€å®šæ³¨æ„ï¼šå¦‚æœè¯·æ±‚ä½“æ˜¯urlencodedæ ¼å¼ï¼Œå¿…é¡»è®¾ç½®è¿™ä¸ªè¯·æ±‚å¤´ï¼
    xhr.setRequestHeader(&#39;Content-Type&#39;, &#39;application/x-www-form-urlencoded&#39;)
    // xhr.send(&#39;username=&#39; + username + &#39;&amp;password=&#39; + password)
    xhr.send(`username=${username}&amp;password=${password}`)
    // 3ã€æ ¹æ®æœåŠ¡ç«¯çš„åé¦ˆï¼Œä½œå‡ºç•Œé¢æç¤º
    xhr.onreadystatechange = function (){
      if(this.readyState !== 4) return
      console.log(this.responseText)
      loading.style.display = &#39;none&#39;
    }
  }
&lt;/script&gt;</code></pre>
<h3 id="4ã€åŒæ­¥å’Œå¼‚æ­¥"><a href="#4ã€åŒæ­¥å’Œå¼‚æ­¥" class="headerlink" title="4ã€åŒæ­¥å’Œå¼‚æ­¥"></a>4ã€åŒæ­¥å’Œå¼‚æ­¥</h3><p>ç”Ÿæ´»ä¸­ï¼š</p>
<p>åŒæ­¥ï¼šä¸€ä¸ªäººåœ¨åŒä¸€ä¸ªæ—¶åˆ»åªèƒ½åšä¸€ä»¶äº‹æƒ…ï¼Œåœ¨æ‰§è¡Œä¸€äº›è€—æ—¶çš„æ“ä½œ(ä¸éœ€è¦çœ‹ç®¡)ä¸å»åšåˆ«çš„äº‹æƒ…ï¼Œåªæ˜¯ç­‰å¾…</p>
<p>å¼‚æ­¥ï¼šåœ¨æ‰§è¡Œä¸€äº›è€—æ—¶çš„æ“ä½œ(ä¸éœ€è¦çœ‹ç®¡)å»åšåˆ«çš„äº‹ï¼Œè€Œä¸æ˜¯ç­‰å¾…</p>
<p>xhr.open()ç¬¬ä¸‰ä¸ªå‚æ•°(async)è¦æ±‚ä¼ å…¥çš„æ˜¯ä¸€ä¸ªboolå€¼ï¼Œå…¶ä½œç”¨å°±æ˜¯è®¾ç½®æ­¤æ¬¡è¯·æ±‚æ˜¯å¦é‡‡ç”¨å¼‚æ­¥æ–¹å¼æ‰§è¡Œï¼Œé»˜è®¤ä¸ºtrueï¼Œå¦‚æœéœ€è¦åŒæ­¥æ‰§è¡Œå¯ä»¥é€šè¿‡ä¼ é€’falseå®ç°</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815184832.png" alt="image-20200815184831019" class="lazyload"></p>
<p><code>console.time(â€˜æ ‡è¯†â€™)</code> å¯åŠ¨ä¸€ä¸ªç§’è¡¨</p>
<p>ä¸­é—´å†™ä»£ç </p>
<p><code>console.timeEnd(â€˜æ ‡è¯†â€™)</code> ç»“æŸè¿™ä¸ªç§’è¡¨</p>
<p>è¿™æ ·å°±èƒ½çŸ¥é“ç”¨äº†å¤šé•¿æ—¶é—´(æ ‡è¯†åç§°å¾—ç›¸åŒ)</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815184906.png" alt="image-20200815184905369" class="lazyload"></p>
<p>å¦‚æœé‡‡ç”¨åŒæ­¥æ–¹å¼æ‰§è¡Œï¼Œåˆ™ä»£ç ä¼šå¡æ­»åœ¨xhr.send()è¿™ä¸€æ­¥</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815184921.png" alt="image-20200815184920339" class="lazyload"></p>
<p>sendæ–¹æ³•ä¼šä¸ä¼šå‡ºç°ç­‰å¾…æƒ…å†µ(åŒºåˆ†åŒå¼‚æ­¥)</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815184939.png" alt="image-20200815184938765" class="lazyload"></p>
<p>çŸ¥é“åŒæ­¥æ¨¡å¼å³å¯(å·²è¢«é—å¼ƒ)</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815184956.png" alt="image-20200815184955646" class="lazyload"></p>
<p>åŒæ­¥æ¨¡å¼æ³¨å†Œæ—¶é—´æ—¶æœºé—®é¢˜</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185018.png" alt="image-20200815185017871" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185029.png" alt="image-20200815185028276" class="lazyload"></p>
<h3 id="5ã€å“åº”æ•°æ®æ ¼å¼"><a href="#5ã€å“åº”æ•°æ®æ ¼å¼" class="headerlink" title="5ã€å“åº”æ•°æ®æ ¼å¼"></a>5ã€å“åº”æ•°æ®æ ¼å¼</h3><p>å¦‚æœå¸Œæœ›æœåŠ¡å™¨è¿”å›ä¸€ä¸ªå¤æ‚æ•°æ®ï¼Œè¯¥å¦‚ä½•å¤„ç†ï¼š</p>
<p> æœåŠ¡å™¨å‘å‡ºä½•ç§æ ¼å¼çš„æ•°æ®ï¼Œè¿™ä¸ªæ ¼å¼å¦‚ä½•åœ¨å®¢æˆ·ç«¯ç”¨JavaScriptè§£æ</p>
<p>5.1 XML</p>
<p>ä¸€ç§æ•°æ®æè¿°æ‰‹æ®µ</p>
<p>è€æ‰ç‰™çš„ä¸œè¥¿ï¼Œç°åœ¨é¡¹ç›®ä¸­åŸºæœ¬ä¸ä½¿ç”¨</p>
<p>æ·˜æ±°çš„åŸå› ï¼šæ•°æ®å†—ä½™å¤ªå¤š</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185058.png" alt="image-20200815185057257" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185108.png" alt="image-20200815185106691" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185115.png" alt="image-20200815185114823" class="lazyload"></p>
<p><strong>5.2 JSON</strong></p>
<p>ä¹Ÿæ˜¯ä¸€ç§æ•°æ®æè¿°æ‰‹æ®µï¼Œç±»ä¼¼äºJavaScriptå­—é¢é‡æ–¹å¼</p>
<p>æœåŠ¡ç«¯é‡‡ç”¨JSONæ ¼å¼è¿”å›æ•°æ®ï¼Œå®¢æˆ·ç«¯æŒ‰ç…§JSONæ ¼å¼è§£ææ•°æ®</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185141.png" alt="image-20200815185140660" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185148.png" alt="image-20200815185147671" class="lazyload"></p>
<p>æ¥æµ‹è¯•ä¸€ä¸‹jsonçš„</p>
<p><code>server.js</code>ä¸­æ·»åŠ </p>
<pre><code class="javascript">//JSON å“åº”
app.all(&#39;/json-server&#39;, (request, response) =&gt; {
  //è®¾ç½®å“åº”å¤´  è®¾ç½®å…è®¸è·¨åŸŸ
  response.setHeader(&#39;Access-Control-Allow-Origin&#39;, &#39;*&#39;);
  //å“åº”å¤´
  response.setHeader(&#39;Access-Control-Allow-Headers&#39;, &#39;*&#39;);
  //å“åº”ä¸€ä¸ªæ•°æ®
  const data = {
    name: &#39;wallleap&#39;
  };
  //å¯¹å¯¹è±¡è¿›è¡Œå­—ç¬¦ä¸²è½¬æ¢
  let str = JSON.stringify(data);
  //è®¾ç½®å“åº”ä½“
  response.send(str);
});</code></pre>
<p>æµ‹è¯•</p>
<pre><code class="html">&lt;style&gt;
  #result{
    width:200px;
    height:100px;
    border:solid 1px #89b;
  }
&lt;/style&gt;
&lt;div id=&quot;result&quot;&gt;&lt;/div&gt;
&lt;script&gt;
  //ç»‘å®šé”®ç›˜æŒ‰ä¸‹äº‹ä»¶
  window.onkeydown = function(){
    //å‘é€è¯·æ±‚
    const xhr = new XMLHttpRequest();
    //è®¾ç½®å“åº”ä½“æ•°æ®çš„ç±»å‹
    xhr.responseType = &#39;json&#39;; // è‡ªåŠ¨è½¬æ¢
    //åˆå§‹åŒ–
    xhr.open(&#39;GET&#39;,&#39;http://127.0.0.1:8000/json-server&#39;);
    //å‘é€
    xhr.send();
    //äº‹ä»¶ç»‘å®š
    xhr.onreadystatechange = function(){
      if(xhr.readyState === 4){
        if(xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300){
          // console.log(xhr.response);
          // result.innerHTML = xhr.response;
          // 1. æ‰‹åŠ¨å¯¹æ•°æ®è½¬åŒ–
          // let data = JSON.parse(xhr.response);
          // console.log(data);
          // result.innerHTML = data.name;
          // 2. è‡ªåŠ¨è½¬æ¢
          console.log(xhr.response);
          result.innerHTML = xhr.response.name;
        }
      }
    }
  }
&lt;/script&gt;</code></pre>
<p>æ³¨æ„ï¼š</p>
<p>ä¸è®ºæ˜¯JSONï¼Œè¿˜æ˜¯XMLï¼Œåªæ˜¯åœ¨AJAXè¯·æ±‚è¿‡ç¨‹ä¸­ç”¨åˆ°ï¼Œå¹¶ä¸ä»£è¡¨å®ƒä»¬ä¹‹é—´æœ‰å¿…ç„¶çš„è”ç³»ï¼Œå®ƒä»¬åªæ˜¯æ•°æ®åè®®ç½¢äº†</p>
<p>ä¸ç®¡æœåŠ¡å™¨ä½¿ç”¨XMLè¿˜æ˜¯JSONæœ¬è´¨ä¸Šéƒ½æ˜¯å°†æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯</p>
<p>æœåŠ¡ç«¯åº”è¯¥è®¾ç½®ä¸€ä¸ªåˆç†çš„Content-Type</p>
<h3 id="6ã€å¤„ç†æœåŠ¡å™¨ç«¯å“åº”çš„æ•°æ®"><a href="#6ã€å¤„ç†æœåŠ¡å™¨ç«¯å“åº”çš„æ•°æ®" class="headerlink" title="6ã€å¤„ç†æœåŠ¡å™¨ç«¯å“åº”çš„æ•°æ®"></a>6ã€å¤„ç†æœåŠ¡å™¨ç«¯å“åº”çš„æ•°æ®</h3><p>åŠ¨æ€æ¸²æŸ“æ•°æ®åˆ°è¡¨æ ¼ä¸­</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185218.png" alt="image-20200815185217284" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185226.png" alt="image-20200815185225225" class="lazyload"></p>
<p>ç°åœ¨ä¸€èˆ¬éƒ½ä¸ä¼šè¿™æ ·æ“ä½œï¼Œå¤ªç¹çäº†</p>
<p>æ¨¡æ¿å¼•æ“</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185252.png" alt="image-20200815185251189" class="lazyload"></p>
<p>å¸¸è§æ¨¡æ¿å¼•æ“åˆ—è¡¨ï¼š<a href="https://github.com/tj/consolidate.js#supported-template-engines" target="_blank" rel="noopener">https://github.com/tj/consolidate.js#supported-template-engines</a></p>
<p>artTemplateï¼š <a href="https://aui.github.io/art-template" target="_blank" rel="noopener">https://aui.github.io/art-template</a></p>
<p>æ¨¡æ¿å¼•æ“å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªAPIï¼Œæ¨¡æ¿å¼•æ“æœ‰å¾ˆå¤šç§ï¼Œä½¿ç”¨æ–¹å¼å¤§åŒå°å¼‚ï¼Œç›®çš„ä¸ºäº†å¯ä»¥æ›´å®¹æ˜“åœ°å°†æ•°æ®æ¸²æŸ“åˆ°HTMLä¸­</p>
<pre><code class="html">&lt;table id=&quot;comment&quot; border=&quot;1&quot;&gt;&lt;/table&gt;
&lt;!-- // 1.é€‰æ‹©ä¸€ä¸ªæ¨¡æ¿å¼•æ“ https://github.com/tj/consolidate.js#supported-template-engines
// 2ã€ä¸‹è½½æ¨¡æ¿å¼•æ“JSåº“
// 3ã€å¼•å…¥åˆ°é¡µé¢ä¸­ --&gt;
&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/art-template/4.13.2/lib/template-web.min.js&quot;&gt;&lt;/script&gt;
&lt;!-- 
  scriptæ ‡ç­¾çš„ç‰¹ç‚¹ï¼š
  1ã€innerHTMLæ°¸è¿œä¸ä¼šæ˜¾ç¤ºåœ¨ç•Œé¢ä¸Š(display: none;)
  2ã€å¦‚æœtypeå±æ€§ä¸æ˜¯text/javascriptï¼Œå†…éƒ¨çš„å†…å®¹ä¸ä¼šä½œä¸ºJavaScriptæ‰§è¡Œ
 --&gt;
&lt;!-- // 4ã€å‡†å¤‡ä¸€ä¸ªæ¨¡æ¿ --&gt;
&lt;!-- 
  JavaScriptä¸­ç”¨å˜é‡ä¿å­˜(ç»´æŠ¤ä¸æ–¹ä¾¿ã€ä¸èƒ½æ¢è¡Œ)
  â€”â€”&gt; HTMLä¸­æ”¾åˆ°ä¸€ä¸ªdivä¸­é€šè¿‡æ ·å¼éšè—(æ·»åŠ è¯¯ç”¨å…ƒç´ ã€å¤šä½™æ ·å¼)
  â€”â€”&gt; scriptæ ‡ç­¾typeä¿®æ”¹ä¹‹åä¸ä¼šæ˜¾ç¤ºåœ¨é¡µé¢ä¸­ï¼Œå»ºè®®text/x-å¼€å¤´
--&gt;
&lt;script id=&quot;tmpl&quot; type=&quot;text/x-art-template&quot;&gt;
{{each comments}}  
&lt;tr&gt;
  &lt;td&gt;{{$index+1}}&lt;/td&gt;
  &lt;td&gt;{{$value.author}}&lt;/td&gt;
  &lt;td&gt;{{$value.content}}&lt;/td&gt;
  &lt;td&gt;{{$value.created}}&lt;/td&gt;
&lt;/tr&gt;
{{/each}}
&lt;/script&gt;
&lt;script&gt;
var xhr = new XMLHttpRequest()
xhr.open(&#39;GET&#39;, &#39;test.php&#39;)
xhr.send()
xhr.onreadystatechange = function (){
  if(this.readyState !== 4) return
  var res = JSON.parse(this.responseText)
  // // 5ã€å‡†å¤‡ä¸€ä¸ªæ•°æ®
  var context = {comments: res.data}  // ä¸Šé¢çš„å…³é”®è¯å°±æ˜¯comments
  console.log(context)
  var html = template(&#39;tmpl&#39;, context)
  console.log(html)
  document.getElementById(&#39;comment&#39;).innerHTML = html

  // 6ã€é€šè¿‡æ¨¡æ¿å¼•æ“çš„JSæä¾›ä¸€ä¸ªå‡½æ•°å°†æ¨¡æ¿å’Œæ•°æ®æ•´åˆå¾—åˆ°æ¸²æŸ“ç»“æœHTML
  // 7ã€å°†æ¸²æŸ“ç»“æœçš„HTMLè®¾ç½®åˆ°æŸä¸ªå…ƒç´ çš„innerHTMLä¸­
}
&lt;/script&gt;</code></pre>
<h3 id="7ã€å…¼å®¹æ–¹æ¡ˆ"><a href="#7ã€å…¼å®¹æ–¹æ¡ˆ" class="headerlink" title="7ã€å…¼å®¹æ–¹æ¡ˆ"></a>7ã€å…¼å®¹æ–¹æ¡ˆ</h3><p>XMLHttpRequeståœ¨è€æ¿æµè§ˆå™¨(IE5/6)ä¸­æœ‰å…¼å®¹é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡å¦ä¸€ç§æ–¹å¼ä»£æ›¿</p>
<pre><code class="javascript">var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(&#39;Microsoft.XMLHTTP&#39;)</code></pre>
<h3 id="8ã€è¡¥å……"><a href="#8ã€è¡¥å……" class="headerlink" title="8ã€è¡¥å……"></a>8ã€è¡¥å……</h3><p>(1) responseã€responseText</p>
<p>éƒ½æ˜¯è·å–çš„å“åº”</p>
<p>response: è·å–åˆ°çš„ç»“æœæˆ–æ ¹æ®this.responseTypeçš„å˜åŒ–è€Œå˜åŒ–(å¯ä»¥è¡¨è¿°äºŒè¿›åˆ¶æ•°æ®)</p>
<p>responseText: æ°¸è¿œè·å–çš„æ˜¯å­—ç¬¦ä¸²å½¢å¼çš„å“åº”ä½“</p>
<pre><code class="javascript">var xhr = new XMLHttpRequest
xhr.open(&#39;GET&#39;, &#39;test.php&#39;)
xhr.send()
xhr.responseType = &#39;json&#39;  // é€šè¿‡ä»£ç å‘Šè¯‰è¯·æ±‚ä»£ç†å¯¹è±¡ï¼ŒæœåŠ¡ç«¯å“åº”ç»™æˆ‘ä»¬çš„æ˜¯JSON
xhr.onreadystatechange = function (){
  if(this.readyState !== 4) return
  console.log(this)
  console.log(this.response)
  console.log(this.responseText)  // ç”±äºè®¾ç½®äº†jsonï¼Œå› æ­¤ä¸å­˜åœ¨
}</code></pre>
<p>(2) IEç¼“å­˜é—®é¢˜ï¼šIEæµè§ˆå™¨ä¼šå°†ajaxè¿”å›ç»“æœç¼“å­˜èµ·æ¥ï¼Œå†æ¬¡å‘é€è¯·æ±‚æ—¶ï¼Œæ˜¾ç¤ºçš„æ˜¯æœ¬åœ°ç¼“å­˜ï¼Œè€Œä¸æ˜¯æœ€æ–°çš„è¯·æ±‚åˆ°çš„æ•°æ®</p>
<p>åœ¨æœåŠ¡ç«¯æ·»åŠ ä¸€ä¸ªï¼š</p>
<pre><code class="javascript">//é’ˆå¯¹ IE ç¼“å­˜
app.get(&#39;/ie&#39;, (request, response) =&gt; {
  //è®¾ç½®å“åº”å¤´  è®¾ç½®å…è®¸è·¨åŸŸ
  response.setHeader(&#39;Access-Control-Allow-Origin&#39;, &#39;*&#39;);
  //è®¾ç½®å“åº”ä½“
  response.send(&#39;HELLO AJAX IE&#39;);
});</code></pre>
<p>è§£å†³</p>
<pre><code class="html">&lt;style&gt;
  #result{
    width:200px;
    height:100px;
    border:solid 1px #258;
  }
&lt;/style&gt;
&lt;button&gt;ç‚¹å‡»å‘é€è¯·æ±‚&lt;/button&gt;
&lt;div id=&quot;result&quot;&gt;&lt;/div&gt;
&lt;script&gt;
  const btn = document.getElementsByTagName(&#39;button&#39;)[0];
  const result = document.querySelector(&#39;#result&#39;);

  btn.addEventListener(&#39;click&#39;, function(){
    const xhr = new XMLHttpRequest();
    xhr.open(&quot;GET&quot;,&#39;http://127.0.0.1:8000/ie?t=&#39;+Date.now()); // è§£å†³æ–¹æ¡ˆï¼šåŠ ä¸Šå‚æ•°ï¼Œè¿™æ ·æµè§ˆå™¨è®¤ä¸ºæ¯æ¬¡è¯·æ±‚urléƒ½ä¸ä¸€æ ·
    xhr.send();
    xhr.onreadystatechange = function(){
      if(xhr.readyState === 4){
        if(xhr.status &gt;= 200 &amp;&amp; xhr.status&lt; 300){
          result.innerHTML = xhr.response;
        }
      }
    }
  })
&lt;/script&gt;</code></pre>
<p>(3) è¯·æ±‚è¶…æ—¶å’Œç½‘ç»œå¼‚å¸¸</p>
<p><code>server.js</code>ä¸­æ·»åŠ </p>
<pre><code class="javascript">//å»¶æ—¶å“åº”
app.all(&#39;/delay&#39;, (request, response) =&gt; {
  //è®¾ç½®å“åº”å¤´  è®¾ç½®å…è®¸è·¨åŸŸ
  response.setHeader(&#39;Access-Control-Allow-Origin&#39;, &#39;*&#39;);
  response.setHeader(&#39;Access-Control-Allow-Headers&#39;, &#39;*&#39;);
  // æ‰‹åŠ¨è®¾ç½®ä¸€ä¸ªå»¶æ—¶æ•ˆæœ
  setTimeout(() =&gt; {
    //è®¾ç½®å“åº”ä½“
    response.send(&#39;å»¶æ—¶å“åº”&#39;);
  }, 1000) // 3000
});</code></pre>
<p>è¿›è¡Œå¤„ç†ï¼Œåœ¨2så†…è¿˜æ²¡æœ‰å“åº”åˆ™å–æ¶ˆ</p>
<pre><code class="html">&lt;style&gt;
  #result{
    width:200px;
    height:100px;
    border:solid 1px #90b;
  }
&lt;/style&gt;
&lt;button&gt;ç‚¹å‡»å‘é€è¯·æ±‚&lt;/button&gt;
&lt;div id=&quot;result&quot;&gt;&lt;/div&gt;
&lt;script&gt;
  const btn = document.getElementsByTagName(&#39;button&#39;)[0];
  const result = document.querySelector(&#39;#result&#39;);
  btn.addEventListener(&#39;click&#39;, function(){
    const xhr = new XMLHttpRequest();
    //è¶…æ—¶è®¾ç½® 2s è®¾ç½®
    xhr.timeout = 2000;
    //è¶…æ—¶å›è°ƒ
    xhr.ontimeout = function(){
      alert(&quot;ç½‘ç»œå¼‚å¸¸, è¯·ç¨åé‡è¯•!!&quot;);
    }
    //ç½‘ç»œå¼‚å¸¸å›è°ƒ
    xhr.onerror = function(){
      alert(&quot;ä½ çš„ç½‘ç»œä¼¼ä¹å‡ºäº†ä¸€äº›é—®é¢˜!&quot;);
    }
    xhr.open(&quot;GET&quot;,&#39;http://127.0.0.1:8000/delay&#39;);
    xhr.send();
    xhr.onreadystatechange = function(){
      if(xhr.readyState === 4){
        if(xhr.status &gt;= 200 &amp;&amp; xhr.status&lt; 300){
          result.innerHTML = xhr.response;
        }
      }
    }
  })
&lt;/script&gt;</code></pre>
<p>ç½‘ç»œå¼‚å¸¸å¯ä»¥åˆ©ç”¨æµè§ˆå™¨è°ƒè¯•ä¸­Networkä¸€æ ï¼Œè®¾ç½®ä¸ºOffline</p>
<p>(3) å–æ¶ˆè¯·æ±‚</p>
<p>åˆ©ç”¨abort()æ–¹æ³•å–æ¶ˆè¯·æ±‚</p>
<pre><code class="html">&lt;button&gt;ç‚¹å‡»å‘é€&lt;/button&gt;
&lt;button&gt;ç‚¹å‡»å–æ¶ˆ&lt;/button&gt;
&lt;script&gt;
  //è·å–å…ƒç´ å¯¹è±¡
  const btns = document.querySelectorAll(&#39;button&#39;);
  let x = null; // ç”±äºç¬¬äºŒä¸ªæŒ‰é’®ä¹Ÿéœ€è¦ç”¨åˆ°
  btns[0].onclick = function(){
    x = new XMLHttpRequest();
    x.open(&quot;GET&quot;,&#39;http://127.0.0.1:8000/delay&#39;);
    x.send();
  }
  // abort
  btns[1].onclick = function(){
    x.abort();
  }
&lt;/script&gt;</code></pre>
<p>(3) ajaxé‡å¤å‘é€è¯·æ±‚é—®é¢˜ï¼šç”¨æˆ·é¢‘ç¹å‘é€è¯·æ±‚ï¼Œå¯¹æœåŠ¡å™¨å‹åŠ›å¾ˆå¤§</p>
<p>è¯·æ±‚æ—¶ï¼Œå¯ä»¥åˆ¤æ–­ï¼Œå¦‚æœå‰é¢æœ‰ä¸€æ¡è¿™æ ·çš„è¯·æ±‚ï¼Œé‚£ä¹ˆå°†å‰é¢çš„è¯·æ±‚å–æ¶ˆæ‰</p>
<pre><code class="html">&lt;button&gt;ç‚¹å‡»å‘é€&lt;/button&gt;
&lt;script&gt;
  //è·å–å…ƒç´ å¯¹è±¡
  const btns = document.querySelectorAll(&#39;button&#39;);
  let x = null;
  //æ ‡è¯†å˜é‡
  let isSending = false; // æ˜¯å¦æ­£åœ¨å‘é€AJAXè¯·æ±‚
  btns[0].onclick = function(){
    //åˆ¤æ–­æ ‡è¯†å˜é‡
    if(isSending) x.abort();// å¦‚æœæ­£åœ¨å‘é€, åˆ™å–æ¶ˆè¯¥è¯·æ±‚, åˆ›å»ºä¸€ä¸ªæ–°çš„è¯·æ±‚
    x = new XMLHttpRequest();
    //ä¿®æ”¹ æ ‡è¯†å˜é‡çš„å€¼
    isSending = true;
    x.open(&quot;GET&quot;,&#39;http://127.0.0.1:8000/delay&#39;);
    x.send();
    x.onreadystatechange = function(){
      if(x.readyState === 4){
        //ä¿®æ”¹æ ‡è¯†å˜é‡
        isSending = false;
      }
    }
  }
&lt;/script&gt;</code></pre>
<h2 id="å››ã€å°è£…"><a href="#å››ã€å°è£…" class="headerlink" title="å››ã€å°è£…"></a>å››ã€å°è£…</h2><h3 id="1ã€AJAXè¯·æ±‚å°è£…"><a href="#1ã€AJAXè¯·æ±‚å°è£…" class="headerlink" title="1ã€AJAXè¯·æ±‚å°è£…"></a>1ã€AJAXè¯·æ±‚å°è£…</h3><p>å°è£…çš„å¥—è·¯ï¼š</p>
<p>(1)  å†™ä¸€ä¸ªç›¸å¯¹æ¯”è¾ƒå®Œå–„çš„ç”¨ä¾‹</p>
<pre><code class="javascript">var xhr = new XMLHttpRequest
xhr.open(&#39;GET&#39;, &#39;test.php&#39;, true)
xhr.send(null)
xhr.addEventListener(&#39;readystatechange&#39;, function(){
  if(this.readyState !== 4) return
  console.log(this.responseText)
})</code></pre>
<p>(2)  å†™ä¸€ä¸ªç©ºå‡½æ•°ï¼Œæ²¡æœ‰å½¢å‚ï¼Œå°†åˆšåˆšçš„ç”¨ä¾‹ç›´æ¥ä½œä¸ºå‡½æ•°çš„å‡½æ•°ä½“</p>
<pre><code class="javascript">function ajax(){
  var xhr = new XMLHttpRequest
  xhr.open(&#39;GET&#39;, &#39;test.php&#39;, true)
  xhr.send(null)
  xhr.addEventListener(&#39;readystatechange&#39;, function(){
    if(this.readyState !== 4) return
    console.log(this.responseText)
  })
}</code></pre>
<p>(3)  æ ¹æ®ä½¿ç”¨è¿‡ç¨‹ä¸­çš„éœ€æ±‚æŠ½è±¡å‚æ•°</p>
<pre><code class="javascript">/*
Ajaxè¯·æ±‚ version1
method: è¯·æ±‚æ–¹å¼ GET/POST
url: è¯·æ±‚åœ°å€ &#39;http://xxx.com/api&#39;
*/
function ajax(method, url){
  var xhr = new XMLHttpRequest
  xhr.open(method, url, true)
  xhr.send(data)
  xhr.addEventListener(&#39;readystatechange&#39;, function(){
    if(this.readyState !== 4) return
    console.log(this.responseText)
  })
}
ajax(&#39;GET&#39;, &#39;test.php&#39;)</code></pre>
<p>sendéœ€è¦ä¼ å‚</p>
<pre><code class="javascript">/*
Ajaxè¯·æ±‚ version2
method: è¯·æ±‚æ–¹å¼ GET/POST
url: è¯·æ±‚åœ°å€ &#39;http://xxx.com/api&#39;
params: é”®å€¼å¯¹å­—ç¬¦ä¸²
*/
function ajax(method, url, params){
  var xhr = new XMLHttpRequest
  var data = null
  if(method === &#39;GET&#39;){
    url += &#39;?&#39; + params
  }
  xhr.open(method, url, true)
  if(method === &#39;POST&#39;){
    xhr.setRequestHeader(&#39;Content-Type&#39;, &#39;application/x-www-form-urlencoded&#39;)
    data = params || null
  }
  xhr.send(data)
  xhr.addEventListener(&#39;readystatechange&#39;, function(){
    if(this.readyState !== 4) return
    console.log(this.responseText)
  })
}
ajax(&#39;GET&#39;, &#39;test.php&#39;)
ajax(&#39;POST&#39;, &#39;post.php&#39;, &#39;key1=value1&amp;key2=value2&#39;)</code></pre>
<p>sendå®å‚å¯ä»¥ä¼ å¯¹è±¡</p>
<pre><code class="javascript">/*
Ajaxè¯·æ±‚ version3
method: è¯·æ±‚æ–¹å¼ GET/POST
url: è¯·æ±‚åœ°å€ &#39;http://xxx.com/api&#39;
params: å¯¹è±¡
*/
function ajax(method, url, params){
  var xhr = new XMLHttpRequest
  // å°†Objectç±»å‹çš„å‚æ•°è½¬æ¢ä¸º key1=value1&amp;key2=value2çš„å½¢å¼
  if(typeof params === &#39;object&#39;){
    var tempArr = []
    for (var key in params){
      var value = params[key]
      tempArr.push(key + &#39;=&#39; + params[key])
      // tempArr =&gt; [&#39;key1=value1&#39;, &#39;key2=value2&#39;]
    }
    params = tempArr.join(&#39;&amp;&#39;)
    // tempArr =&gt; [&#39;key1=value1&amp;key2=value2&#39;]
  }
  if(method === &#39;GET&#39;){
    params ? url += &#39;?&#39; + params : url
  }
  xhr.open(method, url, true)
  var data = null
  if(method === &#39;POST&#39;){
    xhr.setRequestHeader(&#39;Content-Type&#39;, &#39;application/x-www-form-urlencoded&#39;)
    data = params || null
  }
  xhr.send(data)
  xhr.addEventListener(&#39;readystatechange&#39;, function(){
    if(this.readyState !== 4) return
    console.log(this.responseText)
  })
}
ajax(&#39;GET&#39;, &#39;test.php&#39;)
ajax(&#39;GET&#39;, &#39;time.php&#39;, {id: 1})
ajax(&#39;POST&#39;, &#39;post.php&#39;, {key1: &#39;value1&#39;, key2: &#39;value2&#39;, key3: &#39;value3&#39;})
ajax(&#39;POST&#39;, &#39;post.php&#39;, &#39;key1=value1&amp;key2=value2&#39;)</code></pre>
<p>ä¸åº”è¯¥åœ¨å°è£…çš„å‡½æ•°ä¸­ä¸»è§‚åœ°å¤„ç†å“åº”ç»“æœ</p>
<pre><code class="javascript">/*
Ajaxè¯·æ±‚ version4
method: è¯·æ±‚æ–¹å¼ GET/POST/get/post
url: è¯·æ±‚åœ°å€ &#39;http://xxx.com/api&#39;
params: å¯¹è±¡
*/
function ajax(method, url, params){
  var res = null
  method= method.toUpperCase()
  var xhr = new XMLHttpRequest
  // å°†Objectç±»å‹çš„å‚æ•°è½¬æ¢ä¸º key1=value1&amp;key2=value2çš„å½¢å¼
  if(typeof params === &#39;object&#39;){
    var tempArr = []
    for (var key in params){
      var value = params[key]
      tempArr.push(key + &#39;=&#39; + params[key])
      // tempArr =&gt; [&#39;key1=value1&#39;, &#39;key2=value2&#39;]
    }
    params = tempArr.join(&#39;&amp;&#39;)
    // tempArr =&gt; [&#39;key1=value1&amp;key2=value2&#39;]
  }
  if(method === &#39;GET&#39;){
    params ? url += &#39;?&#39; + params : url
  }
  xhr.open(method, url, false) // æ”¹ä¸ºåŒæ­¥äº†
  var data = null
  if(method === &#39;POST&#39;){
    xhr.setRequestHeader(&#39;Content-Type&#39;, &#39;application/x-www-form-urlencoded&#39;)
    data = params || null
  }
  xhr.addEventListener(&#39;readystatechange&#39;, function(){
    if(this.readyState !== 4) return
    // console.log(this.responseText)
    // return xhr.responseText // æ— æ³•å†ç»™å¤–éƒ¨å‡½æ•°è¿”å›ç»“æœï¼Œåˆ©ç”¨é—­åŒ…ã€åŸå‹é“¾
    res = this.responseText
  })
  xhr.send(data)
  // ç”±äºæ˜¯å¼‚æ­¥ï¼Œä¼šå…ˆæ‰§è¡Œ(ç”¨åŒæ­¥ï¼Œäº‹ä»¶æ”¾åˆ°sendå‰xä¸æ¨è)
  return res
}
console.log(ajax(&#39;post&#39;, &#39;post.php&#39;, {key1: &#39;value1&#39;, key2: &#39;value2&#39;, key3: &#39;value3&#39;}))</code></pre>
<p>ä¸èƒ½ä½¿ç”¨åŒæ­¥æ¨¡å¼</p>
<p>è¡¥å……ä¸€ä¸ªæ¦‚å¿µï¼š</p>
<p>å§”æ‰˜(æˆ–å›è°ƒ)</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185828.png" alt="image-20200815185827212" class="lazyload"></p>
<p>å‡½æ•°å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæƒ³è¦åšçš„äº‹æƒ…ï¼Œå‡½æ•°ä½“ä¸­çº¦å®šäº†è¿™ä»¶äº‹æƒ…åšçš„è¿‡ç¨‹ï¼Œç›´åˆ°è°ƒç”¨æ—¶æ‰å¼€å§‹å·¥ä½œã€‚</p>
<p>å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’å°±åƒæ˜¯å°†ä¸€ä»¶äº‹æƒ…äº¤ç»™åˆ«äººï¼Œè¿™å°±æ˜¯å§”æ‰˜ã€‚</p>
<p>å¼‚æ­¥ç¼–ç¨‹ä¸­å›è°ƒ/å§”æ‰˜ä½¿ç”¨é¢‘ç‡å¾ˆé«˜ã€‚ï¼ˆç”±äºæ˜¯å¼‚æ­¥çš„ï¼Œä½ å…ˆæ‰§è¡Œï¼Œæˆ‘å‘Šè¯‰ä½ åšä»€ä¹ˆï¼Œæˆ‘å°±ä¸ç­‰äº†â€”â€”ç­‰ä¸åŠï¼Œä½ æ‰§è¡Œå°±è¡Œäº†ï¼‰</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185846.png" alt="image-20200815185845589" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185858.png" alt="image-20200815185856765" class="lazyload"></p>
<p>å›è°ƒåœ°ç‹±/é»‘æ´ï¼šæ­»å¾ªç¯</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185914.png" alt="image-20200815185913313" class="lazyload"></p>
<p><font color=red><strong>æœ€ç»ˆç‰ˆæœ¬</strong></font></p>
<pre><code class="javascript">/*
å‘é€ä¸€ä¸ªAjaxè¯·æ±‚ version5
@param (String) method  è¯·æ±‚æ–¹å¼ GET/POST/get/post
@param (String) url     è¯·æ±‚åœ°å€ &#39;http://xxx.com/api&#39;
@param (Object) params  è¯·æ±‚å‚æ•°
@param (Function) done  è¯·æ±‚å®Œæˆè¿‡åéœ€è¦åšçš„äº‹æƒ…(å§”æ‰˜/å›è°ƒ)
*/
function ajax(method, url, params, done){
  var res = null
  method= method.toUpperCase()
  var xhr = new XMLHttpRequest
  // å°†Objectç±»å‹çš„å‚æ•°è½¬æ¢ä¸º key1=value1&amp;key2=value2çš„å½¢å¼
  if(typeof params === &#39;object&#39;){
    var tempArr = []
    for (var key in params){
      var value = params[key]
      tempArr.push(key + &#39;=&#39; + params[key])
    }
    params = tempArr.join(&#39;&amp;&#39;)
  }
  if(method === &#39;GET&#39;){
    params ? url += &#39;?&#39; + params : url
  }
  xhr.open(method, url, true)
  var data = null
  if(method === &#39;POST&#39;){
    xhr.setRequestHeader(&#39;Content-Type&#39;, &#39;application/x-www-form-urlencoded&#39;)
    data = params || null
  }
  xhr.send(data)
  xhr.addEventListener(&#39;readystatechange&#39;, function(){
    if(this.readyState !== 4) return
    res = this.responseText
    done(res)
  })
}

var ondone = function (res){
  console.log(&#39;å‡†å¤‡æ‰§è¡Œ&#39;)
  // console.log(res)
  alert(res)
  console.log(&#39;æ‰§è¡Œå®Œæˆäº†&#39;)
}
ajax(&#39;post&#39;, &#39;post.php&#39;, {key1: &#39;value1&#39;, key2: &#39;value2&#39;}, ondone)
ajax(&#39;get&#39;, &#39;time.php&#39;, {}, function(res){
  console.log(res)
})</code></pre>
<h3 id="2ã€jQueryä¸­çš„Ajax"><a href="#2ã€jQueryä¸­çš„Ajax" class="headerlink" title="2ã€jQueryä¸­çš„Ajax"></a>2ã€jQueryä¸­çš„Ajax</h3><p>jQueryä¸­æœ‰ä¸€å¥—ä¸“é—¨é’ˆå¯¹AJAXçš„å°è£…ï¼ŒåŠŸèƒ½ååˆ†å®Œå–„ï¼Œç»å¸¸ä½¿ç”¨ï¼Œéœ€è¦æ³¨æ„ã€‚</p>
<p><a href="https://www.jquery123.com/category/ajax/" target="_blank" rel="noopener">https://www.jquery123.com/category/ajax/</a></p>
<p>(1)é€šç”¨æ–¹æ³•$.ajax</p>
<p>åº•å±‚æ¥å£(å…¶ä»–æ¥å£ä¾èµ–äºè¿™ä¸ª)</p>
<pre><code class="html">&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
// 1ã€æœ€åŸºç¡€çš„è°ƒç”¨
$.ajax(&#39;./time.php&#39;, { // url: 
  type: &#39;POST&#39;,  // method: è¯·æ±‚æ–¹æ³•
  success: function(res){
    // res =&gt; æ‹¿åˆ°çš„åªæ˜¯å“åº”ä½“
    console.log(res)
  }
})
// å¯ä»¥æŠŠurlå†™åˆ°é‡Œé¢å»
$.ajax({ 
  url: &#39;./time.php&#39;,// url: 
  type: &#39;POST&#39;,  // method: è¯·æ±‚æ–¹æ³•
  data: {id: 1, name: &#39;å¼ ä¸‰&#39;}, // ç”¨äºæäº¤åˆ°æœåŠ¡ç«¯çš„å‚æ•°
  /*
    getæ–¹å¼é€šè¿‡urlä¼ é€’
    postæ–¹å¼æŒ‰ç…§è¯·æ±‚ä½“ä¼ é€’
  */
  success: function(res){
    // res =&gt; æ‹¿åˆ°çš„åªæ˜¯å“åº”ä½“
    console.log(res)
  }
})
// resè¿”å›æ ¼å¼
$.ajax({ 
  url: &#39;./json.php&#39;,// url: è¯·æ±‚åœ°å€
  type: &#39;get&#39;,  // method: è¯·æ±‚æ–¹æ³•
  success: function(res){
    // resä¼šæ ¹æ®æœåŠ¡å™¨å“åº”çš„Content-Typeè‡ªåŠ¨è½¬æ¢ä¸ºå¯¹è±¡
    // è¿™æ˜¯jQueryå†…éƒ¨å®ç°çš„
    console.log(res)
  }
})
// æŒ‡å®šå“åº”ä½“ç±»å‹
$.ajax({ 
  url: &#39;./json.php&#39;,// url: 
  type: &#39;get&#39;,  // method: è¯·æ±‚æ–¹æ³•
  // data: {id: 1, name: &#39;å¼ ä¸‰&#39;}, // è®¾ç½®è¯·æ±‚å‚æ•°
  dataType: &#39;json&#39;, // ç”¨äºè®¾ç½®å“åº”ä½“çš„ç±»å‹(ä¸dataå‚æ•°æ²¡å…³ç³»)
  success: function(res){
    // ä¸€æ—¦è®¾ç½®äº†dataTypeé€‰é¡¹ï¼Œå°±ä¸å†å…³å¿ƒæœåŠ¡ç«¯å“åº”çš„Content-Typeäº†
    // å®¢æˆ·ç«¯ä¼šä¸»è§‚åœ°è®¤ä¸ºæœåŠ¡ç«¯è¿”å›çš„å°±æ˜¯jsonæ ¼å¼
    console.log(res)
  }
})
&lt;/script&gt;</code></pre>
<p>åŸç”Ÿæ“ä½œä¸­ä¸è®ºè¯·æ±‚çŠ¶æ€ç æ˜¯å¤šå°‘éƒ½ä¼šè§¦å‘å›è°ƒ</p>
<p>jQueryä¸­ajaxçš„å›è°ƒ</p>
<pre><code class="html">&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
// jQueryä¸­ajaxçš„å›è°ƒ
$.ajax({ 
  url: &#39;./time.php&#39;, // url
  data: {key1:value1, key2:value2}, // å‚æ•°
  type: &#39;POST&#39;,  // method: è¯·æ±‚æ–¹æ³•
  dataType: &#39;json&#39;, // å“åº”ä½“ç»“æœ
  beforeSend: function(xhr){
    // åœ¨æ‰€æœ‰å‘é€è¯·æ±‚å¾—æ“ä½œ(openã€send)ä¹‹å‰æ‰§è¡Œ
    console.log(&#39;beforeSend&#39;, xhr)
  }
  success: function(res){ // æˆåŠŸçš„å›è°ƒ
    // åªæœ‰è¯·æ±‚æˆåŠŸ(çŠ¶æ€ç ä¸º200)æ‰ä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°
    // res =&gt; æ‹¿åˆ°çš„åªæ˜¯å“åº”ä½“
    console.log(res)
  },
  // timeout: 2000, // è¶…æ—¶æ—¶é—´
  error: function(xhr){ // å¤±è´¥çš„å›è°ƒ
    // åªæœ‰è¯·æ±‚ä¸æ­£å¸¸æ‰ä¼šæ‰§è¡Œ(çŠ¶æ€ç ä¸ä¸º200)
    console.log(&#39;error&#39;,xhr)
  },
  complete: function(xhr){
    // ä¸ç®¡æˆåŠŸè¿˜æ˜¯å¤±è´¥éƒ½æ˜¯å®Œæˆï¼Œéƒ½ä¼šæ‰§è¡Œè¿™ä¸ªcompleteå‡½æ•°
    console.log(&#39;complete&#39;, xhr)
  }
})
&lt;/script&gt;</code></pre>
<p>(2) é«˜çº§å°è£…</p>
<pre><code class="html">&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
// 2ã€jQueryä¸­ajaxçš„å¿«æ·æ–¹æ³•
$.get(&#39;time.php&#39;, function(res){
  console.log(res)
})
$.post(&#39;time.php&#39;, function(res){
  console.log(res)
})
// æœåŠ¡ç«¯è®¾ç½®äº†jsonèƒ½è½¬æ¢å¯¹è±¡ï¼Œæ²¡è®¾ç½®ä¸è¡Œ
$.get(&#39;time.php&#39;, {id: 1}, function(res){
  console.log(res)
})
$.post(&#39;time.php&#39;, {id: 1}, function(res){
  console.log(res)
})
// æ— è§†æœåŠ¡ç«¯Content-Typeï¼Œè§†ä½œJSONæ ¼å¼
$.getJSON(&#39;json.php&#39;, {id: 1}, function(res){
  console.log(res)
})
$.postJSON(&#39;json.php&#39;, {id: 1}, function(res){
  console.log(res)
})
æ˜ç¡®è¯·æ±‚çš„æ–¹å¼ï¼Œæ ¹æ®æ–¹å¼é€‰æ‹©å¿«æ·æ–¹æ³•
&lt;/script&gt;</code></pre>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190207.png" alt="image-20200815190206531" class="lazyload"></p>
<pre><code class="html">&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
// è·³è½¬å…¶ä»–é¡µé¢ï¼Œä¼šç™½å±ï¼Œä½†æ˜¯æœ‰äº›é¡µé¢åªæ˜¯éƒ¨åˆ†ä¸ç›¸åŒï¼Œå¯ä»¥å±€éƒ¨åˆ·æ–°
$(function($){
  // æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸï¼Œé¡ºä¾¿ç¡®ä¿é¡µé¢åŠ è½½å®Œæˆæ‰§è¡Œ
  $(&#39;a.item&#39;).on(&#39;click&#39;, function(){
    var url = $(this).attr(&#39;href&#39;)
    $(&#39;#main&#39;).load(url + &#39; #main&gt;*&#39;) // å…ƒç´ .load(é“¾æ¥+ç©ºæ ¼+é€‰æ‹©å™¨)
    // é˜»æ­¢açš„é»˜è®¤è¡Œä¸º
    return false
  })
})
&lt;/script&gt;</code></pre>
<p>å°†jQueryçš„å‡ ç§æ–¹å¼æ±‡æ€»ä¸€ä¸‹ï¼š</p>
<p><code>server.js</code>ä¸­ï¼š</p>
<pre><code class="javascript">//jQuery æœåŠ¡
app.all(&#39;/jquery-server&#39;, (request, response) =&gt; {
    //è®¾ç½®å“åº”å¤´  è®¾ç½®å…è®¸è·¨åŸŸ
    response.setHeader(&#39;Access-Control-Allow-Origin&#39;, &#39;*&#39;);
    response.setHeader(&#39;Access-Control-Allow-Headers&#39;, &#39;*&#39;);
    // response.send(&#39;Hello jQuery AJAX&#39;);
    const data = {name:&#39;wallleap&#39;};
    response.send(JSON.stringify(data));
});</code></pre>
<p>å‰ç«¯</p>
<pre><code class="html">&lt;link crossorigin=&quot;anonymous&quot; href=&quot;https://cdn.bootcss.com/twitter-bootstrap/3.3.7/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;
&lt;script crossorigin=&quot;anonymous&quot; src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js&quot;&gt;&lt;/script&gt; &lt;!-- crossorigin=&quot;anonymous&quot;ï¼šè·¨åŸŸæºè¯·æ±‚è®¾ç½®ï¼ŒåŠ ä¸Šä¹‹åå‘è¿™ä¸ªèµ„æºå‘é€è¯·æ±‚æ—¶ä¸ä¼šæºå¸¦å½“å‰åŸŸåä¸‹çš„cookie --&gt;
&lt;div class=&quot;container&quot;&gt;
    &lt;h2 class=&quot;page-header&quot;&gt;jQueryå‘é€AJAXè¯·æ±‚ &lt;/h2&gt;
    &lt;button class=&quot;btn btn-primary&quot;&gt;GET&lt;/button&gt;
    &lt;button class=&quot;btn btn-danger&quot;&gt;POST&lt;/button&gt;
    &lt;button class=&quot;btn btn-info&quot;&gt;é€šç”¨å‹æ–¹æ³•ajax&lt;/button&gt;
&lt;/div&gt;
&lt;script&gt;
  $(&#39;button&#39;).eq(0).click(function(){
    $.get(&#39;http://127.0.0.1:8000/jquery-server&#39;, {a:100, b:200}, function(data){
      console.log(data);
    },&#39;json&#39;);
  });
  $(&#39;button&#39;).eq(1).click(function(){
    $.post(&#39;http://127.0.0.1:8000/jquery-server&#39;, {a:100, b:200}, function(data){
      console.log(data);
    });
  });
  $(&#39;button&#39;).eq(2).click(function(){
    $.ajax({
      //url
      url: &#39;http://127.0.0.1:8000/jquery-server&#39;,
      //å‚æ•°
      data: {a:100, b:200},
      //è¯·æ±‚ç±»å‹
      type: &#39;GET&#39;,
      //å“åº”ä½“ç»“æœ
      dataType: &#39;json&#39;,
      //æˆåŠŸçš„å›è°ƒ
      success: function(data){
        console.log(data);
      },
      //è¶…æ—¶æ—¶é—´
      timeout: 2000,
      //å¤±è´¥çš„å›è°ƒ
      error: function(){
        console.log(&#39;å‡ºé”™å•¦!!&#39;);
      },
      //å¤´ä¿¡æ¯
      headers: {
        c:300,
        d:400
      }
    });
  });
&lt;/script&gt;</code></pre>
<p>(3) å…¨å±€äº‹ä»¶åŠé…ç½®NProgressæ˜¾ç¤ºåŠ è½½è¿›åº¦</p>
<pre><code class="html">&lt;style&gt;
  .loading{
    display: none;
    position: fixed;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    background-color: rgba(85, 85, 85, .5);
    text-align: center;
    padding-top: 200px;
    color: #fff;
    font-size: 50px;
  }
&lt;/style&gt;
&lt;div class=&quot;loading&quot;&gt;æ­£åœ¨ç©å‘½åŠ è½½ä¸­â€¦â€¦&lt;/div&gt;
&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
// 3ã€jQueryå…¨å±€äº‹ä»¶å¤„ç†å‡½æ•°
/*
$.ajax({
  url: &#39;time.php&#39;,
  beforeSend: function(xhr){
    // æ˜¾ç¤ºåŠ è½½æç¤º
    $(&#39;.loading&#39;).fadeIn()
    console.log(&#39;å³å°†å¼€å§‹è¯·æ±‚&#39;)
  },
  complete: function(xhr){
    // ç»“æŸæç¤º
    $(&#39;.loading&#39;).fadeOut()
    console.log(&#39;è¯·æ±‚ç»“æŸäº†&#39;)
  }
})
*/
// æ‰€æœ‰çš„ajaxè¯·æ±‚å¼€å§‹å’Œç»“æŸ
$(document).ajaxStart(function(){
  // åªè¦æœ‰ajaxè¯·æ±‚å‘ç”Ÿå°±ä¼šæ‰§è¡Œ
  // æ˜¾ç¤ºåŠ è½½æç¤º
  $(&#39;.loading&#39;).fadeIn()
  console.log(&#39;å³å°†å¼€å§‹è¯·æ±‚&#39;)
})
$(document).ajaxStop(function(){
  // åªè¦æœ‰ajaxè¯·æ±‚å‘ç”Ÿå°±ä¼šæ‰§è¡Œ
  // æ˜¾ç¤ºåŠ è½½æç¤º
  $(&#39;.loading&#39;).fadeOut()
  console.log(&#39;è¯·æ±‚ç»“æŸäº†&#39;)
})
$(&#39;body&#39;).on(&#39;click&#39;, function(){
  // $.ajax({
  //   url: &#39;time.php&#39;
  // })
  $.get(&#39;time.php&#39;)
})
&lt;/script&gt;</code></pre>
<p>å¯ä»¥å†™æˆé“¾å¼çš„ï¼š</p>
<pre><code class="javascript">$(document)
  .ajaxStart(function(){
    â€¦â€¦
  })
  .ajaxStop(function(){
    â€¦â€¦
  })</code></pre>
<p>æ­é…NProgress</p>
<pre><code class="html">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/nprogress@0.2.0/nprogress.css&quot;&gt;
&lt;script src=&quot;https://unpkg.com/nprogress@0.2.0/nprogress.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div style=&quot;margin-top: 100px;text-align: center;&quot;&gt;ç‚¹å‡»åŠ è½½&lt;/div&gt;
&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
// 3ã€jQueryå…¨å±€äº‹ä»¶å¤„ç†å‡½æ•°æ­é…nprogress
// æ‰€æœ‰çš„ajaxè¯·æ±‚å¼€å§‹å’Œç»“æŸ
$(document)
  .ajaxStart(function(){
    // åªè¦æœ‰ajaxè¯·æ±‚å‘ç”Ÿå°±ä¼šæ‰§è¡Œ
    NProgress.start()
  })
  .ajaxStop(function(){
    // åªè¦æœ‰ajaxè¯·æ±‚å‘ç”Ÿå°±ä¼šæ‰§è¡Œ
    NProgress.done()
  })
$(&#39;body&#39;).on(&#39;click&#39;, function(){
  $.get(&#39;time.php&#39;)
})
&lt;/script&gt;
&lt;/body&gt;</code></pre>
<h3 id="3ã€axios"><a href="#3ã€axios" class="headerlink" title="3ã€axios"></a>3ã€axios</h3><p>(1) ä½¿ç”¨æ•™ç¨‹ï¼š<a href="http://www.axios-js.com/zh-cn/docs/" target="_blank" rel="noopener">http://www.axios-js.com/zh-cn/docs/</a></p>
<p>Axios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ HTTP åº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­ã€‚</p>
<p>(2) ç‰¹æ€§</p>
<ul>
<li>ä»æµè§ˆå™¨ä¸­åˆ›å»º <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest" target="_blank" rel="noopener">XMLHttpRequests</a></li>
<li>ä» node.js åˆ›å»º <a href="http://nodejs.org/api/http.html" target="_blank" rel="noopener">http</a> è¯·æ±‚</li>
<li>æ”¯æŒ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener">Promise</a> API</li>
<li>æ‹¦æˆªè¯·æ±‚å’Œå“åº”</li>
<li>è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®</li>
<li>å–æ¶ˆè¯·æ±‚</li>
<li>è‡ªåŠ¨è½¬æ¢ JSON æ•°æ®</li>
<li>å®¢æˆ·ç«¯æ”¯æŒé˜²å¾¡ <a href="http://en.wikipedia.org/wiki/Cross-site_request_forgery" target="_blank" rel="noopener">XSRF</a></li>
</ul>
<p>(3) å®‰è£…</p>
<p>ä½¿ç”¨ npm:</p>
<pre><code class="sh">$ npm install axios</code></pre>
<p>ä½¿ç”¨ bower:</p>
<pre><code class="bash">$ bower install axios</code></pre>
<p>ä½¿ç”¨ cdn:</p>
<pre><code class="html">&lt;script src=&quot;https://unpkg.com/axios/dist/axios.min.js&quot;&gt;&lt;/script&gt;</code></pre>
<p>(4) æ¡ˆä¾‹</p>
<p><code>server.js</code></p>
<pre><code class="javascript">//axios æœåŠ¡
app.all(&#39;/axios-server&#39;, (request, response) =&gt; {
    //è®¾ç½®å“åº”å¤´  è®¾ç½®å…è®¸è·¨åŸŸ
    response.setHeader(&#39;Access-Control-Allow-Origin&#39;, &#39;*&#39;);
    response.setHeader(&#39;Access-Control-Allow-Headers&#39;, &#39;*&#39;);
    // response.send(&#39;Hello jQuery AJAX&#39;);
    const data = {name:&#39;wallleap&#39;};
    response.send(JSON.stringify(data));
});</code></pre>
<p>axioså‘é€Ajaxè¯·æ±‚</p>
<pre><code class="html">&lt;script crossorigin=&quot;anonymous&quot; src=&quot;https://cdn.bootcdn.net/ajax/libs/axios/0.19.2/axios.js&quot;&gt;&lt;/script&gt;
&lt;button&gt;GET&lt;/button&gt;
&lt;button&gt;POST&lt;/button&gt;
&lt;button&gt;AJAX&lt;/button&gt;
&lt;script&gt;
  // https://github.com/axios/axios
  const btns = document.querySelectorAll(&#39;button&#39;);
  //é…ç½® baseURL
  axios.defaults.baseURL = &#39;http://127.0.0.1:8000&#39;;
  btns[0].onclick = function () {
    //GET è¯·æ±‚ get(url, å…¶å®ƒé…ç½®)
    // axios.get(&#39;http://127.0.0.1:8000/axios-server&#39;, {
    axios.get(&#39;/axios-server&#39;, { // é…ç½®äº†baseURL
      //url å‚æ•°â€”â€”&gt;id=100&amp;vip=7
      params: {
        id: 100,
        vip: 7
      },
      //è¯·æ±‚å¤´ä¿¡æ¯
      headers: {
        name: &#39;wallleap&#39;,
        age: 20
      }
    }).then(value =&gt; { // åŸºäºpromise å¤„ç†è¿”å›ç»“æœ value.configã€dataã€headersã€requestã€statusã€statusText
      console.log(value);
    });
  }
  btns[1].onclick = function () {
    // POSTè¯·æ±‚ post(url, è¯·æ±‚ä½“, å…¶å®ƒé…ç½®)
    axios.post(&#39;/axios-server&#39;, { // è¯·æ±‚ä½“
      username: &#39;admin&#39;,
      password: &#39;password&#39;
    }, {
      //url 
      params: {
        id: 200,
        vip: 9
      },
      //è¯·æ±‚å¤´å‚æ•°
      headers: {
        height: 180,
        weight: 180,
      }
    }).then(response=&gt;{
      // é…ç½®
      console.log(response.config);
      // XMLHttpRequest
      console.log(response.request);
      //å“åº”çŠ¶æ€ç 
      console.log(response.status);
      //å“åº”çŠ¶æ€å­—ç¬¦ä¸²
      console.log(response.statusText);
      //å“åº”å¤´ä¿¡æ¯
      console.log(response.headers);
      //å“åº”ä½“
      console.log(response.data);
    })
  }
  btns[2].onclick = function(){
    // é€šç”¨æ–¹å¼ axios(å¯¹è±¡) --&gt; {method, url, å‚æ•°, å¤´ä¿¡æ¯, è¯·æ±‚ä½“å‚æ•°}
    axios({
      //è¯·æ±‚æ–¹æ³•
      method : &#39;POST&#39;,
      //url
      url: &#39;/axios-server&#39;,
      //urlå‚æ•°
      params: {
        vip:10,
        level:30
      },
      //å¤´ä¿¡æ¯
      headers: {
        a:100,
        b:200
      },
      //è¯·æ±‚ä½“å‚æ•°
      data: {
        username: &#39;admin&#39;,
        password: &#39;password&#39;
      }
    }).then(response=&gt;{
      //å“åº”çŠ¶æ€ç 
      console.log(response.status);
      //å“åº”çŠ¶æ€å­—ç¬¦ä¸²
      console.log(response.statusText);
      //å“åº”å¤´ä¿¡æ¯
      console.log(response.headers);
      //å“åº”ä½“
      console.log(response.data);
    }).catch(function (error) {
      console.log(error);
    })
  }
&lt;/script&gt;</code></pre>
<h2 id="4ã€fetch"><a href="#4ã€fetch" class="headerlink" title="4ã€fetch"></a>4ã€fetch</h2><p>fetchä½¿ç”¨ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch</a></p>
<p>fetchå‘é€AJAXè¯·æ±‚</p>
<p><code>server.js</code></p>
<pre><code class="javascript">//fetch æœåŠ¡
app.all(&#39;/fetch-server&#39;, (request, response) =&gt; {
    //è®¾ç½®å“åº”å¤´  è®¾ç½®å…è®¸è·¨åŸŸ
    response.setHeader(&#39;Access-Control-Allow-Origin&#39;, &#39;*&#39;);
    response.setHeader(&#39;Access-Control-Allow-Headers&#39;, &#39;*&#39;);
    // response.send(&#39;Hello jQuery AJAX&#39;);
    const data = {name:&#39;wallleap&#39;};
    response.send(JSON.stringify(data));
});</code></pre>
<pre><code class="html">&lt;button&gt;AJAXè¯·æ±‚&lt;/button&gt;
&lt;script&gt;
  //æ–‡æ¡£åœ°å€
  //https://developer.mozilla.org/zh-CN/docs/Web/API/WindowOrWorkerGlobalScope/fetch
  const btn = document.querySelector(&#39;button&#39;);
  btn.onclick = function(){
    fetch(&#39;http://127.0.0.1:8000/fetch-server?vip=10&#39;, {
      //è¯·æ±‚æ–¹æ³•
      method: &#39;POST&#39;,
      //è¯·æ±‚å¤´
      headers: {
        name:&#39;atguigu&#39;
      },
      //è¯·æ±‚ä½“
      body: &#39;username=admin&amp;password=admin&#39;
    }).then(response =&gt; {
      // return response.text();
      return response.json();
    }).then(response=&gt;{
      console.log(response);
    });
  }
&lt;/script&gt;</code></pre>
<h2 id="äº”ã€è·¨åŸŸ"><a href="#äº”ã€è·¨åŸŸ" class="headerlink" title="äº”ã€è·¨åŸŸ"></a>äº”ã€è·¨åŸŸ</h2><h3 id="1ã€æ¦‚å¿µ"><a href="#1ã€æ¦‚å¿µ" class="headerlink" title="1ã€æ¦‚å¿µ"></a>1ã€æ¦‚å¿µ</h3><p>(1) åŒæºç­–ç•¥(Same-Origin Policy)ï¼šæœ€æ—©ç”±Netscapeå…¬å¸æå‡ºï¼Œæ˜¯æµè§ˆå™¨çš„ä¸€ç§å®‰å…¨ç­–ç•¥ï¼Œæ‰€è°“åŒæºæ˜¯æŒ‡<strong>åè®®ã€åŸŸåã€ç«¯å£</strong>å®Œå…¨ç›¸åŒï¼Œåªæœ‰åŒæºçš„åœ°å€æ‰å¯ä»¥ç›¸äº’é€šè¿‡AJAXçš„æ–¹å¼è¯·æ±‚ã€‚</p>
<p>ä¸‹é¢æ¥ä¸€ä¸ªåŒæºçš„æ¡ˆä¾‹ï¼š</p>
<p>é‡å†™ä¸€ä¸ª<code>server.js</code></p>
<pre><code class="javascript">const express = require(&#39;express&#39;);
const app = express();
app.get(&#39;/home&#39;, (request, response)=&gt;{
    //å“åº”ä¸€ä¸ªé¡µé¢
    response.sendFile(__dirname + &#39;/index.html&#39;);
});
app.get(&#39;/data&#39;, (request, response)=&gt;{
    response.send(&#39;ç”¨æˆ·æ•°æ®&#39;);
});
app.listen(9000, ()=&gt;{
    console.log(&quot;æœåŠ¡å·²ç»å¯åŠ¨...&quot;);
});</code></pre>
<p>è¿è¡Œèµ·æ¥</p>
<pre><code class="sh">nodemon server.js</code></pre>
<p>åœ¨è¿™ä¸ªç›®å½•ä¸‹æ–°å»º<code>index.html</code></p>
<pre><code class="html">&lt;h1&gt;wallleap&lt;/h1&gt;
&lt;button&gt;ç‚¹å‡»è·å–ç”¨æˆ·æ•°æ®&lt;/button&gt;
&lt;script&gt;
  const btn = document.querySelector(&#39;button&#39;);
  btn.onclick = function(){
    const x = new XMLHttpRequest();
    //è¿™é‡Œå› ä¸ºæ˜¯æ»¡è¶³åŒæºç­–ç•¥çš„, æ‰€ä»¥ url å¯ä»¥ç®€å†™
    x.open(&quot;GET&quot;,&#39;/data&#39;);
    //å‘é€
    x.send();
    //
    x.onreadystatechange = function(){
      if(x.readyState === 4){
        if(x.status &gt;= 200 &amp;&amp; x.status &lt; 300){
          console.log(x.response);
        }
      }
    }
  }
&lt;/script&gt;</code></pre>
<p>è®¿é—®<a href="http://127.0.0.1:9000/homeï¼Œå¯ä»¥è®¿é—®è¿™ä¸ªindex.htmlï¼Œç‚¹å‡»æŒ‰é’®å¯ä»¥è·å–åˆ°æ•°æ®" target="_blank" rel="noopener">http://127.0.0.1:9000/homeï¼Œå¯ä»¥è®¿é—®è¿™ä¸ªindex.htmlï¼Œç‚¹å‡»æŒ‰é’®å¯ä»¥è·å–åˆ°æ•°æ®</a></p>
<p>(2) åŒæºæˆ–è€…ä¸åŒæºè¯´çš„æ˜¯ä¸¤ä¸ªåœ°å€ä¹‹é—´çš„å…³ç³»ï¼Œä¸åŒæºåœ°å€ä¹‹é—´è¯·æ±‚æˆ‘ä»¬ç§°ä¹‹ä¸ºè·¨åŸŸè¯·æ±‚ã€‚</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190430.png" alt="image-20200815190429165" class="lazyload"></p>
<p>è·¨åŸŸçš„æ¡ˆä¾‹ï¼š</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190440.png" alt="image-20200815190439633" class="lazyload"></p>
<p>è·¨åŸŸä¼šæŠ¥é”™ï¼š</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190456.png" alt="image-20200815190455302" class="lazyload"></p>
<h3 id="2ã€è§£å†³æ–¹æ¡ˆ"><a href="#2ã€è§£å†³æ–¹æ¡ˆ" class="headerlink" title="2ã€è§£å†³æ–¹æ¡ˆ"></a>2ã€è§£å†³æ–¹æ¡ˆ</h3><p>ä¸åŒæºåœ°å€ä¹‹é—´å¦‚æœéœ€è¦ç›¸äº’è¯·æ±‚ï¼Œå¿…é¡»æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯é…åˆæ‰èƒ½å®Œæˆ</p>
<p>å°è¯•æ‰¾åˆ°ä¸€ç§å¯ä»¥å‘é€ä¸åŒæºè¯·æ±‚çš„æ–¹å¼</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190529.png" alt="å¯èƒ½å¯ä»¥è§£å†³è·¨åŸŸçš„æ–¹æ³•" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190556.png" alt="æ­£å¸¸å›¾ç‰‡æ ‡ç­¾" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190621.png" alt="å°è¯•ä½¿ç”¨imgæ ‡ç­¾è§£å†³è·¨åŸŸ" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190650.png" alt="æ­£å¸¸linkæ ‡ç­¾" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190712.png" alt="å°è¯•ä½¿ç”¨linkæ ‡ç­¾è§£å†³è·¨åŸŸ" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190738.png" alt="å°è¯•ä½¿ç”¨scriptæ ‡ç­¾è§£å†³è·¨åŸŸ" class="lazyload"></p>
<p>åˆçº§è·¨åŸŸè§£å†³æ–¹æ¡ˆ</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190812.png" alt="æœåŠ¡å™¨ç«¯å°†jsonç”¨å‡½æ•°åŒ…è£¹è¿”å›" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190858.png" alt="å®¢æˆ·ç«¯ä½¿ç”¨è¯¥å‡½æ•°æ‹¿åˆ°æ•°æ®" class="lazyload"></p>
<p>(1) <strong>JSONP</strong></p>
<p>JSON with Paddingï¼Œæ˜¯ä¸€ç§å€ŸåŠ©äº<code>script</code>æ ‡ç­¾å‘é€è·¨åŸŸè¯·æ±‚çš„æŠ€å·§ã€‚è¿™ä¸ªæ˜¯éå®˜æ–¹çš„è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼Œæ˜¯ç¨‹åºå‘˜ä»¬æœºæ™ºåœ°æƒ³å‡ºæ¥çš„ï¼Œåªæ”¯æŒgetè¯·æ±‚ã€‚</p>
<p>å…¶åŸç†å°±æ˜¯åœ¨å®¢æˆ·ç«¯å€ŸåŠ©<code>script</code>æ ‡ç­¾è¯·æ±‚æœåŠ¡ç«¯çš„ä¸€ä¸ªåŠ¨æ€ç½‘é¡µ(phpç­‰)ï¼ŒæœåŠ¡ç«¯çš„è¿™ä¸ªåŠ¨æ€ç½‘é¡µè¿”å›ä¸€æ®µå¸¦æœ‰å‡½æ•°è°ƒç”¨çš„JavaScriptå…¨å±€å‡½æ•°è°ƒç”¨çš„è„šæœ¬ï¼Œå°†åŸæœ¬éœ€è¦è¿”å›ç»™å®¢æˆ·ç«¯çš„æ•°æ®ä¼ é€’è¿›å»ã€‚</p>
<p>ä»¥åç»å¤§å¤šæ•°æƒ…å†µéƒ½æ˜¯é‡‡ç”¨JSONPçš„æ‰‹æ®µå®Œæˆä¸åŒæºåœ°å€ä¹‹é—´çš„è·¨åŸŸè¯·æ±‚ã€‚</p>
<ul>
<li>åŸç†æ¼”ç¤ºï¼š</li>
</ul>
<p>å½“å‰ç›®å½•ä¸‹ï¼Œæ–°å»º<code>js/app.js</code></p>
<pre><code class="javascript">const data = {
    name: &#39;æµ‹è¯•jsonp&#39;
};
/* æŠŠè¿™ä¸ªæŒªèµ°ï¼Œåˆ°æµ‹è¯•çš„htmlæ–‡ä»¶ä¸­
//å¤„ç†æ•°æ®
    function handle(data) {
        //è·å– result å…ƒç´ 
        const result = document.getElementById(&#39;result&#39;);
        result.innerHTML = data.name;
    }
*/
handle(data);</code></pre>
<p>html</p>
<pre><code class="html">&lt;style&gt;
  #result {
    width: 300px;
    height: 100px;
    border: solid 1px #78a;
  }
&lt;/style&gt;
&lt;div id=&quot;result&quot;&gt;&lt;/div&gt;
&lt;script&gt;
    //å¤„ç†æ•°æ®
    function handle(data) {
        //è·å– result å…ƒç´ 
        const result = document.getElementById(&#39;result&#39;);
        result.innerHTML = data.name;
    }
&lt;/script&gt;
&lt;!-- &lt;script src=&quot;http://127.0.0.1:5500/jsonp/js/app.js&quot;&gt;&lt;/script&gt; --&gt; &lt;!-- åˆ©ç”¨file://æ–¹å¼è®¿é—®è¿™ä¸ªhtmlé¡µé¢ --&gt;
&lt;!-- è¿›é˜¶ç‰ˆ --&gt;
&lt;script src=&quot;http://127.0.0.1:8000/jsonp-server&quot;&gt;&lt;/script&gt;</code></pre>
<p><code>server.js</code></p>
<pre><code class="javascript">//jsonpæœåŠ¡
app.all(&#39;/jsonp-server&#39;,(request, response) =&gt; {
    // response.send(&#39;console.log(&quot;hello jsonp&quot;)&#39;); // å‰ç«¯æ‹¿åˆ°jsä»£ç 
    const data = {
        name: &#39;æµ‹è¯•jsonp&#39;
    };
    //å°†æ•°æ®è½¬åŒ–ä¸ºå­—ç¬¦ä¸²
    let str = JSON.stringify(data);
    //è¿”å›ç»“æœ
    response.end(`handle(${str})`); // ä¼šè¿”å›ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œå®å‚æ˜¯æƒ³è¿”å›ç»™å‰ç«¯çš„æ•°æ®(å‰ç«¯éœ€è¦å…ˆå£°æ˜è¿™ä¸ªå‡½æ•°)
});</code></pre>
<ul>
<li>ç”¨phpæ¼”ç¤ºä¸€ä¸‹</li>
</ul>
<p><code>server.php</code></p>
<pre><code class="php">&lt;?php
$conn = mysqli_connect(&#39;localhost&#39;, &#39;root&#39;, &#39;123456&#39;, &#39;demo&#39;);
$query = mysqli_query($conn, &#39;select * from users&#39;);
while ($row = mysqli_fetch_assoc($query)) {
  $data[] = $row;
}
if (empty($_GET[&#39;callback&#39;])) {
  header(&#39;Content-Type: application/json&#39;);
  echo json_encode($data);
  exit();
}
// å¦‚æœå®¢æˆ·ç«¯é‡‡ç”¨çš„æ˜¯ script æ ‡è®°å¯¹æˆ‘å‘é€çš„è¯·æ±‚
// ä¸€å®šè¦è¿”å›ä¸€æ®µ JavaScript
header(&#39;Content-Type: application/javascript&#39;);
$result = json_encode($data);
$callback_name = $_GET[&#39;callback&#39;];
echo &quot;typeof {$callback_name} === &#39;function&#39; &amp;&amp; {$callback_name}({$result})&quot;;</code></pre>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815191014.png" alt="image-20200815191013064" class="lazyload"></p>
<ul>
<li>åŸç”Ÿæ–¹å¼å®è·µjsonp</li>
</ul>
<p><code>server.js</code></p>
<pre><code class="javascript">//ç”¨æˆ·åæ£€æµ‹æ˜¯å¦å­˜åœ¨
app.all(&#39;/check-username&#39;,(request, response) =&gt; {
    // response.send(&#39;console.log(&quot;hello jsonp&quot;)&#39;);
    const data = {
        exist: 1,
        msg: &#39;ç”¨æˆ·åå·²ç»å­˜åœ¨&#39;
    };
    //å°†æ•°æ®è½¬åŒ–ä¸ºå­—ç¬¦ä¸²
    let str = JSON.stringify(data);
    //è¿”å›ç»“æœ
    response.end(`handle(${str})`);
});</code></pre>
<p>å‰ç«¯ä»£ç ï¼š</p>
<pre><code class="html">ç”¨æˆ·å: &lt;input type=&quot;text&quot; id=&quot;username&quot;&gt;
&lt;p&gt;&lt;/p&gt;
&lt;script&gt;
  //è·å– input å…ƒç´ 
  const input = document.querySelector(&#39;input&#39;);
  const p = document.querySelector(&#39;p&#39;);
  //å£°æ˜ handle å‡½æ•°
  function handle(data){
    input.style.border = &quot;solid 1px #f00&quot;;
    //ä¿®æ”¹ p æ ‡ç­¾çš„æç¤ºæ–‡æœ¬
    p.innerHTML = data.msg;
  }
  //ç»‘å®šäº‹ä»¶
  input.onblur = function(){
    //è·å–ç”¨æˆ·çš„è¾“å…¥å€¼
    let username = this.value;
    //å‘æœåŠ¡å™¨ç«¯å‘é€è¯·æ±‚ æ£€æµ‹ç”¨æˆ·åæ˜¯å¦å­˜åœ¨
    //1. åˆ›å»º script æ ‡ç­¾
    const script = document.createElement(&#39;script&#39;);
    //2. è®¾ç½®æ ‡ç­¾çš„ src å±æ€§
    script.src = &#39;http://127.0.0.1:8000/check-username&#39;;
    //3. å°† script æ’å…¥åˆ°æ–‡æ¡£ä¸­
    document.body.appendChild(script);
  }
&lt;/script&gt;</code></pre>
<ul>
<li>å°è£…æˆä¸€ä¸ªå‡½æ•°</li>
</ul>
<pre><code class="javascript">function jsonp (url, params, callback) {
  var funcName = &#39;jsonp_&#39; + Date.now() + Math.random().toString().substr(2, 5)

  if (typeof params === &#39;object&#39;) {
    var tempArr = []
    for (var key in params) {
      var value = params[key]
      tempArr.push(key + &#39;=&#39; + value)
    }
    params = tempArr.join(&#39;&amp;&#39;)
  }

  var script = document.createElement(&#39;script&#39;)
  script.src = url + &#39;?&#39; + params + &#39;&amp;callback=&#39; + funcName
  document.body.appendChild(script)

  window[funcName] = function (data) {
    callback(data)

    delete window[funcName]
    document.body.removeChild(script)
  }
}

jsonp(&#39;http://localhost/jsonp/server.php&#39;, { id: 123 }, function (res) {
  console.log(res)
})

jsonp(&#39;http://localhost/jsonp/server.php&#39;, { id: 123 }, function (res) {
  console.log(res)
})</code></pre>
<ul>
<li>jQueryæ–¹å¼å®è·µjsonp</li>
</ul>
<p><code>server.js</code></p>
<pre><code class="javascript">// jQuery jsonp
app.all(&#39;/jquery-jsonp-server&#39;,(request, response) =&gt; {
  // response.send(&#39;console.log(&quot;hello jsonp&quot;)&#39;);
  const data = {
    name:&#39;å°šç¡…è°·&#39;,
    city: [&#39;åŒ—äº¬&#39;,&#39;ä¸Šæµ·&#39;,&#39;æ·±åœ³&#39;]
  };
  //å°†æ•°æ®è½¬åŒ–ä¸ºå­—ç¬¦ä¸²
  let str = JSON.stringify(data);
  //æ¥æ”¶ callback å‚æ•°
  let cb = request.query.callback; // å‡½æ•°åä»å‰ç«¯è·å–
  //è¿”å›ç»“æœ
  response.end(`${cb}(${str})`);
});</code></pre>
<p>å‰ç«¯ä»£ç ï¼š</p>
<pre><code class="html">&lt;style&gt;
  #result{
    width:300px;
    height:100px;
    border:solid 1px #089;
  }
&lt;/style&gt;
&lt;script crossorigin=&quot;anonymous&quot; src=&#39;https://cdn.bootcss.com/jquery/3.5.0/jquery.min.js&#39;&gt;&lt;/script&gt;
&lt;button&gt;ç‚¹å‡»å‘é€ jsonp è¯·æ±‚&lt;/button&gt;
&lt;div id=&quot;result&quot;&gt;

&lt;/div&gt;
&lt;script&gt;
  $(&#39;button&#39;).eq(0).click(function(){
    $.getJSON(&#39;http://127.0.0.1:8000/jquery-jsonp-server?callback=?&#39;, function(data){
      $(&#39;#result&#39;).html(`
                åç§°: ${data.name}&lt;br&gt;
                æ ¡åŒº: ${data.city}
            `)
    });
  });
&lt;/script&gt;</code></pre>
<p>(2)CORS</p>
<p>HTTPè®¿é—®æ§åˆ¶ï¼ˆCORSï¼‰<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS</a></p>
<p>Cross Origin Resource Shareï¼Œè·¨åŸŸèµ„æºå…±äº«ã€‚CORSæ˜¯å®˜æ–¹çš„è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯ä¸éœ€è¦å†å®¢æˆ·ç«¯åšä»»ä½•ç‰¹æ®Šçš„æ“ä½œï¼Œå®Œå…¨åœ¨æœåŠ¡å™¨ä¸­è¿›è¡Œå¤„ç†ï¼Œæ”¯æŒgetå’Œpostè¯·æ±‚(å…¶ä»–ä¹Ÿæ”¯æŒ)ã€‚è·¨åŸŸèµ„æºå…±äº«æ ‡å‡†æ–°å¢äº†ä¸€ç»„HTTPé¦–éƒ¨å­—æ®µï¼Œå…è®¸æœåŠ¡å™¨å£°æ˜å“ªäº›æºç«™é€šè¿‡æµè§ˆå™¨æœ‰æƒé™è®¿é—®å“ªäº›èµ„æºã€‚</p>
<p>CORSæ˜¯é€šè¿‡è®¾ç½®ä¸€ä¸ªå“åº”å¤´æ¥å‘Šè¯‰æµè§ˆå™¨ï¼Œè¿™ä¸ªè¯·æ±‚å…è®¸è·¨åŸŸï¼Œæµè§ˆå™¨æ”¶åˆ°è¯¥å“åº”ä»¥åå°±ä¼šå¯¹å“åº”æ”¾è¡Œã€‚</p>
<p><code>server.js</code></p>
<pre><code class="javascript">app.all(&#39;/cors-server&#39;, (request, response)=&gt;{
  //è®¾ç½®å“åº”å¤´
  response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;); // å…è®¸æ‰€æœ‰æºç«™å‘é€è¯·æ±‚
  response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &#39;*&#39;); // å…è®¸æºå¸¦çš„å“åº”å¤´
  response.setHeader(&quot;Access-Control-Allow-Method&quot;, &#39;*&#39;); // å…è®¸è¯·æ±‚æ–¹æ³•
  // response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;http://127.0.0.1:5500&quot;); // å…è®¸å•ä¸ª
  response.send(&#39;hello CORS&#39;);
});</code></pre>
<p>æµ‹è¯•ï¼š</p>
<pre><code class="html">&lt;style&gt;
    #result{
        width:200px;
        height:100px;
        border:solid 1px #90b;
    }
&lt;/style&gt;
&lt;button&gt;å‘é€è¯·æ±‚&lt;/button&gt;
&lt;div id=&quot;result&quot;&gt;&lt;/div&gt;
&lt;script&gt;
  const btn = document.querySelector(&#39;button&#39;);
  btn.onclick = function(){
    //1. åˆ›å»ºå¯¹è±¡
    const x = new XMLHttpRequest();
    //2. åˆå§‹åŒ–è®¾ç½®
    x.open(&quot;GET&quot;, &quot;http://127.0.0.1:8000/cors-server&quot;);
    //3. å‘é€
    x.send();
    //4. ç»‘å®šäº‹ä»¶
    x.onreadystatechange = function(){
      if(x.readyState === 4){
        if(x.status &gt;= 200 &amp;&amp; x.status &lt; 300){
          //è¾“å‡ºå“åº”ä½“
          console.log(x.response);
        }
      }
    }
  }
&lt;/script&gt;</code></pre>
<pre><code class="php">// å…è®¸è¿œç«¯è®¿é—®(ç”šè‡³ç›´æ¥æ‰“å¼€æ–‡ä»¶çš„æ–¹å¼ä¹Ÿå¯ä»¥file://â€¦â€¦)
header(&#39;Access-Control-Allow-Origin: *&#39;) // å…è®¸æ‰€æœ‰
header(&#39;Access-Control-Allow-Origin: http://localhost/index.html&#39;) // å…è®¸å•ä¸ª</code></pre>
<p>eg:</p>
<pre><code class="php">&lt;?php

$conn = mysqli_connect(&#39;localhost&#39;, &#39;root&#39;, &#39;123456&#39;, &#39;demo&#39;);

$query = mysqli_query($conn, &#39;select * from users&#39;);

while ($row = mysqli_fetch_assoc($query)) {
  $data[] = $row;
}

// ä¸€è¡Œä»£ç æå®š
// å…è®¸è·¨åŸŸè¯·æ±‚
header(&#39;Access-Control-Allow-Origin: *&#39;);

header(&#39;Content-Type: application/json&#39;);
echo json_encode($data);</code></pre>
<p>å®¢æˆ·ç«¯</p>
<pre><code class="html">&lt;script src=&quot;jquery.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
  $.get(&#39;http://localhost/cors.php&#39;, {}, function (res) {
    console.log(res)
  })
&lt;/script&gt;</code></pre>
<p>è¿™ç§æ–¹æ¡ˆæ— åºå®¢æˆ·ç«¯ä½œå‡ºä»»ä½•å˜åŒ–(ä¸ç”¨æ”¹ä»£ç )ï¼Œåªæ˜¯åœ¨è¢«è¯·æ±‚çš„æœåŠ¡ç«¯å“åº”çš„æ—¶å€™<strong>æ·»åŠ ä¸€ä¸ª<code>Access-Control-Allow-Origin</code>çš„å“åº”å¤´</strong>ï¼Œè¡¨ç¤ºè¿™ä¸ªèµ„æºæ˜¯å¦å…è®¸æŒ‡å®šåŸŸè¯·æ±‚ã€‚</p>
<h2 id="å…­ã€XMLHttpRequest2-0"><a href="#å…­ã€XMLHttpRequest2-0" class="headerlink" title="å…­ã€XMLHttpRequest2.0"></a>å…­ã€XMLHttpRequest2.0</h2><blockquote>
<p>æš‚ä½œäº†è§£ï¼Œæ— éœ€ç€é‡çœ‹å¾…</p>
</blockquote>
<p>æ›´æ˜“ç”¨ï¼Œæ›´å¼ºå¤§ã€‚</p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">
  </article>

  <div class="nexmoe-post-meta">
    
        <a class="nexmoefont icon-appstore-fill -link" href="/categories/%E7%AC%94%E8%AE%B0/">ç¬”è®°</a><a class="nexmoefont icon-appstore-fill -link" href="/categories/%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a>
    
    
        <a class="nexmoefont icon-tag-fill -link" href="/tags/Ajax/" rel="tag">Ajax</a> <a class="nexmoefont icon-tag-fill -link" href="/tags/web/" rel="tag">web</a> <a class="nexmoefont icon-tag-fill -link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">å‰ç«¯</a>
    
</div>

  <div class="nexmoe-post-footer">
    <div style="text-align:center;color: #ccc;font-size:14px;">-------------æœ¬æ–‡ç»“æŸ<i class="fa fa-paw"></i>æ„Ÿè°¢æ‚¨çš„é˜…è¯»-------------</div>
    
      <!-- 
  <div class="nexmoe-post-copyright">
    <strong>æœ¬æ–‡ä½œè€…ï¼š</strong>Luwang<br>
    <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="https://blog.wallleap.cn/2020/08/20/AJAX/" title="https:&#x2F;&#x2F;blog.wallleap.cn&#x2F;2020&#x2F;08&#x2F;20&#x2F;AJAX&#x2F;" target="_blank" rel="noopener">https:&#x2F;&#x2F;blog.wallleap.cn&#x2F;2020&#x2F;08&#x2F;20&#x2F;AJAX&#x2F;</a><br>
    
      <strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬æ–‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> åè®®è¿›è¡Œè®¸å¯
    
  </div>
 -->

  <div class="my_post_copyright">
    <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script> 
    <script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <p><span>æœ¬æ–‡æ ‡é¢˜:</span>Ajaxå­¦ä¹ ç¬”è®°</a></p>
    <p><span>æ–‡ç« ä½œè€…:</span><a href="/" title="è®¿é—® {{ theme.author }} çš„ä¸ªäººåšå®¢">luwang</a></p>
    <p><span>å‘å¸ƒæ—¶é—´:</span>2020å¹´08æœˆ20æ—¥ - 12:08</p>
    <p><span>æœ€åæ›´æ–°:</span>2020å¹´09æœˆ11æ—¥ - 21:09</p>
    <p><span>åŸå§‹é“¾æ¥:</span><a href="/2020/08/20/AJAX/" title="Ajaxå­¦ä¹ ç¬”è®°">https://blog.wallleap.cn/2020/08/20/AJAX/</a>
    <span class="copy-path"  title="ç‚¹å‡»å¤åˆ¶æ–‡ç« é“¾æ¥"><i class="fa fa-clipboard" data-clipboard-text="https://blog.wallleap.cn/2020/08/20/AJAX/"  aria-label="å¤åˆ¶æˆåŠŸï¼"></i></span>
    </p>
    <p><span>è®¸å¯åè®®:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç» 4.0 å›½é™…</a> è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥åŠä½œè€…ã€‚</p>  
  </div>
  <script> 
      var clipboard = new Clipboard('.fa-clipboard');
        $(".fa-clipboard").click(function(){
        clipboard.on('success', function(){
          swal({   
            title: "",   
            text: 'å¤åˆ¶æˆåŠŸ',
            icon: "success", 
            showConfirmButton: true
            });
          });
      });  
    </script>
  

  
    
    <!-- <div style="text-align:center;color: #ccc;font-size:14px;margin-top: 46px;">-------------å–œæ¬¢å°±åˆ†äº«<i class="fa fa-paw"></i>ç–¼çˆ±å°±æ‰“èµ-------------</div>
    <div style="text-align:center; width: 100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div>
    <footer class="post-footer">
        <div class="post-lincenses"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i> çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a></div>
        <div class="post-tags">
        </div>
        <div class="post-share">
          <div class="social-share sharehidden share-component"></div>
          <i class="iconfont show-share icon-forward"></i>
        </div>
      </footer>.entry-footer -->
    
      <style>
/* .list, .list li, .list-left li {
	list-style: none;
	list-style-type: none;
	margin: 0px;
	padding: 0px;
} 
.pos-f {
	position: fixed;
} 
*/

.left-100 {
	width: 100%;
    height: 100%;
    float: left;
}
.blur {
	-webkit-filter: blur(3px);
	filter: blur(3px);
}
.tr3, .list li {
	transition: all .3s;
}
.hidden {
    display: none;
}
.click-cursor, .icon-donate, .list li {
    cursor: pointer;
}
#drinks-box .opacity-show {
    opacity: 1;
}
#drinks-box {
    width: 320px;
    height: 240px;
    margin: 0 auto;
	text-align: center;
	/* left: calc(50% - 160px);
	top: calc(50% - 120px);
    position: fixed; */
    position: relative;
    top:0;
    left: 0;
}
#drinks-icons {
    background: no-repeat center center url(https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/images/donate/drinks/text.png);
}
.drinks-button>div {
    position: absolute;
    top: 0;
    left: 0;
	transition: all 0.3s;
	transform-style: preserve-3d;
    transform-origin: center center;
}
.icon-donate {
    width: 64px;
    height: 64px;
    position: absolute;
	left: calc(50% - 32px);
	top: calc(50% - 32px);
}
.icon-donate img {
    max-width: 64px;
    max-height: 64px;
}
#drinks-button-box {
    display: none;
    opacity: 0;
    transform: scale(1.3,1.3);
}
#drinks-button-bg {
    position: absolute;
    top: 70px;
    left: 0;
    height: 100px;
    opacity: 0;
}
#donate-buttons {
    position: absolute;
    overflow: hidden;
    top: calc(50% - 14px);
    left: 20px;
    height: 28px;
    border-radius: 6px;
    background-color: #ff006e;
    box-shadow: 0 10px 20px 1px rgba(255, 0, 110, 0.5);
}
#donate-buttons a, #github-box a {
    display: block;
}
li[id$="_donate"] {
    position: relative;
    float: left;
    width: 70px;
    height: 28px;
    line-height: 600px;
    overflow: hidden;
	cursor: pointer;
	background: no-repeat center center;
    background-size: 45px;
    text-align: center;
}
li[id$="_donate"]::after {
    content: "";
    position: absolute;
    top: -5px;
    left: calc(50% - 5px);
    height: 0;
    width: 0;
    opacity: 0;
	border: 5px solid #fff;
	border-color: #fff transparent transparent transparent;
    transition: all .3s;
}
li[id$="_donate"]:hover::after {
    opacity: 1;
    top: 0px;
}
#github-box {
    width: 32px;
    height: 32px;
    position: absolute;
    top: calc(50% - 16px);
    background: no-repeat center center url(https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/images/donate/drinks/github.svg);
    background-size: contain;
    right: 72px;
    line-height: 600px;
    overflow: hidden;
    transform: rotatez(20deg );
    opacity: 0;
    transition: all .3s ease-out;
}
#drinks-button-box:hover #github-box, #drinks-button-box.Mobile #github-box {
    top: calc(50% - 40px);
    right: 64px;
    transform: rotatez(5deg );
    opacity: 0.8;
}
#paypal_donate {
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjIsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iUGF5UGFsIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDUxMiAxNDUiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiAxNDU7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsOiNGRkZGRkY7fQ0KPC9zdHlsZT4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00OS41LDcyLjljLTMuNywwLTcuMywwLTExLDBjLTEuOCwwLTMuMSwwLjctMy42LDIuNmMtMS4yLDQuMi02LjMsMjIuOS03LjYsMjguMWMtMC43LDIuNy0yLjEsMy44LTQuOSwzLjgNCgljLTUuNywwLTExLjUsMC0xNy4yLDBjLTMuMSwwLTQuNC0xLjQtMy45LTQuNGMwLjQtMi42LDE1LjQtNjcuMiwyMi4zLTk2LjlDMjQuNiwyLjMsMjYuMiwxLDMwLjIsMWMxMC43LDAsNDMuNCwwLjIsNDkuMSwwLjINCglDOTMuNywxLjMsMTA1LjUsMTIuNywxMDYsMjdjMC4zLDkuNi0xLjUsMTguNy02LjksMjYuOGMtNS4zLDcuOS0xMi44LDEyLjgtMjEuNywxNS43QzY4LjMsNzIuNSw1OSw3My40LDQ5LjUsNzIuOXogTTUwLjIsNTMNCgljMi42LTAuMiw0LjctMC4zLDYuOC0wLjVjNS4zLTAuNiwxMC40LTIsMTQuOC01LjNjNS0zLjgsNi43LTksNS43LTE1LjFjLTAuOS01LjYtNC42LTguNi05LjctMTAuM0M2Mi42LDIwLDU3LjIsMjAsNTEuOCwyMC40DQoJYy0yLjcsMC4yLTQuNSwxLjctNS4yLDQuNWMtMC42LDIuNi0xLjUsNS4yLTIuMSw3LjhjLTEuMSw0LjgtMi4yLDkuNy0zLjEsMTQuNmMtMC42LDMuMSwwLjUsNC43LDMuNSw1LjINCglDNDYuOCw1Mi45LDQ4LjcsNTIuOSw1MC4yLDUzeiIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTIwMywxNDMuNmMzLjEsMCw2LjItMC4xLDkuMywwYzIsMC4xLDMuNS0wLjUsNC43LTIuMmMxLjktMi44LDYzLjQtMTAyLjksNjguNS0xMTEuN2MxLjMtMi4yLDAuNS00LTEuOS00DQoJYy02LjctMC4xLTEzLjUsMC0yMC4yLDAuMWMtMS43LDAtMywwLjktNCwyLjVjLTQuOCw3LjgtMjQuMywzOS4yLTI5LjMsNDcuMmMtMC4zLDAuNS0xLjEsMS0xLjUsMC45Yy0wLjYtMC4xLTEuMS0wLjgtMS41LTEuMw0KCWMtMC4yLTAuMy0wLjItMC43LTAuMy0xLjFjLTAuNy0zLjgtNS4zLTMyLjEtNy00Mi40Yy0wLjctNC40LTIuOS02LjEtNy4zLTYuMWMtNC42LDAtOS4yLDAuMi0xMy44LDAuM2MtMy42LDAuMS01LjYsMi40LTUuMSw1LjkNCgljMC4zLDEuOSwxMi40LDY2LjcsMTQuNSw3Ny40YzAuMSwwLjUsMC4yLDEsMC4xLDEuNGMtMC41LDEuNC0wLjksMi44LTEuNiw0Yy00LjcsNy41LTkuNSwxNS0xNC4yLDIyLjVjLTAuNCwwLjctMC45LDEuNC0xLjEsMi4xDQoJYy0wLjYsMi41LTAuOCw0LjIsMi45LDQuMkMxOTcsMTQzLjMsMjAzLDE0My41LDIwMywxNDMuNnoiLz4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xNDkuOCw5OS4yYy0xLjYsMC45LTIuOCwxLjUtMy45LDIuMWMtMi45LDEuNi01LjcsMy4xLTguNiw0LjhjLTUuNCwzLjItMTEuMywzLjktMTcuMywzLjcNCgljLTMuMS0wLjEtNi4yLTAuNC05LjEtMS4yYy03LjctMi0xMi4zLTctMTMuMi0xNS4xYy0wLjgtNi42LTAuMS0xMy4xLDMuMy0xOWMzLjgtNi43LDkuOS0xMC4zLDE2LjktMTIuNmM2LjMtMi4xLDEyLjktMi42LDE5LjUtMi43DQoJYzUuMi0wLjEsMTAuNC0wLjMsMTUuNy0wLjRjMC42LDAsMS4yLTAuMiwxLjgtMC4xYzIuNSwwLjEsMy42LTEuNSw0LTMuNmMwLjMtMS43LDAuNi0zLjYsMC40LTUuM2MtMC40LTMuNS0yLjMtNS43LTUuOC02DQoJYy00LjMtMC41LTguNi0wLjctMTIuOS0wLjZjLTYuMywwLjItMTIuNSwxLTE4LjUsMi44Yy0wLjksMC4zLTEuOCwwLjctMi44LDEuMWMtMi40LDEtNC42LTAuMi00LjQtMi43YzAuMy00LjEsMC44LTguMiwxLjctMTIuMg0KCWMwLjUtMi4yLDIuNC0zLjYsNC43LTRjNy44LTEuNiwxNS43LTIuNCwyMy43LTIuN2M2LjUtMC4yLDEyLjksMCwxOS4yLDEuNWM1LjgsMS4zLDEwLjYsNC4zLDE0LjcsOC41YzQuNCw0LjYsNS45LDEwLjIsNC44LDE2LjMNCgljLTIuMSwxMS4zLTkuNCw0NS41LTEwLjcsNTEuNGMtMC42LDIuOS0yLjMsNC40LTUuMyw0LjVjLTUuNSwwLjItMTEsMC4yLTE2LjUsMC4zYy0xLjYsMC0yLjEtMC42LTItMi4yDQoJQzE0OS41LDEwMy41LDE0OS43LDEwMS42LDE0OS44LDk5LjJ6IE0xNDcuNyw3MC4xYzAsMCwwLDAuMSwwLDAuMWMtMi41LDAuMi00LjksMC4zLTcuNCwwLjVjLTQuMSwwLjQtOC4xLDEuMS0xMS44LDIuOQ0KCWMtNC45LDIuNC02LjksNS44LTYuNiwxMS4zYzAuMyw0LjksMy4zLDguMSw4LjIsOC43YzQsMC41LDcuOSwwLjEsMTEuNy0wLjdjMy4xLTAuNiw1LjktMiw3LjktNC41YzMuOC00LjcsNS0xMC4yLDUtMTYuMQ0KCWMwLTEuNC0wLjktMi4xLTIuMy0yLjJDMTUwLjksNzAuMSwxNDkuMyw3MC4xLDE0Ny43LDcwLjF6Ii8+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzI1LjksNzIuOWMtMy42LDAtNy4zLDAtMTEsMGMtMS44LDAtMy4xLDAuNy0zLjYsMi42Yy0xLjIsNC4yLTYuMywyMi45LTcuNiwyOC4xYy0wLjcsMi43LTIuMSwzLjgtNC45LDMuOA0KCWMtNS43LDAtMTEuNSwwLTE3LjIsMGMtMy4xLDAtNC40LTEuNC0zLjktNC40YzAuNC0yLjYsMTUuNC02Ny4yLDIyLjMtOTYuOWMwLjktMy45LDIuNi01LjIsNi42LTUuMmMxMC43LDAsNDMuNCwwLjIsNDkuMSwwLjINCglDMzcwLDEuMywzODEuOCwxMi43LDM4Mi4zLDI3YzAuMyw5LjYtMS41LDE4LjctNi45LDI2LjhjLTUuMyw3LjktMTIuOCwxMi44LTIxLjcsMTUuN0MzNDQuNiw3Mi41LDMzNS4zLDczLjQsMzI1LjksNzIuOXogTTMyNi41LDUzDQoJYzIuNi0wLjIsNC43LTAuMyw2LjgtMC41YzUuMy0wLjYsMTAuNC0yLDE0LjgtNS4zYzUtMy44LDYuNy05LDUuNy0xNS4xYy0wLjktNS42LTQuNi04LjYtOS43LTEwLjNjLTUuMi0xLjctMTAuNi0xLjgtMTYuMS0xLjMNCgljLTIuNywwLjItNC41LDEuNy01LjIsNC41Yy0wLjYsMi42LTEuNSw1LjItMi4xLDcuOGMtMS4xLDQuOC0yLjIsOS43LTMuMSwxNC42Yy0wLjYsMy4xLDAuNSw0LjcsMy41LDUuMg0KCUMzMjMuMSw1Mi45LDMyNSw1Mi45LDMyNi41LDUzeiIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTQyNS41LDk5LjJjLTEsMC40LTEuNiwwLjYtMi4yLDAuOWMtNC41LDIuNC05LjEsNC44LTEzLjYsNy4yYy00LjQsMi4zLTkuMiwyLjYtMTQsMi42Yy00LDAtOC0wLjUtMTEuOC0yLjENCgljLTYuNi0yLjgtMTAtNy45LTEwLjctMTQuOWMtMC41LTQuOS0wLjEtOS44LDEuNi0xNC40YzIuOC03LjksOC44LTEyLjcsMTYuNC0xNS43YzYuOS0yLjYsMTQtMy40LDIxLjMtMy41DQoJYzUuNi0wLjEsMTEuMy0wLjMsMTYuOS0wLjVjMy41LTAuMSw0LjMtMC43LDUuMS00LjFjMC40LTEuNywwLjUtMy41LDAuNC01LjJjLTAuMy0zLjItMi4zLTUuNC01LjctNS45Yy0zLjctMC41LTcuNS0wLjgtMTEuMi0wLjcNCgljLTcsMC4yLTEzLjksMS0yMC42LDIuOWMtMC44LDAuMi0xLjYsMC42LTIuNCwxYy0yLjYsMS4yLTQuOCwwLTQuNS0yLjhjMC4zLTMuOCwwLjgtNy42LDEuNS0xMS40YzAuNC0yLjMsMi0zLjksNC40LTQuMw0KCWM0LjgtMC44LDkuNi0xLjgsMTQuNS0yLjFjNi4xLTAuNSwxMi4zLTAuNywxOC41LTAuNmM4LDAuMiwxNS42LDEuNywyMi4xLDdjMy45LDMuMiw2LjksNi45LDcuOCwxMmMwLjYsMy42LDAuMiw3LjItMC41LDEwLjcNCgljLTMuMywxNS41LTYuNiwzMS05LjksNDYuNWMtMC45LDQuMS0yLjMsNS40LTYuNCw1LjVjLTUuMSwwLjItMTAuMiwwLjItMTUuMiwwLjNjLTEuOCwwLTIuMi0wLjQtMi4xLTIuMg0KCUM0MjUuMywxMDMuNSw0MjUuNCwxMDEuNiw0MjUuNSw5OS4yeiBNNDI1LjgsNzAuMWMtMy4yLDAuMi02LjcsMC4zLTEwLjIsMC43Yy00LDAuNC03LjksMS4yLTExLjQsMy4xYy0zLjMsMS43LTUuNiw0LjMtNiw4LjENCgljLTAuNiw1LjMsMS4yLDEwLjksOC40LDExLjdjNC4zLDAuNSw4LjQsMC4xLDEyLjUtMC45YzMuOC0wLjksNi44LTMuMiw4LjctNi42YzIuMy00LDMuMi04LjQsMy40LTEyLjljMC4xLTIuMy0wLjktMy4xLTMuMi0zLjINCglDNDI3LjQsNzAsNDI2LjcsNzAuMSw0MjUuOCw3MC4xeiIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTQ4NC40LDEwNy40YzIuMy0wLjEsMi44LTAuNSwzLjMtMi41YzIuMS04LjcsMTcuNS03NC4xLDIzLjItOTguMWMwLjYtMi42LTEuMi00LjktNC00LjkNCgljLTUuNCwwLTEwLjgtMC4xLTE2LjItMC4xYy0zLjMsMC00LjksMS4yLTUuNiw0LjRjLTEuMiw0LjgtMjAuNyw5My45LTIxLjMsOThjLTAuMywyLDAuOCwyLjksMi45LDIuOQ0KCUM0NjkuNSwxMDcuMiw0ODIuOSwxMDcuNCw0ODQuNCwxMDcuNHoiLz4NCjwvc3ZnPg0K);
}
#btc_donate{
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjIsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAxMzAzLjYgMjc0LjYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEzMDMuNiAyNzQuNjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9DQo8L3N0eWxlPg0KPGc+DQoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEzNi42LDkzLjZsLTcuNSwzMC4xYzguNSwyLjEsMzQuNywxMC44LDM5LTYuMkMxNzIuNSw5OS43LDE0NS4xLDk1LjcsMTM2LjYsOTMuNnoiLz4NCgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTcwLjUsNC4xQzk3LTE0LjIsMjIuNSwzMC41LDQuMiwxMDQuMWMtMTguMyw3My41LDI2LjQsMTQ4LDk5LjksMTY2LjNjNzMuNiwxOC4zLDE0OC0yNi40LDE2Ni40LTk5LjkNCgkJQzI4OC44LDk2LjksMjQ0LDIyLjQsMTcwLjUsNC4xeiBNMTk3LjgsMTE3LjdjLTIsMTMuNC05LjQsMTkuOC0xOS4yLDIyLjFjMTMuNSw3LDIwLjQsMTcuOCwxMy44LDM2LjUNCgkJYy04LjEsMjMuMi0yNy40LDI1LjItNTMuMSwyMC4zbC02LjIsMjVsLTE1LjEtMy44bDYuMS0yNC42Yy0zLjktMS03LjktMi0xMi0zLjFsLTYuMiwyNC44bC0xNS0zLjhsNi4yLTI1DQoJCWMtMy41LTAuOS03LjEtMS45LTEwLjctMi44bC0xOS42LTQuOWw3LjUtMTcuMmMwLDAsMTEuMSwyLjksMTAuOSwyLjdjNC4zLDEuMSw2LjItMS43LDYuOS0zLjZsOS45LTM5LjVjMC42LDAuMSwxLjEsMC4zLDEuNiwwLjQNCgkJYy0wLjYtMC4yLTEuMS0wLjQtMS42LTAuNWw3LTI4LjJjMC4yLTMuMi0wLjktNy4yLTctOC44YzAuMi0wLjItMTAuOS0yLjctMTAuOS0yLjdsNC0xNi4xbDIwLjgsNS4ydjAuMWMzLjEsMC44LDYuMywxLjUsOS42LDIuMw0KCQlsNi4yLTI0LjdsMTUuMSwzLjhsLTYsMjQuM2M0LDAuOSw4LjEsMS45LDEyLjEsMi44bDYtMjQuMWwxNS4xLDMuOEwxNjcuNiw4M0MxODYuNiw4OS42LDIwMC41LDk5LjQsMTk3LjgsMTE3Ljd6Ii8+DQoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEyOTQuMiwxMDcuMmMtMTAuMy0xNS43LTI4LjktMjMuNS01NS45LTIzLjVjLTkuMiwwLTE3LjUsMC40LTI0LjcsMS4yYy03LjMsMC44LTEzLjksMS44LTE5LjcsMy4xDQoJCWMtNS45LDEuMi0xMS4yLDIuNi0xNS45LDQuMWMtNC43LDEuNS05LjEsMi45LTEyLjksNGwtNDEuOSwxNzMuNmg1MS41bDMzLjYtMTQwLjdjNi45LTEuNCwxMy43LTIuMSwyMC40LTIuMWM2LjksMCwxMiwxLjMsMTUuNCw0DQoJCWMzLjMsMi43LDUuNSw2LjIsNi40LDEwLjRjMSw0LjMsMSw5LjIsMC4yLDE0LjlzLTEuOSwxMS41LTMuMywxNy41bC0yMi44LDk2LjFoNTEuNWwyMy41LTk4LjINCgkJQzEzMDYuMywxNDQuNCwxMzA0LjUsMTIyLjksMTI5NC4yLDEwNy4yeiIvPg0KCTxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iMTA3Ni42LDg3LjkgMTAzMy40LDI2OS44IDEwODQuNiwyNjkuOCAxMTI4LjIsODcuOSAJIi8+DQoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEwOTAuMiw1OS4zYzUuNyw0LjMsMTIuMiw2LjQsMTkuMyw2LjRjNC45LDAsOS40LTAuOSwxMy43LTIuOGM0LjMtMS44LDgtNC4zLDExLjItNy40DQoJCWMzLjItMy4xLDUuOC02LjgsNy44LTExLjFjMS45LTQuMywzLTguOCwzLTEzLjdjMC04LjctMi45LTE1LjMtOC43LTE5LjVjLTUuOC00LjMtMTIuMi02LjQtMTkuNC02LjRjLTQuOCwwLTkuNCwwLjktMTMuNiwyLjgNCgkJcy04LDQuMy0xMS4yLDcuNHMtNS44LDYuOC03LjgsMTEuMXMtMi45LDguOC0yLjksMTMuNkMxMDgxLjUsNDguNiwxMDg0LjQsNTUuMSwxMDkwLjIsNTkuM3oiLz4NCgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNTIwLjYsNTkuM2M1LjcsNC4zLDEyLjIsNi40LDE5LjQsNi40YzQuOCwwLDkuNC0wLjksMTMuNy0yLjhjNC4yLTEuOCw4LTQuMywxMS4yLTcuNA0KCQljMy4yLTMuMSw1LjgtNi44LDcuOC0xMS4xczIuOS04LjgsMi45LTEzLjdjMC04LjctMi45LTE1LjMtOC42LTE5LjVjLTUuOC00LjMtMTIuMi02LjQtMTkuMy02LjRjLTQuOSwwLTkuNCwwLjktMTMuNywyLjgNCgkJcy04LDQuMy0xMS4yLDcuNHMtNS44LDYuOC03LjgsMTEuMWMtMiw0LjMtMyw4LjktMywxMy43QzUxMiw0OC42LDUxNC45LDU1LjEsNTIwLjYsNTkuM3oiLz4NCgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTI1LjMsMTM4LjhMMTE3LDE3MmMxMC4yLDIuNSw0MS43LDEyLjcsNDYuNC02LjFDMTY4LjIsMTQ2LjQsMTM1LjUsMTQxLjQsMTI1LjMsMTM4Ljh6Ii8+DQoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTgwOC4xLDEyNi42YzcuMiwwLDEzLjIsMC43LDE4LjIsMi4zYzUsMS41LDkuNywzLjEsMTQuNCw1bDE3LjctNDAuMWMtNi43LTMuMi0xNC4xLTUuOC0yMi4zLTcuOA0KCQlzLTE3LjQtMy0yNy44LTNjLTE2LjYsMC0zMS43LDMtNDUuMSw5Yy0xMy41LDYtMjUsMTQuMi0zNC40LDI0LjVjLTkuNSwxMC40LTE2LjcsMjIuNS0yMS44LDM2LjNjLTUuMSwxMy44LTcuNiwyOC42LTcuNiw0NC4zDQoJCWMwLDEwLjQsMS41LDIwLjMsNC4zLDI5LjdjMi45LDkuNSw3LjUsMTcuNywxNCwyNC43YzYuNSw3LDE0LjYsMTIuNiwyNC41LDE2LjhjOS45LDQuMSwyMiw2LjIsMzYuMyw2LjJjMTAuOCwwLDIwLjItMSwyOC0yLjkNCgkJYzcuOC0yLDE1LTQuMywyMS40LTYuOGwtMy44LTQxLjFjLTQuOSwyLjEtMTAuNCwzLjgtMTYuNiw1LjJjLTYuMiwxLjQtMTIuNywyLjEtMTkuNCwyLjFjLTEzLjYsMC0yMi45LTMuNi0yOC0xMC45DQoJCWMtNS4xLTcuMy03LjYtMTYuOC03LjYtMjguNWMwLTE5LjgsNS0zNS42LDE1LjEtNDcuNEM3NzcuNSwxMzIuNSw3OTEsMTI2LjYsODA4LjEsMTI2LjZ6Ii8+DQoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMTEuMSwxMDQuMWMtNS45LTYuNy0xMy40LTExLjktMjIuNS0xNS42cy0xOS43LTUuNi0zMS43LTUuNmMtMTYuMywwLTMwLjksMy41LTQzLjUsMTAuNQ0KCQljLTEyLjcsNy4xLTIzLjQsMTYuMS0zMi4xLDI3LjJjLTguOCwxMS4xLTE1LjQsMjMuNS0xOS45LDM3LjNzLTYuNywyNy43LTYuNyw0MS41YzAsMTEsMS41LDIxLjEsNC41LDMwLjJjMyw5LjEsNy40LDE3LDEzLjMsMjMuNw0KCQljNS45LDYuNywxMy4zLDExLjksMjIuMywxNS42YzksMy43LDE5LjYsNS41LDMxLjgsNS41YzE2LjgsMCwzMS43LTMuNSw0NC40LTEwLjZjMTIuOC03LDIzLjUtMTYuMSwzMi0yNy4xDQoJCWM4LjUtMTEuMSwxNS0yMy41LDE5LjQtMzcuM2M0LjQtMTMuOSw2LjYtMjcuNyw2LjYtNDEuNWMwLTExLjEtMS41LTIxLjItNC41LTMwLjJDMTAyMS40LDExOC43LDEwMTYuOSwxMTAuOCwxMDExLjEsMTA0LjF6DQoJCSBNOTc0LjgsMTg1LjljLTIsOC00LjksMTUuMy04LjgsMjJjLTMuOSw2LjctOC44LDEyLjItMTQuNSwxNi42Yy01LjgsNC40LTEyLjQsNi42LTIwLjEsNi42Yy05LjcsMC0xNi40LTMuMi0yMC4xLTkuNw0KCQljLTMuNy02LjUtNS41LTE1LjUtNS41LTI3YzAtNy4yLDEtMTQuNywyLjktMjIuNmMyLTcuOSw0LjktMTUuMyw4LjgtMjJjMy45LTYuNyw4LjctMTIuMiwxNC41LTE2LjZjNS43LTQuNCwxMi40LTYuNiwyMC02LjYNCgkJYzkuNywwLDE2LjQsMy4yLDIwLjEsOS43YzMuNyw2LjUsNS42LDE1LjUsNS42LDI3Qzk3Ny43LDE3MC40LDk3Ni43LDE3OCw5NzQuOCwxODUuOXoiLz4NCgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNjE4LjgsMTkzLjdsMTUuMi02My42aDU3bDEwLjQtNDIuMkg2NDRsMTMuMi01My42bC01My42LDguM2wtMzMuOSwxNDMuMmMtMi44LDExLjgtNC40LDIyLjktNC44LDMzLjUNCgkJYy0wLjUsMTAuNiwxLjIsMjAsNC44LDI4LjJjMy43LDguMiw5LjksMTQuNywxOC43LDE5LjRjOC44LDQuNywyMS4xLDcuMSwzNyw3LjFjMTEuMSwwLDIwLjYtMC45LDI4LjctMi44YzguMS0xLjgsMTUuNi00LDIyLjUtNi42DQoJCWwtMy44LTM5LjRjLTUuMywxLjktMTAuNSwzLjMtMTUuNyw0LjNzLTEwLjYsMS42LTE2LjEsMS42Yy02LjcsMC0xMS44LTAuOS0xNS40LTIuOGMtMy42LTEuOC02LjEtNC40LTcuNC03LjgNCgkJYy0xLjQtMy4zLTItNy4zLTEuNy0xMS45QzYxNi42LDIwMy45LDYxNy40LDE5OSw2MTguOCwxOTMuN3oiLz4NCgk8cG9seWdvbiBjbGFzcz0ic3QwIiBwb2ludHM9IjQ2My45LDI2OS44IDUxNS4xLDI2OS44IDU1OC43LDg3LjkgNTA3LjEsODcuOSAJIi8+DQoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTQ0NCwxMDUuOGMtNS40LTYuNy0xMi0xMi0yMC4xLTE1LjljLTgtMy45LTE3LjYtNS45LTI4LjctNS45Yy01LjMsMC0xMC4yLDAuNi0xNC45LDEuNw0KCQljLTQuNiwxLjItOS4yLDIuOC0xMy44LDQuOGwyMS40LTg5LjJsLTUzLjYsOC4zTDI3NC41LDI2MWM2LjcsMy4yLDEzLjgsNS44LDIxLjMsNy42YzcuNSwxLjksMTQuNiwzLjIsMjEuMyw0LjINCgkJYzYuNywwLjksMTIuNiwxLjQsMTcuOCwxLjVjNS4yLDAuMSw4LjgsMC4yLDEwLjksMC4yYzE2LjEsMCwzMS4xLTMuMSw0NC45LTkuMnMyNS44LTE0LjQsMzYtMjQuOXMxOC4yLTIyLjgsMjQtMzcNCgkJYzUuOS0xNC4yLDguOC0yOS4yLDguOC00NS4xYzAtMTAuNC0xLjMtMjAtMy44LTI5QzQ1My4yLDEyMC40LDQ0OS4zLDExMi41LDQ0NCwxMDUuOHogTTQwMy45LDE4OC4xYy0zLDguMy03LjEsMTUuNy0xMi4zLDIyLjMNCgkJYy01LjIsNi42LTExLjQsMTEuOC0xOC41LDE1LjdzLTE0LjcsNS45LTIyLjgsNS45Yy0yLjUsMC00LjYsMC02LjIsMHMtMy0wLjEtNC4yLTAuMmMtMS4xLTAuMS0yLjItMC4zLTMuMy0wLjUNCgkJYy0xLTAuMi0yLjMtMC40LTMuNi0wLjdsMjIuOC05NC43YzQuMi0zLjcsOC44LTYuMSwxNC03LjNjNS4yLTEuMSw5LjQtMS43LDEyLjYtMS43YzkuOSwwLDE2LjcsMy4xLDIwLjQsOS4zDQoJCWMzLjcsNi4yLDUuNSwxNC45LDUuNSwyNS45QzQwOC40LDE3MS4yLDQwNi45LDE3OS44LDQwMy45LDE4OC4xeiIvPg0KPC9nPg0KPC9zdmc+DQo=);
}
#alipay_donate{
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjIsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDQ0OC41IDE0NS41IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDguNSAxNDUuNTsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2VuYWJsZS1iYWNrZ3JvdW5kOm5ldyAgICA7fQ0KCS5zdDF7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojRkZGRkZGO30NCjwvc3R5bGU+DQo8ZyBpZD0i5Zu+5bGCXzIiPg0KPC9nPg0KPGcgaWQ9IuWbvuWxgl8xIj4NCgk8ZyBpZD0i5qSt5ZyGXzJfMV8iIGNsYXNzPSJzdDAiPg0KCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTA1LjYsMEg4MS44djE4LjdoLTQ4djkuOGg0OHYxOEg0OC4xdjExLjFoNjcuNGMwLDAsMCwxNS45LTIwLjMsMzcuNlM2Ny40LDEyMC4yLDU3LjgsMTIzcy0yNiwyLjQtMzEuNS0xLjUNCgkJCXMtMTEuOC04LjktMTEuMy0xOFMyNi45LDg0LjEsMzMuOSw4M2MwLDAtMjAtMi4yLTI0LjUsMTguMWMtMy41LDE1LjYsNi42LDIzLjMsMTIuNCwyNy4yczE4LjIsOC41LDI2LjMsOXMyNS44LTAuNiw0Mi43LTEyLjgNCgkJCWMxNi44LTEyLjIsMzcuMy0zNi43LDQzLjUtNTEuOHM4LjktMjEuMyw5LjgtMjYuMmgtMzguNHYtMThoNTAuMnYtOS44aC01MC4yVjAiLz4NCgkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTE4NiwwYzAsMC0yLjUsMjEuNS0zMy44LDQ1bDMuNiw1LjNjMCwwLDEzLjktNS41LDE3LjQtOC4zdjgwLjNIMTk4VjI1LjVjMCwwLDEyLTEyLjUsMTItMjUuNQ0KCQkJQzIxMCwwLDE4NiwwLDE4NiwweiIvPg0KCQk8cG9seWdvbiBjbGFzcz0ic3QxIiBwb2ludHM9IjI0NiwwIDI0NiwyNyAyMDIuNSwyNyAyMDIuNSwzNi4xIDI0NiwzNi4xIDI0NiwxMjEuNSAyNzAuMSwxMjEuNSAyNzAuMSwzNi4xIDI4MS4zLDM2LjEgMjgxLjMsMjcgDQoJCQkyNzAuMSwyNyAyNzAuMSwwIAkJIi8+DQoJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zNjQuNSwwdjExLjJINDExdjcuNWMwLDIyLjEtMTQuMiwyNC44LTE0LjIsMjQuOGgtMzIuM1Y2M2gzMi4zdjkuOGgtMzIuM3Y0NS44aC0yNC43VjcyLjhoLTM0LjZWNjNoMzQuNg0KCQkJVjQzLjVoLTQ5LjVWOC4zaDIzLjF2M2gyNi40VjBIMzY0LjV6IE0zMTMuMywyMS41djEzaDc3LjR2LTEzSDMxMy4zeiIvPg0KCTwvZz4NCgk8ZyBpZD0i5qSt5ZyGXzFfMV8iIGNsYXNzPSJzdDAiPg0KCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDQuMSwxMzYuN2MwLDAtMjIuNS0zLjctMzIuMS0yMC41Yy0zLjctNi40LTQtMTkuMyw2LTI3LjhjOC40LTcuMSwxOS41LTYuNiwzMy44LTNzMjQuNCw4LjEsNDIuOCwxNy4zDQoJCQljMTguNSw5LjMsNDQuOSwyMi41LDc4LjcsMjkuNmMzMy43LDcuMSw1Mi4zLDkuNCw3Mi44LDEwLjljMzUuNCwyLjYsMTQ5LjQtMi40LDE2NS02bDM3LjUtMzljMCwwLTExMi45LDE3LjQtMTgzLjgsMTgNCgkJCWMtNzAuOCwwLjYtNzguOC0zLjctOTUuMy02LjhTMTA5LjYsOTIuMyw5Ni44LDg3Yy02LjMtMi42LTQxLjctMTYuMy02My0xNC4zUzEuMiw4NCwwLjgsOTguM1M1LjgsMTMyLjIsNDQuMSwxMzYuN3oiLz4NCgkJDQoJCQk8cmVjdCB4PSIyMDYuNiIgeT0iNDYuNyIgdHJhbnNmb3JtPSJtYXRyaXgoMC43MDcxIC0wLjcwNzEgMC43MDcxIDAuNzA3MSAyMS4zNjgzIDE3NC42Mzk3KSIgY2xhc3M9InN0MSIgd2lkdGg9IjI5LjciIGhlaWdodD0iMjkuNyIvPg0KCQkNCgkJCTxyZWN0IHg9IjM3OC40IiB5PSI3OC45IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjcwNzEgLTAuNzA3MSAwLjcwNzEgMC43MDcxIDUwLjc0MDMgMzAxLjE0OTEpIiBjbGFzcz0ic3QxIiB3aWR0aD0iMjAuOSIgaGVpZ2h0PSIyMC45Ii8+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=);
}
#wechat_donate{
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjIsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i5Zu+5bGCXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgNTMxLjIgMTYxLjciIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUzMS4yIDE2MS43OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDojRkZGRkZGO30NCjwvc3R5bGU+DQo8Zz4NCgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNjguNiwwQzMxLjEtMC42LDAsMjcsMCw1OS41YzAsMTguOCw4LjgsMzUsMjUuOSw0N2MwLDAtNi4zLDIwLjctNi4yLDIxLjFjMC4xLDAuNCwxLjUsMS4yLDEuOSwxDQoJCWMwLjQtMC4yLDIyLjYtMTMuNSwyMi42LTEzLjVjMTcsNS44LDI2LjksMy45LDI3LjQsMy45Yy0xLjctNS0yLjgtMTIuNy0xLjUtMjBjNi42LTM4LjEsNDUuNi01MCw2Ny00Ny45DQoJCUMxMzEuMiwyMy40LDEwNS42LDAuNSw2OC42LDB6IE00Mi41LDQ5LjFjLTQuOSwwLTguOS00LTguOS04LjlzNC04LjksOC45LTguOXM4LjksNCw4LjksOC45UzQ3LjQsNDkuMSw0Mi41LDQ5LjF6IE05Ni40LDQ5LjENCgkJYy00LjksMC04LjktNC04LjktOC45czQtOC45LDguOS04LjlzOC45LDQsOC45LDguOVMxMDEuNCw0OS4xLDk2LjQsNDkuMXoiLz4NCgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTkyLDEwNC43YzAtMjcuOC0yNi45LTQ5LjItNTguMS00OS4yYy0zMy4xLDAtNTkuNCwyMS44LTU5LjQsNDkuNmMwLDI3LjksMjUuMSw1MSw1OS41LDUxLjINCgkJYzYuOSwwLDE3LjItMS43LDI0LjItNC42YzAsMCwxNi42LDEwLjEsMTcuNSwxMHMxLjQtMC44LDEuNC0xLjRzLTUuMy0xNi40LTUuMy0xNi40QzE4NiwxMzIuNywxOTIsMTIwLjQsMTkyLDEwNC43eiBNMTEyLjEsOTQuNA0KCQljLTQuNCwwLTcuOS0zLjUtNy45LTcuOXMzLjUtNy45LDcuOS03LjlzNy45LDMuNSw3LjksNy45UzExNi40LDk0LjQsMTEyLjEsOTQuNHogTTE1NC4yLDk0LjRjLTQuNCwwLTcuOS0zLjUtNy45LTcuOQ0KCQlzMy41LTcuOSw3LjktNy45czcuOSwzLjUsNy45LDcuOVMxNTguNiw5NC40LDE1NC4yLDk0LjR6Ii8+DQo8L2c+DQo8Zz4NCgk8Zz4NCgkJPHBvbHlnb24gY2xhc3M9InN0MCIgcG9pbnRzPSIyNzcuNiw2Ni41IDI2NS43LDExNS41IDI1NS43LDY2LjUgMjQwLjUsNjYuNSAyMzAuNSwxMTUuNSAyMTguNiw2Ni41IDIwMy44LDY2LjUgMjIzLjcsMTM2IA0KCQkJMjM3LjIsMTM2IDI0OCw4Mi44IDI1OC44LDEzNiAyNzIuNCwxMzYgMjkyLjMsNjYuNSAJCSIvPg0KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzI4LjMsODkuOGMtNC4zLTQuNy0xMC4zLTcuMS0xOC4yLTcuMWMtNy40LDAtMTMuMiwyLjUtMTcuNSw3LjNjLTQuMyw0LjktNi40LDExLjUtNi40LDE5LjkNCgkJCWMwLDguNiwyLjIsMTUuMyw2LjUsMjAuM3MxMC4yLDcuNSwxNy42LDcuNWM2LDAsMTEuMS0xLjUsMTUuMy00LjZjNC4yLTMuMSw3LTcuMyw4LjQtMTIuN2gtMTMuNmMtMC45LDEuOS0yLjEsMy40LTMuNiw0LjENCgkJCWMtMS41LDAuOS0zLjQsMS40LTUuOCwxLjRjLTMuNCwwLTUuOS0xLjEtNy43LTMuMWMtMS43LTItMi43LTUuMS0yLjktOS4xaDM0LjJjMC0wLjQsMC4xLTAuOSwwLjEtMS40czAtMS4yLDAtMi4yDQoJCQlDMzM0LjcsMTAxLjMsMzMyLjYsOTQuNSwzMjguMyw4OS44eiBNMzAwLjQsMTA0LjljMC4zLTMuNCwxLjMtNiwzLTcuOWMxLjctMS44LDQtMi43LDctMi43YzMuMiwwLDUuNywwLjksNy40LDIuNw0KCQkJYzEuOCwxLjgsMi43LDQuNCwyLjgsNy45SDMwMC40eiIvPg0KCTwvZz4NCgk8Zz4NCgkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTQwMi43LDExMi4yTDQwMi43LDExMi4yQzQwMi43LDExMi4xLDQwMi43LDExMi4yLDQwMi43LDExMi4yTDQwMi43LDExMi4yeiIvPg0KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzgzLjQsMTIxLjdjLTIuOCwyLjItNi40LDMuMy0xMC43LDMuM2MtNiwwLTEwLjYtMi4xLTEzLjktNi4ycy00LjktMTAtNC45LTE3LjVjMC03LjgsMS42LTEzLjcsNC45LTE3LjgNCgkJCWMzLjItNC4xLDgtNi4xLDE0LjMtNi4xYzQuNSwwLDgsMSwxMC42LDMuMXM0LjIsNS4xLDQuOCw5aDE0LjFjLTAuNS03LjktMy40LTE0LTguNS0xOC4zcy0xMi4xLTYuNS0yMS02LjUNCgkJCWMtMTAuOSwwLTE5LjMsMy4xLTI1LjEsOS40cy04LjcsMTUuNC04LjcsMjcuMmMwLDExLjYsMi45LDIwLjYsOC42LDI3czEzLjcsOS42LDI0LDkuNmM4LjksMCwxNi4yLTIuMywyMS43LTcNCgkJCWM1LjUtNC42LDguNi0xMC44LDkuMS0xOC43aC0xMy45QzM4OCwxMTYuMywzODYuMiwxMTkuNSwzODMuNCwxMjEuN3oiLz4NCgkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTQ0OC41LDg5LjNjLTEuNS0xLjktMy41LTMuNC01LjktNC40Yy0yLjUtMS4xLTUuMi0xLjYtOC4yLTEuNmMtMy4yLDAtNi4xLDAuNi04LjYsMS44DQoJCQljLTIuNSwxLjItNC43LDMtNi42LDUuM1Y2Ni41aC0xMy42djY5LjNoMTMuNnYtMzAuNGMwLTMuMywwLjktNiwyLjgtNy45czQuNS0yLjksNy43LTIuOWMzLDAsNS4yLDAuNyw2LjMsMi40DQoJCQljMS4xLDEuNywxLjcsNS43LDEuNywxMnYyNi44aDEzLjZ2LTMzLjJ2LTAuOWMwLTMuNy0wLjItNi4zLTAuNi04QzQ1MC4zLDkyLjEsNDQ5LjUsOTAuNiw0NDguNSw4OS4zeiIvPg0KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNTAwLjcsMTMxLjRjLTAuNS0xLjEtMC43LTIuNy0wLjctNC44Vjk3LjVjMC00LjctMS45LTguMy01LjctMTAuOFM0ODUsODMsNDc3LjgsODMNCgkJCWMtNi42LDAtMTEuNywxLjUtMTUuNCw0LjVzLTUuNiw3LjEtNS42LDEyLjR2MC45aDEyLjhWMTAwYzAtMiwwLjctMy42LDIuMi00LjdzMy42LTEuNyw2LjQtMS43YzMuMSwwLDUuMiwwLjQsNi41LDEuMw0KCQkJczEuOSwyLjQsMS45LDQuNWMwLDIuNi0yLjksNC4yLTguNyw1Yy0yLjMsMC4zLTQuMiwwLjYtNS42LDAuOGMtNi4yLDAuOS0xMC42LDIuNy0xMy4zLDUuMmMtMi43LDIuNi00LDYuMy00LDExLjENCgkJCWMwLDUuMiwxLjMsOS4zLDQsMTIuMWMyLjcsMi44LDYuNSw0LjIsMTEuNSw0LjJjMy43LDAsNy0wLjcsOS44LTIuMXM1LjEtMy40LDYuOC02LjFjMCwxLjIsMC4yLDIuNCwwLjQsMy42YzAuMywxLDAuNiwyLDEuMSwyLjkNCgkJCWgxNC4zdi0yLjNDNTAxLjksMTMzLjIsNTAxLjEsMTMyLjUsNTAwLjcsMTMxLjR6IE00ODYuOSwxMTUuNmMwLDMuNy0xLjEsNi41LTMuMiw4LjZzLTUsMy4xLTguNywzLjFjLTIuMSwwLTMuOC0wLjYtNS0xLjcNCgkJCXMtMS44LTIuNi0xLjgtNC41YzAtMS44LDAuNC0zLjMsMS40LTQuM3MyLjctMS45LDUuMS0yLjZjMC4xLDAsMS42LTAuNCw0LjUtMXM1LjUtMS41LDcuNy0yLjVWMTE1LjZ6Ii8+DQoJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik01MzEuMiw5NC40di05LjZoLTcuOXYtMTRoLTEzLjZ2MTRoLTYuOHY5LjZoNi44djI3LjdjMCw1LjgsMSw5LjYsMi45LDExLjZjMiwxLjksNS41LDIuOSwxMC44LDIuOQ0KCQkJYzAuNCwwLDEuNiwwLDMuMy0wLjFjMS43LTAuMSwzLjItMC4yLDQuNS0wLjJsMCwwdi0xMC4yaC0zLjNjLTEuOSwwLTMuMS0wLjItMy43LTAuNmMtMC42LTAuNS0wLjktMS4zLTAuOS0yLjdWOTQuNEw1MzEuMiw5NC40DQoJCQlMNTMxLjIsOTQuNHoiLz4NCgk8L2c+DQo8L2c+DQo8L3N2Zz4NCg==);
}
#drinks-qrcodes {
    display: none;
}
#drinks-qrcode {
    position: absolute;
    top: calc(50% - 90px);
    left: calc(50% - 90px);
    width: 180px;
    height: 180px;
	background: #fff no-repeat center center url(https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/images/donate/WeChatSQ.png);
    background-size: 160px;
    border-radius: 6px;
    cursor: pointer;
    box-shadow: 0 10px 20px rgba(255, 0, 110, 0.5);
}

/* åŠ¨ç”» */
#drinks-icons, #drinks-button-box {filter: blur(0px);}
.donate-animation-1>#drinks-icons, .donate-animation-4>#drinks-icons,.donate-animation-3>#drinks-button-box {
    transform: scale(0.7,0.7);
    filter: blur(2px);
    display: block;
    opacity: 1;
}
.donate-animation-1>#drinks-button-box,.donate-animation-4>#drinks-button-box,.donate-animation-3>#drinks-qrcodes {
    display: block;
    opacity: 1;
    transform: scale(1,1);
}
.donate-animation-2>#drinks-button-box,.donate-animation-4>#drinks-qrcodes, .hideBox {
    display: block;
    transform: scale(1,1);
    animation-name:hideBox;
    animation-duration:0.3s;
    animation-timing-function:ease-in-out;
    animation-iteration-count:1;
    animation-fill-mode:forwards;
}

.donate-animation-3>#drinks-icons {
    transform: scale(0.4,0.4);
    filter: blur(2px);
}
.showBox {
    animation-name:showBox;
    animation-duration:0.3s;
    animation-timing-function:ease-in-out;
    animation-iteration-count:1;
    animation-fill-mode:forwards;
}
@keyframes showBox {
	from {
        opacity: 0;
        transform: scale(1.3,1.3);
	}
	to {
        opacity: 1;
        transform: scale(1,1);
	}
}
@keyframes hideBox {
	from {
        opacity: 1;
        transform: scale(1,1);
	}
	to {
        opacity: 0;
        transform: scale(1.3,1.3);
	}
}
</style>
<section id="drinks-box">
    <section id="drinks-box-s" class="drinks-button left-100">
        <div id="drinks-icons" class="left-100 tr3">
            <div id="coffee-donate" class="icon-donate"><img src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/images/donate/drinks/coffee.png" alt="coffee" data-creative
                ="https://www.zcool.com.cn/work/ZMjQ3NTE2MA==.html"></div>
        </div>
        <div id="drinks-button-box" class="tr3 left-100">
            <div id="drinks-button-bg" class="left-100"></div>
            <div id="github-box"><a href="https://github.com/Kaiyuan/donate-page/" target="_blank">Github</a></div>
            <ul id="donate-buttons" class="list tr3">
                <li id="paypal_donate"><a href="https://www.paypal.me/wallleap" target="_blank">Paypal</a></li>
                <!-- <li id="btc_donate" class="donate-button">Bitcoin</li> -->
                <li id="alipay_donate" class="donate-button">AliPay</li>
                <li id="wechat_donate" class="donate-button">WeChat</li>
            </ul>
        </div>
        <div id="drinks-qrcodes" class="left-100 tr3">
            <div id="drinks-qrcode"></div>
        </div>
    </section>
</section>

<script>
jQuery(document).ready(function () {

    var thisPage = $('body');
    var drink_box = $('#donate-box');
    var drink_box_s = $('#drinks-box-s');
    var icon_donate = $('.icon-donate');
    var donate_button = $('.donate-button');
    var donate_buttons = $('#drinks-button-box');
    var donate_button_bg = $('#drinks-button-bg');
    var drinks_qrcodes = $('#drinks-qrcodes');
    var drinks_qrcode = $('#drinks-qrcode');
    var isMobile = /Android|webOS|iPhone|iPad|BlackBerry/i.test(navigator.userAgent);
    
    var GithubLink  =   "https://github.com/wallleap/sponsor-page/";
    var PayPalLink  =   "https://www.paypal.me/wallleap";
    $('#paypal-donate>a').href = PayPalLink;
    $('#github-box>a').href = GithubLink;
    var qrcodes = {
        // 'btc_donate'	:	'https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/images/BTCQR.png',	// äºŒç»´ç è·¯å¾„
        'alipay_donate'	:	'https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/custom/donate/AliPayQR.jpg',	// æ”¯ä»˜å®äºŒç»´ç 
        // 'alipay_donate_link'   :   'https://qr.alipay.com/3272611934645308',   // æ”¯ä»˜å®äºŒç»´ç ä¸Šçš„é“¾æ¥ï¼Œå¿…é¡»æ¢æˆè‡ªå·±çš„è¿æ¥ï¼ï¼ï¼æ‰‹æœºç‚¹å‡»ä¼šè‡ªåŠ¨è·³è½¬åˆ°æ”¯ä»˜å®ã€‚
        'wechat_donate'	:	'https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/custom/donate/WeChatSQ.jpg'
    };
    
    var drinks_an = new Object();
    // åŠ¨ç”»æœ‰ 4 ç§çŠ¶æ€ï¼Œä¸åŒçŠ¶æ€ç»™å¯¹åº” DOM æ·»åŠ  css åŠ¨ç”»
    drinks_an[0] = function(){
        drink_box_s.removeClass('donate-animation-2 donate-animation-3').addClass('donate-animation-1');
        donate_buttons.addClass('showBox');
        setTimeout(() => {
            donate_buttons.removeClass('showBox');
        }, 300);
        // console.log('donate-animation-1');
    }
    drinks_an[1] = function(){
        drink_box_s.removeClass('donate-animation-1 donate-animation-3').addClass('donate-animation-2');
        setTimeout(() => {
            drink_box_s.removeClass('donate-animation-2');
        }, 300);
        // console.log('donate-animation-2');
    }
    drinks_an[2] = function(){
        drink_box_s.removeClass('donate-animation-2 donate-animation-1').addClass('donate-animation-3');
        drinks_qrcodes.addClass('showBox');
        setTimeout(() => {
            drinks_qrcodes.removeClass('showBox');
        }, 300);
        // console.log('donate-animation-3');
    }
    drinks_an[3] = function(){
        drink_box_s.removeClass('donate-animation-3 donate-animation-2').addClass('donate-animation-4');
        setTimeout(() => {
            drink_box_s.removeClass('donate-animation-4');
            drink_box_s.addClass('donate-animation-1');
        }, 300);
        // console.log('donate-animation-4');
    }
    
    if (isMobile) {
        donate_buttons.addClass('Mobile');
    }
    
    icon_donate.on('click',drinks_an[0]); // drinks å›¾æ ‡ç‚¹å‡»
    
    donate_button_bg.on('click',drinks_an[1]); // éšè— donate box
    
    donate_button.on('click',function(){
        var thisID = $(this).attr("id");
        if (isMobile && thisID === 'alipay_donate') {
            // å½“å‰ç½‘é¡µåœ¨æ‰‹æœºç«¯æ‰“å¼€è·³è½¬åˆ°æ”¯ä»˜å® App
            window.open(qrcodes['alipay_donate_link']);
        } else {
            // å½“å‰ç½‘é¡µåœ¨PCç«¯æ‰“å¼€
        drinks_qrcode.css({'background-image' : 'url('+qrcodes[thisID]+')'});
        drinks_an[2]();
        // æ˜¾ç¤ºäºŒç»´ç 
        }
    });
    
    drinks_qrcode.on('click',drinks_an[3]); // éšè—äºŒç»´ç 
    //
    })
</script>
    
    <section class="nexmoe-comment">
    <div class="valine" id="vcomments"></div>
<!-- <script src='https://cdn.jsdelivr.net/npm/valine@1.3.9/dist/Valine.min.js'></script> -->
<script type="text/javascript">
    loadComments();
    function loadComments() {
      if (typeof Valine === 'undefined') {
        var getScript = (options) => {
          var script = document.createElement('script');
          script.defer = true;
          script.crossOrigin = 'anonymous';
          Object.keys(options).forEach((key) => {
              script[key] = options[key];
          });
          document.body.appendChild(script);
        };
        getScript({
          src: '//unpkg.com/valine/dist/Valine.min.js',
          onload: () => {
            newValine();
          }
        });
      } else {
        newValine();
      }
    }
    function newValine() {
      new Valine({
        el: '.valine',
        appId: 'GOPlqD10uwQGshDFcsr8Cxik-gzGzoHsz',
        appKey: 'vpzGg4wzHHLRPNOlPHf0UEDS',
        placeholder: 'æ¬¢è¿è®¿é—®æœ¬ç«™ï¼Œè¯„è®ºä¸€ä¸‹ç•™ä¸ªè¶³è¿¹ğŸ‘£å‘—',
        notify: false,
        verify: true,
        avatar: 'mp',
        meta: ['nick','mail','link'],
        pageSize: 10,
        recordIP: true,
        enableQQ: true,
        // è®¾ç½®Bilibiliè¡¨æƒ…åŒ…åœ°å€
        emojiCDN: '//cdn.jsdelivr.net/gh/wallleap/cdn@latest/emote/cool/', 
        // è¡¨æƒ…titleå’Œå›¾ç‰‡æ˜ å°„
        emojiMaps: {
            "cool_coolapk_emotion_100_qqdoge": "coolapk_emotion_100_qqdoge.png",
            "cool_coolapk_emotion_1010": "coolapk_emotion_1010.png",
            "cool_coolapk_emotion_1011": "coolapk_emotion_1011.png",
            "cool_coolapk_emotion_1012": "coolapk_emotion_1012.png",
            "cool_coolapk_emotion_1013": "coolapk_emotion_1013.png",
            "cool_coolapk_emotion_1014": "coolapk_emotion_1014.png",
            "cool_coolapk_emotion_1015": "coolapk_emotion_1015.png",
            "cool_coolapk_emotion_1016": "coolapk_emotion_1016.png",
            "cool_coolapk_emotion_1017": "coolapk_emotion_1017.png",
            "cool_coolapk_emotion_1018": "coolapk_emotion_1018.png",
            "cool_coolapk_emotion_1019": "coolapk_emotion_1019.png",
            "cool_coolapk_emotion_101_pyjiaoyi": "coolapk_emotion_101_pyjiaoyi.png",
            "cool_coolapk_emotion_1020": "coolapk_emotion_1020.png",
            "cool_coolapk_emotion_1021": "coolapk_emotion_1021.png",
            "cool_coolapk_emotion_102_fadai": "coolapk_emotion_102_fadai.png",
            "cool_coolapk_emotion_103_nb": "coolapk_emotion_103_nb.png",
            "cool_coolapk_emotion_104": "coolapk_emotion_104.png",
            "cool_coolapk_emotion_105": "coolapk_emotion_105.png",
            "cool_coolapk_emotion_106": "coolapk_emotion_106.png",
            "cool_coolapk_emotion_107": "coolapk_emotion_107.png",
            "cool_coolapk_emotion_108": "coolapk_emotion_108.png",
            "cool_coolapk_emotion_109": "coolapk_emotion_109.png",
            "cool_coolapk_emotion_10_aoman": "coolapk_emotion_10_aoman.png",
            "cool_coolapk_emotion_11_yiwen": "coolapk_emotion_11_yiwen.png",
            "cool_coolapk_emotion_12_wuyu": "coolapk_emotion_12_wuyu.png",
            "cool_coolapk_emotion_13_huaixiao": "coolapk_emotion_13_huaixiao.png",
            "cool_coolapk_emotion_14_bishi": "coolapk_emotion_14_bishi.png",
            "cool_coolapk_emotion_15_fanu": "coolapk_emotion_15_fanu.png",
            "cool_coolapk_emotion_16_tuosai": "coolapk_emotion_16_tuosai.png",
            "cool_coolapk_emotion_17_tushe": "coolapk_emotion_17_tushe.png",
            "cool_coolapk_emotion_18_han": "coolapk_emotion_18_han.png",
            "cool_coolapk_emotion_19_koubi": "coolapk_emotion_19_koubi.png",
            "cool_coolapk_emotion_1_hahaha": "coolapk_emotion_1_hahaha.png",
            "cool_coolapk_emotion_20_qinqin": "coolapk_emotion_20_qinqin.png",
            "cool_coolapk_emotion_21_penxue": "coolapk_emotion_21_penxue.png",
            "cool_coolapk_emotion_22_xiaoyan": "coolapk_emotion_22_xiaoyan.png",
            "cool_coolapk_emotion_23_shui": "coolapk_emotion_23_shui.png",
            "cool_coolapk_emotion_24_wuzuixiao": "coolapk_emotion_24_wuzuixiao.png",
            "cool_coolapk_emotion_25_zaijian": "coolapk_emotion_25_zaijian.png",
            "cool_coolapk_emotion_26_kelian": "coolapk_emotion_26_kelian.png",
            "cool_coolapk_emotion_27_qiang": "coolapk_emotion_27_qiang.png",
            "cool_coolapk_emotion_28_ruo": "coolapk_emotion_28_ruo.png",
            "cool_coolapk_emotion_29_baoquan": "coolapk_emotion_29_baoquan.png",
            "cool_coolapk_emotion_2_jingya": "coolapk_emotion_2_jingya.png",
            "cool_coolapk_emotion_30_ok": "coolapk_emotion_30_ok.png",
            "cool_coolapk_emotion_31_xiaoku": "coolapk_emotion_31_xiaoku.png",
            "cool_coolapk_emotion_32_heiha": "coolapk_emotion_32_heiha.png",
            "cool_coolapk_emotion_33_wulian": "coolapk_emotion_33_wulian.png",
            "cool_coolapk_emotion_34_jizhi": "coolapk_emotion_34_jizhi.png",
            "cool_coolapk_emotion_35_ye": "coolapk_emotion_35_ye.png",
            "cool_coolapk_emotion_36_ku": "coolapk_emotion_36_ku.png",
            "cool_coolapk_emotion_37_doge": "coolapk_emotion_37_doge.png",
            "cool_coolapk_emotion_38_wozuimei": "coolapk_emotion_38_wozuimei.png",
            "cool_coolapk_emotion_39_caidao": "coolapk_emotion_39_caidao.png",
            "cool_coolapk_emotion_3_ciya": "coolapk_emotion_3_ciya.png",
            "cool_coolapk_emotion_40_aixin": "coolapk_emotion_40_aixin.png",
            "cool_coolapk_emotion_41_meigui": "coolapk_emotion_41_meigui.png",
            "cool_coolapk_emotion_42_diaoxie": "coolapk_emotion_42_diaoxie.png",
            "cool_coolapk_emotion_43_heixian": "coolapk_emotion_43_heixian.png",
            "cool_coolapk_emotion_44_pen": "coolapk_emotion_44_pen.png",
            "cool_coolapk_emotion_45_yinxian": "coolapk_emotion_45_yinxian.png",
            "cool_coolapk_emotion_46_nanguo": "coolapk_emotion_46_nanguo.png",
            "cool_coolapk_emotion_47_weiqu": "coolapk_emotion_47_weiqu.png",
            "cool_coolapk_emotion_48_weiweiyixiao": "coolapk_emotion_48_weiweiyixiao.png",
            "cool_coolapk_emotion_49_huanhu": "coolapk_emotion_49_huanhu.png",
            "cool_coolapk_emotion_4_liulei": "coolapk_emotion_4_liulei.png",
            "cool_coolapk_emotion_50_xinsui": "coolapk_emotion_50_xinsui.png",
            "cool_coolapk_emotion_51_chigua": "coolapk_emotion_51_chigua.png",
            "cool_coolapk_emotion_52_hejiu": "coolapk_emotion_52_hejiu.png",
            "cool_coolapk_emotion_53_pu": "coolapk_emotion_53_pu.png",
            "cool_coolapk_emotion_54_hongyaowan": "coolapk_emotion_54_hongyaowan.png",
            "cool_coolapk_emotion_55_lvyaowan": "coolapk_emotion_55_lvyaowan.png",
            "cool_coolapk_emotion_56_dogexiaoku": "coolapk_emotion_56_dogexiaoku.png",
            "cool_coolapk_emotion_57_dogehechi": "coolapk_emotion_57_dogehechi.png",
            "cool_coolapk_emotion_58_dogeyuanliangta": "coolapk_emotion_58_dogeyuanliangta.png",
            "cool_coolapk_emotion_59_erha": "coolapk_emotion_59_erha.png",
            "cool_coolapk_emotion_5_keai": "coolapk_emotion_5_keai.png",
            "cool_coolapk_emotion_61_lvmao": "coolapk_emotion_61_lvmao.png",
            "cool_coolapk_emotion_62_huaji": "coolapk_emotion_62_huaji.png",
            "cool_coolapk_emotion_60_kuan": "coolapk_emotion_60_kuan.png",
            "cool_coolapk_emotion_63_liuhanhuaji": "coolapk_emotion_63_liuhanhuaji.png",
            "cool_coolapk_emotion_64_shounuehuaji": "coolapk_emotion_64_shounuehuaji.png",
            "cool_coolapk_emotion_65_coshuaji": "coolapk_emotion_65_coshuaji.png",
            "cool_coolapk_emotion_66_doujiyanhuaji": "coolapk_emotion_66_doujiyanhuaji.png",
            "cool_coolapk_emotion_67_mojinghuaji": "coolapk_emotion_67_mojinghuaji.png",
            "cool_coolapk_emotion_68": "coolapk_emotion_68.png",
            "cool_coolapk_emotion_69": "coolapk_emotion_69.png",
            "cool_coolapk_emotion_6_weixiao": "coolapk_emotion_6_weixiao.png",
            "cool_coolapk_emotion_70": "coolapk_emotion_70.png",
            "cool_coolapk_emotion_71": "coolapk_emotion_71.png",
            "cool_coolapk_emotion_72": "coolapk_emotion_72.png",
            "cool_coolapk_emotion_73": "coolapk_emotion_73.png",
            "cool_coolapk_emotion_74": "coolapk_emotion_74.png",
            "cool_coolapk_emotion_75": "coolapk_emotion_75.png",
            "cool_coolapk_emotion_76": "coolapk_emotion_76.png",
            "cool_coolapk_emotion_77": "coolapk_emotion_77.png",
            "cool_coolapk_emotion_78": "coolapk_emotion_78.png",
            "cool_coolapk_emotion_79": "coolapk_emotion_79.png",
            "cool_coolapk_emotion_7_hehe": "coolapk_emotion_7_hehe.png",
            "cool_coolapk_emotion_80": "coolapk_emotion_80.png",
            "cool_coolapk_emotion_81_naikezui": "coolapk_emotion_81_naikezui.png",
            "cool_coolapk_emotion_82_miaomiao": "coolapk_emotion_82_miaomiao.png",
            "cool_coolapk_emotion_83_huoba": "coolapk_emotion_83_huoba.png",
            "cool_coolapk_emotion_84_baiyan": "coolapk_emotion_84_baiyan.png",
            "cool_coolapk_emotion_85": "coolapk_emotion_85.png",
            "cool_coolapk_emotion_86": "coolapk_emotion_86.png",
            "cool_coolapk_emotion_87": "coolapk_emotion_87.png",
            "cool_coolapk_emotion_88": "coolapk_emotion_88.png",
            "cool_coolapk_emotion_89": "coolapk_emotion_89.png",
            "cool_coolapk_emotion_8_piezui": "coolapk_emotion_8_piezui.png",
            "cool_coolapk_emotion_90": "coolapk_emotion_90.png",
            "cool_coolapk_emotion_91": "coolapk_emotion_91.png",
            "cool_coolapk_emotion_92": "coolapk_emotion_92.png",
            "cool_coolapk_emotion_93": "coolapk_emotion_93.png",
            "cool_coolapk_emotion_94": "coolapk_emotion_94.png",
            "cool_coolapk_emotion_95_erhading": "coolapk_emotion_95_erhading.png",
            "cool_coolapk_emotion_96_kuanlvmao": "coolapk_emotion_96_kuanlvmao.png",
            "cool_coolapk_emotion_97_haixiu": "coolapk_emotion_97_haixiu.png",
            "cool_coolapk_emotion_98_wunai": "coolapk_emotion_98_wunai.png",
            "cool_coolapk_emotion_99_zhoumei": "coolapk_emotion_99_zhoumei.png",
            "cool_coolapk_emotion_9_se": "coolapk_emotion_9_se.png",
            "cool_c_coolb": "c_coolb.png",
            "cool_c_fived": "c_fived.png",
            "cool_c_fivef": "c_fivef.png",
            "cool_c_fivem": "c_fivem.png",
            "cool_c_fiveo": "c_fiveo.png",
            "cool_c_fivey": "c_fivey.png",
            "cool_c_fy": "c_fy.png",
            "cool_c_oned": "c_oned.png",
            "cool_c_onef": "c_onef.png",
            "cool_c_onem": "c_onem.png",
            "cool_c_oneo": "c_oneo.png",
            "cool_c_oney": "c_oney.png",
            "cool_c_oy": "c_oy.png",
            "cool_c_teny": "c_teny.png",
            "cool_c_twod": "c_twod.png",
            "cool_c_twof": "c_twof.png",
            "cool_c_twom": "c_twom.png",
            "cool_c_twoo": "c_twoo.png",
            "cool_c_twoy": "c_twoy.png",
            "cool_c_ty": "c_ty.png",
            // ... æ›´å¤šè¡¨æƒ…
        } 
      });
    }
</script>

<!-- <script>
    document.body.addEventListener('click', function(e) {
    if (e.target.classList.contains('vsubmit')) {
        const email = document.querySelector('input[type=email]');
        const nick = document.querySelector('input[name=nick]');
        const reg = /^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;
        if (!email.value || !nick.value || !reg.test(email.value)) {
            const str = `<div class="valert txt-center"><div class="vtext">è¯·å¡«å†™æ­£ç¡®çš„æ˜µç§°å’Œé‚®ç®±ï¼</div></div>`;
            const vmark = document.querySelector('.vmark');
            vmark.innerHTML = str;
            vmark.style.display = 'block';

            setTimeout(function() {
                vmark.style.display = 'none';
                vmark.innerHTML = '';
            }, 2500);
        }
      }
    });
</script> -->
<!-- <script>
$(document).ready(function(){
  $('.vemoji-btn').text('ğŸ˜€');
	$("#vcomments").on('click', 'span.vat',function(){
		$(this).parent('div.vmeta').next("div.vcontent").after($("div.vwrap"));
		$('textarea#veditor').focus();
	})
})
</script> -->
<style>
@keyframes valineBg{
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}
#vcomments .vwrap{
  padding: 20px 20px 44px;
  background: linear-gradient(-45deg, rgba(255, 206, 255, .3), rgba(237, 156, 253 ,.3), rgba(173, 214, 251, .3), rgba(192, 255, 208, .3));
  background-size: 400% 400%;
  animation: valineBg 15s ease infinite;
}
#veditor{
  background-image: url(https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/other/comment-bg.png);
  background-size: contain;
  background-repeat: no-repeat;
  background-position: right;
  background-color: rgba(255,255,255,0);
  /* resize: vertical; */
  resize:none;
  min-height:7rem;
}
textarea[id='veditor']::placeholder{color:#b3b3b3;font-size:15px;text-align:center;line-height:6rem;}
.v .vwrap .vheader{width: 80%;bottom:0;position: absolute;}
.v .vinput{padding:10px 15px;border-bottom:0px;background-color: rgba(255, 0, 110, .1);}
.v .vwrap .vedit .vctrl{margin-top:-44px;right:0;position:absolute;margin-right:-3px;}
.v .vwrap .vcontrol{ position:absolute;right:0;bottom:0;width:20%;padding-top:0px;}
.v .vwrap .vcol-30{
  position: absolute;left: 4px;bottom: 5px;width: 20px !important;
}
.v .vwrap .vcontrol .col.col-80{width: 100%;}
.v .vbtn.vsubmit{
  padding: 0;
  position:absolute; bottom: 0; right: 0; 
  color: #fff; height: 42px; line-height: 42px; width:150px; text-align: center;
  border: none;border-radius:22px;background:#fe1b73;
}
.v .vbtn.vsubmit:hover{box-shadow: 0 2px 12px #ff4e6a;}
.v .vwrap .vedit .vctrl span{
  margin-top: 30px;
}
.v .vwrap .vcontrol .col.col-20,.v .vlist .vcard .vhead .vsys{
  display:none;
}
@media screen and (max-width: 520px){
  .v .vwrap .vcol-30{display: none !important;}
  textarea[id='veditor']::placeholder{color:#b3b3b3;font-size:14px;text-align:center;line-height: 1;}
  .vemojis{margin-bottom: 100px;}
  .v .vwrap .vheader .vinput{width: 33.33%;padding:10px 5px;}
  .v .vbtn.vsubmit{bottom: 10px;left: 0;right: 0;margin: 0 auto;}
}
@media screen and (min-width: 520px;) (max-width: 750px){
  /* #vcomments .vwrap{height: 400px;} */
  .v .vwrap .vcol-30{display: none !important;}
  .v .vwrap .item3{bottom: 60px;}
  .vemojis{margin-bottom: 200px;}
  textarea[id='veditor']::placeholder{color:#b3b3b3;font-size:14px;text-align:center;line-height: 1;}
	.v .vwrap .vheader .vinput{width: 33.33%;padding:10px 5px;}
  .v .vbtn.vsubmit{bottom: 10px;left: 0;right: 0;margin: 0 auto;}
}
.vcard .vhead .vsys:nth-of-type(1){
  display: inline-block;
  background-color: rgba(247, 210, 247, .5);
}
.vcard .vhead .vsys:nth-of-type(2){
  display: inline-block;
  background-color: rgba(224, 235, 247, .5);
}
</style>
    <div style="text-align:center;font-size: 12px;color: #888;">
            <div class="site-info">
                
             
              <div class="footertext">
                <p><a href="#" style="color: #b9b9b9;" >Blog wallleap</a>
                  , Copyright &copy; 2019-2020 
                  by Luwang All Rights Reserved.</p>
              </div>

              <!-- <a style="color: #b9b9b9;" href="//beian.miit.gov.cn" target="_blank">	
                <img src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/logo/ICP.png" style="vertical-align: text-bottom; width: 17px;" />
                èµ£ICPå¤‡20000895å·-1
              </a> -->
              
              <span style="padding-left: 20px;">
                <i class="fa fa-clock-o" aria-hidden="true"></i>
                <span id="time" align="center">è½½å…¥æ—¶é—´ä¸­...</span>
                <script>
                  var now = new Date(); 
                  function createtime() { 
                    var grt= new Date("08/08/2019 17:38:00");//åœ¨æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´
                    now.setTime(now.getTime()+250); 
                    days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
                    hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
                    if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
                    mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
                    seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
                    snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
                    document.getElementById("time").innerHTML = "å°ç«™å·²ç»è‹Ÿæ´» "+dnum+" å¤© "+hnum + " å°æ—¶ " + mnum + " åˆ† " + snum + " ç§’"; 
                 } 
                 setInterval("createtime()",250);
                </script>
              <span style="padding-left: 20px;><i class="fa fa-cog fa-spin" aria-hidden="true"></i></span>
                <script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1278079074'%3E%3C/span%3E%3Cscript src='https://s4.cnzz.com/z_stat.php%3Fid%3D1278079074%26online%3D2' type='text/javascript'%3E%3C/script%3E"));</script>
              </span>
              
              <div style="text-align:center; padding-top: 20px;">
                <div class="github-badge">
                  <a rel="license" href="https://hexo.io/" target="_blank" title="ç”±Hexoå¼ºåŠ›é©±åŠ¨">
                  <span class="badge-subject"><i class="fa fa-fire" aria-hidden="true"></i> Powered</span><span class="badge-value bg-blue">Hexo</span></a>
                </div>
                <div class="github-badge">
                    <a rel="license" href="https://coding.net/" target="_blank" title="é™æ€ç½‘é¡µæ‰˜ç®¡äºCODING">
                    <span class="badge-subject"><i class="fa fa-heart" aria-hidden="true"></i> Hosted</span>
                    <span class="badge-value bg-gray">CODING</span></a>
                  </div>
                <div class="github-badge">
                    <a rel="license" href="https://www.jsdelivr.com/" target="_blank" title="jsDelivræä¾›CDNåŠ é€ŸæœåŠ¡">
                    <span class="badge-subject"><i class="fa fa-firefox fa-spin" aria-hidden="true"></i> CND</span><span class="badge-value bg-cdn">Github&jsDelivr</span></a>
                </div>
                <div class="github-badge">
                    <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="æœ¬ç«™ç‚¹é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯">
                    <span class="badge-subject"><i class="fa fa-copyright"></i></span><span class="badge-value bg-lightgrey">BY-NC-SA 4.0</span></a>
                </div>
              </div>  
          
              
            </div><!-- .site-info -->
          </div>
</section>
  </div>
</div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/combine/npm/lazysizes@5.1.0/lazysizes.min.js,gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js,npm/mdui@0.4.3/dist/js/mdui.min.js,gh/nexmoe/nexmoe.github.io@latest/js/app.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!--<script src="/js/app.js?v=1599833537158"></script>-->


    <script src="https://cdn.jsdelivr.net/gh/xtaodada/xtaodada.github.io@0.0.2/copy.js"></script>


 
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/shehuizhuyi.js"></script>
<script> 
!function(e,t,a){function n(){c(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"),o(),r()}function r(){for(var e=0;e<d.length;e++)d[e].alpha<=0?(t.body.removeChild(d[e].el),d.splice(e,1)):(d[e].y--,d[e].scale+=.004,d[e].alpha-=.013,d[e].el.style.cssText="left:"+d[e].x+"px;top:"+d[e].y+"px;opacity:"+d[e].alpha+";transform:scale("+d[e].scale+","+d[e].scale+") rotate(45deg);background:"+d[e].color+";z-index:99999");requestAnimationFrame(r)}function o(){var t="function"==typeof e.onclick&&e.onclick;e.onclick=function(e){t&&t(),i(e)}}function i(e){var a=t.createElement("div");a.className="heart",d.push({el:a,x:e.clientX-5,y:e.clientY-5,scale:1,alpha:1,color:s()}),t.body.appendChild(a)}function c(e){var a=t.createElement("style");a.type="text/css";try{a.appendChild(t.createTextNode(e))}catch(t){a.styleSheet.cssText=e}t.getElementsByTagName("head")[0].appendChild(a)}function s(){return"rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")"}var d=[];e.requestAnimationFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)}}(),n()}(window,document);
</script>

  





</body>

</html>
