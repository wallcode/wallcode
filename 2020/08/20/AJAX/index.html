<!DOCTYPE html>

<html lang="zh-CN">

<head>
  
  <title>Ajax学习笔记 - wallleap</title>
  <meta charset="UTF-8">
  <meta name="description" content="luwang的博客，正在努力学习💪">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  
  

  <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/favicon.png" type="image/png" />
  <meta name="description" content="一、概述 Web程序的最初的目的就是将信息(数据)放到公共的服务器，让所有的网络用户都可以通过浏览器访问   在此之前，我们可以通过以下几种方式让浏览器发出服务端的请求，获得服务端的数据：  地址栏输入地址，回车，刷新  特定元素的href或src属性  表单提交   这些方案都是我们无法通过或者很难通过代码的方式进行编程(对服务器发出请求并且接收服务端返回的响应)，如果我们可以通过JavaScr">
<meta property="og:type" content="article">
<meta property="og:title" content="Ajax学习笔记">
<meta property="og:url" content="https://blog.wallleap.cn/2020/08/20/AJAX/index.html">
<meta property="og:site_name" content="wallleap">
<meta property="og:description" content="一、概述 Web程序的最初的目的就是将信息(数据)放到公共的服务器，让所有的网络用户都可以通过浏览器访问   在此之前，我们可以通过以下几种方式让浏览器发出服务端的请求，获得服务端的数据：  地址栏输入地址，回车，刷新  特定元素的href或src属性  表单提交   这些方案都是我们无法通过或者很难通过代码的方式进行编程(对服务器发出请求并且接收服务端返回的响应)，如果我们可以通过JavaScr">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/cover/(00).jpg">
<meta property="article:published_time" content="2020-08-20T04:33:14.000Z">
<meta property="article:modified_time" content="2020-09-11T13:49:36.000Z">
<meta property="article:author" content="Luwang">
<meta property="article:tag" content="前端">
<meta property="article:tag" content=" web">
<meta property="article:tag" content=" Ajax">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/cover/(00).jpg">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/combine/gh/nexmoe/nexmoe.github.io@latest/css/style.css,npm/highlight.js@9.15.8/styles/atom-one-dark.css,gh/nexmoe/nexmoe.github.io@latest/lib/mdui_043tiny/css/mdui.css,gh/nexmoe/nexmoe.github.io@latest/lib/iconfont/iconfont.css" crossorigin>
  
    <link rel="stylesheet" href="//at.alicdn.com/t/font_1721693_jg94kndwhe.css">
  
  <link rel="stylesheet" href="/css/style.css?v=1599833537154">

   
    <style>
      .nexmoe-avatar img:hover {
        -webkit-transform: rotateZ(360deg);
        -moz-transform: rotateZ(360deg);
        transform: rotateZ(360deg);
      }	
    </style>
  

<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">
<script src="https://cdn.jsdelivr.net/gh/wallleap/live2d-widget@latest/autoload.js"></script> 
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/busuanzi.pure.mini.js"></script>

<link rel="stylesheet" href="/css/github-badge.css">
<link rel="stylesheet" href="/css/tags_ca.css">
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<style>
  .pace .pace-progress {  background: rgb(254, 27, 115); /*进度条颜色*/
  height: 3px;  }
  .pace .pace-progress-inner {  box-shadow: 0 0 10px #ff0000, 0 0 5px     #ff0000; /*阴影颜色*/
  }
  .pace .pace-activity {  border-top-color: rgb(251, 30, 30);    /*上边框颜色*/
  border-left-color: rgb(251, 30, 30);    /*左边框颜色*/
}
</style>
<meta name="generator" content="Hexo 4.2.0"></head>

<body class="mdui-drawer-body-left">
  
  <div id="nexmoe-background">
    <div class="nexmoe-bg" style="background-image: url(https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg)"></div>
    <div class="mdui-appbar mdui-shadow-0">
      <div class="mdui-toolbar">
        <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
        <div class="mdui-toolbar-spacer"></div>
        <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
        <a href="/" title="Luwang" class="mdui-btn mdui-btn-icon"><img src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/custom/avatar.jpg" alt="Luwang"></a>
       </div>
    </div>
  </div>
  <div id="nexmoe-header">
      <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="Luwang">
            <img src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/custom/avatar.jpg" alt="Luwang" alt="Luwang">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>54</div>
        <div><span>标签</span>57</div>
        <div><span>分类</span>25</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/archives" title="文章归档">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                文章归档
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/categories" title="文章分类">
            <i class="mdui-list-item-icon nexmoefont icon-appstore-fill"></i>
            <div class="mdui-list-item-content">
                文章分类
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/friends.html" title="我的朋友">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的朋友
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about.html" title="关于博客">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博客
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
  
  <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
        <form id="search_form" action_e="https://cn.bing.com/search?q=site:wallleap.cn" onsubmit="return search();">
            <label><input id="search_value" name="q" type="search" placeholder="搜索"></label>
        </form>
    </div>
</div>
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">社交按钮</h3>
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://space.bilibili.com/157360395" target="_blank" mdui-tooltip="{content: '哔哩哔哩'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
            <!-- <i class="fa icon-bilibili"></i> -->
        </a><a class="mdui-ripple" href="https://github.com/wallleap/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
            <!-- <i class="fa icon-github"></i> -->
        </a><a class="mdui-ripple" href="https://github.com/wallleap/" target="_blank" mdui-tooltip="{content: 'QQ'}" style="color: rgb(0 , 0, 252);background-color: rgba(0, 0, 252, .15);">
            <i class="nexmoefont icon-QQ"></i>
            <!-- <i class="fa icon-QQ"></i> -->
        </a><a class="mdui-ripple" href="https://github.com/wallleap/" target="_blank" mdui-tooltip="{content: '微信公众号'}" style="color: rgb(0, 229, 105);background-color: rgba(0, 229, 105, .15);">
            <i class="nexmoefont icon-wechat-fill"></i>
            <!-- <i class="fa icon-wechat-fill"></i> -->
        </a><a class="mdui-ripple" href="https://github.com/wallleap/" target="_blank" mdui-tooltip="{content: '我的邮箱'}" style="color: rgb(245, 0, 0);background-color: rgba(245, 0, 0, .15);">
            <i class="nexmoefont icon-mail-fill"></i>
            <!-- <i class="fa icon-mail-fill"></i> -->
        </a><a class="mdui-ripple" href="https://github.com/wallleap/" target="_blank" mdui-tooltip="{content: '我的微博'}" style="color: rgb(245, 0, 0);background-color: rgba(245, 0, 0, .15);">
            <i class="nexmoefont icon-weibo"></i>
            <!-- <i class="fa icon-weibo"></i> -->
        </a><a class="mdui-ripple" href="https://github.com/wallleap/" target="_blank" mdui-tooltip="{content: 'RSS'}" style="color: rgb(252, 129, 0);background-color: rgba(252, 129, 0, .15);">
            <i class="nexmoefont icon-rss"></i>
            <!-- <i class="fa icon-rss"></i> -->
        </a> 
    </div>
</div>
  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">标签云</h3>
    <div id="randomtagcloud" class="nexmoe-widget tagcloud">
      <a href="/tags/ACL/" style="font-size: 10px;">ACL</a> <a href="/tags/Ajax/" style="font-size: 10px;">Ajax</a> <a href="/tags/AngularJS/" style="font-size: 10px;">AngularJS</a> <a href="/tags/Blog/" style="font-size: 17.14px;">Blog</a> <a href="/tags/C-C/" style="font-size: 11.43px;">C/C++</a> <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/ES/" style="font-size: 10px;">ES</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/GitHub/" style="font-size: 15.71px;">GitHub</a> <a href="/tags/HCL/" style="font-size: 15.71px;">HCL</a> <a href="/tags/HCNA/" style="font-size: 15.71px;">HCNA</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/Hexo/" style="font-size: 17.14px;">Hexo</a> <a href="/tags/JavaScript/" style="font-size: 14.29px;">JavaScript</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/NAT/" style="font-size: 10px;">NAT</a> <a href="/tags/NodeJS/" style="font-size: 10px;">NodeJS</a> <a href="/tags/OSPF/" style="font-size: 10px;">OSPF</a> <a href="/tags/RIP/" style="font-size: 10px;">RIP</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/STP/" style="font-size: 10px;">STP</a> <a href="/tags/Sakura/" style="font-size: 10px;">Sakura</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/VLAN/" style="font-size: 10px;">VLAN</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a> <a href="/tags/Win10/" style="font-size: 10px;">Win10</a> <a href="/tags/eNSP/" style="font-size: 15.71px;">eNSP</a> <a href="/tags/eNsp/" style="font-size: 11.43px;">eNsp</a> <a href="/tags/hackintosh/" style="font-size: 10px;">hackintosh</a> <a href="/tags/hexo/" style="font-size: 11.43px;">hexo</a> <a href="/tags/jQuery/" style="font-size: 10px;">jQuery</a> <a href="/tags/w650dc/" style="font-size: 10px;">w650dc</a> <a href="/tags/web/" style="font-size: 18.57px;">web</a> <a href="/tags/%E4%B8%BB%E9%A2%98/" style="font-size: 12.86px;">主题</a> <a href="/tags/%E4%BA%94%E7%AC%94/" style="font-size: 10px;">五笔</a> <a href="/tags/%E4%BA%A4%E6%8D%A2%E6%9C%BA/" style="font-size: 10px;">交换机</a> <a href="/tags/%E4%BC%81%E4%B8%9A%E7%BD%91/" style="font-size: 10px;">企业网</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 20px;">前端</a> <a href="/tags/%E5%8D%8E%E4%B8%89/" style="font-size: 15.71px;">华三</a> <a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 17.14px;">博客</a> <a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 11.43px;">后端</a> <a href="/tags/%E5%9B%BE%E9%9B%86/" style="font-size: 10px;">图集</a> <a href="/tags/%E5%AE%89%E8%A3%85/" style="font-size: 10px;">安装</a> <a href="/tags/%E5%AE%9E%E9%AA%8C/" style="font-size: 12.86px;">实验</a> <a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size: 10px;">微信</a> <a href="/tags/%E5%BE%AE%E4%BF%A1%E9%98%B2%E7%9B%97%E9%93%BE/" style="font-size: 10px;">微信防盗链</a> <a href="/tags/%E6%82%A6%E8%AF%BB/" style="font-size: 10px;">悦读</a> <a href="/tags/%E6%8A%80%E6%9C%AF/" style="font-size: 10px;">技术</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 11.43px;">数据结构</a> <a href="/tags/%E6%A1%86%E6%9E%B6/" style="font-size: 10px;">框架</a> <a href="/tags/%E6%A8%A1%E5%9D%97%E5%8C%96/" style="font-size: 10px;">模块化</a> <a href="/tags/%E8%80%83%E7%A0%94/" style="font-size: 10px;">考研</a> <a href="/tags/%E8%8B%B1%E8%AF%AD/" style="font-size: 10px;">英语</a> <a href="/tags/%E9%80%86%E6%B0%B4%E5%AF%92/" style="font-size: 10px;">逆水寒</a> <a href="/tags/%E9%85%8D%E7%BD%AE/" style="font-size: 12.86px;">配置</a> <a href="/tags/%E9%BB%91%E8%8B%B9%E6%9E%9C/" style="font-size: 10px;">黑苹果</a>
    </div>
    
      <script>
        var maxTagcloud = parseInt(10);
        var tags_length = parseInt(57);
        var tags_arr = [];
        for(var i = 0; i < tags_length; i++){
          tags_arr.push(i);
        }
        tags_arr.sort(function (l, r) {
          return Math.random() > 0.5 ? -1 : 1;
        });
        tags_arr = tags_arr.slice(0, maxTagcloud < tags_length ? tags_length - maxTagcloud : 0);
        for(var tag_i = 0; tag_i < tags_arr.length; tag_i++){
          document.getElementById("randomtagcloud").children[tags_arr[tag_i]].style.display = 'none';
        }
      </script>
    
  </div>

  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章归档</h3>
    <div class="nexmoe-widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li></ul>
    </div>
  </div>


  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">最新文章</h3>
    <div class="nexmoe-widget">
      <ul>
        
          <li>
            <a href="/2020/08/28/VUE/">Vue学习笔记</a>
          </li>
        
          <li>
            <a href="/2020/08/20/AJAX/">Ajax学习笔记</a>
          </li>
        
          <li>
            <a href="/2020/07/12/React/">React全家桶(技术栈)学习笔记</a>
          </li>
        
          <li>
            <a href="/2020/07/04/Git/">Git学习笔记</a>
          </li>
        
          <li>
            <a href="/2020/06/14/nodejs/">NodeJs学习笔记</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
    <!-- <div class="nexmoe-copyright">
        &copy; 2020 Luwang
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://nexmoe.com/hexo-theme-nexmoe.html" target="_blank">Nexmoe</a>
    </div> -->
    <div style="text-align: center;">
        <div class="github-badge">
            <a rel="license" href="https://github.io/" target="_blank" title="静态网页托管于Github">
            <span class="badge-subject">Hosted</span><span class="badge-value bg-brightgreen"><i class="fa fa-github" aria-hidden="true"></i> Github</span></a>
        </div>
        <div class="github-badge">
            <a rel="license" href="https://nexmoe.com/hexo-theme-nexmoe.html" target="_blank" title="站点使用 Sakura 主题，作者：Mashiro & Hojun">
            <span class="badge-subject"><i class="fa fa-themeisle" aria-hidden="true"></i> Theme</span><span class="badge-value bg-theme">nexmoe</span></a>
        </div><br />
        <div class="github-badge">
            <span class="badge-subject"><i class="fa fa-user" aria-hidden="true"></i> UV</span>
            <span  class="badge-value bg-orange" id="busuanzi_value_site_uv"></span>
        </div>
        <div class="github-badge">
            <span class="badge-subject"><i class="fa fa-eye" aria-hidden="true"></i> PV</span>
            <span class="badge-value bg-brightgreen" id="busuanzi_value_site_pv"></span>
        </div>
    </div>
    <div class="site-img" style="margin: 20px 0 20px 16px;">
        <a href="#"><img width="200px" src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/wechat/wallleap.bmp"></a>
    </div>
</div><!-- .nexmoe-drawer -->
  </div>
  <div id="nexmoe-content">
    <div class="nexmoe-primary">
        <div class="nexmoe-post">
  
      <div class="nexmoe-post-cover" style="padding-bottom: 66.66666666666666%;"> 
          <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="Ajax学习笔记" class="lazyload">
          <h1>Ajax学习笔记</h1>
      </div>
  
  
  <link rel="stylesheet" href="/css/sharejs.css">
  <input type="hidden" id="yelog_site_posts_number" value="54">
  <input type="hidden" id="yelog_site_word_count" value="276.4k">
<div class="nexmoe-post-meta" style="margin:10px 0!important;">
    <a><i class="nexmoefont icon-calendar-fill"></i>2020年08月20日</a>
    <a><i class="nexmoefont icon-areachart"></i>11.8k 字</a>
    <a><i class="nexmoefont icon-time-circle-fill"></i>大概 59 分钟</a>
    <a><i class="nexmoefont icon-eye-fill"></i>阅读次数 <span id="busuanzi_value_page_pv"></span></a>
</div>

  <div class="nexmoe-post-right">
    
      <div class="nexmoe-fixed">
        <div class="nexmoe-valign">
            <div class="nexmoe-toc">
                <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、概述"><span class="toc-number">1.</span> <span class="toc-text">一、概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、快速上手"><span class="toc-number">2.</span> <span class="toc-text">二、快速上手</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、AJAX基础"><span class="toc-number">2.1.</span> <span class="toc-text">1、AJAX基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、理解readyState"><span class="toc-number">2.2.</span> <span class="toc-text">2、理解readyState</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3、AJAX遵循HTTP协议"><span class="toc-number">2.3.</span> <span class="toc-text">3、AJAX遵循HTTP协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、具体用法"><span class="toc-number">3.</span> <span class="toc-text">三、具体用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、数据接口的概念"><span class="toc-number">3.1.</span> <span class="toc-text">1、数据接口的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、AJAX发送GET请求并传递参数"><span class="toc-number">3.2.</span> <span class="toc-text">2、AJAX发送GET请求并传递参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3、POST请求"><span class="toc-number">3.3.</span> <span class="toc-text">3、POST请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4、同步和异步"><span class="toc-number">3.4.</span> <span class="toc-text">4、同步和异步</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5、响应数据格式"><span class="toc-number">3.5.</span> <span class="toc-text">5、响应数据格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6、处理服务器端响应的数据"><span class="toc-number">3.6.</span> <span class="toc-text">6、处理服务器端响应的数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7、兼容方案"><span class="toc-number">3.7.</span> <span class="toc-text">7、兼容方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8、补充"><span class="toc-number">3.8.</span> <span class="toc-text">8、补充</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、封装"><span class="toc-number">4.</span> <span class="toc-text">四、封装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、AJAX请求封装"><span class="toc-number">4.1.</span> <span class="toc-text">1、AJAX请求封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、jQuery中的Ajax"><span class="toc-number">4.2.</span> <span class="toc-text">2、jQuery中的Ajax</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3、axios"><span class="toc-number">4.3.</span> <span class="toc-text">3、axios</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4、fetch"><span class="toc-number">5.</span> <span class="toc-text">4、fetch</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五、跨域"><span class="toc-number">6.</span> <span class="toc-text">五、跨域</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、概念"><span class="toc-number">6.1.</span> <span class="toc-text">1、概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、解决方案"><span class="toc-number">6.2.</span> <span class="toc-text">2、解决方案</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#六、XMLHttpRequest2-0"><span class="toc-number">7.</span> <span class="toc-text">六、XMLHttpRequest2.0</span></a></li></ol>
            </div>
        </div>
      </div>
    
  </div>

  <article>
    <h2 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h2><blockquote>
<p>Web程序的最初的目的就是将信息(数据)放到公共的服务器，让所有的网络用户都可以通过浏览器访问</p>
</blockquote>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815183452.png" alt="image-20200815183450778" class="lazyload"></p>
<p>在此之前，我们可以通过以下几种方式让浏览器发出服务端的请求，获得服务端的数据：</p>
<ul>
<li><p>地址栏输入地址，回车，刷新</p>
</li>
<li><p>特定元素的href或src属性</p>
</li>
<li><p>表单提交</p>
</li>
</ul>
<p>这些方案都是我们无法通过或者很难通过代码的方式进行编程(对服务器发出请求并且接收服务端返回的响应)，如果我们可以通过JavaScript直接发送网络请求，那么web的可能就会更多，随之能够实现的功能也会更多，至少不再是“单机游戏”。</p>
<p>1、AJAX(Asynchronous JavaScript and XML,异步的JS和XML)，最早出现在2005年的Google Suggest，是在浏览器端进行网络编程(发送请求，接收响应)的技术方案，它使我们可以<strong>通过JavaScript直接获取服务端最新的内容而不必重新加载页面</strong>，让web更能接近桌面应用的用户体验。</p>
<p>说白了，AJAX就是<strong>浏览器提供的一套API</strong>，可以通过JavaScript调用，从而实现代码控制请求与响应，实现网络编程。(AJAX不是新的编程语言，而是一种将现有标准组合在一起使用的新的方式)</p>
<blockquote>
<p>能力不够API凑。</p>
</blockquote>
<blockquote>
<p>对xxx进行编程指的就是用代码的方式操作它</p>
</blockquote>
<p>2、XML</p>
<p>可扩展标记语言，被设计用来传输和存储数据，和HTML有点像，但是HTML中都是预定义标签，而XML中没有预定义标签，全都是自定义标签，用来表示一些数据。</p>
<p>现在已经被json取代了。</p>
<p>3、AJAX的特点</p>
<p>(1) 优点</p>
<p>可以无需刷新页面而与服务器端进行通信。</p>
<p>允许你根据用户事件来更新部分页面内容。</p>
<p>(2) 缺点</p>
<p>没有浏览历史，不能回退</p>
<p>存在跨域问题(同源)</p>
<p>SEO不友好</p>
<p>补充：搭建环境</p>
<p><strong>使用Express搭建后台</strong></p>
<p><a href="https://www.expressjs.com.cn/" target="_blank" rel="noopener">Express中文网</a></p>
<p>1、安装</p>
<p>需要有node，没有的可以先<a href="https://nodejs.org/en/" target="_blank" rel="noopener">下载</a></p>
<p>进入一个文件夹，输入命令创建node应用</p>
<pre><code class="bash">npm init --yes</code></pre>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200810090417637.png" alt="node初始化命令" class="lazyload"></p>
<p>接着输入命令，安装express</p>
<pre><code class="bash">npm install express</code></pre>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200810090617412.png" alt="express安装" class="lazyload"></p>
<p>2、基本使用</p>
<p>(1) 编写代码</p>
<pre><code class="javascript">// 1、引入express
const express = require(&#39;express&#39;)
const { response } = require(&#39;express&#39;)

// 2、创建应用对象
const app = express()

// 3、创建路由规则 
// reques是对请求报文的封装；response是对响应报文的封装
app.get(&#39;/&#39;, (request, response) =&gt; { // 前端访问http://localhost:8000/
  // 设置响应
  response.send(&#39;Hello Express&#39;)
})

// 4、监听端口启动服务
app.listen(8000, () =&gt; {
  console.log(&#39;服务已经启动，8000端口监听中，请访问http://localhost:8000/&#39;)
})</code></pre>
<p>(2) 运行代码</p>
<p>在该目录下输入命令</p>
<pre><code class="bash">node 文件名.js</code></pre>
<p>eg:</p>
<pre><code class="bash">node expressTest.js</code></pre>
<p>接着访问地址<a href="http://localhost:8000/即可" target="_blank" rel="noopener">http://localhost:8000/即可</a></p>
<p>3、准备服务端代码</p>
<p><code>server.js</code></p>
<pre><code class="javascript">const express = require(&#39;express&#39;)
const { response } = require(&#39;express&#39;)
const app = express()
// 这里设置为get则请求方式为GET、&#39;/server&#39;则请求url需要加上这个
app.get(&#39;/server&#39;, (request, response) =&gt; {
  // 设置响应头
  response.setHeader(&#39;Access-Control-Allow-origin&#39;,&#39;*&#39;) // 设置允许跨域
  // 设置响应体
  response.send(&#39;Hello AJAX&#39;)
})
// 在这里接着加上接口
app.listen(8000, () =&gt; {
  console.log(&#39;服务已经启动，8000端口监听中，请访问http://localhost:8000/&#39;)
})</code></pre>
<p>关闭上面那个，将这个启动：</p>
<pre><code class="bash">node server.js</code></pre>
<p>reload包——nodemon</p>
<p>自动检测js代码变化，restart服务</p>
<p>1、安装</p>
<pre><code class="sh">npm install -g nodemon</code></pre>
<p>2、利用nodemon执行文件</p>
<pre><code class="sh">nodemon 文件名.js</code></pre>
<p>例如：</p>
<pre><code class="sh">nodemon server.js</code></pre>
<h2 id="二、快速上手"><a href="#二、快速上手" class="headerlink" title="二、快速上手"></a>二、快速上手</h2><h3 id="1、AJAX基础"><a href="#1、AJAX基础" class="headerlink" title="1、AJAX基础"></a>1、AJAX基础</h3><p>(一个构造函数、两个方法、一个事件)</p>
<p>发送请求</p>
<pre><code class="html">&lt;style&gt;
#result{
    width:200px;
    height:100px;
    border:1px solid skyblue;
}
&lt;/style&gt;
&lt;button id=&quot;btn&quot;&gt;点击发送请求&lt;/button&gt;
&lt;div id=&quot;result&quot;&gt;&lt;/div&gt;
&lt;script&gt;
btn.onclick = function(){
  // 涉及到AJAX操作的页面不能使用文件协议访问（文件的方式访问）
  // AJAX是一套API，核心提供的类型：XMLHttpRequest XML--&gt;JSON(现在使用的是JSON格式的了)
  // 1、安装浏览器（用户代理）——创建对象
  var xhr = new XMLHttpRequest() // xhr就类似于浏览器的作用(发送请求接收响应)
  // 2、打开浏览器 输入网址——初始化 设置请求方式和url
  xhr.open(&#39;GET&#39;, &#39;http://127.0.0.1:8000/server&#39;)  // 这一步只是在搭桥铺路
  // 3、敲回车键 开始请求——发送
  xhr.send()  // send才是开始请求
  /* 上面三个是ajax核心代码 */
}
&lt;/script&gt;</code></pre>
<p>接收响应</p>
<pre><code class="html">&lt;script&gt;
  var xhr = new XMLHttpRequest()
  xhr.open(&#39;GET&#39;, &#39;http://127.0.0.1:8000/server&#39;) // 方式，url
  xhr.send()
  /* 因为响应需要时间，所以无法通过返回值的方式返回响应 */
  // var response = xhr.send()
  // console.log(response) // undefine

  // 4、等待响应——事件绑定 处理服务端返回的结果
  /* 如果需要捕获状态的变化，需要注意代码的执行顺序的问题(不要出现来不及的情况)
  * 因为客户端永远不知道服务端何时才能返回我们需要的响应，所以AJAX API采用事件的机制(通知的感觉)
  */
  xhr.onreadystatechange = function(){ // 建议事件使用addEventListener方式
    // 这个事件并不是只在响应时触发，XHR状态改变就触发
    console.log(this.readyState)
    if(this.readyState!==4) return
    // 所以下面就是为4的情况
    // 5、看结果
    console.log(this.responseText) // 获取响应内容(响应体)
    result.innerHTML = xhr.response
  }
&lt;/script&gt;</code></pre>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815183735.png" alt="ajax基础操作" class="lazyload"></p>
<h3 id="2、理解readyState"><a href="#2、理解readyState" class="headerlink" title="2、理解readyState"></a>2、理解readyState</h3><p><code>onreadystatechange</code>是XHR状态改变时触发的</p>
<pre><code class="html">&lt;script&gt;
  var xhr = new XMLHttpRequest()
  console.log(xhr.readyState) // 0
  xhr.open(&#39;GET&#39;, &#39;./time.php&#39;)
  console.log(xhr.readyState) // 1
  xhr.send()
  // console.log(xhr.readyState) // 1 取上面那个
  xhr.addEventListener(&#39;readystatechange&#39;, function(){
    // if(this.readyState !== 4) return
    // console.log(this.responseText)
    console.log(this.readyState) // 2 3 4
  })
&lt;/script&gt;</code></pre>
<p>readyState：</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815183844.png" alt="readyState代码" class="lazyload"></p>
<p>new XMLHttpRequest –&gt; 0 初始化 <strong>请求代理对象</strong></p>
<p>1–-&gt; open方法已经调用，<strong>建立</strong>一个与服务端特定端口的<strong>连接</strong></p>
<p>2 –-&gt; 已经<strong>接收</strong>到了响应报文的<strong>响应头</strong> <code>console.log(this.getAllResponseHeaders())</code> 可以拿到响应头，拿不到响应体</p>
<p>拆分：<code>console.log(this.getAllResponseHeaders().splite(‘\n’).splite(‘:’))</code></p>
<p>获取指定键：<code>console.log(this.getAllResponseHeaders(‘data’))</code></p>
<p>3 –-&gt; <strong>正在下载响应报文的响应体</strong>，可能响应体为空或不完整</p>
<p>4 –-&gt; 一切OK，<strong>整个响应报文已经下载下来</strong>了 <code>console.log(this.responseText)</code></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815183915.png" alt="readyState" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815183935.png" alt="image-20200815183934889" class="lazyload"></p>
<p>所以应该<strong>在readyState的值为4</strong>时，才去处理后续的逻辑</p>
<p>可以用<code>xhr.onload</code>替代</p>
<pre><code class="html">&lt;script&gt;
  var xhr = new XMLHttpRequest()
  xhr.open(&#39;GET&#39;, &#39;time.php&#39;)
  xhr.send(null) // send可以传请求体，传null代表没有请求体
  xhr.onload = function (){ // 加载完成 H5中提供的XMLHttpRequest version 2.0定义的
    // 相当于readyState为4之后的
    console.log(this.responseText)
  }
&lt;/script&gt;</code></pre>
<p>ps: console.log(this) 显示readyState是2、3、4可展开来全都是4，这个是console.log的机制问题，展开的时候只会显示此时的状态</p>
<p>例如：</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815184045.png" alt="log机制测试" class="lazyload"></p>
<p>在浏览器上看，不展开没问题显示123，展开的一瞬间都是456</p>
<h3 id="3、AJAX遵循HTTP协议"><a href="#3、AJAX遵循HTTP协议" class="headerlink" title="3、AJAX遵循HTTP协议"></a>3、AJAX遵循HTTP协议</h3><p>HTTP协议(Hypertext Transport Protocol，超文本传输协议)详细规定了浏览器和万维网服务器之间互相通信的规则。</p>
<p>本质上XMLHttpRequest就是JavaScript在web平台中发送HTTP请求的手段，所以我们发送出去的请求仍然是HTTP请求，同样符合HTTP约定的格式</p>
<p>请求报文：</p>
<ul>
<li>请求行 <code>POST /s?ie=utf-8 HTTP/1.1</code></li>
</ul>
<p>​    <code>GET /s?ie=utf-8 HTTP/1.1</code></p>
<ul>
<li>请求头 <code>Host: atguigu.com</code></li>
</ul>
<p>​    <code>Cookie: name=guigu</code></p>
<p>​    <code>Content-Type: application/x-www-form-urlencoded</code></p>
<p>​    <code>User-Agent: chrome 83</code></p>
<ul>
<li><p>空行(必须得有)</p>
</li>
<li><p>请求体 (GET请求这里为空，POST可不为空) <code>username=admin&amp;password=admin</code></p>
</li>
</ul>
<p>响应报文：</p>
<ul>
<li>行  <code>HTTP/1.1 200 OK</code></li>
</ul>
<p>​       404</p>
<p>​       403</p>
<p>​       401</p>
<p>​       500</p>
<ul>
<li><p>头  <code>Content-Type: text/html;charset=utf-8</code></p>
<p> <code>Content-length: 2048</code></p>
<p> <code>Content-encoding: gzip</code></p>
</li>
<li><p>空行 </p>
</li>
<li><p>体  </p>
</li>
</ul>
<pre><code>&lt;html&gt;
  &lt;head&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;wallleap&lt;/h1&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815184354.png" alt="HTTP响应报文信息" class="lazyload"></p>
<pre><code class="html">&lt;script&gt;
  // 1、创建对象
  var xhr = new XMLHttpRequest()
  // 2、初始化 设置请求方法和url
xhr.open(&#39;POST&#39;, &#39;add.php&#39;) // 设置请求行
  xhr.setRequestHeader(&#39;Foo&#39;, &#39;Bar&#39;) // 设置一个请求头
  // 一旦请求体是urlencoded格式的内容，一定要设置请求头中的Content-Type为下面这个
  xhr.setRequestHeader(&#39;Content-Type&#39;, &#39;application/x-www-form-urlencoded&#39;) // 设置第二请求头
  xhr.send(&#39;key1=value1&amp;key2=value2&#39;) // 以urlencoded格式设置请求体
  // xhr.send(&#39;{&quot;foo&quot;: &quot;123&quot;}&#39;) // 以json格式设置请求体，上面设置application/json
  xhr.onload = function (){
    // 响应行
    console.log(this.status) // 获取响应状态码
    console.log(this.statusText) // 获取响应状态描述
    // 获取响应头信息
    console.log(this.getResponseHeader(&#39;Content-Type&#39;)) // 指定响应头
    console.log(this.getAllResponseHeaders()) // 全部响应头
    // 获取响应体
    console.log(this.responseText) // 文本形式
    console.log(this.responseXML) // XML形式，了解即可
  }
&lt;/script&gt;</code></pre>
<p>补充：</p>
<pre><code class="javascript">xhr.addEventListener(&#39;readystatechange&#39;, function(){
    if(this.readyState === 4 &amp;&amp; this.status === 200){
      console.log(this)
    }
})</code></pre>
<p>可能有的人会同时判断状态码200，事实上没有必要，状态码404也需要处理,可以到里面嵌套，例如：</p>
<pre><code class="javascript">xhr.onreadystatechange=function(){
  if(this.readyState === 4){
    if(this.status &gt;= 200  &amp;&amp; xhr.status &lt; 300){
      // 处理结果
    }else{
      ...
    }
  }
})</code></pre>
<p>Chrome打开开发者模式</p>
<p>点击Network能够看到传输的文件</p>
<p>点击XHR查看</p>
<p>Request Headers——请求头</p>
<p>点击view source可以看到请求行</p>
<p>Response Header——响应头</p>
<p>点击view source可以看到响应行</p>
<p>Response——响应体</p>
<p>Preview——预览，对响应体解析之后的页面</p>
<h2 id="三、具体用法"><a href="#三、具体用法" class="headerlink" title="三、具体用法"></a>三、具体用法</h2><h3 id="1、数据接口的概念"><a href="#1、数据接口的概念" class="headerlink" title="1、数据接口的概念"></a>1、数据接口的概念</h3><p>服务器端返回的响应就是一个JSON内容（返回的就是数据）</p>
<p>对于返回数据的地址一般我们称之为接口（形式上是web形式）</p>
<p><a href="http://api.douban.com/v2/movie/top250" target="_blank" rel="noopener">http://api.douban.com/v2/movie/top250</a></p>
<p>提供一定的能力，有输入有输出就可以称为接口</p>
<h3 id="2、AJAX发送GET请求并传递参数"><a href="#2、AJAX发送GET请求并传递参数" class="headerlink" title="2、AJAX发送GET请求并传递参数"></a>2、AJAX发送GET请求并传递参数</h3><pre><code class="html">&lt;script&gt;
  var xhr = new XMLHttpRequest()
  // GET请求传递参数通常使用URL中的问号传递数据
  xhr.open(&#39;GET&#39;, &#39;http://127.0.0.1:8000/server?a=100&amp;b=200&amp;c=300&#39;)
  // 一般在GET请求时无需设置响应体，可以传null或者干脆不传
  xhr.send(null)
  xhr.onreadystatechange = function (){
    if(this.readyState !== 4) return
    console.log(this.responseText)
  }
&lt;/script&gt;
&lt;!-- 一般情况下URL传递的都是参数性质的数据，而POST一般都是业务数据 --&gt;</code></pre>
<p>例子：将得到的四个用户名称{}放到ul&gt;li中，点击li能够获取到该用户的年龄</p>
<pre><code class="html">&lt;ul id=&quot;list&quot;&gt;&lt;/ul&gt;
&lt;script&gt;
  var listElement = document.getElementById(&#39;list&#39;)
  /* 发送请求获取到列表数据，呈现在页面上 */
  var xhr = new XMLHttpRequest()
  xhr.open(&#39;POST&#39;, &#39;user.php?id=2&#39;)
  xhr.send(null)
  xhr.onreadystatechange = function (){
    if(this.readyState !== 4) return
    var data = JSON.parse(this.responseText)
    // console.log(data)
    for(var i = 0; i &lt; data.length; i++){
      // console.log(data[i])
      var liElement = document.createElement(&#39;li&#39;)
      liElement.innerHTML = data[i].name
      liElement.id = data[i].id
      listElement.appendChild(liElement)
      /* 给每一个li注册点击事件 */
      // 由于li是动态创建的，因此需要移到创建li的时候
      listElement.addEventListener(&#39;click&#39;, function (){
          // TODO: 通过AJAX操作获取服务端对应数据的信息
          // 获取当前被点击元素对应数据的id
          // console.log(this.id)
          var xhr1 = new XMLHttpRequest()
          xhr1.open(&#39;GET&#39;, &#39;users.php?id=&#39; + this.id)
          xhr1.send()
          xhr1.onreadystatechange = function (){
            if(this.readyState !== 4) return
            var obj = JSON.parse(this.responseText)
            alert(obj.age)
          }
      })
    }
  }
&lt;/script&gt;</code></pre>
<h3 id="3、POST请求"><a href="#3、POST请求" class="headerlink" title="3、POST请求"></a>3、POST请求</h3><p>POST请求过程中，都是采用请求体承载需要提交的数据</p>
<pre><code class="javascript">// 1.创建对象
const xhr = new XMLHttpRequest()
// 2.初始化 设置类型与URL(open的第一个参数的作用就是设置请求的method)
xhr.open(&#39;POST&#39;,&#39;http://127.0.0.1:8000/server&#39;)
// 设置请求头信息
xhr.setRequestHeader(&#39;Content-Type&#39;,&#39;application/x-www-form-urlencoded&#39;) // 设置请求头中的Content-Type为application/x-www-form-urlencoded——标识这次请求得请求体格式为urlencoded以便于服务端接收数据
// xhr.setRequestHeader(&#39;name&#39;,&#39;wallleap&#39;) // 也可以自定义
// 3.发送 POST方式需要提交到服务端的数据可以通过send方法的参数传递，格式：key1=value1&amp;key2=value2
xhr.send(&quot;key1=value1&amp;key2=value2&quot;)
// xhr.send(&quot;key1:value1&amp;key2:value2&quot;)
// xhr.send(&quot;value1&quot;)  // ---&gt;可以随意写，但是需要按格式，方便后台处理
// 4.事件绑定
xhr.onreadystatechange = function(){
  // 判断
  if(xhr.readyState===4){
    if(xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300){
      // 处理服务端返回的结果
      result.innerHTML = xhr.response
    }
  }
}</code></pre>
<p>由于<code>server.js</code>中只设置了get的允许跨域，因此需要在文件中加入允许post跨域的代码</p>
<pre><code class="javascript">// app.get(&#39;/server&#39;, (request, response) =&gt; {
app.post(&#39;/server&#39;, (request, response) =&gt; {
  // 设置响应头  设置允许跨域
  response.setHeader(&#39;Access-Control-Allow-Origin&#39;, &#39;*&#39;);
  // 设置允许所有头信息，就比如上面设置的自定义响应头会报错，就需要加上这个
  // response.setHeader(&#39;Access-Control-Allow-Headers&#39;, &#39;*&#39;);
  // 设置响应体
  response.send(&#39;HELLO AJAX POST&#39;);
});</code></pre>
<p>可以改为all</p>
<pre><code class="javascript">//可以接收任意类型的请求(get/post/options/...)
app.all(&#39;/server&#39;, (request, response) =&gt; {
  //设置响应头  设置允许跨域
  response.setHeader(&#39;Access-Control-Allow-Origin&#39;, &#39;*&#39;);
  //响应头
  response.setHeader(&#39;Access-Control-Allow-Headers&#39;, &#39;*&#39;);
  //设置响应体
  response.send(&#39;HELLO AJAX POST&#39;);
});</code></pre>
<p>测试</p>
<pre><code class="html">&lt;style&gt;
#result{
  width:200px;
  height:100px;
  border:solid 1px #903;
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id=&quot;result&quot;&gt;&lt;/div&gt;
&lt;script&gt;
  //获取元素对象
  const result = document.getElementById(&quot;result&quot;);
  //绑定事件
  result.addEventListener(&quot;mouseover&quot;, function(){
    //1. 创建对象
    const xhr = new XMLHttpRequest();
    //2. 初始化 设置类型与 URL
    xhr.open(&#39;POST&#39;, &#39;http://127.0.0.1:8000/server&#39;);
    //设置请求头
    xhr.setRequestHeader(&#39;Content-Type&#39;,&#39;application/x-www-form-urlencoded&#39;);
    xhr.setRequestHeader(&#39;name&#39;,&#39;wallleap&#39;);
    //3. 发送
    xhr.send(&#39;a=100&amp;b=200&amp;c=300&#39;);
    // xhr.send(&#39;a:100&amp;b:200&amp;c:300&#39;);
    // xhr.send(&#39;1233211234567&#39;);
    //4. 事件绑定
    xhr.onreadystatechange = function(){
      //判断
      if(xhr.readyState === 4){
        if(xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300){
          //处理服务端返回的结果
          result.innerHTML = xhr.response;
        }
      }
    }
  });
&lt;/script&gt;</code></pre>
<p>例子：点击登录按钮不刷新页面将数据传到后台</p>
<pre><code class="html">&lt;style&gt;
.loading{
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #555;
  text-align: center;
  padding-top: 200px;
  opacity: .5;
}
.loading::after{
  content: &#39;加载中……&#39;;
  font-size: 60px;
  color: #fff;
}
&lt;/style&gt;
&lt;div class=&quot;loading&quot;&gt;&lt;/div&gt;
&lt;table border=&quot;1&quot;&gt;
  &lt;tr&gt;
    &lt;td&gt;用户名&lt;/td&gt;
    &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;&quot; id=&quot;username&quot;&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;密码&lt;/td&gt;
    &lt;td&gt;&lt;input type=&quot;password&quot; name=&quot;&quot; id=&quot;password&quot;&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;&lt;/td&gt;
    &lt;td&gt;&lt;button id=&quot;btn&quot;&gt;登录&lt;/button&gt;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;script&gt;
  // 找一个合适的时机，做一件合适的事情(时间、内容)
  // 1、获取界面上的元素 value
  var textUsername = document.getElementById(&#39;username&#39;)
  var textPassword = document.getElementById(&#39;password&#39;)
  var btn = document.getElementById(&#39;btn&#39;)
  var loading = document.querySelector(&#39;.loading&#39;)
  btn.onclick = function (){
    loading.style.display = &#39;block&#39;
    var username = textUsername.value
    var password = textPassword.value
    // 2、通过XHR发送一个POST请求
    var xhr = new XMLHttpRequest
    xhr.open(&#39;POST&#39;, &#39;login.php&#39;)
    // 一定注意：如果请求体是urlencoded格式，必须设置这个请求头！
    xhr.setRequestHeader(&#39;Content-Type&#39;, &#39;application/x-www-form-urlencoded&#39;)
    // xhr.send(&#39;username=&#39; + username + &#39;&amp;password=&#39; + password)
    xhr.send(`username=${username}&amp;password=${password}`)
    // 3、根据服务端的反馈，作出界面提示
    xhr.onreadystatechange = function (){
      if(this.readyState !== 4) return
      console.log(this.responseText)
      loading.style.display = &#39;none&#39;
    }
  }
&lt;/script&gt;</code></pre>
<h3 id="4、同步和异步"><a href="#4、同步和异步" class="headerlink" title="4、同步和异步"></a>4、同步和异步</h3><p>生活中：</p>
<p>同步：一个人在同一个时刻只能做一件事情，在执行一些耗时的操作(不需要看管)不去做别的事情，只是等待</p>
<p>异步：在执行一些耗时的操作(不需要看管)去做别的事，而不是等待</p>
<p>xhr.open()第三个参数(async)要求传入的是一个bool值，其作用就是设置此次请求是否采用异步方式执行，默认为true，如果需要同步执行可以通过传递false实现</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815184832.png" alt="image-20200815184831019" class="lazyload"></p>
<p><code>console.time(‘标识’)</code> 启动一个秒表</p>
<p>中间写代码</p>
<p><code>console.timeEnd(‘标识’)</code> 结束这个秒表</p>
<p>这样就能知道用了多长时间(标识名称得相同)</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815184906.png" alt="image-20200815184905369" class="lazyload"></p>
<p>如果采用同步方式执行，则代码会卡死在xhr.send()这一步</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815184921.png" alt="image-20200815184920339" class="lazyload"></p>
<p>send方法会不会出现等待情况(区分同异步)</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815184939.png" alt="image-20200815184938765" class="lazyload"></p>
<p>知道同步模式即可(已被遗弃)</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815184956.png" alt="image-20200815184955646" class="lazyload"></p>
<p>同步模式注册时间时机问题</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185018.png" alt="image-20200815185017871" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185029.png" alt="image-20200815185028276" class="lazyload"></p>
<h3 id="5、响应数据格式"><a href="#5、响应数据格式" class="headerlink" title="5、响应数据格式"></a>5、响应数据格式</h3><p>如果希望服务器返回一个复杂数据，该如何处理：</p>
<p> 服务器发出何种格式的数据，这个格式如何在客户端用JavaScript解析</p>
<p>5.1 XML</p>
<p>一种数据描述手段</p>
<p>老掉牙的东西，现在项目中基本不使用</p>
<p>淘汰的原因：数据冗余太多</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185058.png" alt="image-20200815185057257" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185108.png" alt="image-20200815185106691" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185115.png" alt="image-20200815185114823" class="lazyload"></p>
<p><strong>5.2 JSON</strong></p>
<p>也是一种数据描述手段，类似于JavaScript字面量方式</p>
<p>服务端采用JSON格式返回数据，客户端按照JSON格式解析数据</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185141.png" alt="image-20200815185140660" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185148.png" alt="image-20200815185147671" class="lazyload"></p>
<p>来测试一下json的</p>
<p><code>server.js</code>中添加</p>
<pre><code class="javascript">//JSON 响应
app.all(&#39;/json-server&#39;, (request, response) =&gt; {
  //设置响应头  设置允许跨域
  response.setHeader(&#39;Access-Control-Allow-Origin&#39;, &#39;*&#39;);
  //响应头
  response.setHeader(&#39;Access-Control-Allow-Headers&#39;, &#39;*&#39;);
  //响应一个数据
  const data = {
    name: &#39;wallleap&#39;
  };
  //对对象进行字符串转换
  let str = JSON.stringify(data);
  //设置响应体
  response.send(str);
});</code></pre>
<p>测试</p>
<pre><code class="html">&lt;style&gt;
  #result{
    width:200px;
    height:100px;
    border:solid 1px #89b;
  }
&lt;/style&gt;
&lt;div id=&quot;result&quot;&gt;&lt;/div&gt;
&lt;script&gt;
  //绑定键盘按下事件
  window.onkeydown = function(){
    //发送请求
    const xhr = new XMLHttpRequest();
    //设置响应体数据的类型
    xhr.responseType = &#39;json&#39;; // 自动转换
    //初始化
    xhr.open(&#39;GET&#39;,&#39;http://127.0.0.1:8000/json-server&#39;);
    //发送
    xhr.send();
    //事件绑定
    xhr.onreadystatechange = function(){
      if(xhr.readyState === 4){
        if(xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300){
          // console.log(xhr.response);
          // result.innerHTML = xhr.response;
          // 1. 手动对数据转化
          // let data = JSON.parse(xhr.response);
          // console.log(data);
          // result.innerHTML = data.name;
          // 2. 自动转换
          console.log(xhr.response);
          result.innerHTML = xhr.response.name;
        }
      }
    }
  }
&lt;/script&gt;</code></pre>
<p>注意：</p>
<p>不论是JSON，还是XML，只是在AJAX请求过程中用到，并不代表它们之间有必然的联系，它们只是数据协议罢了</p>
<p>不管服务器使用XML还是JSON本质上都是将数据返回给客户端</p>
<p>服务端应该设置一个合理的Content-Type</p>
<h3 id="6、处理服务器端响应的数据"><a href="#6、处理服务器端响应的数据" class="headerlink" title="6、处理服务器端响应的数据"></a>6、处理服务器端响应的数据</h3><p>动态渲染数据到表格中</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185218.png" alt="image-20200815185217284" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185226.png" alt="image-20200815185225225" class="lazyload"></p>
<p>现在一般都不会这样操作，太繁琐了</p>
<p>模板引擎</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185252.png" alt="image-20200815185251189" class="lazyload"></p>
<p>常见模板引擎列表：<a href="https://github.com/tj/consolidate.js#supported-template-engines" target="_blank" rel="noopener">https://github.com/tj/consolidate.js#supported-template-engines</a></p>
<p>artTemplate： <a href="https://aui.github.io/art-template" target="_blank" rel="noopener">https://aui.github.io/art-template</a></p>
<p>模板引擎实际上就是一个API，模板引擎有很多种，使用方式大同小异，目的为了可以更容易地将数据渲染到HTML中</p>
<pre><code class="html">&lt;table id=&quot;comment&quot; border=&quot;1&quot;&gt;&lt;/table&gt;
&lt;!-- // 1.选择一个模板引擎 https://github.com/tj/consolidate.js#supported-template-engines
// 2、下载模板引擎JS库
// 3、引入到页面中 --&gt;
&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/art-template/4.13.2/lib/template-web.min.js&quot;&gt;&lt;/script&gt;
&lt;!-- 
  script标签的特点：
  1、innerHTML永远不会显示在界面上(display: none;)
  2、如果type属性不是text/javascript，内部的内容不会作为JavaScript执行
 --&gt;
&lt;!-- // 4、准备一个模板 --&gt;
&lt;!-- 
  JavaScript中用变量保存(维护不方便、不能换行)
  ——&gt; HTML中放到一个div中通过样式隐藏(添加误用元素、多余样式)
  ——&gt; script标签type修改之后不会显示在页面中，建议text/x-开头
--&gt;
&lt;script id=&quot;tmpl&quot; type=&quot;text/x-art-template&quot;&gt;
{{each comments}}  
&lt;tr&gt;
  &lt;td&gt;{{$index+1}}&lt;/td&gt;
  &lt;td&gt;{{$value.author}}&lt;/td&gt;
  &lt;td&gt;{{$value.content}}&lt;/td&gt;
  &lt;td&gt;{{$value.created}}&lt;/td&gt;
&lt;/tr&gt;
{{/each}}
&lt;/script&gt;
&lt;script&gt;
var xhr = new XMLHttpRequest()
xhr.open(&#39;GET&#39;, &#39;test.php&#39;)
xhr.send()
xhr.onreadystatechange = function (){
  if(this.readyState !== 4) return
  var res = JSON.parse(this.responseText)
  // // 5、准备一个数据
  var context = {comments: res.data}  // 上面的关键词就是comments
  console.log(context)
  var html = template(&#39;tmpl&#39;, context)
  console.log(html)
  document.getElementById(&#39;comment&#39;).innerHTML = html

  // 6、通过模板引擎的JS提供一个函数将模板和数据整合得到渲染结果HTML
  // 7、将渲染结果的HTML设置到某个元素的innerHTML中
}
&lt;/script&gt;</code></pre>
<h3 id="7、兼容方案"><a href="#7、兼容方案" class="headerlink" title="7、兼容方案"></a>7、兼容方案</h3><p>XMLHttpRequest在老板浏览器(IE5/6)中有兼容问题，可以通过另一种方式代替</p>
<pre><code class="javascript">var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(&#39;Microsoft.XMLHTTP&#39;)</code></pre>
<h3 id="8、补充"><a href="#8、补充" class="headerlink" title="8、补充"></a>8、补充</h3><p>(1) response、responseText</p>
<p>都是获取的响应</p>
<p>response: 获取到的结果或根据this.responseType的变化而变化(可以表述二进制数据)</p>
<p>responseText: 永远获取的是字符串形式的响应体</p>
<pre><code class="javascript">var xhr = new XMLHttpRequest
xhr.open(&#39;GET&#39;, &#39;test.php&#39;)
xhr.send()
xhr.responseType = &#39;json&#39;  // 通过代码告诉请求代理对象，服务端响应给我们的是JSON
xhr.onreadystatechange = function (){
  if(this.readyState !== 4) return
  console.log(this)
  console.log(this.response)
  console.log(this.responseText)  // 由于设置了json，因此不存在
}</code></pre>
<p>(2) IE缓存问题：IE浏览器会将ajax返回结果缓存起来，再次发送请求时，显示的是本地缓存，而不是最新的请求到的数据</p>
<p>在服务端添加一个：</p>
<pre><code class="javascript">//针对 IE 缓存
app.get(&#39;/ie&#39;, (request, response) =&gt; {
  //设置响应头  设置允许跨域
  response.setHeader(&#39;Access-Control-Allow-Origin&#39;, &#39;*&#39;);
  //设置响应体
  response.send(&#39;HELLO AJAX IE&#39;);
});</code></pre>
<p>解决</p>
<pre><code class="html">&lt;style&gt;
  #result{
    width:200px;
    height:100px;
    border:solid 1px #258;
  }
&lt;/style&gt;
&lt;button&gt;点击发送请求&lt;/button&gt;
&lt;div id=&quot;result&quot;&gt;&lt;/div&gt;
&lt;script&gt;
  const btn = document.getElementsByTagName(&#39;button&#39;)[0];
  const result = document.querySelector(&#39;#result&#39;);

  btn.addEventListener(&#39;click&#39;, function(){
    const xhr = new XMLHttpRequest();
    xhr.open(&quot;GET&quot;,&#39;http://127.0.0.1:8000/ie?t=&#39;+Date.now()); // 解决方案：加上参数，这样浏览器认为每次请求url都不一样
    xhr.send();
    xhr.onreadystatechange = function(){
      if(xhr.readyState === 4){
        if(xhr.status &gt;= 200 &amp;&amp; xhr.status&lt; 300){
          result.innerHTML = xhr.response;
        }
      }
    }
  })
&lt;/script&gt;</code></pre>
<p>(3) 请求超时和网络异常</p>
<p><code>server.js</code>中添加</p>
<pre><code class="javascript">//延时响应
app.all(&#39;/delay&#39;, (request, response) =&gt; {
  //设置响应头  设置允许跨域
  response.setHeader(&#39;Access-Control-Allow-Origin&#39;, &#39;*&#39;);
  response.setHeader(&#39;Access-Control-Allow-Headers&#39;, &#39;*&#39;);
  // 手动设置一个延时效果
  setTimeout(() =&gt; {
    //设置响应体
    response.send(&#39;延时响应&#39;);
  }, 1000) // 3000
});</code></pre>
<p>进行处理，在2s内还没有响应则取消</p>
<pre><code class="html">&lt;style&gt;
  #result{
    width:200px;
    height:100px;
    border:solid 1px #90b;
  }
&lt;/style&gt;
&lt;button&gt;点击发送请求&lt;/button&gt;
&lt;div id=&quot;result&quot;&gt;&lt;/div&gt;
&lt;script&gt;
  const btn = document.getElementsByTagName(&#39;button&#39;)[0];
  const result = document.querySelector(&#39;#result&#39;);
  btn.addEventListener(&#39;click&#39;, function(){
    const xhr = new XMLHttpRequest();
    //超时设置 2s 设置
    xhr.timeout = 2000;
    //超时回调
    xhr.ontimeout = function(){
      alert(&quot;网络异常, 请稍后重试!!&quot;);
    }
    //网络异常回调
    xhr.onerror = function(){
      alert(&quot;你的网络似乎出了一些问题!&quot;);
    }
    xhr.open(&quot;GET&quot;,&#39;http://127.0.0.1:8000/delay&#39;);
    xhr.send();
    xhr.onreadystatechange = function(){
      if(xhr.readyState === 4){
        if(xhr.status &gt;= 200 &amp;&amp; xhr.status&lt; 300){
          result.innerHTML = xhr.response;
        }
      }
    }
  })
&lt;/script&gt;</code></pre>
<p>网络异常可以利用浏览器调试中Network一栏，设置为Offline</p>
<p>(3) 取消请求</p>
<p>利用abort()方法取消请求</p>
<pre><code class="html">&lt;button&gt;点击发送&lt;/button&gt;
&lt;button&gt;点击取消&lt;/button&gt;
&lt;script&gt;
  //获取元素对象
  const btns = document.querySelectorAll(&#39;button&#39;);
  let x = null; // 由于第二个按钮也需要用到
  btns[0].onclick = function(){
    x = new XMLHttpRequest();
    x.open(&quot;GET&quot;,&#39;http://127.0.0.1:8000/delay&#39;);
    x.send();
  }
  // abort
  btns[1].onclick = function(){
    x.abort();
  }
&lt;/script&gt;</code></pre>
<p>(3) ajax重复发送请求问题：用户频繁发送请求，对服务器压力很大</p>
<p>请求时，可以判断，如果前面有一条这样的请求，那么将前面的请求取消掉</p>
<pre><code class="html">&lt;button&gt;点击发送&lt;/button&gt;
&lt;script&gt;
  //获取元素对象
  const btns = document.querySelectorAll(&#39;button&#39;);
  let x = null;
  //标识变量
  let isSending = false; // 是否正在发送AJAX请求
  btns[0].onclick = function(){
    //判断标识变量
    if(isSending) x.abort();// 如果正在发送, 则取消该请求, 创建一个新的请求
    x = new XMLHttpRequest();
    //修改 标识变量的值
    isSending = true;
    x.open(&quot;GET&quot;,&#39;http://127.0.0.1:8000/delay&#39;);
    x.send();
    x.onreadystatechange = function(){
      if(x.readyState === 4){
        //修改标识变量
        isSending = false;
      }
    }
  }
&lt;/script&gt;</code></pre>
<h2 id="四、封装"><a href="#四、封装" class="headerlink" title="四、封装"></a>四、封装</h2><h3 id="1、AJAX请求封装"><a href="#1、AJAX请求封装" class="headerlink" title="1、AJAX请求封装"></a>1、AJAX请求封装</h3><p>封装的套路：</p>
<p>(1)  写一个相对比较完善的用例</p>
<pre><code class="javascript">var xhr = new XMLHttpRequest
xhr.open(&#39;GET&#39;, &#39;test.php&#39;, true)
xhr.send(null)
xhr.addEventListener(&#39;readystatechange&#39;, function(){
  if(this.readyState !== 4) return
  console.log(this.responseText)
})</code></pre>
<p>(2)  写一个空函数，没有形参，将刚刚的用例直接作为函数的函数体</p>
<pre><code class="javascript">function ajax(){
  var xhr = new XMLHttpRequest
  xhr.open(&#39;GET&#39;, &#39;test.php&#39;, true)
  xhr.send(null)
  xhr.addEventListener(&#39;readystatechange&#39;, function(){
    if(this.readyState !== 4) return
    console.log(this.responseText)
  })
}</code></pre>
<p>(3)  根据使用过程中的需求抽象参数</p>
<pre><code class="javascript">/*
Ajax请求 version1
method: 请求方式 GET/POST
url: 请求地址 &#39;http://xxx.com/api&#39;
*/
function ajax(method, url){
  var xhr = new XMLHttpRequest
  xhr.open(method, url, true)
  xhr.send(data)
  xhr.addEventListener(&#39;readystatechange&#39;, function(){
    if(this.readyState !== 4) return
    console.log(this.responseText)
  })
}
ajax(&#39;GET&#39;, &#39;test.php&#39;)</code></pre>
<p>send需要传参</p>
<pre><code class="javascript">/*
Ajax请求 version2
method: 请求方式 GET/POST
url: 请求地址 &#39;http://xxx.com/api&#39;
params: 键值对字符串
*/
function ajax(method, url, params){
  var xhr = new XMLHttpRequest
  var data = null
  if(method === &#39;GET&#39;){
    url += &#39;?&#39; + params
  }
  xhr.open(method, url, true)
  if(method === &#39;POST&#39;){
    xhr.setRequestHeader(&#39;Content-Type&#39;, &#39;application/x-www-form-urlencoded&#39;)
    data = params || null
  }
  xhr.send(data)
  xhr.addEventListener(&#39;readystatechange&#39;, function(){
    if(this.readyState !== 4) return
    console.log(this.responseText)
  })
}
ajax(&#39;GET&#39;, &#39;test.php&#39;)
ajax(&#39;POST&#39;, &#39;post.php&#39;, &#39;key1=value1&amp;key2=value2&#39;)</code></pre>
<p>send实参可以传对象</p>
<pre><code class="javascript">/*
Ajax请求 version3
method: 请求方式 GET/POST
url: 请求地址 &#39;http://xxx.com/api&#39;
params: 对象
*/
function ajax(method, url, params){
  var xhr = new XMLHttpRequest
  // 将Object类型的参数转换为 key1=value1&amp;key2=value2的形式
  if(typeof params === &#39;object&#39;){
    var tempArr = []
    for (var key in params){
      var value = params[key]
      tempArr.push(key + &#39;=&#39; + params[key])
      // tempArr =&gt; [&#39;key1=value1&#39;, &#39;key2=value2&#39;]
    }
    params = tempArr.join(&#39;&amp;&#39;)
    // tempArr =&gt; [&#39;key1=value1&amp;key2=value2&#39;]
  }
  if(method === &#39;GET&#39;){
    params ? url += &#39;?&#39; + params : url
  }
  xhr.open(method, url, true)
  var data = null
  if(method === &#39;POST&#39;){
    xhr.setRequestHeader(&#39;Content-Type&#39;, &#39;application/x-www-form-urlencoded&#39;)
    data = params || null
  }
  xhr.send(data)
  xhr.addEventListener(&#39;readystatechange&#39;, function(){
    if(this.readyState !== 4) return
    console.log(this.responseText)
  })
}
ajax(&#39;GET&#39;, &#39;test.php&#39;)
ajax(&#39;GET&#39;, &#39;time.php&#39;, {id: 1})
ajax(&#39;POST&#39;, &#39;post.php&#39;, {key1: &#39;value1&#39;, key2: &#39;value2&#39;, key3: &#39;value3&#39;})
ajax(&#39;POST&#39;, &#39;post.php&#39;, &#39;key1=value1&amp;key2=value2&#39;)</code></pre>
<p>不应该在封装的函数中主观地处理响应结果</p>
<pre><code class="javascript">/*
Ajax请求 version4
method: 请求方式 GET/POST/get/post
url: 请求地址 &#39;http://xxx.com/api&#39;
params: 对象
*/
function ajax(method, url, params){
  var res = null
  method= method.toUpperCase()
  var xhr = new XMLHttpRequest
  // 将Object类型的参数转换为 key1=value1&amp;key2=value2的形式
  if(typeof params === &#39;object&#39;){
    var tempArr = []
    for (var key in params){
      var value = params[key]
      tempArr.push(key + &#39;=&#39; + params[key])
      // tempArr =&gt; [&#39;key1=value1&#39;, &#39;key2=value2&#39;]
    }
    params = tempArr.join(&#39;&amp;&#39;)
    // tempArr =&gt; [&#39;key1=value1&amp;key2=value2&#39;]
  }
  if(method === &#39;GET&#39;){
    params ? url += &#39;?&#39; + params : url
  }
  xhr.open(method, url, false) // 改为同步了
  var data = null
  if(method === &#39;POST&#39;){
    xhr.setRequestHeader(&#39;Content-Type&#39;, &#39;application/x-www-form-urlencoded&#39;)
    data = params || null
  }
  xhr.addEventListener(&#39;readystatechange&#39;, function(){
    if(this.readyState !== 4) return
    // console.log(this.responseText)
    // return xhr.responseText // 无法再给外部函数返回结果，利用闭包、原型链
    res = this.responseText
  })
  xhr.send(data)
  // 由于是异步，会先执行(用同步，事件放到send前x不推荐)
  return res
}
console.log(ajax(&#39;post&#39;, &#39;post.php&#39;, {key1: &#39;value1&#39;, key2: &#39;value2&#39;, key3: &#39;value3&#39;}))</code></pre>
<p>不能使用同步模式</p>
<p>补充一个概念：</p>
<p>委托(或回调)</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185828.png" alt="image-20200815185827212" class="lazyload"></p>
<p>函数可以理解为一个想要做的事情，函数体中约定了这件事情做的过程，直到调用时才开始工作。</p>
<p>将函数作为参数传递就像是将一件事情交给别人，这就是委托。</p>
<p>异步编程中回调/委托使用频率很高。（由于是异步的，你先执行，我告诉你做什么，我就不等了——等不及，你执行就行了）</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185846.png" alt="image-20200815185845589" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185858.png" alt="image-20200815185856765" class="lazyload"></p>
<p>回调地狱/黑洞：死循环</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815185914.png" alt="image-20200815185913313" class="lazyload"></p>
<p><font color=red><strong>最终版本</strong></font></p>
<pre><code class="javascript">/*
发送一个Ajax请求 version5
@param (String) method  请求方式 GET/POST/get/post
@param (String) url     请求地址 &#39;http://xxx.com/api&#39;
@param (Object) params  请求参数
@param (Function) done  请求完成过后需要做的事情(委托/回调)
*/
function ajax(method, url, params, done){
  var res = null
  method= method.toUpperCase()
  var xhr = new XMLHttpRequest
  // 将Object类型的参数转换为 key1=value1&amp;key2=value2的形式
  if(typeof params === &#39;object&#39;){
    var tempArr = []
    for (var key in params){
      var value = params[key]
      tempArr.push(key + &#39;=&#39; + params[key])
    }
    params = tempArr.join(&#39;&amp;&#39;)
  }
  if(method === &#39;GET&#39;){
    params ? url += &#39;?&#39; + params : url
  }
  xhr.open(method, url, true)
  var data = null
  if(method === &#39;POST&#39;){
    xhr.setRequestHeader(&#39;Content-Type&#39;, &#39;application/x-www-form-urlencoded&#39;)
    data = params || null
  }
  xhr.send(data)
  xhr.addEventListener(&#39;readystatechange&#39;, function(){
    if(this.readyState !== 4) return
    res = this.responseText
    done(res)
  })
}

var ondone = function (res){
  console.log(&#39;准备执行&#39;)
  // console.log(res)
  alert(res)
  console.log(&#39;执行完成了&#39;)
}
ajax(&#39;post&#39;, &#39;post.php&#39;, {key1: &#39;value1&#39;, key2: &#39;value2&#39;}, ondone)
ajax(&#39;get&#39;, &#39;time.php&#39;, {}, function(res){
  console.log(res)
})</code></pre>
<h3 id="2、jQuery中的Ajax"><a href="#2、jQuery中的Ajax" class="headerlink" title="2、jQuery中的Ajax"></a>2、jQuery中的Ajax</h3><p>jQuery中有一套专门针对AJAX的封装，功能十分完善，经常使用，需要注意。</p>
<p><a href="https://www.jquery123.com/category/ajax/" target="_blank" rel="noopener">https://www.jquery123.com/category/ajax/</a></p>
<p>(1)通用方法$.ajax</p>
<p>底层接口(其他接口依赖于这个)</p>
<pre><code class="html">&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
// 1、最基础的调用
$.ajax(&#39;./time.php&#39;, { // url: 
  type: &#39;POST&#39;,  // method: 请求方法
  success: function(res){
    // res =&gt; 拿到的只是响应体
    console.log(res)
  }
})
// 可以把url写到里面去
$.ajax({ 
  url: &#39;./time.php&#39;,// url: 
  type: &#39;POST&#39;,  // method: 请求方法
  data: {id: 1, name: &#39;张三&#39;}, // 用于提交到服务端的参数
  /*
    get方式通过url传递
    post方式按照请求体传递
  */
  success: function(res){
    // res =&gt; 拿到的只是响应体
    console.log(res)
  }
})
// res返回格式
$.ajax({ 
  url: &#39;./json.php&#39;,// url: 请求地址
  type: &#39;get&#39;,  // method: 请求方法
  success: function(res){
    // res会根据服务器响应的Content-Type自动转换为对象
    // 这是jQuery内部实现的
    console.log(res)
  }
})
// 指定响应体类型
$.ajax({ 
  url: &#39;./json.php&#39;,// url: 
  type: &#39;get&#39;,  // method: 请求方法
  // data: {id: 1, name: &#39;张三&#39;}, // 设置请求参数
  dataType: &#39;json&#39;, // 用于设置响应体的类型(与data参数没关系)
  success: function(res){
    // 一旦设置了dataType选项，就不再关心服务端响应的Content-Type了
    // 客户端会主观地认为服务端返回的就是json格式
    console.log(res)
  }
})
&lt;/script&gt;</code></pre>
<p>原生操作中不论请求状态码是多少都会触发回调</p>
<p>jQuery中ajax的回调</p>
<pre><code class="html">&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
// jQuery中ajax的回调
$.ajax({ 
  url: &#39;./time.php&#39;, // url
  data: {key1:value1, key2:value2}, // 参数
  type: &#39;POST&#39;,  // method: 请求方法
  dataType: &#39;json&#39;, // 响应体结果
  beforeSend: function(xhr){
    // 在所有发送请求得操作(open、send)之前执行
    console.log(&#39;beforeSend&#39;, xhr)
  }
  success: function(res){ // 成功的回调
    // 只有请求成功(状态码为200)才会执行这个函数
    // res =&gt; 拿到的只是响应体
    console.log(res)
  },
  // timeout: 2000, // 超时时间
  error: function(xhr){ // 失败的回调
    // 只有请求不正常才会执行(状态码不为200)
    console.log(&#39;error&#39;,xhr)
  },
  complete: function(xhr){
    // 不管成功还是失败都是完成，都会执行这个complete函数
    console.log(&#39;complete&#39;, xhr)
  }
})
&lt;/script&gt;</code></pre>
<p>(2) 高级封装</p>
<pre><code class="html">&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
// 2、jQuery中ajax的快捷方法
$.get(&#39;time.php&#39;, function(res){
  console.log(res)
})
$.post(&#39;time.php&#39;, function(res){
  console.log(res)
})
// 服务端设置了json能转换对象，没设置不行
$.get(&#39;time.php&#39;, {id: 1}, function(res){
  console.log(res)
})
$.post(&#39;time.php&#39;, {id: 1}, function(res){
  console.log(res)
})
// 无视服务端Content-Type，视作JSON格式
$.getJSON(&#39;json.php&#39;, {id: 1}, function(res){
  console.log(res)
})
$.postJSON(&#39;json.php&#39;, {id: 1}, function(res){
  console.log(res)
})
明确请求的方式，根据方式选择快捷方法
&lt;/script&gt;</code></pre>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190207.png" alt="image-20200815190206531" class="lazyload"></p>
<pre><code class="html">&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
// 跳转其他页面，会白屏，但是有些页面只是部分不相同，可以局部刷新
$(function($){
  // 有一个独立的作用域，顺便确保页面加载完成执行
  $(&#39;a.item&#39;).on(&#39;click&#39;, function(){
    var url = $(this).attr(&#39;href&#39;)
    $(&#39;#main&#39;).load(url + &#39; #main&gt;*&#39;) // 元素.load(链接+空格+选择器)
    // 阻止a的默认行为
    return false
  })
})
&lt;/script&gt;</code></pre>
<p>将jQuery的几种方式汇总一下：</p>
<p><code>server.js</code>中：</p>
<pre><code class="javascript">//jQuery 服务
app.all(&#39;/jquery-server&#39;, (request, response) =&gt; {
    //设置响应头  设置允许跨域
    response.setHeader(&#39;Access-Control-Allow-Origin&#39;, &#39;*&#39;);
    response.setHeader(&#39;Access-Control-Allow-Headers&#39;, &#39;*&#39;);
    // response.send(&#39;Hello jQuery AJAX&#39;);
    const data = {name:&#39;wallleap&#39;};
    response.send(JSON.stringify(data));
});</code></pre>
<p>前端</p>
<pre><code class="html">&lt;link crossorigin=&quot;anonymous&quot; href=&quot;https://cdn.bootcss.com/twitter-bootstrap/3.3.7/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;
&lt;script crossorigin=&quot;anonymous&quot; src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js&quot;&gt;&lt;/script&gt; &lt;!-- crossorigin=&quot;anonymous&quot;：跨域源请求设置，加上之后向这个资源发送请求时不会携带当前域名下的cookie --&gt;
&lt;div class=&quot;container&quot;&gt;
    &lt;h2 class=&quot;page-header&quot;&gt;jQuery发送AJAX请求 &lt;/h2&gt;
    &lt;button class=&quot;btn btn-primary&quot;&gt;GET&lt;/button&gt;
    &lt;button class=&quot;btn btn-danger&quot;&gt;POST&lt;/button&gt;
    &lt;button class=&quot;btn btn-info&quot;&gt;通用型方法ajax&lt;/button&gt;
&lt;/div&gt;
&lt;script&gt;
  $(&#39;button&#39;).eq(0).click(function(){
    $.get(&#39;http://127.0.0.1:8000/jquery-server&#39;, {a:100, b:200}, function(data){
      console.log(data);
    },&#39;json&#39;);
  });
  $(&#39;button&#39;).eq(1).click(function(){
    $.post(&#39;http://127.0.0.1:8000/jquery-server&#39;, {a:100, b:200}, function(data){
      console.log(data);
    });
  });
  $(&#39;button&#39;).eq(2).click(function(){
    $.ajax({
      //url
      url: &#39;http://127.0.0.1:8000/jquery-server&#39;,
      //参数
      data: {a:100, b:200},
      //请求类型
      type: &#39;GET&#39;,
      //响应体结果
      dataType: &#39;json&#39;,
      //成功的回调
      success: function(data){
        console.log(data);
      },
      //超时时间
      timeout: 2000,
      //失败的回调
      error: function(){
        console.log(&#39;出错啦!!&#39;);
      },
      //头信息
      headers: {
        c:300,
        d:400
      }
    });
  });
&lt;/script&gt;</code></pre>
<p>(3) 全局事件及配置NProgress显示加载进度</p>
<pre><code class="html">&lt;style&gt;
  .loading{
    display: none;
    position: fixed;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    background-color: rgba(85, 85, 85, .5);
    text-align: center;
    padding-top: 200px;
    color: #fff;
    font-size: 50px;
  }
&lt;/style&gt;
&lt;div class=&quot;loading&quot;&gt;正在玩命加载中……&lt;/div&gt;
&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
// 3、jQuery全局事件处理函数
/*
$.ajax({
  url: &#39;time.php&#39;,
  beforeSend: function(xhr){
    // 显示加载提示
    $(&#39;.loading&#39;).fadeIn()
    console.log(&#39;即将开始请求&#39;)
  },
  complete: function(xhr){
    // 结束提示
    $(&#39;.loading&#39;).fadeOut()
    console.log(&#39;请求结束了&#39;)
  }
})
*/
// 所有的ajax请求开始和结束
$(document).ajaxStart(function(){
  // 只要有ajax请求发生就会执行
  // 显示加载提示
  $(&#39;.loading&#39;).fadeIn()
  console.log(&#39;即将开始请求&#39;)
})
$(document).ajaxStop(function(){
  // 只要有ajax请求发生就会执行
  // 显示加载提示
  $(&#39;.loading&#39;).fadeOut()
  console.log(&#39;请求结束了&#39;)
})
$(&#39;body&#39;).on(&#39;click&#39;, function(){
  // $.ajax({
  //   url: &#39;time.php&#39;
  // })
  $.get(&#39;time.php&#39;)
})
&lt;/script&gt;</code></pre>
<p>可以写成链式的：</p>
<pre><code class="javascript">$(document)
  .ajaxStart(function(){
    ……
  })
  .ajaxStop(function(){
    ……
  })</code></pre>
<p>搭配NProgress</p>
<pre><code class="html">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/nprogress@0.2.0/nprogress.css&quot;&gt;
&lt;script src=&quot;https://unpkg.com/nprogress@0.2.0/nprogress.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div style=&quot;margin-top: 100px;text-align: center;&quot;&gt;点击加载&lt;/div&gt;
&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
// 3、jQuery全局事件处理函数搭配nprogress
// 所有的ajax请求开始和结束
$(document)
  .ajaxStart(function(){
    // 只要有ajax请求发生就会执行
    NProgress.start()
  })
  .ajaxStop(function(){
    // 只要有ajax请求发生就会执行
    NProgress.done()
  })
$(&#39;body&#39;).on(&#39;click&#39;, function(){
  $.get(&#39;time.php&#39;)
})
&lt;/script&gt;
&lt;/body&gt;</code></pre>
<h3 id="3、axios"><a href="#3、axios" class="headerlink" title="3、axios"></a>3、axios</h3><p>(1) 使用教程：<a href="http://www.axios-js.com/zh-cn/docs/" target="_blank" rel="noopener">http://www.axios-js.com/zh-cn/docs/</a></p>
<p>Axios 是一个基于 promise 的 HTTP 库，可以用在浏览器和 node.js 中。</p>
<p>(2) 特性</p>
<ul>
<li>从浏览器中创建 <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest" target="_blank" rel="noopener">XMLHttpRequests</a></li>
<li>从 node.js 创建 <a href="http://nodejs.org/api/http.html" target="_blank" rel="noopener">http</a> 请求</li>
<li>支持 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener">Promise</a> API</li>
<li>拦截请求和响应</li>
<li>转换请求数据和响应数据</li>
<li>取消请求</li>
<li>自动转换 JSON 数据</li>
<li>客户端支持防御 <a href="http://en.wikipedia.org/wiki/Cross-site_request_forgery" target="_blank" rel="noopener">XSRF</a></li>
</ul>
<p>(3) 安装</p>
<p>使用 npm:</p>
<pre><code class="sh">$ npm install axios</code></pre>
<p>使用 bower:</p>
<pre><code class="bash">$ bower install axios</code></pre>
<p>使用 cdn:</p>
<pre><code class="html">&lt;script src=&quot;https://unpkg.com/axios/dist/axios.min.js&quot;&gt;&lt;/script&gt;</code></pre>
<p>(4) 案例</p>
<p><code>server.js</code></p>
<pre><code class="javascript">//axios 服务
app.all(&#39;/axios-server&#39;, (request, response) =&gt; {
    //设置响应头  设置允许跨域
    response.setHeader(&#39;Access-Control-Allow-Origin&#39;, &#39;*&#39;);
    response.setHeader(&#39;Access-Control-Allow-Headers&#39;, &#39;*&#39;);
    // response.send(&#39;Hello jQuery AJAX&#39;);
    const data = {name:&#39;wallleap&#39;};
    response.send(JSON.stringify(data));
});</code></pre>
<p>axios发送Ajax请求</p>
<pre><code class="html">&lt;script crossorigin=&quot;anonymous&quot; src=&quot;https://cdn.bootcdn.net/ajax/libs/axios/0.19.2/axios.js&quot;&gt;&lt;/script&gt;
&lt;button&gt;GET&lt;/button&gt;
&lt;button&gt;POST&lt;/button&gt;
&lt;button&gt;AJAX&lt;/button&gt;
&lt;script&gt;
  // https://github.com/axios/axios
  const btns = document.querySelectorAll(&#39;button&#39;);
  //配置 baseURL
  axios.defaults.baseURL = &#39;http://127.0.0.1:8000&#39;;
  btns[0].onclick = function () {
    //GET 请求 get(url, 其它配置)
    // axios.get(&#39;http://127.0.0.1:8000/axios-server&#39;, {
    axios.get(&#39;/axios-server&#39;, { // 配置了baseURL
      //url 参数——&gt;id=100&amp;vip=7
      params: {
        id: 100,
        vip: 7
      },
      //请求头信息
      headers: {
        name: &#39;wallleap&#39;,
        age: 20
      }
    }).then(value =&gt; { // 基于promise 处理返回结果 value.config、data、headers、request、status、statusText
      console.log(value);
    });
  }
  btns[1].onclick = function () {
    // POST请求 post(url, 请求体, 其它配置)
    axios.post(&#39;/axios-server&#39;, { // 请求体
      username: &#39;admin&#39;,
      password: &#39;password&#39;
    }, {
      //url 
      params: {
        id: 200,
        vip: 9
      },
      //请求头参数
      headers: {
        height: 180,
        weight: 180,
      }
    }).then(response=&gt;{
      // 配置
      console.log(response.config);
      // XMLHttpRequest
      console.log(response.request);
      //响应状态码
      console.log(response.status);
      //响应状态字符串
      console.log(response.statusText);
      //响应头信息
      console.log(response.headers);
      //响应体
      console.log(response.data);
    })
  }
  btns[2].onclick = function(){
    // 通用方式 axios(对象) --&gt; {method, url, 参数, 头信息, 请求体参数}
    axios({
      //请求方法
      method : &#39;POST&#39;,
      //url
      url: &#39;/axios-server&#39;,
      //url参数
      params: {
        vip:10,
        level:30
      },
      //头信息
      headers: {
        a:100,
        b:200
      },
      //请求体参数
      data: {
        username: &#39;admin&#39;,
        password: &#39;password&#39;
      }
    }).then(response=&gt;{
      //响应状态码
      console.log(response.status);
      //响应状态字符串
      console.log(response.statusText);
      //响应头信息
      console.log(response.headers);
      //响应体
      console.log(response.data);
    }).catch(function (error) {
      console.log(error);
    })
  }
&lt;/script&gt;</code></pre>
<h2 id="4、fetch"><a href="#4、fetch" class="headerlink" title="4、fetch"></a>4、fetch</h2><p>fetch使用：<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch</a></p>
<p>fetch发送AJAX请求</p>
<p><code>server.js</code></p>
<pre><code class="javascript">//fetch 服务
app.all(&#39;/fetch-server&#39;, (request, response) =&gt; {
    //设置响应头  设置允许跨域
    response.setHeader(&#39;Access-Control-Allow-Origin&#39;, &#39;*&#39;);
    response.setHeader(&#39;Access-Control-Allow-Headers&#39;, &#39;*&#39;);
    // response.send(&#39;Hello jQuery AJAX&#39;);
    const data = {name:&#39;wallleap&#39;};
    response.send(JSON.stringify(data));
});</code></pre>
<pre><code class="html">&lt;button&gt;AJAX请求&lt;/button&gt;
&lt;script&gt;
  //文档地址
  //https://developer.mozilla.org/zh-CN/docs/Web/API/WindowOrWorkerGlobalScope/fetch
  const btn = document.querySelector(&#39;button&#39;);
  btn.onclick = function(){
    fetch(&#39;http://127.0.0.1:8000/fetch-server?vip=10&#39;, {
      //请求方法
      method: &#39;POST&#39;,
      //请求头
      headers: {
        name:&#39;atguigu&#39;
      },
      //请求体
      body: &#39;username=admin&amp;password=admin&#39;
    }).then(response =&gt; {
      // return response.text();
      return response.json();
    }).then(response=&gt;{
      console.log(response);
    });
  }
&lt;/script&gt;</code></pre>
<h2 id="五、跨域"><a href="#五、跨域" class="headerlink" title="五、跨域"></a>五、跨域</h2><h3 id="1、概念"><a href="#1、概念" class="headerlink" title="1、概念"></a>1、概念</h3><p>(1) 同源策略(Same-Origin Policy)：最早由Netscape公司提出，是浏览器的一种安全策略，所谓同源是指<strong>协议、域名、端口</strong>完全相同，只有同源的地址才可以相互通过AJAX的方式请求。</p>
<p>下面来一个同源的案例：</p>
<p>重写一个<code>server.js</code></p>
<pre><code class="javascript">const express = require(&#39;express&#39;);
const app = express();
app.get(&#39;/home&#39;, (request, response)=&gt;{
    //响应一个页面
    response.sendFile(__dirname + &#39;/index.html&#39;);
});
app.get(&#39;/data&#39;, (request, response)=&gt;{
    response.send(&#39;用户数据&#39;);
});
app.listen(9000, ()=&gt;{
    console.log(&quot;服务已经启动...&quot;);
});</code></pre>
<p>运行起来</p>
<pre><code class="sh">nodemon server.js</code></pre>
<p>在这个目录下新建<code>index.html</code></p>
<pre><code class="html">&lt;h1&gt;wallleap&lt;/h1&gt;
&lt;button&gt;点击获取用户数据&lt;/button&gt;
&lt;script&gt;
  const btn = document.querySelector(&#39;button&#39;);
  btn.onclick = function(){
    const x = new XMLHttpRequest();
    //这里因为是满足同源策略的, 所以 url 可以简写
    x.open(&quot;GET&quot;,&#39;/data&#39;);
    //发送
    x.send();
    //
    x.onreadystatechange = function(){
      if(x.readyState === 4){
        if(x.status &gt;= 200 &amp;&amp; x.status &lt; 300){
          console.log(x.response);
        }
      }
    }
  }
&lt;/script&gt;</code></pre>
<p>访问<a href="http://127.0.0.1:9000/home，可以访问这个index.html，点击按钮可以获取到数据" target="_blank" rel="noopener">http://127.0.0.1:9000/home，可以访问这个index.html，点击按钮可以获取到数据</a></p>
<p>(2) 同源或者不同源说的是两个地址之间的关系，不同源地址之间请求我们称之为跨域请求。</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190430.png" alt="image-20200815190429165" class="lazyload"></p>
<p>跨域的案例：</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190440.png" alt="image-20200815190439633" class="lazyload"></p>
<p>跨域会报错：</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190456.png" alt="image-20200815190455302" class="lazyload"></p>
<h3 id="2、解决方案"><a href="#2、解决方案" class="headerlink" title="2、解决方案"></a>2、解决方案</h3><p>不同源地址之间如果需要相互请求，必须服务端和客户端配合才能完成</p>
<p>尝试找到一种可以发送不同源请求的方式</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190529.png" alt="可能可以解决跨域的方法" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190556.png" alt="正常图片标签" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190621.png" alt="尝试使用img标签解决跨域" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190650.png" alt="正常link标签" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190712.png" alt="尝试使用link标签解决跨域" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190738.png" alt="尝试使用script标签解决跨域" class="lazyload"></p>
<p>初级跨域解决方案</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190812.png" alt="服务器端将json用函数包裹返回" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815190858.png" alt="客户端使用该函数拿到数据" class="lazyload"></p>
<p>(1) <strong>JSONP</strong></p>
<p>JSON with Padding，是一种借助于<code>script</code>标签发送跨域请求的技巧。这个是非官方的跨域解决方案，是程序员们机智地想出来的，只支持get请求。</p>
<p>其原理就是在客户端借助<code>script</code>标签请求服务端的一个动态网页(php等)，服务端的这个动态网页返回一段带有函数调用的JavaScript全局函数调用的脚本，将原本需要返回给客户端的数据传递进去。</p>
<p>以后绝大多数情况都是采用JSONP的手段完成不同源地址之间的跨域请求。</p>
<ul>
<li>原理演示：</li>
</ul>
<p>当前目录下，新建<code>js/app.js</code></p>
<pre><code class="javascript">const data = {
    name: &#39;测试jsonp&#39;
};
/* 把这个挪走，到测试的html文件中
//处理数据
    function handle(data) {
        //获取 result 元素
        const result = document.getElementById(&#39;result&#39;);
        result.innerHTML = data.name;
    }
*/
handle(data);</code></pre>
<p>html</p>
<pre><code class="html">&lt;style&gt;
  #result {
    width: 300px;
    height: 100px;
    border: solid 1px #78a;
  }
&lt;/style&gt;
&lt;div id=&quot;result&quot;&gt;&lt;/div&gt;
&lt;script&gt;
    //处理数据
    function handle(data) {
        //获取 result 元素
        const result = document.getElementById(&#39;result&#39;);
        result.innerHTML = data.name;
    }
&lt;/script&gt;
&lt;!-- &lt;script src=&quot;http://127.0.0.1:5500/jsonp/js/app.js&quot;&gt;&lt;/script&gt; --&gt; &lt;!-- 利用file://方式访问这个html页面 --&gt;
&lt;!-- 进阶版 --&gt;
&lt;script src=&quot;http://127.0.0.1:8000/jsonp-server&quot;&gt;&lt;/script&gt;</code></pre>
<p><code>server.js</code></p>
<pre><code class="javascript">//jsonp服务
app.all(&#39;/jsonp-server&#39;,(request, response) =&gt; {
    // response.send(&#39;console.log(&quot;hello jsonp&quot;)&#39;); // 前端拿到js代码
    const data = {
        name: &#39;测试jsonp&#39;
    };
    //将数据转化为字符串
    let str = JSON.stringify(data);
    //返回结果
    response.end(`handle(${str})`); // 会返回一个函数调用，实参是想返回给前端的数据(前端需要先声明这个函数)
});</code></pre>
<ul>
<li>用php演示一下</li>
</ul>
<p><code>server.php</code></p>
<pre><code class="php">&lt;?php
$conn = mysqli_connect(&#39;localhost&#39;, &#39;root&#39;, &#39;123456&#39;, &#39;demo&#39;);
$query = mysqli_query($conn, &#39;select * from users&#39;);
while ($row = mysqli_fetch_assoc($query)) {
  $data[] = $row;
}
if (empty($_GET[&#39;callback&#39;])) {
  header(&#39;Content-Type: application/json&#39;);
  echo json_encode($data);
  exit();
}
// 如果客户端采用的是 script 标记对我发送的请求
// 一定要返回一段 JavaScript
header(&#39;Content-Type: application/javascript&#39;);
$result = json_encode($data);
$callback_name = $_GET[&#39;callback&#39;];
echo &quot;typeof {$callback_name} === &#39;function&#39; &amp;&amp; {$callback_name}({$result})&quot;;</code></pre>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815191014.png" alt="image-20200815191013064" class="lazyload"></p>
<ul>
<li>原生方式实践jsonp</li>
</ul>
<p><code>server.js</code></p>
<pre><code class="javascript">//用户名检测是否存在
app.all(&#39;/check-username&#39;,(request, response) =&gt; {
    // response.send(&#39;console.log(&quot;hello jsonp&quot;)&#39;);
    const data = {
        exist: 1,
        msg: &#39;用户名已经存在&#39;
    };
    //将数据转化为字符串
    let str = JSON.stringify(data);
    //返回结果
    response.end(`handle(${str})`);
});</code></pre>
<p>前端代码：</p>
<pre><code class="html">用户名: &lt;input type=&quot;text&quot; id=&quot;username&quot;&gt;
&lt;p&gt;&lt;/p&gt;
&lt;script&gt;
  //获取 input 元素
  const input = document.querySelector(&#39;input&#39;);
  const p = document.querySelector(&#39;p&#39;);
  //声明 handle 函数
  function handle(data){
    input.style.border = &quot;solid 1px #f00&quot;;
    //修改 p 标签的提示文本
    p.innerHTML = data.msg;
  }
  //绑定事件
  input.onblur = function(){
    //获取用户的输入值
    let username = this.value;
    //向服务器端发送请求 检测用户名是否存在
    //1. 创建 script 标签
    const script = document.createElement(&#39;script&#39;);
    //2. 设置标签的 src 属性
    script.src = &#39;http://127.0.0.1:8000/check-username&#39;;
    //3. 将 script 插入到文档中
    document.body.appendChild(script);
  }
&lt;/script&gt;</code></pre>
<ul>
<li>封装成一个函数</li>
</ul>
<pre><code class="javascript">function jsonp (url, params, callback) {
  var funcName = &#39;jsonp_&#39; + Date.now() + Math.random().toString().substr(2, 5)

  if (typeof params === &#39;object&#39;) {
    var tempArr = []
    for (var key in params) {
      var value = params[key]
      tempArr.push(key + &#39;=&#39; + value)
    }
    params = tempArr.join(&#39;&amp;&#39;)
  }

  var script = document.createElement(&#39;script&#39;)
  script.src = url + &#39;?&#39; + params + &#39;&amp;callback=&#39; + funcName
  document.body.appendChild(script)

  window[funcName] = function (data) {
    callback(data)

    delete window[funcName]
    document.body.removeChild(script)
  }
}

jsonp(&#39;http://localhost/jsonp/server.php&#39;, { id: 123 }, function (res) {
  console.log(res)
})

jsonp(&#39;http://localhost/jsonp/server.php&#39;, { id: 123 }, function (res) {
  console.log(res)
})</code></pre>
<ul>
<li>jQuery方式实践jsonp</li>
</ul>
<p><code>server.js</code></p>
<pre><code class="javascript">// jQuery jsonp
app.all(&#39;/jquery-jsonp-server&#39;,(request, response) =&gt; {
  // response.send(&#39;console.log(&quot;hello jsonp&quot;)&#39;);
  const data = {
    name:&#39;尚硅谷&#39;,
    city: [&#39;北京&#39;,&#39;上海&#39;,&#39;深圳&#39;]
  };
  //将数据转化为字符串
  let str = JSON.stringify(data);
  //接收 callback 参数
  let cb = request.query.callback; // 函数名从前端获取
  //返回结果
  response.end(`${cb}(${str})`);
});</code></pre>
<p>前端代码：</p>
<pre><code class="html">&lt;style&gt;
  #result{
    width:300px;
    height:100px;
    border:solid 1px #089;
  }
&lt;/style&gt;
&lt;script crossorigin=&quot;anonymous&quot; src=&#39;https://cdn.bootcss.com/jquery/3.5.0/jquery.min.js&#39;&gt;&lt;/script&gt;
&lt;button&gt;点击发送 jsonp 请求&lt;/button&gt;
&lt;div id=&quot;result&quot;&gt;

&lt;/div&gt;
&lt;script&gt;
  $(&#39;button&#39;).eq(0).click(function(){
    $.getJSON(&#39;http://127.0.0.1:8000/jquery-jsonp-server?callback=?&#39;, function(data){
      $(&#39;#result&#39;).html(`
                名称: ${data.name}&lt;br&gt;
                校区: ${data.city}
            `)
    });
  });
&lt;/script&gt;</code></pre>
<p>(2)CORS</p>
<p>HTTP访问控制（CORS）<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS</a></p>
<p>Cross Origin Resource Share，跨域资源共享。CORS是官方的跨域解决方案，它的特点是不需要再客户端做任何特殊的操作，完全在服务器中进行处理，支持get和post请求(其他也支持)。跨域资源共享标准新增了一组HTTP首部字段，允许服务器声明哪些源站通过浏览器有权限访问哪些资源。</p>
<p>CORS是通过设置一个响应头来告诉浏览器，这个请求允许跨域，浏览器收到该响应以后就会对响应放行。</p>
<p><code>server.js</code></p>
<pre><code class="javascript">app.all(&#39;/cors-server&#39;, (request, response)=&gt;{
  //设置响应头
  response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;); // 允许所有源站发送请求
  response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &#39;*&#39;); // 允许携带的响应头
  response.setHeader(&quot;Access-Control-Allow-Method&quot;, &#39;*&#39;); // 允许请求方法
  // response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;http://127.0.0.1:5500&quot;); // 允许单个
  response.send(&#39;hello CORS&#39;);
});</code></pre>
<p>测试：</p>
<pre><code class="html">&lt;style&gt;
    #result{
        width:200px;
        height:100px;
        border:solid 1px #90b;
    }
&lt;/style&gt;
&lt;button&gt;发送请求&lt;/button&gt;
&lt;div id=&quot;result&quot;&gt;&lt;/div&gt;
&lt;script&gt;
  const btn = document.querySelector(&#39;button&#39;);
  btn.onclick = function(){
    //1. 创建对象
    const x = new XMLHttpRequest();
    //2. 初始化设置
    x.open(&quot;GET&quot;, &quot;http://127.0.0.1:8000/cors-server&quot;);
    //3. 发送
    x.send();
    //4. 绑定事件
    x.onreadystatechange = function(){
      if(x.readyState === 4){
        if(x.status &gt;= 200 &amp;&amp; x.status &lt; 300){
          //输出响应体
          console.log(x.response);
        }
      }
    }
  }
&lt;/script&gt;</code></pre>
<pre><code class="php">// 允许远端访问(甚至直接打开文件的方式也可以file://……)
header(&#39;Access-Control-Allow-Origin: *&#39;) // 允许所有
header(&#39;Access-Control-Allow-Origin: http://localhost/index.html&#39;) // 允许单个</code></pre>
<p>eg:</p>
<pre><code class="php">&lt;?php

$conn = mysqli_connect(&#39;localhost&#39;, &#39;root&#39;, &#39;123456&#39;, &#39;demo&#39;);

$query = mysqli_query($conn, &#39;select * from users&#39;);

while ($row = mysqli_fetch_assoc($query)) {
  $data[] = $row;
}

// 一行代码搞定
// 允许跨域请求
header(&#39;Access-Control-Allow-Origin: *&#39;);

header(&#39;Content-Type: application/json&#39;);
echo json_encode($data);</code></pre>
<p>客户端</p>
<pre><code class="html">&lt;script src=&quot;jquery.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
  $.get(&#39;http://localhost/cors.php&#39;, {}, function (res) {
    console.log(res)
  })
&lt;/script&gt;</code></pre>
<p>这种方案无序客户端作出任何变化(不用改代码)，只是在被请求的服务端响应的时候<strong>添加一个<code>Access-Control-Allow-Origin</code>的响应头</strong>，表示这个资源是否允许指定域请求。</p>
<h2 id="六、XMLHttpRequest2-0"><a href="#六、XMLHttpRequest2-0" class="headerlink" title="六、XMLHttpRequest2.0"></a>六、XMLHttpRequest2.0</h2><blockquote>
<p>暂作了解，无需着重看待</p>
</blockquote>
<p>更易用，更强大。</p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">
  </article>

  <div class="nexmoe-post-meta">
    
        <a class="nexmoefont icon-appstore-fill -link" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a><a class="nexmoefont icon-appstore-fill -link" href="/categories/%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/">前端</a>
    
    
        <a class="nexmoefont icon-tag-fill -link" href="/tags/Ajax/" rel="tag">Ajax</a> <a class="nexmoefont icon-tag-fill -link" href="/tags/web/" rel="tag">web</a> <a class="nexmoefont icon-tag-fill -link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a>
    
</div>

  <div class="nexmoe-post-footer">
    <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
      <!-- 
  <div class="nexmoe-post-copyright">
    <strong>本文作者：</strong>Luwang<br>
    <strong>本文链接：</strong><a href="https://blog.wallleap.cn/2020/08/20/AJAX/" title="https:&#x2F;&#x2F;blog.wallleap.cn&#x2F;2020&#x2F;08&#x2F;20&#x2F;AJAX&#x2F;" target="_blank" rel="noopener">https:&#x2F;&#x2F;blog.wallleap.cn&#x2F;2020&#x2F;08&#x2F;20&#x2F;AJAX&#x2F;</a><br>
    
      <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可
    
  </div>
 -->

  <div class="my_post_copyright">
    <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script> 
    <script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <p><span>本文标题:</span>Ajax学习笔记</a></p>
    <p><span>文章作者:</span><a href="/" title="访问 {{ theme.author }} 的个人博客">luwang</a></p>
    <p><span>发布时间:</span>2020年08月20日 - 12:08</p>
    <p><span>最后更新:</span>2020年09月11日 - 21:09</p>
    <p><span>原始链接:</span><a href="/2020/08/20/AJAX/" title="Ajax学习笔记">https://blog.wallleap.cn/2020/08/20/AJAX/</a>
    <span class="copy-path"  title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="https://blog.wallleap.cn/2020/08/20/AJAX/"  aria-label="复制成功！"></i></span>
    </p>
    <p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p>  
  </div>
  <script> 
      var clipboard = new Clipboard('.fa-clipboard');
        $(".fa-clipboard").click(function(){
        clipboard.on('success', function(){
          swal({   
            title: "",   
            text: '复制成功',
            icon: "success", 
            showConfirmButton: true
            });
          });
      });  
    </script>
  

  
    
    <!-- <div style="text-align:center;color: #ccc;font-size:14px;margin-top: 46px;">-------------喜欢就分享<i class="fa fa-paw"></i>疼爱就打赏-------------</div>
    <div style="text-align:center; width: 100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div>
    <footer class="post-footer">
        <div class="post-lincenses"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a></div>
        <div class="post-tags">
        </div>
        <div class="post-share">
          <div class="social-share sharehidden share-component"></div>
          <i class="iconfont show-share icon-forward"></i>
        </div>
      </footer>.entry-footer -->
    
      <style>
/* .list, .list li, .list-left li {
	list-style: none;
	list-style-type: none;
	margin: 0px;
	padding: 0px;
} 
.pos-f {
	position: fixed;
} 
*/

.left-100 {
	width: 100%;
    height: 100%;
    float: left;
}
.blur {
	-webkit-filter: blur(3px);
	filter: blur(3px);
}
.tr3, .list li {
	transition: all .3s;
}
.hidden {
    display: none;
}
.click-cursor, .icon-donate, .list li {
    cursor: pointer;
}
#drinks-box .opacity-show {
    opacity: 1;
}
#drinks-box {
    width: 320px;
    height: 240px;
    margin: 0 auto;
	text-align: center;
	/* left: calc(50% - 160px);
	top: calc(50% - 120px);
    position: fixed; */
    position: relative;
    top:0;
    left: 0;
}
#drinks-icons {
    background: no-repeat center center url(https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/images/donate/drinks/text.png);
}
.drinks-button>div {
    position: absolute;
    top: 0;
    left: 0;
	transition: all 0.3s;
	transform-style: preserve-3d;
    transform-origin: center center;
}
.icon-donate {
    width: 64px;
    height: 64px;
    position: absolute;
	left: calc(50% - 32px);
	top: calc(50% - 32px);
}
.icon-donate img {
    max-width: 64px;
    max-height: 64px;
}
#drinks-button-box {
    display: none;
    opacity: 0;
    transform: scale(1.3,1.3);
}
#drinks-button-bg {
    position: absolute;
    top: 70px;
    left: 0;
    height: 100px;
    opacity: 0;
}
#donate-buttons {
    position: absolute;
    overflow: hidden;
    top: calc(50% - 14px);
    left: 20px;
    height: 28px;
    border-radius: 6px;
    background-color: #ff006e;
    box-shadow: 0 10px 20px 1px rgba(255, 0, 110, 0.5);
}
#donate-buttons a, #github-box a {
    display: block;
}
li[id$="_donate"] {
    position: relative;
    float: left;
    width: 70px;
    height: 28px;
    line-height: 600px;
    overflow: hidden;
	cursor: pointer;
	background: no-repeat center center;
    background-size: 45px;
    text-align: center;
}
li[id$="_donate"]::after {
    content: "";
    position: absolute;
    top: -5px;
    left: calc(50% - 5px);
    height: 0;
    width: 0;
    opacity: 0;
	border: 5px solid #fff;
	border-color: #fff transparent transparent transparent;
    transition: all .3s;
}
li[id$="_donate"]:hover::after {
    opacity: 1;
    top: 0px;
}
#github-box {
    width: 32px;
    height: 32px;
    position: absolute;
    top: calc(50% - 16px);
    background: no-repeat center center url(https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/images/donate/drinks/github.svg);
    background-size: contain;
    right: 72px;
    line-height: 600px;
    overflow: hidden;
    transform: rotatez(20deg );
    opacity: 0;
    transition: all .3s ease-out;
}
#drinks-button-box:hover #github-box, #drinks-button-box.Mobile #github-box {
    top: calc(50% - 40px);
    right: 64px;
    transform: rotatez(5deg );
    opacity: 0.8;
}
#paypal_donate {
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjIsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iUGF5UGFsIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDUxMiAxNDUiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiAxNDU7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsOiNGRkZGRkY7fQ0KPC9zdHlsZT4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00OS41LDcyLjljLTMuNywwLTcuMywwLTExLDBjLTEuOCwwLTMuMSwwLjctMy42LDIuNmMtMS4yLDQuMi02LjMsMjIuOS03LjYsMjguMWMtMC43LDIuNy0yLjEsMy44LTQuOSwzLjgNCgljLTUuNywwLTExLjUsMC0xNy4yLDBjLTMuMSwwLTQuNC0xLjQtMy45LTQuNGMwLjQtMi42LDE1LjQtNjcuMiwyMi4zLTk2LjlDMjQuNiwyLjMsMjYuMiwxLDMwLjIsMWMxMC43LDAsNDMuNCwwLjIsNDkuMSwwLjINCglDOTMuNywxLjMsMTA1LjUsMTIuNywxMDYsMjdjMC4zLDkuNi0xLjUsMTguNy02LjksMjYuOGMtNS4zLDcuOS0xMi44LDEyLjgtMjEuNywxNS43QzY4LjMsNzIuNSw1OSw3My40LDQ5LjUsNzIuOXogTTUwLjIsNTMNCgljMi42LTAuMiw0LjctMC4zLDYuOC0wLjVjNS4zLTAuNiwxMC40LTIsMTQuOC01LjNjNS0zLjgsNi43LTksNS43LTE1LjFjLTAuOS01LjYtNC42LTguNi05LjctMTAuM0M2Mi42LDIwLDU3LjIsMjAsNTEuOCwyMC40DQoJYy0yLjcsMC4yLTQuNSwxLjctNS4yLDQuNWMtMC42LDIuNi0xLjUsNS4yLTIuMSw3LjhjLTEuMSw0LjgtMi4yLDkuNy0zLjEsMTQuNmMtMC42LDMuMSwwLjUsNC43LDMuNSw1LjINCglDNDYuOCw1Mi45LDQ4LjcsNTIuOSw1MC4yLDUzeiIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTIwMywxNDMuNmMzLjEsMCw2LjItMC4xLDkuMywwYzIsMC4xLDMuNS0wLjUsNC43LTIuMmMxLjktMi44LDYzLjQtMTAyLjksNjguNS0xMTEuN2MxLjMtMi4yLDAuNS00LTEuOS00DQoJYy02LjctMC4xLTEzLjUsMC0yMC4yLDAuMWMtMS43LDAtMywwLjktNCwyLjVjLTQuOCw3LjgtMjQuMywzOS4yLTI5LjMsNDcuMmMtMC4zLDAuNS0xLjEsMS0xLjUsMC45Yy0wLjYtMC4xLTEuMS0wLjgtMS41LTEuMw0KCWMtMC4yLTAuMy0wLjItMC43LTAuMy0xLjFjLTAuNy0zLjgtNS4zLTMyLjEtNy00Mi40Yy0wLjctNC40LTIuOS02LjEtNy4zLTYuMWMtNC42LDAtOS4yLDAuMi0xMy44LDAuM2MtMy42LDAuMS01LjYsMi40LTUuMSw1LjkNCgljMC4zLDEuOSwxMi40LDY2LjcsMTQuNSw3Ny40YzAuMSwwLjUsMC4yLDEsMC4xLDEuNGMtMC41LDEuNC0wLjksMi44LTEuNiw0Yy00LjcsNy41LTkuNSwxNS0xNC4yLDIyLjVjLTAuNCwwLjctMC45LDEuNC0xLjEsMi4xDQoJYy0wLjYsMi41LTAuOCw0LjIsMi45LDQuMkMxOTcsMTQzLjMsMjAzLDE0My41LDIwMywxNDMuNnoiLz4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xNDkuOCw5OS4yYy0xLjYsMC45LTIuOCwxLjUtMy45LDIuMWMtMi45LDEuNi01LjcsMy4xLTguNiw0LjhjLTUuNCwzLjItMTEuMywzLjktMTcuMywzLjcNCgljLTMuMS0wLjEtNi4yLTAuNC05LjEtMS4yYy03LjctMi0xMi4zLTctMTMuMi0xNS4xYy0wLjgtNi42LTAuMS0xMy4xLDMuMy0xOWMzLjgtNi43LDkuOS0xMC4zLDE2LjktMTIuNmM2LjMtMi4xLDEyLjktMi42LDE5LjUtMi43DQoJYzUuMi0wLjEsMTAuNC0wLjMsMTUuNy0wLjRjMC42LDAsMS4yLTAuMiwxLjgtMC4xYzIuNSwwLjEsMy42LTEuNSw0LTMuNmMwLjMtMS43LDAuNi0zLjYsMC40LTUuM2MtMC40LTMuNS0yLjMtNS43LTUuOC02DQoJYy00LjMtMC41LTguNi0wLjctMTIuOS0wLjZjLTYuMywwLjItMTIuNSwxLTE4LjUsMi44Yy0wLjksMC4zLTEuOCwwLjctMi44LDEuMWMtMi40LDEtNC42LTAuMi00LjQtMi43YzAuMy00LjEsMC44LTguMiwxLjctMTIuMg0KCWMwLjUtMi4yLDIuNC0zLjYsNC43LTRjNy44LTEuNiwxNS43LTIuNCwyMy43LTIuN2M2LjUtMC4yLDEyLjksMCwxOS4yLDEuNWM1LjgsMS4zLDEwLjYsNC4zLDE0LjcsOC41YzQuNCw0LjYsNS45LDEwLjIsNC44LDE2LjMNCgljLTIuMSwxMS4zLTkuNCw0NS41LTEwLjcsNTEuNGMtMC42LDIuOS0yLjMsNC40LTUuMyw0LjVjLTUuNSwwLjItMTEsMC4yLTE2LjUsMC4zYy0xLjYsMC0yLjEtMC42LTItMi4yDQoJQzE0OS41LDEwMy41LDE0OS43LDEwMS42LDE0OS44LDk5LjJ6IE0xNDcuNyw3MC4xYzAsMCwwLDAuMSwwLDAuMWMtMi41LDAuMi00LjksMC4zLTcuNCwwLjVjLTQuMSwwLjQtOC4xLDEuMS0xMS44LDIuOQ0KCWMtNC45LDIuNC02LjksNS44LTYuNiwxMS4zYzAuMyw0LjksMy4zLDguMSw4LjIsOC43YzQsMC41LDcuOSwwLjEsMTEuNy0wLjdjMy4xLTAuNiw1LjktMiw3LjktNC41YzMuOC00LjcsNS0xMC4yLDUtMTYuMQ0KCWMwLTEuNC0wLjktMi4xLTIuMy0yLjJDMTUwLjksNzAuMSwxNDkuMyw3MC4xLDE0Ny43LDcwLjF6Ii8+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzI1LjksNzIuOWMtMy42LDAtNy4zLDAtMTEsMGMtMS44LDAtMy4xLDAuNy0zLjYsMi42Yy0xLjIsNC4yLTYuMywyMi45LTcuNiwyOC4xYy0wLjcsMi43LTIuMSwzLjgtNC45LDMuOA0KCWMtNS43LDAtMTEuNSwwLTE3LjIsMGMtMy4xLDAtNC40LTEuNC0zLjktNC40YzAuNC0yLjYsMTUuNC02Ny4yLDIyLjMtOTYuOWMwLjktMy45LDIuNi01LjIsNi42LTUuMmMxMC43LDAsNDMuNCwwLjIsNDkuMSwwLjINCglDMzcwLDEuMywzODEuOCwxMi43LDM4Mi4zLDI3YzAuMyw5LjYtMS41LDE4LjctNi45LDI2LjhjLTUuMyw3LjktMTIuOCwxMi44LTIxLjcsMTUuN0MzNDQuNiw3Mi41LDMzNS4zLDczLjQsMzI1LjksNzIuOXogTTMyNi41LDUzDQoJYzIuNi0wLjIsNC43LTAuMyw2LjgtMC41YzUuMy0wLjYsMTAuNC0yLDE0LjgtNS4zYzUtMy44LDYuNy05LDUuNy0xNS4xYy0wLjktNS42LTQuNi04LjYtOS43LTEwLjNjLTUuMi0xLjctMTAuNi0xLjgtMTYuMS0xLjMNCgljLTIuNywwLjItNC41LDEuNy01LjIsNC41Yy0wLjYsMi42LTEuNSw1LjItMi4xLDcuOGMtMS4xLDQuOC0yLjIsOS43LTMuMSwxNC42Yy0wLjYsMy4xLDAuNSw0LjcsMy41LDUuMg0KCUMzMjMuMSw1Mi45LDMyNSw1Mi45LDMyNi41LDUzeiIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTQyNS41LDk5LjJjLTEsMC40LTEuNiwwLjYtMi4yLDAuOWMtNC41LDIuNC05LjEsNC44LTEzLjYsNy4yYy00LjQsMi4zLTkuMiwyLjYtMTQsMi42Yy00LDAtOC0wLjUtMTEuOC0yLjENCgljLTYuNi0yLjgtMTAtNy45LTEwLjctMTQuOWMtMC41LTQuOS0wLjEtOS44LDEuNi0xNC40YzIuOC03LjksOC44LTEyLjcsMTYuNC0xNS43YzYuOS0yLjYsMTQtMy40LDIxLjMtMy41DQoJYzUuNi0wLjEsMTEuMy0wLjMsMTYuOS0wLjVjMy41LTAuMSw0LjMtMC43LDUuMS00LjFjMC40LTEuNywwLjUtMy41LDAuNC01LjJjLTAuMy0zLjItMi4zLTUuNC01LjctNS45Yy0zLjctMC41LTcuNS0wLjgtMTEuMi0wLjcNCgljLTcsMC4yLTEzLjksMS0yMC42LDIuOWMtMC44LDAuMi0xLjYsMC42LTIuNCwxYy0yLjYsMS4yLTQuOCwwLTQuNS0yLjhjMC4zLTMuOCwwLjgtNy42LDEuNS0xMS40YzAuNC0yLjMsMi0zLjksNC40LTQuMw0KCWM0LjgtMC44LDkuNi0xLjgsMTQuNS0yLjFjNi4xLTAuNSwxMi4zLTAuNywxOC41LTAuNmM4LDAuMiwxNS42LDEuNywyMi4xLDdjMy45LDMuMiw2LjksNi45LDcuOCwxMmMwLjYsMy42LDAuMiw3LjItMC41LDEwLjcNCgljLTMuMywxNS41LTYuNiwzMS05LjksNDYuNWMtMC45LDQuMS0yLjMsNS40LTYuNCw1LjVjLTUuMSwwLjItMTAuMiwwLjItMTUuMiwwLjNjLTEuOCwwLTIuMi0wLjQtMi4xLTIuMg0KCUM0MjUuMywxMDMuNSw0MjUuNCwxMDEuNiw0MjUuNSw5OS4yeiBNNDI1LjgsNzAuMWMtMy4yLDAuMi02LjcsMC4zLTEwLjIsMC43Yy00LDAuNC03LjksMS4yLTExLjQsMy4xYy0zLjMsMS43LTUuNiw0LjMtNiw4LjENCgljLTAuNiw1LjMsMS4yLDEwLjksOC40LDExLjdjNC4zLDAuNSw4LjQsMC4xLDEyLjUtMC45YzMuOC0wLjksNi44LTMuMiw4LjctNi42YzIuMy00LDMuMi04LjQsMy40LTEyLjljMC4xLTIuMy0wLjktMy4xLTMuMi0zLjINCglDNDI3LjQsNzAsNDI2LjcsNzAuMSw0MjUuOCw3MC4xeiIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTQ4NC40LDEwNy40YzIuMy0wLjEsMi44LTAuNSwzLjMtMi41YzIuMS04LjcsMTcuNS03NC4xLDIzLjItOTguMWMwLjYtMi42LTEuMi00LjktNC00LjkNCgljLTUuNCwwLTEwLjgtMC4xLTE2LjItMC4xYy0zLjMsMC00LjksMS4yLTUuNiw0LjRjLTEuMiw0LjgtMjAuNyw5My45LTIxLjMsOThjLTAuMywyLDAuOCwyLjksMi45LDIuOQ0KCUM0NjkuNSwxMDcuMiw0ODIuOSwxMDcuNCw0ODQuNCwxMDcuNHoiLz4NCjwvc3ZnPg0K);
}
#btc_donate{
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjIsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAxMzAzLjYgMjc0LjYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEzMDMuNiAyNzQuNjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9DQo8L3N0eWxlPg0KPGc+DQoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEzNi42LDkzLjZsLTcuNSwzMC4xYzguNSwyLjEsMzQuNywxMC44LDM5LTYuMkMxNzIuNSw5OS43LDE0NS4xLDk1LjcsMTM2LjYsOTMuNnoiLz4NCgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTcwLjUsNC4xQzk3LTE0LjIsMjIuNSwzMC41LDQuMiwxMDQuMWMtMTguMyw3My41LDI2LjQsMTQ4LDk5LjksMTY2LjNjNzMuNiwxOC4zLDE0OC0yNi40LDE2Ni40LTk5LjkNCgkJQzI4OC44LDk2LjksMjQ0LDIyLjQsMTcwLjUsNC4xeiBNMTk3LjgsMTE3LjdjLTIsMTMuNC05LjQsMTkuOC0xOS4yLDIyLjFjMTMuNSw3LDIwLjQsMTcuOCwxMy44LDM2LjUNCgkJYy04LjEsMjMuMi0yNy40LDI1LjItNTMuMSwyMC4zbC02LjIsMjVsLTE1LjEtMy44bDYuMS0yNC42Yy0zLjktMS03LjktMi0xMi0zLjFsLTYuMiwyNC44bC0xNS0zLjhsNi4yLTI1DQoJCWMtMy41LTAuOS03LjEtMS45LTEwLjctMi44bC0xOS42LTQuOWw3LjUtMTcuMmMwLDAsMTEuMSwyLjksMTAuOSwyLjdjNC4zLDEuMSw2LjItMS43LDYuOS0zLjZsOS45LTM5LjVjMC42LDAuMSwxLjEsMC4zLDEuNiwwLjQNCgkJYy0wLjYtMC4yLTEuMS0wLjQtMS42LTAuNWw3LTI4LjJjMC4yLTMuMi0wLjktNy4yLTctOC44YzAuMi0wLjItMTAuOS0yLjctMTAuOS0yLjdsNC0xNi4xbDIwLjgsNS4ydjAuMWMzLjEsMC44LDYuMywxLjUsOS42LDIuMw0KCQlsNi4yLTI0LjdsMTUuMSwzLjhsLTYsMjQuM2M0LDAuOSw4LjEsMS45LDEyLjEsMi44bDYtMjQuMWwxNS4xLDMuOEwxNjcuNiw4M0MxODYuNiw4OS42LDIwMC41LDk5LjQsMTk3LjgsMTE3Ljd6Ii8+DQoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEyOTQuMiwxMDcuMmMtMTAuMy0xNS43LTI4LjktMjMuNS01NS45LTIzLjVjLTkuMiwwLTE3LjUsMC40LTI0LjcsMS4yYy03LjMsMC44LTEzLjksMS44LTE5LjcsMy4xDQoJCWMtNS45LDEuMi0xMS4yLDIuNi0xNS45LDQuMWMtNC43LDEuNS05LjEsMi45LTEyLjksNGwtNDEuOSwxNzMuNmg1MS41bDMzLjYtMTQwLjdjNi45LTEuNCwxMy43LTIuMSwyMC40LTIuMWM2LjksMCwxMiwxLjMsMTUuNCw0DQoJCWMzLjMsMi43LDUuNSw2LjIsNi40LDEwLjRjMSw0LjMsMSw5LjIsMC4yLDE0LjlzLTEuOSwxMS41LTMuMywxNy41bC0yMi44LDk2LjFoNTEuNWwyMy41LTk4LjINCgkJQzEzMDYuMywxNDQuNCwxMzA0LjUsMTIyLjksMTI5NC4yLDEwNy4yeiIvPg0KCTxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iMTA3Ni42LDg3LjkgMTAzMy40LDI2OS44IDEwODQuNiwyNjkuOCAxMTI4LjIsODcuOSAJIi8+DQoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEwOTAuMiw1OS4zYzUuNyw0LjMsMTIuMiw2LjQsMTkuMyw2LjRjNC45LDAsOS40LTAuOSwxMy43LTIuOGM0LjMtMS44LDgtNC4zLDExLjItNy40DQoJCWMzLjItMy4xLDUuOC02LjgsNy44LTExLjFjMS45LTQuMywzLTguOCwzLTEzLjdjMC04LjctMi45LTE1LjMtOC43LTE5LjVjLTUuOC00LjMtMTIuMi02LjQtMTkuNC02LjRjLTQuOCwwLTkuNCwwLjktMTMuNiwyLjgNCgkJcy04LDQuMy0xMS4yLDcuNHMtNS44LDYuOC03LjgsMTEuMXMtMi45LDguOC0yLjksMTMuNkMxMDgxLjUsNDguNiwxMDg0LjQsNTUuMSwxMDkwLjIsNTkuM3oiLz4NCgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNTIwLjYsNTkuM2M1LjcsNC4zLDEyLjIsNi40LDE5LjQsNi40YzQuOCwwLDkuNC0wLjksMTMuNy0yLjhjNC4yLTEuOCw4LTQuMywxMS4yLTcuNA0KCQljMy4yLTMuMSw1LjgtNi44LDcuOC0xMS4xczIuOS04LjgsMi45LTEzLjdjMC04LjctMi45LTE1LjMtOC42LTE5LjVjLTUuOC00LjMtMTIuMi02LjQtMTkuMy02LjRjLTQuOSwwLTkuNCwwLjktMTMuNywyLjgNCgkJcy04LDQuMy0xMS4yLDcuNHMtNS44LDYuOC03LjgsMTEuMWMtMiw0LjMtMyw4LjktMywxMy43QzUxMiw0OC42LDUxNC45LDU1LjEsNTIwLjYsNTkuM3oiLz4NCgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTI1LjMsMTM4LjhMMTE3LDE3MmMxMC4yLDIuNSw0MS43LDEyLjcsNDYuNC02LjFDMTY4LjIsMTQ2LjQsMTM1LjUsMTQxLjQsMTI1LjMsMTM4Ljh6Ii8+DQoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTgwOC4xLDEyNi42YzcuMiwwLDEzLjIsMC43LDE4LjIsMi4zYzUsMS41LDkuNywzLjEsMTQuNCw1bDE3LjctNDAuMWMtNi43LTMuMi0xNC4xLTUuOC0yMi4zLTcuOA0KCQlzLTE3LjQtMy0yNy44LTNjLTE2LjYsMC0zMS43LDMtNDUuMSw5Yy0xMy41LDYtMjUsMTQuMi0zNC40LDI0LjVjLTkuNSwxMC40LTE2LjcsMjIuNS0yMS44LDM2LjNjLTUuMSwxMy44LTcuNiwyOC42LTcuNiw0NC4zDQoJCWMwLDEwLjQsMS41LDIwLjMsNC4zLDI5LjdjMi45LDkuNSw3LjUsMTcuNywxNCwyNC43YzYuNSw3LDE0LjYsMTIuNiwyNC41LDE2LjhjOS45LDQuMSwyMiw2LjIsMzYuMyw2LjJjMTAuOCwwLDIwLjItMSwyOC0yLjkNCgkJYzcuOC0yLDE1LTQuMywyMS40LTYuOGwtMy44LTQxLjFjLTQuOSwyLjEtMTAuNCwzLjgtMTYuNiw1LjJjLTYuMiwxLjQtMTIuNywyLjEtMTkuNCwyLjFjLTEzLjYsMC0yMi45LTMuNi0yOC0xMC45DQoJCWMtNS4xLTcuMy03LjYtMTYuOC03LjYtMjguNWMwLTE5LjgsNS0zNS42LDE1LjEtNDcuNEM3NzcuNSwxMzIuNSw3OTEsMTI2LjYsODA4LjEsMTI2LjZ6Ii8+DQoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMTEuMSwxMDQuMWMtNS45LTYuNy0xMy40LTExLjktMjIuNS0xNS42cy0xOS43LTUuNi0zMS43LTUuNmMtMTYuMywwLTMwLjksMy41LTQzLjUsMTAuNQ0KCQljLTEyLjcsNy4xLTIzLjQsMTYuMS0zMi4xLDI3LjJjLTguOCwxMS4xLTE1LjQsMjMuNS0xOS45LDM3LjNzLTYuNywyNy43LTYuNyw0MS41YzAsMTEsMS41LDIxLjEsNC41LDMwLjJjMyw5LjEsNy40LDE3LDEzLjMsMjMuNw0KCQljNS45LDYuNywxMy4zLDExLjksMjIuMywxNS42YzksMy43LDE5LjYsNS41LDMxLjgsNS41YzE2LjgsMCwzMS43LTMuNSw0NC40LTEwLjZjMTIuOC03LDIzLjUtMTYuMSwzMi0yNy4xDQoJCWM4LjUtMTEuMSwxNS0yMy41LDE5LjQtMzcuM2M0LjQtMTMuOSw2LjYtMjcuNyw2LjYtNDEuNWMwLTExLjEtMS41LTIxLjItNC41LTMwLjJDMTAyMS40LDExOC43LDEwMTYuOSwxMTAuOCwxMDExLjEsMTA0LjF6DQoJCSBNOTc0LjgsMTg1LjljLTIsOC00LjksMTUuMy04LjgsMjJjLTMuOSw2LjctOC44LDEyLjItMTQuNSwxNi42Yy01LjgsNC40LTEyLjQsNi42LTIwLjEsNi42Yy05LjcsMC0xNi40LTMuMi0yMC4xLTkuNw0KCQljLTMuNy02LjUtNS41LTE1LjUtNS41LTI3YzAtNy4yLDEtMTQuNywyLjktMjIuNmMyLTcuOSw0LjktMTUuMyw4LjgtMjJjMy45LTYuNyw4LjctMTIuMiwxNC41LTE2LjZjNS43LTQuNCwxMi40LTYuNiwyMC02LjYNCgkJYzkuNywwLDE2LjQsMy4yLDIwLjEsOS43YzMuNyw2LjUsNS42LDE1LjUsNS42LDI3Qzk3Ny43LDE3MC40LDk3Ni43LDE3OCw5NzQuOCwxODUuOXoiLz4NCgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNjE4LjgsMTkzLjdsMTUuMi02My42aDU3bDEwLjQtNDIuMkg2NDRsMTMuMi01My42bC01My42LDguM2wtMzMuOSwxNDMuMmMtMi44LDExLjgtNC40LDIyLjktNC44LDMzLjUNCgkJYy0wLjUsMTAuNiwxLjIsMjAsNC44LDI4LjJjMy43LDguMiw5LjksMTQuNywxOC43LDE5LjRjOC44LDQuNywyMS4xLDcuMSwzNyw3LjFjMTEuMSwwLDIwLjYtMC45LDI4LjctMi44YzguMS0xLjgsMTUuNi00LDIyLjUtNi42DQoJCWwtMy44LTM5LjRjLTUuMywxLjktMTAuNSwzLjMtMTUuNyw0LjNzLTEwLjYsMS42LTE2LjEsMS42Yy02LjcsMC0xMS44LTAuOS0xNS40LTIuOGMtMy42LTEuOC02LjEtNC40LTcuNC03LjgNCgkJYy0xLjQtMy4zLTItNy4zLTEuNy0xMS45QzYxNi42LDIwMy45LDYxNy40LDE5OSw2MTguOCwxOTMuN3oiLz4NCgk8cG9seWdvbiBjbGFzcz0ic3QwIiBwb2ludHM9IjQ2My45LDI2OS44IDUxNS4xLDI2OS44IDU1OC43LDg3LjkgNTA3LjEsODcuOSAJIi8+DQoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTQ0NCwxMDUuOGMtNS40LTYuNy0xMi0xMi0yMC4xLTE1LjljLTgtMy45LTE3LjYtNS45LTI4LjctNS45Yy01LjMsMC0xMC4yLDAuNi0xNC45LDEuNw0KCQljLTQuNiwxLjItOS4yLDIuOC0xMy44LDQuOGwyMS40LTg5LjJsLTUzLjYsOC4zTDI3NC41LDI2MWM2LjcsMy4yLDEzLjgsNS44LDIxLjMsNy42YzcuNSwxLjksMTQuNiwzLjIsMjEuMyw0LjINCgkJYzYuNywwLjksMTIuNiwxLjQsMTcuOCwxLjVjNS4yLDAuMSw4LjgsMC4yLDEwLjksMC4yYzE2LjEsMCwzMS4xLTMuMSw0NC45LTkuMnMyNS44LTE0LjQsMzYtMjQuOXMxOC4yLTIyLjgsMjQtMzcNCgkJYzUuOS0xNC4yLDguOC0yOS4yLDguOC00NS4xYzAtMTAuNC0xLjMtMjAtMy44LTI5QzQ1My4yLDEyMC40LDQ0OS4zLDExMi41LDQ0NCwxMDUuOHogTTQwMy45LDE4OC4xYy0zLDguMy03LjEsMTUuNy0xMi4zLDIyLjMNCgkJYy01LjIsNi42LTExLjQsMTEuOC0xOC41LDE1LjdzLTE0LjcsNS45LTIyLjgsNS45Yy0yLjUsMC00LjYsMC02LjIsMHMtMy0wLjEtNC4yLTAuMmMtMS4xLTAuMS0yLjItMC4zLTMuMy0wLjUNCgkJYy0xLTAuMi0yLjMtMC40LTMuNi0wLjdsMjIuOC05NC43YzQuMi0zLjcsOC44LTYuMSwxNC03LjNjNS4yLTEuMSw5LjQtMS43LDEyLjYtMS43YzkuOSwwLDE2LjcsMy4xLDIwLjQsOS4zDQoJCWMzLjcsNi4yLDUuNSwxNC45LDUuNSwyNS45QzQwOC40LDE3MS4yLDQwNi45LDE3OS44LDQwMy45LDE4OC4xeiIvPg0KPC9nPg0KPC9zdmc+DQo=);
}
#alipay_donate{
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjIsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDQ0OC41IDE0NS41IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDguNSAxNDUuNTsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2VuYWJsZS1iYWNrZ3JvdW5kOm5ldyAgICA7fQ0KCS5zdDF7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojRkZGRkZGO30NCjwvc3R5bGU+DQo8ZyBpZD0i5Zu+5bGCXzIiPg0KPC9nPg0KPGcgaWQ9IuWbvuWxgl8xIj4NCgk8ZyBpZD0i5qSt5ZyGXzJfMV8iIGNsYXNzPSJzdDAiPg0KCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTA1LjYsMEg4MS44djE4LjdoLTQ4djkuOGg0OHYxOEg0OC4xdjExLjFoNjcuNGMwLDAsMCwxNS45LTIwLjMsMzcuNlM2Ny40LDEyMC4yLDU3LjgsMTIzcy0yNiwyLjQtMzEuNS0xLjUNCgkJCXMtMTEuOC04LjktMTEuMy0xOFMyNi45LDg0LjEsMzMuOSw4M2MwLDAtMjAtMi4yLTI0LjUsMTguMWMtMy41LDE1LjYsNi42LDIzLjMsMTIuNCwyNy4yczE4LjIsOC41LDI2LjMsOXMyNS44LTAuNiw0Mi43LTEyLjgNCgkJCWMxNi44LTEyLjIsMzcuMy0zNi43LDQzLjUtNTEuOHM4LjktMjEuMyw5LjgtMjYuMmgtMzguNHYtMThoNTAuMnYtOS44aC01MC4yVjAiLz4NCgkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTE4NiwwYzAsMC0yLjUsMjEuNS0zMy44LDQ1bDMuNiw1LjNjMCwwLDEzLjktNS41LDE3LjQtOC4zdjgwLjNIMTk4VjI1LjVjMCwwLDEyLTEyLjUsMTItMjUuNQ0KCQkJQzIxMCwwLDE4NiwwLDE4NiwweiIvPg0KCQk8cG9seWdvbiBjbGFzcz0ic3QxIiBwb2ludHM9IjI0NiwwIDI0NiwyNyAyMDIuNSwyNyAyMDIuNSwzNi4xIDI0NiwzNi4xIDI0NiwxMjEuNSAyNzAuMSwxMjEuNSAyNzAuMSwzNi4xIDI4MS4zLDM2LjEgMjgxLjMsMjcgDQoJCQkyNzAuMSwyNyAyNzAuMSwwIAkJIi8+DQoJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zNjQuNSwwdjExLjJINDExdjcuNWMwLDIyLjEtMTQuMiwyNC44LTE0LjIsMjQuOGgtMzIuM1Y2M2gzMi4zdjkuOGgtMzIuM3Y0NS44aC0yNC43VjcyLjhoLTM0LjZWNjNoMzQuNg0KCQkJVjQzLjVoLTQ5LjVWOC4zaDIzLjF2M2gyNi40VjBIMzY0LjV6IE0zMTMuMywyMS41djEzaDc3LjR2LTEzSDMxMy4zeiIvPg0KCTwvZz4NCgk8ZyBpZD0i5qSt5ZyGXzFfMV8iIGNsYXNzPSJzdDAiPg0KCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDQuMSwxMzYuN2MwLDAtMjIuNS0zLjctMzIuMS0yMC41Yy0zLjctNi40LTQtMTkuMyw2LTI3LjhjOC40LTcuMSwxOS41LTYuNiwzMy44LTNzMjQuNCw4LjEsNDIuOCwxNy4zDQoJCQljMTguNSw5LjMsNDQuOSwyMi41LDc4LjcsMjkuNmMzMy43LDcuMSw1Mi4zLDkuNCw3Mi44LDEwLjljMzUuNCwyLjYsMTQ5LjQtMi40LDE2NS02bDM3LjUtMzljMCwwLTExMi45LDE3LjQtMTgzLjgsMTgNCgkJCWMtNzAuOCwwLjYtNzguOC0zLjctOTUuMy02LjhTMTA5LjYsOTIuMyw5Ni44LDg3Yy02LjMtMi42LTQxLjctMTYuMy02My0xNC4zUzEuMiw4NCwwLjgsOTguM1M1LjgsMTMyLjIsNDQuMSwxMzYuN3oiLz4NCgkJDQoJCQk8cmVjdCB4PSIyMDYuNiIgeT0iNDYuNyIgdHJhbnNmb3JtPSJtYXRyaXgoMC43MDcxIC0wLjcwNzEgMC43MDcxIDAuNzA3MSAyMS4zNjgzIDE3NC42Mzk3KSIgY2xhc3M9InN0MSIgd2lkdGg9IjI5LjciIGhlaWdodD0iMjkuNyIvPg0KCQkNCgkJCTxyZWN0IHg9IjM3OC40IiB5PSI3OC45IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjcwNzEgLTAuNzA3MSAwLjcwNzEgMC43MDcxIDUwLjc0MDMgMzAxLjE0OTEpIiBjbGFzcz0ic3QxIiB3aWR0aD0iMjAuOSIgaGVpZ2h0PSIyMC45Ii8+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=);
}
#wechat_donate{
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjIsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i5Zu+5bGCXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgNTMxLjIgMTYxLjciIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUzMS4yIDE2MS43OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDojRkZGRkZGO30NCjwvc3R5bGU+DQo8Zz4NCgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNjguNiwwQzMxLjEtMC42LDAsMjcsMCw1OS41YzAsMTguOCw4LjgsMzUsMjUuOSw0N2MwLDAtNi4zLDIwLjctNi4yLDIxLjFjMC4xLDAuNCwxLjUsMS4yLDEuOSwxDQoJCWMwLjQtMC4yLDIyLjYtMTMuNSwyMi42LTEzLjVjMTcsNS44LDI2LjksMy45LDI3LjQsMy45Yy0xLjctNS0yLjgtMTIuNy0xLjUtMjBjNi42LTM4LjEsNDUuNi01MCw2Ny00Ny45DQoJCUMxMzEuMiwyMy40LDEwNS42LDAuNSw2OC42LDB6IE00Mi41LDQ5LjFjLTQuOSwwLTguOS00LTguOS04LjlzNC04LjksOC45LTguOXM4LjksNCw4LjksOC45UzQ3LjQsNDkuMSw0Mi41LDQ5LjF6IE05Ni40LDQ5LjENCgkJYy00LjksMC04LjktNC04LjktOC45czQtOC45LDguOS04LjlzOC45LDQsOC45LDguOVMxMDEuNCw0OS4xLDk2LjQsNDkuMXoiLz4NCgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTkyLDEwNC43YzAtMjcuOC0yNi45LTQ5LjItNTguMS00OS4yYy0zMy4xLDAtNTkuNCwyMS44LTU5LjQsNDkuNmMwLDI3LjksMjUuMSw1MSw1OS41LDUxLjINCgkJYzYuOSwwLDE3LjItMS43LDI0LjItNC42YzAsMCwxNi42LDEwLjEsMTcuNSwxMHMxLjQtMC44LDEuNC0xLjRzLTUuMy0xNi40LTUuMy0xNi40QzE4NiwxMzIuNywxOTIsMTIwLjQsMTkyLDEwNC43eiBNMTEyLjEsOTQuNA0KCQljLTQuNCwwLTcuOS0zLjUtNy45LTcuOXMzLjUtNy45LDcuOS03LjlzNy45LDMuNSw3LjksNy45UzExNi40LDk0LjQsMTEyLjEsOTQuNHogTTE1NC4yLDk0LjRjLTQuNCwwLTcuOS0zLjUtNy45LTcuOQ0KCQlzMy41LTcuOSw3LjktNy45czcuOSwzLjUsNy45LDcuOVMxNTguNiw5NC40LDE1NC4yLDk0LjR6Ii8+DQo8L2c+DQo8Zz4NCgk8Zz4NCgkJPHBvbHlnb24gY2xhc3M9InN0MCIgcG9pbnRzPSIyNzcuNiw2Ni41IDI2NS43LDExNS41IDI1NS43LDY2LjUgMjQwLjUsNjYuNSAyMzAuNSwxMTUuNSAyMTguNiw2Ni41IDIwMy44LDY2LjUgMjIzLjcsMTM2IA0KCQkJMjM3LjIsMTM2IDI0OCw4Mi44IDI1OC44LDEzNiAyNzIuNCwxMzYgMjkyLjMsNjYuNSAJCSIvPg0KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzI4LjMsODkuOGMtNC4zLTQuNy0xMC4zLTcuMS0xOC4yLTcuMWMtNy40LDAtMTMuMiwyLjUtMTcuNSw3LjNjLTQuMyw0LjktNi40LDExLjUtNi40LDE5LjkNCgkJCWMwLDguNiwyLjIsMTUuMyw2LjUsMjAuM3MxMC4yLDcuNSwxNy42LDcuNWM2LDAsMTEuMS0xLjUsMTUuMy00LjZjNC4yLTMuMSw3LTcuMyw4LjQtMTIuN2gtMTMuNmMtMC45LDEuOS0yLjEsMy40LTMuNiw0LjENCgkJCWMtMS41LDAuOS0zLjQsMS40LTUuOCwxLjRjLTMuNCwwLTUuOS0xLjEtNy43LTMuMWMtMS43LTItMi43LTUuMS0yLjktOS4xaDM0LjJjMC0wLjQsMC4xLTAuOSwwLjEtMS40czAtMS4yLDAtMi4yDQoJCQlDMzM0LjcsMTAxLjMsMzMyLjYsOTQuNSwzMjguMyw4OS44eiBNMzAwLjQsMTA0LjljMC4zLTMuNCwxLjMtNiwzLTcuOWMxLjctMS44LDQtMi43LDctMi43YzMuMiwwLDUuNywwLjksNy40LDIuNw0KCQkJYzEuOCwxLjgsMi43LDQuNCwyLjgsNy45SDMwMC40eiIvPg0KCTwvZz4NCgk8Zz4NCgkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTQwMi43LDExMi4yTDQwMi43LDExMi4yQzQwMi43LDExMi4xLDQwMi43LDExMi4yLDQwMi43LDExMi4yTDQwMi43LDExMi4yeiIvPg0KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzgzLjQsMTIxLjdjLTIuOCwyLjItNi40LDMuMy0xMC43LDMuM2MtNiwwLTEwLjYtMi4xLTEzLjktNi4ycy00LjktMTAtNC45LTE3LjVjMC03LjgsMS42LTEzLjcsNC45LTE3LjgNCgkJCWMzLjItNC4xLDgtNi4xLDE0LjMtNi4xYzQuNSwwLDgsMSwxMC42LDMuMXM0LjIsNS4xLDQuOCw5aDE0LjFjLTAuNS03LjktMy40LTE0LTguNS0xOC4zcy0xMi4xLTYuNS0yMS02LjUNCgkJCWMtMTAuOSwwLTE5LjMsMy4xLTI1LjEsOS40cy04LjcsMTUuNC04LjcsMjcuMmMwLDExLjYsMi45LDIwLjYsOC42LDI3czEzLjcsOS42LDI0LDkuNmM4LjksMCwxNi4yLTIuMywyMS43LTcNCgkJCWM1LjUtNC42LDguNi0xMC44LDkuMS0xOC43aC0xMy45QzM4OCwxMTYuMywzODYuMiwxMTkuNSwzODMuNCwxMjEuN3oiLz4NCgkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTQ0OC41LDg5LjNjLTEuNS0xLjktMy41LTMuNC01LjktNC40Yy0yLjUtMS4xLTUuMi0xLjYtOC4yLTEuNmMtMy4yLDAtNi4xLDAuNi04LjYsMS44DQoJCQljLTIuNSwxLjItNC43LDMtNi42LDUuM1Y2Ni41aC0xMy42djY5LjNoMTMuNnYtMzAuNGMwLTMuMywwLjktNiwyLjgtNy45czQuNS0yLjksNy43LTIuOWMzLDAsNS4yLDAuNyw2LjMsMi40DQoJCQljMS4xLDEuNywxLjcsNS43LDEuNywxMnYyNi44aDEzLjZ2LTMzLjJ2LTAuOWMwLTMuNy0wLjItNi4zLTAuNi04QzQ1MC4zLDkyLjEsNDQ5LjUsOTAuNiw0NDguNSw4OS4zeiIvPg0KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNTAwLjcsMTMxLjRjLTAuNS0xLjEtMC43LTIuNy0wLjctNC44Vjk3LjVjMC00LjctMS45LTguMy01LjctMTAuOFM0ODUsODMsNDc3LjgsODMNCgkJCWMtNi42LDAtMTEuNywxLjUtMTUuNCw0LjVzLTUuNiw3LjEtNS42LDEyLjR2MC45aDEyLjhWMTAwYzAtMiwwLjctMy42LDIuMi00LjdzMy42LTEuNyw2LjQtMS43YzMuMSwwLDUuMiwwLjQsNi41LDEuMw0KCQkJczEuOSwyLjQsMS45LDQuNWMwLDIuNi0yLjksNC4yLTguNyw1Yy0yLjMsMC4zLTQuMiwwLjYtNS42LDAuOGMtNi4yLDAuOS0xMC42LDIuNy0xMy4zLDUuMmMtMi43LDIuNi00LDYuMy00LDExLjENCgkJCWMwLDUuMiwxLjMsOS4zLDQsMTIuMWMyLjcsMi44LDYuNSw0LjIsMTEuNSw0LjJjMy43LDAsNy0wLjcsOS44LTIuMXM1LjEtMy40LDYuOC02LjFjMCwxLjIsMC4yLDIuNCwwLjQsMy42YzAuMywxLDAuNiwyLDEuMSwyLjkNCgkJCWgxNC4zdi0yLjNDNTAxLjksMTMzLjIsNTAxLjEsMTMyLjUsNTAwLjcsMTMxLjR6IE00ODYuOSwxMTUuNmMwLDMuNy0xLjEsNi41LTMuMiw4LjZzLTUsMy4xLTguNywzLjFjLTIuMSwwLTMuOC0wLjYtNS0xLjcNCgkJCXMtMS44LTIuNi0xLjgtNC41YzAtMS44LDAuNC0zLjMsMS40LTQuM3MyLjctMS45LDUuMS0yLjZjMC4xLDAsMS42LTAuNCw0LjUtMXM1LjUtMS41LDcuNy0yLjVWMTE1LjZ6Ii8+DQoJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik01MzEuMiw5NC40di05LjZoLTcuOXYtMTRoLTEzLjZ2MTRoLTYuOHY5LjZoNi44djI3LjdjMCw1LjgsMSw5LjYsMi45LDExLjZjMiwxLjksNS41LDIuOSwxMC44LDIuOQ0KCQkJYzAuNCwwLDEuNiwwLDMuMy0wLjFjMS43LTAuMSwzLjItMC4yLDQuNS0wLjJsMCwwdi0xMC4yaC0zLjNjLTEuOSwwLTMuMS0wLjItMy43LTAuNmMtMC42LTAuNS0wLjktMS4zLTAuOS0yLjdWOTQuNEw1MzEuMiw5NC40DQoJCQlMNTMxLjIsOTQuNHoiLz4NCgk8L2c+DQo8L2c+DQo8L3N2Zz4NCg==);
}
#drinks-qrcodes {
    display: none;
}
#drinks-qrcode {
    position: absolute;
    top: calc(50% - 90px);
    left: calc(50% - 90px);
    width: 180px;
    height: 180px;
	background: #fff no-repeat center center url(https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/images/donate/WeChatSQ.png);
    background-size: 160px;
    border-radius: 6px;
    cursor: pointer;
    box-shadow: 0 10px 20px rgba(255, 0, 110, 0.5);
}

/* 动画 */
#drinks-icons, #drinks-button-box {filter: blur(0px);}
.donate-animation-1>#drinks-icons, .donate-animation-4>#drinks-icons,.donate-animation-3>#drinks-button-box {
    transform: scale(0.7,0.7);
    filter: blur(2px);
    display: block;
    opacity: 1;
}
.donate-animation-1>#drinks-button-box,.donate-animation-4>#drinks-button-box,.donate-animation-3>#drinks-qrcodes {
    display: block;
    opacity: 1;
    transform: scale(1,1);
}
.donate-animation-2>#drinks-button-box,.donate-animation-4>#drinks-qrcodes, .hideBox {
    display: block;
    transform: scale(1,1);
    animation-name:hideBox;
    animation-duration:0.3s;
    animation-timing-function:ease-in-out;
    animation-iteration-count:1;
    animation-fill-mode:forwards;
}

.donate-animation-3>#drinks-icons {
    transform: scale(0.4,0.4);
    filter: blur(2px);
}
.showBox {
    animation-name:showBox;
    animation-duration:0.3s;
    animation-timing-function:ease-in-out;
    animation-iteration-count:1;
    animation-fill-mode:forwards;
}
@keyframes showBox {
	from {
        opacity: 0;
        transform: scale(1.3,1.3);
	}
	to {
        opacity: 1;
        transform: scale(1,1);
	}
}
@keyframes hideBox {
	from {
        opacity: 1;
        transform: scale(1,1);
	}
	to {
        opacity: 0;
        transform: scale(1.3,1.3);
	}
}
</style>
<section id="drinks-box">
    <section id="drinks-box-s" class="drinks-button left-100">
        <div id="drinks-icons" class="left-100 tr3">
            <div id="coffee-donate" class="icon-donate"><img src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/images/donate/drinks/coffee.png" alt="coffee" data-creative
                ="https://www.zcool.com.cn/work/ZMjQ3NTE2MA==.html"></div>
        </div>
        <div id="drinks-button-box" class="tr3 left-100">
            <div id="drinks-button-bg" class="left-100"></div>
            <div id="github-box"><a href="https://github.com/Kaiyuan/donate-page/" target="_blank">Github</a></div>
            <ul id="donate-buttons" class="list tr3">
                <li id="paypal_donate"><a href="https://www.paypal.me/wallleap" target="_blank">Paypal</a></li>
                <!-- <li id="btc_donate" class="donate-button">Bitcoin</li> -->
                <li id="alipay_donate" class="donate-button">AliPay</li>
                <li id="wechat_donate" class="donate-button">WeChat</li>
            </ul>
        </div>
        <div id="drinks-qrcodes" class="left-100 tr3">
            <div id="drinks-qrcode"></div>
        </div>
    </section>
</section>

<script>
jQuery(document).ready(function () {

    var thisPage = $('body');
    var drink_box = $('#donate-box');
    var drink_box_s = $('#drinks-box-s');
    var icon_donate = $('.icon-donate');
    var donate_button = $('.donate-button');
    var donate_buttons = $('#drinks-button-box');
    var donate_button_bg = $('#drinks-button-bg');
    var drinks_qrcodes = $('#drinks-qrcodes');
    var drinks_qrcode = $('#drinks-qrcode');
    var isMobile = /Android|webOS|iPhone|iPad|BlackBerry/i.test(navigator.userAgent);
    
    var GithubLink  =   "https://github.com/wallleap/sponsor-page/";
    var PayPalLink  =   "https://www.paypal.me/wallleap";
    $('#paypal-donate>a').href = PayPalLink;
    $('#github-box>a').href = GithubLink;
    var qrcodes = {
        // 'btc_donate'	:	'https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/images/BTCQR.png',	// 二维码路径
        'alipay_donate'	:	'https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/custom/donate/AliPayQR.jpg',	// 支付宝二维码
        // 'alipay_donate_link'   :   'https://qr.alipay.com/3272611934645308',   // 支付宝二维码上的链接，必须换成自己的连接！！！手机点击会自动跳转到支付宝。
        'wechat_donate'	:	'https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/custom/donate/WeChatSQ.jpg'
    };
    
    var drinks_an = new Object();
    // 动画有 4 种状态，不同状态给对应 DOM 添加 css 动画
    drinks_an[0] = function(){
        drink_box_s.removeClass('donate-animation-2 donate-animation-3').addClass('donate-animation-1');
        donate_buttons.addClass('showBox');
        setTimeout(() => {
            donate_buttons.removeClass('showBox');
        }, 300);
        // console.log('donate-animation-1');
    }
    drinks_an[1] = function(){
        drink_box_s.removeClass('donate-animation-1 donate-animation-3').addClass('donate-animation-2');
        setTimeout(() => {
            drink_box_s.removeClass('donate-animation-2');
        }, 300);
        // console.log('donate-animation-2');
    }
    drinks_an[2] = function(){
        drink_box_s.removeClass('donate-animation-2 donate-animation-1').addClass('donate-animation-3');
        drinks_qrcodes.addClass('showBox');
        setTimeout(() => {
            drinks_qrcodes.removeClass('showBox');
        }, 300);
        // console.log('donate-animation-3');
    }
    drinks_an[3] = function(){
        drink_box_s.removeClass('donate-animation-3 donate-animation-2').addClass('donate-animation-4');
        setTimeout(() => {
            drink_box_s.removeClass('donate-animation-4');
            drink_box_s.addClass('donate-animation-1');
        }, 300);
        // console.log('donate-animation-4');
    }
    
    if (isMobile) {
        donate_buttons.addClass('Mobile');
    }
    
    icon_donate.on('click',drinks_an[0]); // drinks 图标点击
    
    donate_button_bg.on('click',drinks_an[1]); // 隐藏 donate box
    
    donate_button.on('click',function(){
        var thisID = $(this).attr("id");
        if (isMobile && thisID === 'alipay_donate') {
            // 当前网页在手机端打开跳转到支付宝 App
            window.open(qrcodes['alipay_donate_link']);
        } else {
            // 当前网页在PC端打开
        drinks_qrcode.css({'background-image' : 'url('+qrcodes[thisID]+')'});
        drinks_an[2]();
        // 显示二维码
        }
    });
    
    drinks_qrcode.on('click',drinks_an[3]); // 隐藏二维码
    //
    })
</script>
    
    <section class="nexmoe-comment">
    <div class="valine" id="vcomments"></div>
<!-- <script src='https://cdn.jsdelivr.net/npm/valine@1.3.9/dist/Valine.min.js'></script> -->
<script type="text/javascript">
    loadComments();
    function loadComments() {
      if (typeof Valine === 'undefined') {
        var getScript = (options) => {
          var script = document.createElement('script');
          script.defer = true;
          script.crossOrigin = 'anonymous';
          Object.keys(options).forEach((key) => {
              script[key] = options[key];
          });
          document.body.appendChild(script);
        };
        getScript({
          src: '//unpkg.com/valine/dist/Valine.min.js',
          onload: () => {
            newValine();
          }
        });
      } else {
        newValine();
      }
    }
    function newValine() {
      new Valine({
        el: '.valine',
        appId: 'GOPlqD10uwQGshDFcsr8Cxik-gzGzoHsz',
        appKey: 'vpzGg4wzHHLRPNOlPHf0UEDS',
        placeholder: '欢迎访问本站，评论一下留个足迹👣呗',
        notify: false,
        verify: true,
        avatar: 'mp',
        meta: ['nick','mail','link'],
        pageSize: 10,
        recordIP: true,
        enableQQ: true,
        // 设置Bilibili表情包地址
        emojiCDN: '//cdn.jsdelivr.net/gh/wallleap/cdn@latest/emote/cool/', 
        // 表情title和图片映射
        emojiMaps: {
            "cool_coolapk_emotion_100_qqdoge": "coolapk_emotion_100_qqdoge.png",
            "cool_coolapk_emotion_1010": "coolapk_emotion_1010.png",
            "cool_coolapk_emotion_1011": "coolapk_emotion_1011.png",
            "cool_coolapk_emotion_1012": "coolapk_emotion_1012.png",
            "cool_coolapk_emotion_1013": "coolapk_emotion_1013.png",
            "cool_coolapk_emotion_1014": "coolapk_emotion_1014.png",
            "cool_coolapk_emotion_1015": "coolapk_emotion_1015.png",
            "cool_coolapk_emotion_1016": "coolapk_emotion_1016.png",
            "cool_coolapk_emotion_1017": "coolapk_emotion_1017.png",
            "cool_coolapk_emotion_1018": "coolapk_emotion_1018.png",
            "cool_coolapk_emotion_1019": "coolapk_emotion_1019.png",
            "cool_coolapk_emotion_101_pyjiaoyi": "coolapk_emotion_101_pyjiaoyi.png",
            "cool_coolapk_emotion_1020": "coolapk_emotion_1020.png",
            "cool_coolapk_emotion_1021": "coolapk_emotion_1021.png",
            "cool_coolapk_emotion_102_fadai": "coolapk_emotion_102_fadai.png",
            "cool_coolapk_emotion_103_nb": "coolapk_emotion_103_nb.png",
            "cool_coolapk_emotion_104": "coolapk_emotion_104.png",
            "cool_coolapk_emotion_105": "coolapk_emotion_105.png",
            "cool_coolapk_emotion_106": "coolapk_emotion_106.png",
            "cool_coolapk_emotion_107": "coolapk_emotion_107.png",
            "cool_coolapk_emotion_108": "coolapk_emotion_108.png",
            "cool_coolapk_emotion_109": "coolapk_emotion_109.png",
            "cool_coolapk_emotion_10_aoman": "coolapk_emotion_10_aoman.png",
            "cool_coolapk_emotion_11_yiwen": "coolapk_emotion_11_yiwen.png",
            "cool_coolapk_emotion_12_wuyu": "coolapk_emotion_12_wuyu.png",
            "cool_coolapk_emotion_13_huaixiao": "coolapk_emotion_13_huaixiao.png",
            "cool_coolapk_emotion_14_bishi": "coolapk_emotion_14_bishi.png",
            "cool_coolapk_emotion_15_fanu": "coolapk_emotion_15_fanu.png",
            "cool_coolapk_emotion_16_tuosai": "coolapk_emotion_16_tuosai.png",
            "cool_coolapk_emotion_17_tushe": "coolapk_emotion_17_tushe.png",
            "cool_coolapk_emotion_18_han": "coolapk_emotion_18_han.png",
            "cool_coolapk_emotion_19_koubi": "coolapk_emotion_19_koubi.png",
            "cool_coolapk_emotion_1_hahaha": "coolapk_emotion_1_hahaha.png",
            "cool_coolapk_emotion_20_qinqin": "coolapk_emotion_20_qinqin.png",
            "cool_coolapk_emotion_21_penxue": "coolapk_emotion_21_penxue.png",
            "cool_coolapk_emotion_22_xiaoyan": "coolapk_emotion_22_xiaoyan.png",
            "cool_coolapk_emotion_23_shui": "coolapk_emotion_23_shui.png",
            "cool_coolapk_emotion_24_wuzuixiao": "coolapk_emotion_24_wuzuixiao.png",
            "cool_coolapk_emotion_25_zaijian": "coolapk_emotion_25_zaijian.png",
            "cool_coolapk_emotion_26_kelian": "coolapk_emotion_26_kelian.png",
            "cool_coolapk_emotion_27_qiang": "coolapk_emotion_27_qiang.png",
            "cool_coolapk_emotion_28_ruo": "coolapk_emotion_28_ruo.png",
            "cool_coolapk_emotion_29_baoquan": "coolapk_emotion_29_baoquan.png",
            "cool_coolapk_emotion_2_jingya": "coolapk_emotion_2_jingya.png",
            "cool_coolapk_emotion_30_ok": "coolapk_emotion_30_ok.png",
            "cool_coolapk_emotion_31_xiaoku": "coolapk_emotion_31_xiaoku.png",
            "cool_coolapk_emotion_32_heiha": "coolapk_emotion_32_heiha.png",
            "cool_coolapk_emotion_33_wulian": "coolapk_emotion_33_wulian.png",
            "cool_coolapk_emotion_34_jizhi": "coolapk_emotion_34_jizhi.png",
            "cool_coolapk_emotion_35_ye": "coolapk_emotion_35_ye.png",
            "cool_coolapk_emotion_36_ku": "coolapk_emotion_36_ku.png",
            "cool_coolapk_emotion_37_doge": "coolapk_emotion_37_doge.png",
            "cool_coolapk_emotion_38_wozuimei": "coolapk_emotion_38_wozuimei.png",
            "cool_coolapk_emotion_39_caidao": "coolapk_emotion_39_caidao.png",
            "cool_coolapk_emotion_3_ciya": "coolapk_emotion_3_ciya.png",
            "cool_coolapk_emotion_40_aixin": "coolapk_emotion_40_aixin.png",
            "cool_coolapk_emotion_41_meigui": "coolapk_emotion_41_meigui.png",
            "cool_coolapk_emotion_42_diaoxie": "coolapk_emotion_42_diaoxie.png",
            "cool_coolapk_emotion_43_heixian": "coolapk_emotion_43_heixian.png",
            "cool_coolapk_emotion_44_pen": "coolapk_emotion_44_pen.png",
            "cool_coolapk_emotion_45_yinxian": "coolapk_emotion_45_yinxian.png",
            "cool_coolapk_emotion_46_nanguo": "coolapk_emotion_46_nanguo.png",
            "cool_coolapk_emotion_47_weiqu": "coolapk_emotion_47_weiqu.png",
            "cool_coolapk_emotion_48_weiweiyixiao": "coolapk_emotion_48_weiweiyixiao.png",
            "cool_coolapk_emotion_49_huanhu": "coolapk_emotion_49_huanhu.png",
            "cool_coolapk_emotion_4_liulei": "coolapk_emotion_4_liulei.png",
            "cool_coolapk_emotion_50_xinsui": "coolapk_emotion_50_xinsui.png",
            "cool_coolapk_emotion_51_chigua": "coolapk_emotion_51_chigua.png",
            "cool_coolapk_emotion_52_hejiu": "coolapk_emotion_52_hejiu.png",
            "cool_coolapk_emotion_53_pu": "coolapk_emotion_53_pu.png",
            "cool_coolapk_emotion_54_hongyaowan": "coolapk_emotion_54_hongyaowan.png",
            "cool_coolapk_emotion_55_lvyaowan": "coolapk_emotion_55_lvyaowan.png",
            "cool_coolapk_emotion_56_dogexiaoku": "coolapk_emotion_56_dogexiaoku.png",
            "cool_coolapk_emotion_57_dogehechi": "coolapk_emotion_57_dogehechi.png",
            "cool_coolapk_emotion_58_dogeyuanliangta": "coolapk_emotion_58_dogeyuanliangta.png",
            "cool_coolapk_emotion_59_erha": "coolapk_emotion_59_erha.png",
            "cool_coolapk_emotion_5_keai": "coolapk_emotion_5_keai.png",
            "cool_coolapk_emotion_61_lvmao": "coolapk_emotion_61_lvmao.png",
            "cool_coolapk_emotion_62_huaji": "coolapk_emotion_62_huaji.png",
            "cool_coolapk_emotion_60_kuan": "coolapk_emotion_60_kuan.png",
            "cool_coolapk_emotion_63_liuhanhuaji": "coolapk_emotion_63_liuhanhuaji.png",
            "cool_coolapk_emotion_64_shounuehuaji": "coolapk_emotion_64_shounuehuaji.png",
            "cool_coolapk_emotion_65_coshuaji": "coolapk_emotion_65_coshuaji.png",
            "cool_coolapk_emotion_66_doujiyanhuaji": "coolapk_emotion_66_doujiyanhuaji.png",
            "cool_coolapk_emotion_67_mojinghuaji": "coolapk_emotion_67_mojinghuaji.png",
            "cool_coolapk_emotion_68": "coolapk_emotion_68.png",
            "cool_coolapk_emotion_69": "coolapk_emotion_69.png",
            "cool_coolapk_emotion_6_weixiao": "coolapk_emotion_6_weixiao.png",
            "cool_coolapk_emotion_70": "coolapk_emotion_70.png",
            "cool_coolapk_emotion_71": "coolapk_emotion_71.png",
            "cool_coolapk_emotion_72": "coolapk_emotion_72.png",
            "cool_coolapk_emotion_73": "coolapk_emotion_73.png",
            "cool_coolapk_emotion_74": "coolapk_emotion_74.png",
            "cool_coolapk_emotion_75": "coolapk_emotion_75.png",
            "cool_coolapk_emotion_76": "coolapk_emotion_76.png",
            "cool_coolapk_emotion_77": "coolapk_emotion_77.png",
            "cool_coolapk_emotion_78": "coolapk_emotion_78.png",
            "cool_coolapk_emotion_79": "coolapk_emotion_79.png",
            "cool_coolapk_emotion_7_hehe": "coolapk_emotion_7_hehe.png",
            "cool_coolapk_emotion_80": "coolapk_emotion_80.png",
            "cool_coolapk_emotion_81_naikezui": "coolapk_emotion_81_naikezui.png",
            "cool_coolapk_emotion_82_miaomiao": "coolapk_emotion_82_miaomiao.png",
            "cool_coolapk_emotion_83_huoba": "coolapk_emotion_83_huoba.png",
            "cool_coolapk_emotion_84_baiyan": "coolapk_emotion_84_baiyan.png",
            "cool_coolapk_emotion_85": "coolapk_emotion_85.png",
            "cool_coolapk_emotion_86": "coolapk_emotion_86.png",
            "cool_coolapk_emotion_87": "coolapk_emotion_87.png",
            "cool_coolapk_emotion_88": "coolapk_emotion_88.png",
            "cool_coolapk_emotion_89": "coolapk_emotion_89.png",
            "cool_coolapk_emotion_8_piezui": "coolapk_emotion_8_piezui.png",
            "cool_coolapk_emotion_90": "coolapk_emotion_90.png",
            "cool_coolapk_emotion_91": "coolapk_emotion_91.png",
            "cool_coolapk_emotion_92": "coolapk_emotion_92.png",
            "cool_coolapk_emotion_93": "coolapk_emotion_93.png",
            "cool_coolapk_emotion_94": "coolapk_emotion_94.png",
            "cool_coolapk_emotion_95_erhading": "coolapk_emotion_95_erhading.png",
            "cool_coolapk_emotion_96_kuanlvmao": "coolapk_emotion_96_kuanlvmao.png",
            "cool_coolapk_emotion_97_haixiu": "coolapk_emotion_97_haixiu.png",
            "cool_coolapk_emotion_98_wunai": "coolapk_emotion_98_wunai.png",
            "cool_coolapk_emotion_99_zhoumei": "coolapk_emotion_99_zhoumei.png",
            "cool_coolapk_emotion_9_se": "coolapk_emotion_9_se.png",
            "cool_c_coolb": "c_coolb.png",
            "cool_c_fived": "c_fived.png",
            "cool_c_fivef": "c_fivef.png",
            "cool_c_fivem": "c_fivem.png",
            "cool_c_fiveo": "c_fiveo.png",
            "cool_c_fivey": "c_fivey.png",
            "cool_c_fy": "c_fy.png",
            "cool_c_oned": "c_oned.png",
            "cool_c_onef": "c_onef.png",
            "cool_c_onem": "c_onem.png",
            "cool_c_oneo": "c_oneo.png",
            "cool_c_oney": "c_oney.png",
            "cool_c_oy": "c_oy.png",
            "cool_c_teny": "c_teny.png",
            "cool_c_twod": "c_twod.png",
            "cool_c_twof": "c_twof.png",
            "cool_c_twom": "c_twom.png",
            "cool_c_twoo": "c_twoo.png",
            "cool_c_twoy": "c_twoy.png",
            "cool_c_ty": "c_ty.png",
            // ... 更多表情
        } 
      });
    }
</script>

<!-- <script>
    document.body.addEventListener('click', function(e) {
    if (e.target.classList.contains('vsubmit')) {
        const email = document.querySelector('input[type=email]');
        const nick = document.querySelector('input[name=nick]');
        const reg = /^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;
        if (!email.value || !nick.value || !reg.test(email.value)) {
            const str = `<div class="valert txt-center"><div class="vtext">请填写正确的昵称和邮箱！</div></div>`;
            const vmark = document.querySelector('.vmark');
            vmark.innerHTML = str;
            vmark.style.display = 'block';

            setTimeout(function() {
                vmark.style.display = 'none';
                vmark.innerHTML = '';
            }, 2500);
        }
      }
    });
</script> -->
<!-- <script>
$(document).ready(function(){
  $('.vemoji-btn').text('😀');
	$("#vcomments").on('click', 'span.vat',function(){
		$(this).parent('div.vmeta').next("div.vcontent").after($("div.vwrap"));
		$('textarea#veditor').focus();
	})
})
</script> -->
<style>
@keyframes valineBg{
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}
#vcomments .vwrap{
  padding: 20px 20px 44px;
  background: linear-gradient(-45deg, rgba(255, 206, 255, .3), rgba(237, 156, 253 ,.3), rgba(173, 214, 251, .3), rgba(192, 255, 208, .3));
  background-size: 400% 400%;
  animation: valineBg 15s ease infinite;
}
#veditor{
  background-image: url(https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/other/comment-bg.png);
  background-size: contain;
  background-repeat: no-repeat;
  background-position: right;
  background-color: rgba(255,255,255,0);
  /* resize: vertical; */
  resize:none;
  min-height:7rem;
}
textarea[id='veditor']::placeholder{color:#b3b3b3;font-size:15px;text-align:center;line-height:6rem;}
.v .vwrap .vheader{width: 80%;bottom:0;position: absolute;}
.v .vinput{padding:10px 15px;border-bottom:0px;background-color: rgba(255, 0, 110, .1);}
.v .vwrap .vedit .vctrl{margin-top:-44px;right:0;position:absolute;margin-right:-3px;}
.v .vwrap .vcontrol{ position:absolute;right:0;bottom:0;width:20%;padding-top:0px;}
.v .vwrap .vcol-30{
  position: absolute;left: 4px;bottom: 5px;width: 20px !important;
}
.v .vwrap .vcontrol .col.col-80{width: 100%;}
.v .vbtn.vsubmit{
  padding: 0;
  position:absolute; bottom: 0; right: 0; 
  color: #fff; height: 42px; line-height: 42px; width:150px; text-align: center;
  border: none;border-radius:22px;background:#fe1b73;
}
.v .vbtn.vsubmit:hover{box-shadow: 0 2px 12px #ff4e6a;}
.v .vwrap .vedit .vctrl span{
  margin-top: 30px;
}
.v .vwrap .vcontrol .col.col-20,.v .vlist .vcard .vhead .vsys{
  display:none;
}
@media screen and (max-width: 520px){
  .v .vwrap .vcol-30{display: none !important;}
  textarea[id='veditor']::placeholder{color:#b3b3b3;font-size:14px;text-align:center;line-height: 1;}
  .vemojis{margin-bottom: 100px;}
  .v .vwrap .vheader .vinput{width: 33.33%;padding:10px 5px;}
  .v .vbtn.vsubmit{bottom: 10px;left: 0;right: 0;margin: 0 auto;}
}
@media screen and (min-width: 520px;) (max-width: 750px){
  /* #vcomments .vwrap{height: 400px;} */
  .v .vwrap .vcol-30{display: none !important;}
  .v .vwrap .item3{bottom: 60px;}
  .vemojis{margin-bottom: 200px;}
  textarea[id='veditor']::placeholder{color:#b3b3b3;font-size:14px;text-align:center;line-height: 1;}
	.v .vwrap .vheader .vinput{width: 33.33%;padding:10px 5px;}
  .v .vbtn.vsubmit{bottom: 10px;left: 0;right: 0;margin: 0 auto;}
}
.vcard .vhead .vsys:nth-of-type(1){
  display: inline-block;
  background-color: rgba(247, 210, 247, .5);
}
.vcard .vhead .vsys:nth-of-type(2){
  display: inline-block;
  background-color: rgba(224, 235, 247, .5);
}
</style>
    <div style="text-align:center;font-size: 12px;color: #888;">
            <div class="site-info">
                
             
              <div class="footertext">
                <p><a href="#" style="color: #b9b9b9;" >Blog wallleap</a>
                  , Copyright &copy; 2019-2020 
                  by Luwang All Rights Reserved.</p>
              </div>

              <!-- <a style="color: #b9b9b9;" href="//beian.miit.gov.cn" target="_blank">	
                <img src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/logo/ICP.png" style="vertical-align: text-bottom; width: 17px;" />
                赣ICP备20000895号-1
              </a> -->
              
              <span style="padding-left: 20px;">
                <i class="fa fa-clock-o" aria-hidden="true"></i>
                <span id="time" align="center">载入时间中...</span>
                <script>
                  var now = new Date(); 
                  function createtime() { 
                    var grt= new Date("08/08/2019 17:38:00");//在此处修改你的建站时间
                    now.setTime(now.getTime()+250); 
                    days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
                    hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
                    if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
                    mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
                    seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
                    snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
                    document.getElementById("time").innerHTML = "小站已经苟活 "+dnum+" 天 "+hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
                 } 
                 setInterval("createtime()",250);
                </script>
              <span style="padding-left: 20px;><i class="fa fa-cog fa-spin" aria-hidden="true"></i></span>
                <script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1278079074'%3E%3C/span%3E%3Cscript src='https://s4.cnzz.com/z_stat.php%3Fid%3D1278079074%26online%3D2' type='text/javascript'%3E%3C/script%3E"));</script>
              </span>
              
              <div style="text-align:center; padding-top: 20px;">
                <div class="github-badge">
                  <a rel="license" href="https://hexo.io/" target="_blank" title="由Hexo强力驱动">
                  <span class="badge-subject"><i class="fa fa-fire" aria-hidden="true"></i> Powered</span><span class="badge-value bg-blue">Hexo</span></a>
                </div>
                <div class="github-badge">
                    <a rel="license" href="https://coding.net/" target="_blank" title="静态网页托管于CODING">
                    <span class="badge-subject"><i class="fa fa-heart" aria-hidden="true"></i> Hosted</span>
                    <span class="badge-value bg-gray">CODING</span></a>
                  </div>
                <div class="github-badge">
                    <a rel="license" href="https://www.jsdelivr.com/" target="_blank" title="jsDelivr提供CDN加速服务">
                    <span class="badge-subject"><i class="fa fa-firefox fa-spin" aria-hidden="true"></i> CND</span><span class="badge-value bg-cdn">Github&jsDelivr</span></a>
                </div>
                <div class="github-badge">
                    <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="本站点采用知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议进行许可">
                    <span class="badge-subject"><i class="fa fa-copyright"></i></span><span class="badge-value bg-lightgrey">BY-NC-SA 4.0</span></a>
                </div>
              </div>  
          
              
            </div><!-- .site-info -->
          </div>
</section>
  </div>
</div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/combine/npm/lazysizes@5.1.0/lazysizes.min.js,gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js,npm/mdui@0.4.3/dist/js/mdui.min.js,gh/nexmoe/nexmoe.github.io@latest/js/app.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!--<script src="/js/app.js?v=1599833537158"></script>-->


    <script src="https://cdn.jsdelivr.net/gh/xtaodada/xtaodada.github.io@0.0.2/copy.js"></script>


 
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/shehuizhuyi.js"></script>
<script> 
!function(e,t,a){function n(){c(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"),o(),r()}function r(){for(var e=0;e<d.length;e++)d[e].alpha<=0?(t.body.removeChild(d[e].el),d.splice(e,1)):(d[e].y--,d[e].scale+=.004,d[e].alpha-=.013,d[e].el.style.cssText="left:"+d[e].x+"px;top:"+d[e].y+"px;opacity:"+d[e].alpha+";transform:scale("+d[e].scale+","+d[e].scale+") rotate(45deg);background:"+d[e].color+";z-index:99999");requestAnimationFrame(r)}function o(){var t="function"==typeof e.onclick&&e.onclick;e.onclick=function(e){t&&t(),i(e)}}function i(e){var a=t.createElement("div");a.className="heart",d.push({el:a,x:e.clientX-5,y:e.clientY-5,scale:1,alpha:1,color:s()}),t.body.appendChild(a)}function c(e){var a=t.createElement("style");a.type="text/css";try{a.appendChild(t.createTextNode(e))}catch(t){a.styleSheet.cssText=e}t.getElementsByTagName("head")[0].appendChild(a)}function s(){return"rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")"}var d=[];e.requestAnimationFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)}}(),n()}(window,document);
</script>

  





</body>

</html>
