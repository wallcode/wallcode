<!DOCTYPE html>

<html lang="zh-CN">

<head>
  
  <title>React全家桶(技术栈)学习笔记 - wallleap</title>
  <meta charset="UTF-8">
  <meta name="description" content="luwang的博客，正在努力学习💪">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  
  

  <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/favicon.png" type="image/png" />
  <meta name="description" content="第1章 React入门1.1 React的基本认识1.1.1 官网1)     英文官网: https:&#x2F;&#x2F;reactjs.org&#x2F; 2)     中文官网: https:&#x2F;&#x2F;doc.react-china.org&#x2F; 1.1.2 介绍描述1)     用于构建用户界面的 JavaScript 库(只关注于View)  JS库： jQuery——函数库(方法、函数包装DOM操作) React 基本上">
<meta property="og:type" content="article">
<meta property="og:title" content="React全家桶(技术栈)学习笔记">
<meta property="og:url" content="https://blog.wallleap.cn/2020/07/12/React/index.html">
<meta property="og:site_name" content="wallleap">
<meta property="og:description" content="第1章 React入门1.1 React的基本认识1.1.1 官网1)     英文官网: https:&#x2F;&#x2F;reactjs.org&#x2F; 2)     中文官网: https:&#x2F;&#x2F;doc.react-china.org&#x2F; 1.1.2 介绍描述1)     用于构建用户界面的 JavaScript 库(只关注于View)  JS库： jQuery——函数库(方法、函数包装DOM操作) React 基本上">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/cover/(00).jpg">
<meta property="article:published_time" content="2020-07-12T08:54:50.000Z">
<meta property="article:modified_time" content="2020-07-15T10:26:58.000Z">
<meta property="article:author" content="Luwang">
<meta property="article:tag" content="前端">
<meta property="article:tag" content=" React">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/cover/(00).jpg">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/combine/gh/nexmoe/nexmoe.github.io@latest/css/style.css,npm/highlight.js@9.15.8/styles/atom-one-dark.css,gh/nexmoe/nexmoe.github.io@latest/lib/mdui_043tiny/css/mdui.css,gh/nexmoe/nexmoe.github.io@latest/lib/iconfont/iconfont.css" crossorigin>
  
    <link rel="stylesheet" href="//at.alicdn.com/t/font_1721693_jg94kndwhe.css">
  
  <link rel="stylesheet" href="/css/style.css?v=1599833537167">

   
    <style>
      .nexmoe-avatar img:hover {
        -webkit-transform: rotateZ(360deg);
        -moz-transform: rotateZ(360deg);
        transform: rotateZ(360deg);
      }	
    </style>
  

<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">
<script src="https://cdn.jsdelivr.net/gh/wallleap/live2d-widget@latest/autoload.js"></script> 
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/busuanzi.pure.mini.js"></script>

<link rel="stylesheet" href="/css/github-badge.css">
<link rel="stylesheet" href="/css/tags_ca.css">
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<style>
  .pace .pace-progress {  background: rgb(254, 27, 115); /*进度条颜色*/
  height: 3px;  }
  .pace .pace-progress-inner {  box-shadow: 0 0 10px #ff0000, 0 0 5px     #ff0000; /*阴影颜色*/
  }
  .pace .pace-activity {  border-top-color: rgb(251, 30, 30);    /*上边框颜色*/
  border-left-color: rgb(251, 30, 30);    /*左边框颜色*/
}
</style>
<meta name="generator" content="Hexo 4.2.0"></head>

<body class="mdui-drawer-body-left">
  
  <div id="nexmoe-background">
    <div class="nexmoe-bg" style="background-image: url(https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg)"></div>
    <div class="mdui-appbar mdui-shadow-0">
      <div class="mdui-toolbar">
        <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
        <div class="mdui-toolbar-spacer"></div>
        <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
        <a href="/" title="Luwang" class="mdui-btn mdui-btn-icon"><img src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/custom/avatar.jpg" alt="Luwang"></a>
       </div>
    </div>
  </div>
  <div id="nexmoe-header">
      <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="Luwang">
            <img src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/custom/avatar.jpg" alt="Luwang" alt="Luwang">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>54</div>
        <div><span>标签</span>57</div>
        <div><span>分类</span>25</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/archives" title="文章归档">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                文章归档
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/categories" title="文章分类">
            <i class="mdui-list-item-icon nexmoefont icon-appstore-fill"></i>
            <div class="mdui-list-item-content">
                文章分类
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/friends.html" title="我的朋友">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的朋友
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about.html" title="关于博客">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博客
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
  
  <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
        <form id="search_form" action_e="https://cn.bing.com/search?q=site:wallleap.cn" onsubmit="return search();">
            <label><input id="search_value" name="q" type="search" placeholder="搜索"></label>
        </form>
    </div>
</div>
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">社交按钮</h3>
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://space.bilibili.com/157360395" target="_blank" mdui-tooltip="{content: '哔哩哔哩'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
            <!-- <i class="fa icon-bilibili"></i> -->
        </a><a class="mdui-ripple" href="https://github.com/wallleap/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
            <!-- <i class="fa icon-github"></i> -->
        </a><a class="mdui-ripple" href="https://github.com/wallleap/" target="_blank" mdui-tooltip="{content: 'QQ'}" style="color: rgb(0 , 0, 252);background-color: rgba(0, 0, 252, .15);">
            <i class="nexmoefont icon-QQ"></i>
            <!-- <i class="fa icon-QQ"></i> -->
        </a><a class="mdui-ripple" href="https://github.com/wallleap/" target="_blank" mdui-tooltip="{content: '微信公众号'}" style="color: rgb(0, 229, 105);background-color: rgba(0, 229, 105, .15);">
            <i class="nexmoefont icon-wechat-fill"></i>
            <!-- <i class="fa icon-wechat-fill"></i> -->
        </a><a class="mdui-ripple" href="https://github.com/wallleap/" target="_blank" mdui-tooltip="{content: '我的邮箱'}" style="color: rgb(245, 0, 0);background-color: rgba(245, 0, 0, .15);">
            <i class="nexmoefont icon-mail-fill"></i>
            <!-- <i class="fa icon-mail-fill"></i> -->
        </a><a class="mdui-ripple" href="https://github.com/wallleap/" target="_blank" mdui-tooltip="{content: '我的微博'}" style="color: rgb(245, 0, 0);background-color: rgba(245, 0, 0, .15);">
            <i class="nexmoefont icon-weibo"></i>
            <!-- <i class="fa icon-weibo"></i> -->
        </a><a class="mdui-ripple" href="https://github.com/wallleap/" target="_blank" mdui-tooltip="{content: 'RSS'}" style="color: rgb(252, 129, 0);background-color: rgba(252, 129, 0, .15);">
            <i class="nexmoefont icon-rss"></i>
            <!-- <i class="fa icon-rss"></i> -->
        </a> 
    </div>
</div>
  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">标签云</h3>
    <div id="randomtagcloud" class="nexmoe-widget tagcloud">
      <a href="/tags/ACL/" style="font-size: 10px;">ACL</a> <a href="/tags/Ajax/" style="font-size: 10px;">Ajax</a> <a href="/tags/AngularJS/" style="font-size: 10px;">AngularJS</a> <a href="/tags/Blog/" style="font-size: 17.14px;">Blog</a> <a href="/tags/C-C/" style="font-size: 11.43px;">C/C++</a> <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/ES/" style="font-size: 10px;">ES</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/GitHub/" style="font-size: 15.71px;">GitHub</a> <a href="/tags/HCL/" style="font-size: 15.71px;">HCL</a> <a href="/tags/HCNA/" style="font-size: 15.71px;">HCNA</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/Hexo/" style="font-size: 17.14px;">Hexo</a> <a href="/tags/JavaScript/" style="font-size: 14.29px;">JavaScript</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/NAT/" style="font-size: 10px;">NAT</a> <a href="/tags/NodeJS/" style="font-size: 10px;">NodeJS</a> <a href="/tags/OSPF/" style="font-size: 10px;">OSPF</a> <a href="/tags/RIP/" style="font-size: 10px;">RIP</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/STP/" style="font-size: 10px;">STP</a> <a href="/tags/Sakura/" style="font-size: 10px;">Sakura</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/VLAN/" style="font-size: 10px;">VLAN</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a> <a href="/tags/Win10/" style="font-size: 10px;">Win10</a> <a href="/tags/eNSP/" style="font-size: 15.71px;">eNSP</a> <a href="/tags/eNsp/" style="font-size: 11.43px;">eNsp</a> <a href="/tags/hackintosh/" style="font-size: 10px;">hackintosh</a> <a href="/tags/hexo/" style="font-size: 11.43px;">hexo</a> <a href="/tags/jQuery/" style="font-size: 10px;">jQuery</a> <a href="/tags/w650dc/" style="font-size: 10px;">w650dc</a> <a href="/tags/web/" style="font-size: 18.57px;">web</a> <a href="/tags/%E4%B8%BB%E9%A2%98/" style="font-size: 12.86px;">主题</a> <a href="/tags/%E4%BA%94%E7%AC%94/" style="font-size: 10px;">五笔</a> <a href="/tags/%E4%BA%A4%E6%8D%A2%E6%9C%BA/" style="font-size: 10px;">交换机</a> <a href="/tags/%E4%BC%81%E4%B8%9A%E7%BD%91/" style="font-size: 10px;">企业网</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 20px;">前端</a> <a href="/tags/%E5%8D%8E%E4%B8%89/" style="font-size: 15.71px;">华三</a> <a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 17.14px;">博客</a> <a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 11.43px;">后端</a> <a href="/tags/%E5%9B%BE%E9%9B%86/" style="font-size: 10px;">图集</a> <a href="/tags/%E5%AE%89%E8%A3%85/" style="font-size: 10px;">安装</a> <a href="/tags/%E5%AE%9E%E9%AA%8C/" style="font-size: 12.86px;">实验</a> <a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size: 10px;">微信</a> <a href="/tags/%E5%BE%AE%E4%BF%A1%E9%98%B2%E7%9B%97%E9%93%BE/" style="font-size: 10px;">微信防盗链</a> <a href="/tags/%E6%82%A6%E8%AF%BB/" style="font-size: 10px;">悦读</a> <a href="/tags/%E6%8A%80%E6%9C%AF/" style="font-size: 10px;">技术</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 11.43px;">数据结构</a> <a href="/tags/%E6%A1%86%E6%9E%B6/" style="font-size: 10px;">框架</a> <a href="/tags/%E6%A8%A1%E5%9D%97%E5%8C%96/" style="font-size: 10px;">模块化</a> <a href="/tags/%E8%80%83%E7%A0%94/" style="font-size: 10px;">考研</a> <a href="/tags/%E8%8B%B1%E8%AF%AD/" style="font-size: 10px;">英语</a> <a href="/tags/%E9%80%86%E6%B0%B4%E5%AF%92/" style="font-size: 10px;">逆水寒</a> <a href="/tags/%E9%85%8D%E7%BD%AE/" style="font-size: 12.86px;">配置</a> <a href="/tags/%E9%BB%91%E8%8B%B9%E6%9E%9C/" style="font-size: 10px;">黑苹果</a>
    </div>
    
      <script>
        var maxTagcloud = parseInt(10);
        var tags_length = parseInt(57);
        var tags_arr = [];
        for(var i = 0; i < tags_length; i++){
          tags_arr.push(i);
        }
        tags_arr.sort(function (l, r) {
          return Math.random() > 0.5 ? -1 : 1;
        });
        tags_arr = tags_arr.slice(0, maxTagcloud < tags_length ? tags_length - maxTagcloud : 0);
        for(var tag_i = 0; tag_i < tags_arr.length; tag_i++){
          document.getElementById("randomtagcloud").children[tags_arr[tag_i]].style.display = 'none';
        }
      </script>
    
  </div>

  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章归档</h3>
    <div class="nexmoe-widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li></ul>
    </div>
  </div>


  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">最新文章</h3>
    <div class="nexmoe-widget">
      <ul>
        
          <li>
            <a href="/2020/08/28/VUE/">Vue学习笔记</a>
          </li>
        
          <li>
            <a href="/2020/08/20/AJAX/">Ajax学习笔记</a>
          </li>
        
          <li>
            <a href="/2020/07/12/React/">React全家桶(技术栈)学习笔记</a>
          </li>
        
          <li>
            <a href="/2020/07/04/Git/">Git学习笔记</a>
          </li>
        
          <li>
            <a href="/2020/06/14/nodejs/">NodeJs学习笔记</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
    <!-- <div class="nexmoe-copyright">
        &copy; 2020 Luwang
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://nexmoe.com/hexo-theme-nexmoe.html" target="_blank">Nexmoe</a>
    </div> -->
    <div style="text-align: center;">
        <div class="github-badge">
            <a rel="license" href="https://github.io/" target="_blank" title="静态网页托管于Github">
            <span class="badge-subject">Hosted</span><span class="badge-value bg-brightgreen"><i class="fa fa-github" aria-hidden="true"></i> Github</span></a>
        </div>
        <div class="github-badge">
            <a rel="license" href="https://nexmoe.com/hexo-theme-nexmoe.html" target="_blank" title="站点使用 Sakura 主题，作者：Mashiro & Hojun">
            <span class="badge-subject"><i class="fa fa-themeisle" aria-hidden="true"></i> Theme</span><span class="badge-value bg-theme">nexmoe</span></a>
        </div><br />
        <div class="github-badge">
            <span class="badge-subject"><i class="fa fa-user" aria-hidden="true"></i> UV</span>
            <span  class="badge-value bg-orange" id="busuanzi_value_site_uv"></span>
        </div>
        <div class="github-badge">
            <span class="badge-subject"><i class="fa fa-eye" aria-hidden="true"></i> PV</span>
            <span class="badge-value bg-brightgreen" id="busuanzi_value_site_pv"></span>
        </div>
    </div>
    <div class="site-img" style="margin: 20px 0 20px 16px;">
        <a href="#"><img width="200px" src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/wechat/wallleap.bmp"></a>
    </div>
</div><!-- .nexmoe-drawer -->
  </div>
  <div id="nexmoe-content">
    <div class="nexmoe-primary">
        <div class="nexmoe-post">
  
      <div class="nexmoe-post-cover" style="padding-bottom: 66.66666666666666%;"> 
          <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="React全家桶(技术栈)学习笔记" class="lazyload">
          <h1>React全家桶(技术栈)学习笔记</h1>
      </div>
  
  
  <link rel="stylesheet" href="/css/sharejs.css">
  <input type="hidden" id="yelog_site_posts_number" value="54">
  <input type="hidden" id="yelog_site_word_count" value="276.4k">
<div class="nexmoe-post-meta" style="margin:10px 0!important;">
    <a><i class="nexmoefont icon-calendar-fill"></i>2020年07月12日</a>
    <a><i class="nexmoefont icon-areachart"></i>19.1k 字</a>
    <a><i class="nexmoefont icon-time-circle-fill"></i>大概 101 分钟</a>
    <a><i class="nexmoefont icon-eye-fill"></i>阅读次数 <span id="busuanzi_value_page_pv"></span></a>
</div>

  <div class="nexmoe-post-right">
    
      <div class="nexmoe-fixed">
        <div class="nexmoe-valign">
            <div class="nexmoe-toc">
                <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#第1章-React入门"><span class="toc-number">1.</span> <span class="toc-text">第1章 React入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-React的基本认识"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 React的基本认识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-1-官网"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1.1 官网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-2-介绍描述"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.1.2 介绍描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-3-React的特点"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.1.3 React的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-4-React高效的原因-区域、次数——更新界面效率提高"><span class="toc-number">1.1.4.</span> <span class="toc-text">1.1.4 React高效的原因(区域、次数——更新界面效率提高)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-React的基本使用"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 React的基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1-效果"><span class="toc-number">1.2.1.</span> <span class="toc-text">1.2.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-3-相关js库"><span class="toc-number">1.2.2.</span> <span class="toc-text">1.2.3 相关js库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-4-在页面中导入js"><span class="toc-number">1.2.3.</span> <span class="toc-text">1.2.4 在页面中导入js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-5-编码"><span class="toc-number">1.2.4.</span> <span class="toc-text">1.2.5 编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-6-使用React开发者工具调试"><span class="toc-number">1.2.5.</span> <span class="toc-text">1.2.6 使用React开发者工具调试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-React-JSX"><span class="toc-number">1.3.</span> <span class="toc-text">1.3 React JSX</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-1-效果"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.3.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-2-虚拟DOM"><span class="toc-number">1.3.2.</span> <span class="toc-text">1.3.2 虚拟DOM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-3-JSX"><span class="toc-number">1.3.3.</span> <span class="toc-text">1.3.3 JSX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-4-渲染虚拟DOM-元素"><span class="toc-number">1.3.4.</span> <span class="toc-text">1.3.4 渲染虚拟DOM(元素)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-5-建虚拟DOM的2种方式"><span class="toc-number">1.3.5.</span> <span class="toc-text">1.3.5 建虚拟DOM的2种方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-6-JSX练习"><span class="toc-number">1.3.6.</span> <span class="toc-text">1.3.6 JSX练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-模块与组件和模块化与组件化的理解"><span class="toc-number">1.4.</span> <span class="toc-text">1.4 模块与组件和模块化与组件化的理解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-1-模块"><span class="toc-number">1.4.1.</span> <span class="toc-text">1.4.1 模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-2-组件"><span class="toc-number">1.4.2.</span> <span class="toc-text">1.4.2 组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-3-模块化"><span class="toc-number">1.4.3.</span> <span class="toc-text">1.4.3 模块化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-4-组件化"><span class="toc-number">1.4.4.</span> <span class="toc-text">1.4.4 组件化</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第2章-React面向组件编程"><span class="toc-number">2.</span> <span class="toc-text">第2章 React面向组件编程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-基本理解和使用"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 基本理解和使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1-效果"><span class="toc-number">2.1.1.</span> <span class="toc-text">2.1.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-2-自定义组件-Component"><span class="toc-number">2.1.2.</span> <span class="toc-text">2.1.2 自定义组件(Component) :</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-3-注意"><span class="toc-number">2.1.3.</span> <span class="toc-text">2.1.3 注意</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-4-render-渲染组件标签的基本流程"><span class="toc-number">2.1.4.</span> <span class="toc-text">2.1.4 render()渲染组件标签的基本流程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-组件三大属性1-state"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 组件三大属性1: state</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-效果"><span class="toc-number">2.2.1.</span> <span class="toc-text">2.2.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-理解"><span class="toc-number">2.2.2.</span> <span class="toc-text">2.2.2 理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-编码操作"><span class="toc-number">2.2.3.</span> <span class="toc-text">2.2.3 编码操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-4-代码"><span class="toc-number">2.2.4.</span> <span class="toc-text">2.2.4 代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-组件三大属性2-props"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 组件三大属性2: props</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1-效果"><span class="toc-number">2.3.1.</span> <span class="toc-text">2.3.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2-理解"><span class="toc-number">2.3.2.</span> <span class="toc-text">2.3.2 理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-3-作用"><span class="toc-number">2.3.3.</span> <span class="toc-text">2.3.3 作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-4-编码操作"><span class="toc-number">2.3.4.</span> <span class="toc-text">2.3.4 编码操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-5-代码"><span class="toc-number">2.3.5.</span> <span class="toc-text">2.3.5 代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-6-面试题"><span class="toc-number">2.3.6.</span> <span class="toc-text">2.3.6 面试题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-组件三大属性3-refs与事件处理"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 组件三大属性3: refs与事件处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-1-效果"><span class="toc-number">2.4.1.</span> <span class="toc-text">2.4.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-2-组件的3大属性之二-refs属性"><span class="toc-number">2.4.2.</span> <span class="toc-text">2.4.2 组件的3大属性之二: refs属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-3-事件处理"><span class="toc-number">2.4.3.</span> <span class="toc-text">2.4.3 事件处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-4-强烈注意"><span class="toc-number">2.4.4.</span> <span class="toc-text">2.4.4 强烈注意</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-5-代码"><span class="toc-number">2.4.5.</span> <span class="toc-text">2.4.5 代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-6-区别"><span class="toc-number">2.4.6.</span> <span class="toc-text">2.4.6 区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-组件的组合"><span class="toc-number">2.5.</span> <span class="toc-text">2.5 组件的组合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-1-效果"><span class="toc-number">2.5.1.</span> <span class="toc-text">2.5.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-2-功能界面的组件化编码流程-无比重要"><span class="toc-number">2.5.2.</span> <span class="toc-text">2.5.2 功能界面的组件化编码流程(无比重要)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-3-代码"><span class="toc-number">2.5.3.</span> <span class="toc-text">2.5.3 代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-收集表单数据"><span class="toc-number">2.6.</span> <span class="toc-text">2.6 收集表单数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-1-效果"><span class="toc-number">2.6.1.</span> <span class="toc-text">2.6.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-2-理解"><span class="toc-number">2.6.2.</span> <span class="toc-text">2.6.2 理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-3-代码"><span class="toc-number">2.6.3.</span> <span class="toc-text">2.6.3 代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7-组件生命周期"><span class="toc-number">2.7.</span> <span class="toc-text">2.7 组件生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-1-效果"><span class="toc-number">2.7.1.</span> <span class="toc-text">2.7.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-2-理解"><span class="toc-number">2.7.2.</span> <span class="toc-text">2.7.2 理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-3-生命周期流程图"><span class="toc-number">2.7.3.</span> <span class="toc-text">2.7.3 生命周期流程图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-4-生命周期详述"><span class="toc-number">2.7.4.</span> <span class="toc-text">2.7.4 生命周期详述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-5-重要的勾子"><span class="toc-number">2.7.5.</span> <span class="toc-text">2.7.5 重要的勾子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-6-代码"><span class="toc-number">2.7.6.</span> <span class="toc-text">2.7.6 代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-8-虚拟DOM与DOM-Diff算法"><span class="toc-number">2.8.</span> <span class="toc-text">2.8 虚拟DOM与DOM Diff算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-1-效果"><span class="toc-number">2.8.1.</span> <span class="toc-text">2.8.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-2-基本原理图"><span class="toc-number">2.8.2.</span> <span class="toc-text">2.8.2 基本原理图</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第3章-react应用-基于react脚手架"><span class="toc-number">3.</span> <span class="toc-text">第3章 react应用(基于react脚手架)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-使用create-react-app创建react应用"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 使用create-react-app创建react应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-react脚手架"><span class="toc-number">3.1.1.</span> <span class="toc-text">3.1.1 react脚手架</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2-创建项目并启动"><span class="toc-number">3.1.2.</span> <span class="toc-text">3.1.2 创建项目并启动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-3-react脚手架项目结构"><span class="toc-number">3.1.3.</span> <span class="toc-text">3.1.3 react脚手架项目结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-demo-评论管理"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 demo: 评论管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-效果"><span class="toc-number">3.2.1.</span> <span class="toc-text">3.2.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-拆分组件"><span class="toc-number">3.2.2.</span> <span class="toc-text">3.2.2 拆分组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-3-实现静态组件"><span class="toc-number">3.2.3.</span> <span class="toc-text">3.2.3 实现静态组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-4-实现动态组件"><span class="toc-number">3.2.4.</span> <span class="toc-text">3.2.4 实现动态组件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第4章-react-ajax"><span class="toc-number">4.</span> <span class="toc-text">第4章 react ajax</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-理解"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 理解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-1-前置说明"><span class="toc-number">4.1.1.</span> <span class="toc-text">4.1.1 前置说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-2-常用的ajax请求库"><span class="toc-number">4.1.2.</span> <span class="toc-text">4.1.2 常用的ajax请求库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-3-效果"><span class="toc-number">4.1.3.</span> <span class="toc-text">4.1.3 效果</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-axios"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 axios</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-文档"><span class="toc-number">4.2.1.</span> <span class="toc-text">4.2.1 文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2-相关API"><span class="toc-number">4.2.2.</span> <span class="toc-text">4.2.2 相关API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-Fetch"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 Fetch</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-1-文档"><span class="toc-number">4.3.1.</span> <span class="toc-text">4.3.1 文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-2-相关API"><span class="toc-number">4.3.2.</span> <span class="toc-text">4.3.2 相关API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-demo-github-users"><span class="toc-number">4.4.</span> <span class="toc-text">4.4 demo: github users</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-1-效果"><span class="toc-number">4.4.1.</span> <span class="toc-text">4.4.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-2-拆分组件"><span class="toc-number">4.4.2.</span> <span class="toc-text">4.4.2 拆分组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-3-编写静态组件"><span class="toc-number">4.4.3.</span> <span class="toc-text">4.4.3 编写静态组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-4-编写动态组件"><span class="toc-number">4.4.4.</span> <span class="toc-text">4.4.4 编写动态组件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第5章-几个重要技术总结"><span class="toc-number">5.</span> <span class="toc-text">第5章 几个重要技术总结</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-组件间通信"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 组件间通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-1-方式一-通过props传递"><span class="toc-number">5.1.1.</span> <span class="toc-text">5.1.1 方式一: 通过props传递</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-2-方式二-使用消息订阅-subscribe-发布-publish-机制"><span class="toc-number">5.1.2.</span> <span class="toc-text">5.1.2 方式二: 使用消息订阅(subscribe)-发布(publish)机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-3-方式三-redux"><span class="toc-number">5.1.3.</span> <span class="toc-text">5.1.3 方式三: redux</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-事件监听理解"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 事件监听理解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-1-原生DOM事件"><span class="toc-number">5.2.1.</span> <span class="toc-text">5.2.1 原生DOM事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-2-自定义事件-消息机制"><span class="toc-number">5.2.2.</span> <span class="toc-text">5.2.2 自定义事件(消息机制)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-ES6常用新语法"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 ES6常用新语法</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第6章-react-router4"><span class="toc-number">6.</span> <span class="toc-text">第6章 react-router4</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-相关理解"><span class="toc-number">6.1.</span> <span class="toc-text">6.1 相关理解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-1-react-router的理解"><span class="toc-number">6.1.1.</span> <span class="toc-text">6.1.1 react-router的理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-2-SPA的理解"><span class="toc-number">6.1.2.</span> <span class="toc-text">6.1.2 SPA的理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-3-路由的理解"><span class="toc-number">6.1.3.</span> <span class="toc-text">6.1.3 路由的理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-4-前端路由的实现"><span class="toc-number">6.1.4.</span> <span class="toc-text">6.1.4 前端路由的实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-react-router相关API"><span class="toc-number">6.2.</span> <span class="toc-text">6.2 react-router相关API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-1-组件"><span class="toc-number">6.2.1.</span> <span class="toc-text">6.2.1 组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-2-其它"><span class="toc-number">6.2.2.</span> <span class="toc-text">6.2.2 其它</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-基本路由使用"><span class="toc-number">6.3.</span> <span class="toc-text">6.3 基本路由使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-1-效果"><span class="toc-number">6.3.1.</span> <span class="toc-text">6.3.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-2-准备"><span class="toc-number">6.3.2.</span> <span class="toc-text">6.3.2 准备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-3-路由组件-views-about-jsx"><span class="toc-number">6.3.3.</span> <span class="toc-text">6.3.3 路由组件: views&#x2F;about.jsx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-4-路由组件-views-home-jsx"><span class="toc-number">6.3.4.</span> <span class="toc-text">6.3.4 路由组件: views&#x2F;home.jsx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-5-包装NavLink组件-components-my-nav-link-jsx"><span class="toc-number">6.3.5.</span> <span class="toc-text">6.3.5 包装NavLink组件: components&#x2F;my-nav-link.jsx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-6-应用组件-components-app-jsx"><span class="toc-number">6.3.6.</span> <span class="toc-text">6.3.6 应用组件: components&#x2F;app.jsx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-7-自定义样式-index-css"><span class="toc-number">6.3.7.</span> <span class="toc-text">6.3.7 自定义样式: index.css</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-8-入口JS-index-js"><span class="toc-number">6.3.8.</span> <span class="toc-text">6.3.8 入口JS: index.js</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-嵌套路由使用"><span class="toc-number">6.4.</span> <span class="toc-text">6.4 嵌套路由使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-1-效果"><span class="toc-number">6.4.1.</span> <span class="toc-text">6.4.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-2-二级路由组件-views-news-jsx"><span class="toc-number">6.4.2.</span> <span class="toc-text">6.4.2 二级路由组件: views&#x2F;news.jsx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-3-二级路由组件-views-message-jsx"><span class="toc-number">6.4.3.</span> <span class="toc-text">6.4.3 二级路由组件: views&#x2F;message.jsx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-4-一级路由组件-views-home-jsx"><span class="toc-number">6.4.4.</span> <span class="toc-text">6.4.4 一级路由组件: views&#x2F;home.jsx</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5-向路由组件传递参数数据"><span class="toc-number">6.5.</span> <span class="toc-text">6.5 向路由组件传递参数数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-1-效果"><span class="toc-number">6.5.1.</span> <span class="toc-text">6.5.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-2-三级路由组件-views-message-detail-jsx"><span class="toc-number">6.5.2.</span> <span class="toc-text">6.5.2 三级路由组件: views&#x2F;message-detail.jsx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-3-二级路由组件-views-message-jsx"><span class="toc-number">6.5.3.</span> <span class="toc-text">6.5.3 二级路由组件: views&#x2F;message.jsx</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-6-多种路由跳转方式"><span class="toc-number">6.6.</span> <span class="toc-text">6.6 多种路由跳转方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-1-效果"><span class="toc-number">6.6.1.</span> <span class="toc-text">6.6.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-2-二级路由-views-message-jsx"><span class="toc-number">6.6.2.</span> <span class="toc-text">6.6.2 二级路由: views&#x2F;message.jsx</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第7章-react-ui"><span class="toc-number">7.</span> <span class="toc-text">第7章 react-ui</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-最流行的开源React-UI组件库"><span class="toc-number">7.1.</span> <span class="toc-text">7.1 最流行的开源React UI组件库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-1-material-ui-国外"><span class="toc-number">7.1.1.</span> <span class="toc-text">7.1.1 material-ui(国外)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-2-ant-design-国内蚂蚁金服"><span class="toc-number">7.1.2.</span> <span class="toc-text">7.1.2 ant-design(国内蚂蚁金服)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-ant-design-mobile使用入门"><span class="toc-number">7.2.</span> <span class="toc-text">7.2 ant-design-mobile使用入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-1-效果"><span class="toc-number">7.2.1.</span> <span class="toc-text">7.2.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-2-使用create-react-app创建react应用"><span class="toc-number">7.2.2.</span> <span class="toc-text">7.2.2 使用create-react-app创建react应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-3-搭建antd-mobile的基本开发环境"><span class="toc-number">7.2.3.</span> <span class="toc-text">7.2.3 搭建antd-mobile的基本开发环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-4-实现按需打包-组件js-css"><span class="toc-number">7.2.4.</span> <span class="toc-text">7.2.4 实现按需打包(组件js&#x2F;css)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第8章-redux"><span class="toc-number">8.</span> <span class="toc-text">第8章 redux</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-redux理解"><span class="toc-number">8.1.</span> <span class="toc-text">8.1 redux理解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-1-学习文档"><span class="toc-number">8.1.1.</span> <span class="toc-text">8.1.1 学习文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-2-redux是什么"><span class="toc-number">8.1.2.</span> <span class="toc-text">8.1.2 redux是什么?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-3-redux工作流程"><span class="toc-number">8.1.3.</span> <span class="toc-text">8.1.3 redux工作流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-4-什么情况下需要使用redux"><span class="toc-number">8.1.4.</span> <span class="toc-text">8.1.4 什么情况下需要使用redux</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-redux的核心API"><span class="toc-number">8.2.</span> <span class="toc-text">8.2 redux的核心API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-1-createStore"><span class="toc-number">8.2.1.</span> <span class="toc-text">8.2.1 createStore()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-2-store对象"><span class="toc-number">8.2.2.</span> <span class="toc-text">8.2.2 store对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-3-applyMiddleware"><span class="toc-number">8.2.3.</span> <span class="toc-text">8.2.3 applyMiddleware()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-4-combineReducers"><span class="toc-number">8.2.4.</span> <span class="toc-text">8.2.4 combineReducers()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-3-redux的三个核心概念"><span class="toc-number">8.3.</span> <span class="toc-text">8.3 redux的三个核心概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-1-action"><span class="toc-number">8.3.1.</span> <span class="toc-text">8.3.1 action</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-2-reducer"><span class="toc-number">8.3.2.</span> <span class="toc-text">8.3.2 reducer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-3-store"><span class="toc-number">8.3.3.</span> <span class="toc-text">8.3.3 store</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4-使用redux编写应用"><span class="toc-number">8.4.</span> <span class="toc-text">8.4 使用redux编写应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-1-效果"><span class="toc-number">8.4.1.</span> <span class="toc-text">8.4.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-2-下载依赖包"><span class="toc-number">8.4.2.</span> <span class="toc-text">8.4.2 下载依赖包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-3-src-redux-action-types-js"><span class="toc-number">8.4.3.</span> <span class="toc-text">8.4.3 src&#x2F;redux&#x2F;action-types.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-4-src-redux-actions-js"><span class="toc-number">8.4.4.</span> <span class="toc-text">8.4.4 src&#x2F;redux&#x2F;actions.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-5-src-redux-reducers-js"><span class="toc-number">8.4.5.</span> <span class="toc-text">8.4.5 src&#x2F;redux&#x2F;reducers.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-6-src-components-app-jsx"><span class="toc-number">8.4.6.</span> <span class="toc-text">8.4.6 src&#x2F;components&#x2F;app.jsx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-7-src-index-js"><span class="toc-number">8.4.7.</span> <span class="toc-text">8.4.7 src&#x2F;index.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-8-问题"><span class="toc-number">8.4.8.</span> <span class="toc-text">8.4.8 问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-5-react-redux"><span class="toc-number">8.5.</span> <span class="toc-text">8.5 react-redux</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-1-理解"><span class="toc-number">8.5.1.</span> <span class="toc-text">8.5.1 理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-2-React-Redux将所有组件分成两大类"><span class="toc-number">8.5.2.</span> <span class="toc-text">8.5.2 React-Redux将所有组件分成两大类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-3-相关API"><span class="toc-number">8.5.3.</span> <span class="toc-text">8.5.3 相关API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-4-使用react-redux"><span class="toc-number">8.5.4.</span> <span class="toc-text">8.5.4 使用react-redux</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-5-问题"><span class="toc-number">8.5.5.</span> <span class="toc-text">8.5.5 问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-6-redux异步编程"><span class="toc-number">8.6.</span> <span class="toc-text">8.6 redux异步编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-1-下载redux插件-异步中间件"><span class="toc-number">8.6.1.</span> <span class="toc-text">8.6.1 下载redux插件(异步中间件)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-2-redux-store-js"><span class="toc-number">8.6.2.</span> <span class="toc-text">8.6.2 redux&#x2F;store.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-3-index-js"><span class="toc-number">8.6.3.</span> <span class="toc-text">8.6.3 index.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-4-redux-actions-js"><span class="toc-number">8.6.4.</span> <span class="toc-text">8.6.4 redux&#x2F;actions.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-5-components-counter-jsx"><span class="toc-number">8.6.5.</span> <span class="toc-text">8.6.5 components&#x2F;counter.jsx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-6-containers-app-jsx"><span class="toc-number">8.6.6.</span> <span class="toc-text">8.6.6 containers&#x2F;app.jsx</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-7-使用上redux调试工具"><span class="toc-number">8.7.</span> <span class="toc-text">8.7 使用上redux调试工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-7-1-安装chrome浏览器插件"><span class="toc-number">8.7.1.</span> <span class="toc-text">8.7.1 安装chrome浏览器插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-7-2-下载工具依赖包"><span class="toc-number">8.7.2.</span> <span class="toc-text">8.7.2 下载工具依赖包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-7-3-编码"><span class="toc-number">8.7.3.</span> <span class="toc-text">8.7.3 编码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-8-Redux版评论"><span class="toc-number">8.8.</span> <span class="toc-text">8.8 Redux版评论</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-8-1-需求"><span class="toc-number">8.8.1.</span> <span class="toc-text">8.8.1 需求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-8-2-安装"><span class="toc-number">8.8.2.</span> <span class="toc-text">8.8.2 安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-8-3-目录结构"><span class="toc-number">8.8.3.</span> <span class="toc-text">8.8.3 目录结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-8-4-文件内容"><span class="toc-number">8.8.4.</span> <span class="toc-text">8.8.4 文件内容</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-9-相关重要知识-纯函数和高阶函数"><span class="toc-number">8.9.</span> <span class="toc-text">8.9 相关重要知识: 纯函数和高阶函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-9-1-纯函数"><span class="toc-number">8.9.1.</span> <span class="toc-text">8.9.1 纯函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-9-2-高阶函数"><span class="toc-number">8.9.2.</span> <span class="toc-text">8.9.2 高阶函数</span></a></li></ol></li></ol></li></ol>
            </div>
        </div>
      </div>
    
  </div>

  <article>
    <h1 id="第1章-React入门"><a href="#第1章-React入门" class="headerlink" title="第1章 React入门"></a>第1章 React入门</h1><h2 id="1-1-React的基本认识"><a href="#1-1-React的基本认识" class="headerlink" title="1.1 React的基本认识"></a>1.1 React的基本认识</h2><h3 id="1-1-1-官网"><a href="#1-1-1-官网" class="headerlink" title="1.1.1 官网"></a>1.1.1 官网</h3><p>1)     英文官网:<a href="https://reactjs.org/" target="_blank" rel="noopener"> https://reactjs.org/</a></p>
<p>2)     中文官网: <a href="https://doc.react-china.org/" target="_blank" rel="noopener">https://doc.react-china.org/</a></p>
<h3 id="1-1-2-介绍描述"><a href="#1-1-2-介绍描述" class="headerlink" title="1.1.2 介绍描述"></a>1.1.2 介绍描述</h3><p>1)     用于构建用户界面的 JavaScript 库(只关注于View)</p>
<ul>
<li>JS库：<ul>
<li>jQuery——函数库(方法、函数包装DOM操作)</li>
<li>React 基本上不操作DOM——JS框架</li>
</ul>
</li>
<li>构建用户界面：把数据展现出来</li>
</ul>
<p>2)     由<strong>Facebook</strong>开源</p>
<h3 id="1-1-3-React的特点"><a href="#1-1-3-React的特点" class="headerlink" title="1.1.3 React的特点"></a>1.1.3 React的特点</h3><p>1)     Declarative(声明式编码)</p>
<p>（申请一块内存，只需要声明一个变量即可）不需要亲自操作DOM，只需要告诉它，我要更新，就会帮你更新，只需要更新数据，界面不需要手动更新（以前需要更新DOM）</p>
<p>2)     Component-Based(组件化编码)</p>
<p>简化特别复杂的功能，可以拆分为多个简单的部分（一个小的界面功能就是一个组件），维护也方便</p>
<p>3)     Learn Once, Write Anywhere(支持客户端与服务器渲染)</p>
<p>一次学习，随处编写：不仅能写web应用，还能写React Native打包为Android、IOS应用</p>
<p>4)     高效</p>
<p>5)     单向数据流</p>
<h3 id="1-1-4-React高效的原因-区域、次数——更新界面效率提高"><a href="#1-1-4-React高效的原因-区域、次数——更新界面效率提高" class="headerlink" title="1.1.4 React高效的原因(区域、次数——更新界面效率提高)"></a>1.1.4 React高效的原因(区域、次数——更新界面效率提高)</h3><p>1)     <strong>虚拟(virtual)DOM</strong>,，不总是直接操作DOM</p>
<ul>
<li>虚拟DOM：对象——与组件对应，修改映射到真实的DOM上(批量修改、界面重绘<strong>次数少</strong>)</li>
</ul>
<p>2)     <strong>DOM Diff算法</strong>,，最小化页面重绘</p>
<ul>
<li>界面中组件是否更新(更新<strong>区域小</strong>)</li>
</ul>
<h2 id="1-2-React的基本使用"><a href="#1-2-React的基本使用" class="headerlink" title="1.2 React的基本使用"></a>1.2 React的基本使用</h2><p>注意: 此时只是测试语法使用, 并不是真实项目开发使用</p>
<h3 id="1-2-1-效果"><a href="#1-2-1-效果" class="headerlink" title="1.2.1 效果"></a>1.2.1 效果</h3><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react1592556203130.png" alt="React基本使用" class="lazyload"></p>
<p>将h1标签利用react放到test中</p>
<h3 id="1-2-3-相关js库"><a href="#1-2-3-相关js库" class="headerlink" title="1.2.3 相关js库"></a>1.2.3 相关js库</h3><p>可以到bootcdn引用地址，访问链接<kbd>Ctrl</kbd>+<kbd>S</kbd>保存到本地</p>
<p>1)     <code>react.js</code>: React的核心库</p>
<ul>
<li>development.js：开发版，开发编写的时候使用</li>
<li>production.min.js：生产版，上线的时候使用，压缩过的</li>
</ul>
<p>2)     <code>react-dom.js</code>: 提供操作DOM的react扩展库</p>
<p>3)     <code>babel.min.js</code>: 解析JSX语法代码转为纯JS语法代码的库,这里不是ES6转ES5(jsx是js扩展语法)</p>
<h3 id="1-2-4-在页面中导入js"><a href="#1-2-4-在页面中导入js" class="headerlink" title="1.2.4 在页面中导入js"></a>1.2.4 在页面中导入js</h3><pre><code class="html">&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;</code></pre>
<h3 id="1-2-5-编码"><a href="#1-2-5-编码" class="headerlink" title="1.2.5 编码"></a>1.2.5 编码</h3><pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;title&gt;01_HelloWorld&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id=&quot;test&quot;&gt;&lt;/div&gt;

  &lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
  &lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
  &lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;
  &lt;script type=&quot;text/babel&quot;&gt;/*告诉babel.js解析里面的jsx的代码*/
    // 1. 创建虚拟DOM元素对象
    var vDom = &lt;h1&gt;Hello React!&lt;/h1&gt;   // jsx，不是字符串，不能加引号
    // 2. 将虚拟DOM渲染到页面真实DOM容器中
    ReactDOM.render(vDom, document.getElementById(&#39;test&#39;))  // react-dom.js提供的  render——渲染   将vDom加入到#test中
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<h3 id="1-2-6-使用React开发者工具调试"><a href="#1-2-6-使用React开发者工具调试" class="headerlink" title="1.2.6 使用React开发者工具调试"></a>1.2.6 使用React开发者工具调试</h3><p>​          <img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react2.gif" alt="React开发调试插件" class="lazyload">  </p>
<p>React Developer Tool.crx</p>
<h2 id="1-3-React-JSX"><a href="#1-3-React-JSX" class="headerlink" title="1.3 React JSX"></a>1.3 React JSX</h2><h3 id="1-3-1-效果"><a href="#1-3-1-效果" class="headerlink" title="1.3.1 效果"></a>1.3.1 效果</h3><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react1592556978982.png" alt="ReactJSX" class="lazyload"></p>
<p>两个#test分别加入相应内容</p>
<p>代码：</p>
<pre><code class="html">&lt;div id=&quot;test1&quot;&gt;&lt;/div&gt;
&lt;div id=&quot;test2&quot;&gt;&lt;/div&gt;

&lt;script src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;

&lt;script&gt; // 还没用到jsx语法，不需要babel
  const msg = &#39;I Like You!&#39;
  const myId = &#39;Atguigu&#39;

  // 1.创建虚拟DOM
  // var element = React.createElement(&#39;h1&#39;, {id:&#39;myTitle&#39;},&#39;hello&#39;)
  const vDom1 = React.createElement(&#39;h2&#39;, {id:myId.toLowerCase()},msg.toUpperCase())
  // 2.渲染虚拟DOM
  ReactDOM.render(vDom1, document.getElementById(&#39;test1&#39;))
&lt;/script&gt;

&lt;script type=&quot;text/babel&quot;&gt;
  // 1.创建虚拟DOM
  const vDom2 = &lt;h3 id={myId.toUpperCase()}&gt;{msg.toLowerCase()}&lt;/h3&gt;  // 变量用{}括起来
  // 2.渲染虚拟DOM
  ReactDOM.render(vDom2, document.getElementById(&#39;test2&#39;))
&lt;/script&gt;</code></pre>
<h3 id="1-3-2-虚拟DOM"><a href="#1-3-2-虚拟DOM" class="headerlink" title="1.3.2 虚拟DOM"></a>1.3.2 虚拟DOM</h3><p>1)     React提供了一些API来创建一种 <strong>特别</strong> 的一般js对象</p>
<p>a.     <code>var element = React.createElement(&#39;h1&#39;, {id:&#39;myTitle&#39;},&#39;hello&#39;)</code></p>
<p>b.     上面创建的就是一个简单的虚拟DOM对象，babel将会把jsx语法转为上述的形式</p>
<p>2)     虚拟DOM对象最终都会被React<strong>转换为</strong>真实的DOM（虚拟DOM中的对应真实DOM中的标签元素）</p>
<p>3)     我们编码时基本只需要操作react的虚拟DOM相关数据, react会转换为真实DOM变化而更新界面</p>
<p>补充知识：<code>debugger</code>可以在某条js代码处添加断点</p>
<p>虚拟DOM——轻对象，更新虚拟DOM页面不重绘</p>
<p>真实DOM——重对象，更新真实DOM页面会发生变化（页面重绘）</p>
<h3 id="1-3-3-JSX"><a href="#1-3-3-JSX" class="headerlink" title="1.3.3 JSX"></a>1.3.3 JSX</h3><p>1)     全称: JavaScript XML</p>
<p>2)     react定义的一种类似于XML的<strong>JS扩展语法</strong>: XML+JS</p>
<p>3)     作用: 用来创建react虚拟DOM(元素)对象</p>
<ul>
<li><p><code>var ele = &lt;h1&gt;Hello JSX!&lt;/h1&gt;</code></p>
</li>
<li><p>注意1: 它不是字符串, 也不是HTML/XML标签</p>
</li>
<li><p>注意2: 它最终产生的就是一个JS对象</p>
</li>
</ul>
<p>4)     <strong>标签名任意</strong>: HTML标签或其它标签</p>
<p>5)     标签属性任意: HTML标签属性或其它</p>
<p>6)     基本语法规则</p>
<ul>
<li><p><strong>遇到 &lt;开头</strong>的代码, 以<strong>标签</strong>的语法解析: html同名标签转换为html同名元素, 其它标签需要特别解析</p>
</li>
<li><p><strong>遇到以 { 开头</strong>的代码，以<strong>JS语法</strong>解析: 标签中的js代码必须用{ }包含</p>
</li>
</ul>
<p>7)     babel.js的作用</p>
<ul>
<li><p>浏览器不能直接解析JSX代码, 需要<strong>babel转译为纯JS的代码</strong>才能运行</p>
</li>
<li><p>只要用了JSX，都要加上<code>type=&quot;text/babel&quot;</code>, 声明需要babel来处理</p>
</li>
</ul>
<h3 id="1-3-4-渲染虚拟DOM-元素"><a href="#1-3-4-渲染虚拟DOM-元素" class="headerlink" title="1.3.4 渲染虚拟DOM(元素)"></a>1.3.4 渲染虚拟DOM(元素)</h3><p>1)     语法: <code>ReactDOM.render(virtualDOM, containerDOM)</code></p>
<p>2)     作用: 将虚拟DOM元素渲染到页面中的真实容器DOM中显示</p>
<p>3)     参数说明</p>
<ul>
<li><p>参数一: 纯js或jsx创建的虚拟dom对象</p>
</li>
<li><p>参数二: 用来包含虚拟DOM元素的真实dom元素对象(一般是一个div)</p>
</li>
</ul>
<h3 id="1-3-5-建虚拟DOM的2种方式"><a href="#1-3-5-建虚拟DOM的2种方式" class="headerlink" title="1.3.5 建虚拟DOM的2种方式"></a>1.3.5 建虚拟DOM的2种方式</h3><p>1)     纯JS(一般不用)</p>
<p><code>React.createElement(&#39;h1&#39;, {id:&#39;myTitle&#39;}, title)</code></p>
<p>2)     <strong>JSX</strong>:</p>
<p><code>&lt;h1 id=&#39;myTitle&#39;&gt;{title}&lt;/h1&gt;</code></p>
<h3 id="1-3-6-JSX练习"><a href="#1-3-6-JSX练习" class="headerlink" title="1.3.6 JSX练习"></a>1.3.6 JSX练习</h3><p>需求: 动态展示列表数据</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react1592558986188.png" alt="JSX" class="lazyload"></p>
<p>代码：</p>
<pre><code class="html">&lt;h2&gt;前端JS框架列表&lt;/h2&gt;
&lt;div id=&quot;example1&quot;&gt;&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;

&lt;script type=&quot;text/babel&quot;&gt;
  /*
    功能: 动态展示列表数据
    - 如何将一个数据的数组，转换为一个标签的数组
      使用数组的map()方法
  */
  // 数据：名称、类型，数组存放
  const names = [&#39;jQuery&#39;, &#39;zepto&#39;, &#39;angular&#39;, &#39;react&#39;, &#39;vue&#39;]
  // 1.创建虚拟DOM，有嵌套结构，最好用小括号括起来
  const ul = (
    &lt;ul&gt;
      {
        names.map((name, index) =&gt; &lt;li key={index}&gt;{name}&lt;/li&gt;)
      }
    &lt;/ul&gt;
  )
  // 2.渲染虚拟DOM
  ReactDOM.render(ul, document.getElementById(&#39;example1&#39;))
&lt;/script&gt;</code></pre>
<h2 id="1-4-模块与组件和模块化与组件化的理解"><a href="#1-4-模块与组件和模块化与组件化的理解" class="headerlink" title="1.4 模块与组件和模块化与组件化的理解"></a>1.4 模块与组件和模块化与组件化的理解</h2><h3 id="1-4-1-模块"><a href="#1-4-1-模块" class="headerlink" title="1.4.1 模块"></a>1.4.1 模块</h3><p>1)     理解: 向外<strong>提供特定功能的</strong>js程序, 一般就是一个<strong>js文件</strong></p>
<p>2)     为什么: js代码更多更复杂</p>
<p>3)     作用: 复用js, 简化js的编写, 提高js运行效率</p>
<p>有特定功能的js文件，内部有数据及对数据的操作</p>
<ul>
<li><p>数据：变量</p>
</li>
<li><p>操作：函数</p>
</li>
</ul>
<p>私有的函数向外暴露</p>
<ul>
<li>暴露一个函数：暴露函数本身</li>
<li>暴露多个函数：以对象形式暴露</li>
</ul>
<h3 id="1-4-2-组件"><a href="#1-4-2-组件" class="headerlink" title="1.4.2 组件"></a>1.4.2 组件</h3><p>1)     理解: 用来<strong>实现特定(局部)功能效果</strong>的<strong>代码</strong>集合(html/css/js)</p>
<p>2)     为什么: 一个界面的功能更复杂</p>
<p>3)     作用: 复用编码, 简化项目编码, 提高运行效率</p>
<h3 id="1-4-3-模块化"><a href="#1-4-3-模块化" class="headerlink" title="1.4.3 模块化"></a>1.4.3 模块化</h3><p>当应用的<strong>js都以模块来编写</strong>的, 这个应用就是一个模块化的应用</p>
<p>形容项目或编码</p>
<h3 id="1-4-4-组件化"><a href="#1-4-4-组件化" class="headerlink" title="1.4.4 组件化"></a>1.4.4 组件化</h3><p>当应用是以多组件的方式实现, 这个应用就是一个组件化的应用</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react1592560823655.png" alt="component" class="lazyload"></p>
<h1 id="第2章-React面向组件编程"><a href="#第2章-React面向组件编程" class="headerlink" title="第2章 React面向组件编程"></a>第2章 React面向组件编程</h1><p>面向对象——面向模块——面向组件</p>
<h2 id="2-1-基本理解和使用"><a href="#2-1-基本理解和使用" class="headerlink" title="2.1 基本理解和使用"></a>2.1 基本理解和使用</h2><h3 id="2-1-1-效果"><a href="#2-1-1-效果" class="headerlink" title="2.1.1 效果"></a>2.1.1 效果</h3><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react1592561100045.png" alt="组件" class="lazyload"></p>
<p>组件标签：可以随便取的标签，首字母大写，与HTML标签区分开</p>
<h3 id="2-1-2-自定义组件-Component"><a href="#2-1-2-自定义组件-Component" class="headerlink" title="2.1.2 自定义组件(Component) :"></a>2.1.2 自定义组件(Component) :</h3><p>1)     定义组件(2种方式)</p>
<p>  方式1: <strong>工厂函数组件(简单组件：没有状态的组件)</strong>——效率高，不需要创建对象</p>
<pre><code>function MyComponent(){
    return &lt;h2&gt;工厂函数组件(简单组件)&lt;/h2&gt;
}</code></pre><p>方式2: <strong>ES6类组件(复杂组件)</strong>——需要创建对象，有了状态只能使用这种方式</p>
<pre><code class="javascript">class MyComponent2 extends React.Component{
  render(){
    console.log(this)  // 组件类对象 MyComponent2{...}
    return &lt;h2&gt;ES6类组件(复杂组件)&lt;/h2&gt;
  }
}</code></pre>
<p>2)     渲染组件标签</p>
<pre><code class="JavaScript">ReactDOM.render(&lt;MyComponent  /&gt;, document.getElementById(&#39;example1&#39;))
ReactDOM.render(&lt;MyComponent2  /&gt;, document.getElementById(&#39;example2&#39;))</code></pre>
<h3 id="2-1-3-注意"><a href="#2-1-3-注意" class="headerlink" title="2.1.3 注意"></a>2.1.3 注意</h3><p>1)     组件名必须首字母大写</p>
<p>2)     虚拟DOM元素只能有一个根元素</p>
<p>3)     虚拟DOM元素必须有结束标签</p>
<h3 id="2-1-4-render-渲染组件标签的基本流程"><a href="#2-1-4-render-渲染组件标签的基本流程" class="headerlink" title="2.1.4 render()渲染组件标签的基本流程"></a>2.1.4 render()渲染组件标签的基本流程</h3><p>1)     React内部会创建组件实例对象</p>
<p>2)     得到包含的虚拟DOM并解析为真实DOM</p>
<p>3)     插入到指定的页面元素内部</p>
<h2 id="2-2-组件三大属性1-state"><a href="#2-2-组件三大属性1-state" class="headerlink" title="2.2 组件三大属性1: state"></a>2.2 组件三大属性1: state</h2><h3 id="2-2-1-效果"><a href="#2-2-1-效果" class="headerlink" title="2.2.1 效果"></a>2.2.1 效果</h3><p> <img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/Like%E7%BB%84%E4%BB%B6.gif" alt="state" class="lazyload"></p>
<h3 id="2-2-2-理解"><a href="#2-2-2-理解" class="headerlink" title="2.2.2 理解"></a>2.2.2 理解</h3><p>1)     state是组件对象最重要的属性, 值是对象(可以包含多个数据)</p>
<p>2)     组件被称为”状态机”, 通过更新组件的state来更新对应的页面显示(重新渲染组件)</p>
<h3 id="2-2-3-编码操作"><a href="#2-2-3-编码操作" class="headerlink" title="2.2.3 编码操作"></a>2.2.3 编码操作</h3><p>1)     初始化状态:</p>
<pre><code class="javascript">constructor (props) {
  super(props)
  this.state = {
   stateProp1 : value1,
   stateProp2 : value2
  }
}</code></pre>
<p>2)     读取某个状态值</p>
<pre><code class="javascript">this.state.statePropertyName</code></pre>
<p>3)     更新状态—-&gt;组件界面更新</p>
<pre><code class="javascript">this.setState({
  stateProp1 : value1,
  stateProp2 : value2
})</code></pre>
<h3 id="2-2-4-代码"><a href="#2-2-4-代码" class="headerlink" title="2.2.4 代码"></a>2.2.4 代码</h3><pre><code class="html">&lt;div id=&quot;example&quot;&gt;&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;

&lt;script type=&quot;text/babel&quot;&gt;
  /*
  需求: 自定义组件, 功能说明如下
    1. 显示h2标题, 初始文本为: 你喜欢我
    2. 点击标题更新为: 我喜欢你
  */
  // 1.定义组件
  class Like extends React.Component {
    constructor(props){
      super(props)
      // 初始化状态
      this.state = {
        isLikeMe: false
      }

      // 将新增方法中的this强制绑定为组件对象
      this.handleClick = this.handleClick.bind(this) // 也可以不在这里绑定
    }

    handleClick(){
      // console.log(this) // handleClick是新添加方法，内部this默认不是组件对象，而是undefined  render是重写组件类的方法 到上面或下面绑定this
      // 得到状态，并取反
      const isLikeMe = !this.state.isLikeMe
      // 更新状态
      this.setState({isLikeMe}) // isLikeMe: isLikeMe
    }
    render() {
      // 读取状态
      // const isLikeMe = this.state.isLikeMe
      const {isLikeMe} = this.state // 解构赋值
      return &lt;h2 onClick={this.handleClick}&gt;{isLikeMe?&#39;你喜欢我&#39;:&#39;我喜欢你&#39;}&lt;/h2&gt; // this——组件对象 // this.handleClick.bind(this) —— 在这里绑定也可以
    }
  }
  // 2.渲染组件标签
  ReactDOM.render(&lt;Like /&gt;, document.getElementById(&#39;example&#39;))
&lt;/script&gt;</code></pre>
<h2 id="2-3-组件三大属性2-props"><a href="#2-3-组件三大属性2-props" class="headerlink" title="2.3 组件三大属性2: props"></a>2.3 组件三大属性2: props</h2><h3 id="2-3-1-效果"><a href="#2-3-1-效果" class="headerlink" title="2.3.1 效果"></a>2.3.1 效果</h3><pre><code>需求: 自定义用来显示一个人员信息的组件
  1). 姓名必须指定
  2). 如果性别没有指定, 默认为男
  3). 如果年龄没有指定, 默认为18</code></pre><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react-4.png" alt="props" class="lazyload"></p>
<h3 id="2-3-2-理解"><a href="#2-3-2-理解" class="headerlink" title="2.3.2 理解"></a>2.3.2 理解</h3><p>1)     每个组件对象都会有props(properties的简写)属性</p>
<p>2)     组件标签的所有属性都保存在props中</p>
<h3 id="2-3-3-作用"><a href="#2-3-3-作用" class="headerlink" title="2.3.3 作用"></a>2.3.3 作用</h3><p>1)     通过标签属性从组件外向组件内传递变化的数据</p>
<p>2)     注意: 组件内部不要修改props数据</p>
<h3 id="2-3-4-编码操作"><a href="#2-3-4-编码操作" class="headerlink" title="2.3.4 编码操作"></a>2.3.4 编码操作</h3><p>1)     内部读取某个属性值</p>
<p><code>this.props.propertyName</code></p>
<p>2)     对props中的属性值进行类型限制和必要性限制</p>
<blockquote>
<p>注意：</p>
<p>自 React v15.5 起，<code>React.PropTypes</code> 已移入另一个包中。请使用 <a href="https://www.npmjs.com/package/prop-types" target="_blank" rel="noopener"><code>prop-types</code> 库</a> 代替。需要先引入该库。</p>
<p>我们提供了一个 <a href="https://react.docschina.org/blog/2017/04/07/react-v15.5.0.html#migrating-from-reactproptypes" target="_blank" rel="noopener">codemod 脚本</a>来做自动转换。</p>
</blockquote>
<pre><code class="javascript">Person.propTypes = {
    name: React.PropTypes.string.isRequired,
    age: React.PropTypes.number.isRequired
}</code></pre>
<p>3)     扩展属性: 将对象的所有属性通过props传递</p>
<p><code>&lt;Person {...person}/&gt;</code></p>
<p>4)     默认属性值</p>
<pre><code class="javascript">Person.defaultProps = {
    name: &#39;Mary&#39;
}</code></pre>
<p>5)     组件类的构造函数</p>
<pre><code class="javascript">constructor (props) {
    super(props)
    console.log(props) // 查看所有属性

}</code></pre>
<h3 id="2-3-5-代码"><a href="#2-3-5-代码" class="headerlink" title="2.3.5 代码"></a>2.3.5 代码</h3><pre><code class="html">&lt;div id=&quot;example1&quot;&gt;&lt;/div&gt;
&lt;div id=&quot;example2&quot;&gt;&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/prop-types.js&quot;&gt;&lt;/script&gt; &lt;!-- 验证类型和必要性 --&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;

&lt;script type=&quot;text/babel&quot;&gt;

  /*
需求: 自定义用来显示一个人员信息的组件, 效果如页面. 说明
  1). 如果性别没有指定, 默认为男
  2). 如果年龄没有指定, 默认为18
  */

  // 1、定义组件
  /*function Person(props){
    return (
      &lt;ul&gt;
        &lt;li&gt;姓名：{props.name}&lt;/li&gt;
        &lt;li&gt;性别：{props.sex}&lt;/li&gt;
        &lt;li&gt;年龄：{props.age}&lt;/li&gt;
      &lt;/ul&gt;
    )
  }*/
  class Person extends React.Component{
    render(){
      return (
        &lt;ul&gt;
          &lt;li&gt;姓名：{this.props.name}&lt;/li&gt;  // this——组件对象
          &lt;li&gt;性别：{this.props.sex}&lt;/li&gt;
          &lt;li&gt;年龄：{this.props.age}&lt;/li&gt;
        &lt;/ul&gt;
      )
    }
  }
  // 指定属性默认值
  Person.defaultProps = {
    sex: &#39;男&#39;,
    age: 18
  }
  // 指定属性值的类型和必要性
  Person.propTypes = {
    name: PropTypes.string.isRequired,
    age: PropTypes.number
  }

  // 2、渲染组件标签
  const p1 = {
    name: &#39;Tom&#39;,
    sex: &#39;女&#39;,
    age: 18
  }
  // ReactDOM.render(&lt;Person name={p1.name} sex={p1.sex} age={p1.age}/&gt;, document.getElementById(&#39;example1&#39;))
  ReactDOM.render(&lt;Person {...p1}/&gt;, document.getElementById(&#39;example1&#39;)) // ...作用：1.打包：function fn(...as){} fun(1,2,3) 2.解包：const arr1=[1,2,3] const arr2=[6,...arr1,9] 这里也是在解包
  const p2 = {
    name: &#39;JACK&#39;,
    age: 17
  }
  ReactDOM.render(&lt;Person name={p2.name} age={p2.age}/&gt;, document.getElementById(&#39;example2&#39;))
&lt;/script&gt;</code></pre>
<h3 id="2-3-6-面试题"><a href="#2-3-6-面试题" class="headerlink" title="2.3.6 面试题"></a>2.3.6 面试题</h3><p>问题: 请区别一下组件的props和state属性</p>
<p>1)     state: <strong>组件自身内部可变化的数据</strong></p>
<p><em>2)</em>    props: 从组件外部向组件内部<strong>传递数据</strong>，组件内部只读不修改</p>
<h2 id="2-4-组件三大属性3-refs与事件处理"><a href="#2-4-组件三大属性3-refs与事件处理" class="headerlink" title="2.4 组件三大属性3: refs与事件处理"></a>2.4 组件三大属性3: refs与事件处理</h2><h3 id="2-4-1-效果"><a href="#2-4-1-效果" class="headerlink" title="2.4.1 效果"></a>2.4.1 效果</h3><p>需求: 自定义组件, 功能说明如下:</p>
<ol start="2">
<li>点击按钮, 提示第一个输入框中的值</li>
<li>当第2个输入框失去焦点时, 提示这个输入框中的值</li>
</ol>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/props_event.gif" alt="props_event" class="lazyload"></p>
<h3 id="2-4-2-组件的3大属性之二-refs属性"><a href="#2-4-2-组件的3大属性之二-refs属性" class="headerlink" title="2.4.2 组件的3大属性之二: refs属性"></a>2.4.2 组件的3大属性之二: refs属性</h3><p>1)     组件内的标签都可以定义ref属性来标识自己</p>
<p>a.     &lt;input type=”text” ref={input =&gt; this.msgInput = input}/&gt;</p>
<p>b.     回调函数在组件初始化渲染完或卸载时自动调用</p>
<p>2)     在组件中可以通过this.msgInput来得到对应的真实DOM元素</p>
<p>3)     作用: 通过ref获取组件内容特定标签对象, 进行读取其相关数据</p>
<h3 id="2-4-3-事件处理"><a href="#2-4-3-事件处理" class="headerlink" title="2.4.3 事件处理"></a>2.4.3 事件处理</h3><p>1)     通过onXxx属性指定组件的事件处理函数(注意大小写)</p>
<p>a.     React使用的是自定义(合成)事件, 而不是使用的原生DOM事件</p>
<p>b.     React中的事件是通过事件委托方式处理的(委托给组件最外层的元素)</p>
<p>2)     通过event.target得到发生事件的DOM元素对象</p>
<pre><code>handleFocus(event) {
 event.target // 返回input对象
}</code></pre><h3 id="2-4-4-强烈注意"><a href="#2-4-4-强烈注意" class="headerlink" title="2.4.4 强烈注意"></a>2.4.4 强烈注意</h3><p>1)     组件内置的方法中的this为组件对象</p>
<p>2)     在组件类中自定义的方法中this为null</p>
<p>a.     强制绑定this: 通过函数对象的bind()</p>
<p>b.     箭头函数(ES6模块化编码时才能使用)</p>
<h3 id="2-4-5-代码"><a href="#2-4-5-代码" class="headerlink" title="2.4.5 代码"></a>2.4.5 代码</h3><pre><code class="html">&lt;div id=&quot;example&quot;&gt;&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;

&lt;script type=&quot;text/babel&quot;&gt;
  /*
  需求: 自定义组件, 功能说明如下:
    1. 界面如果页面所示
    2. 点击按钮, 提示第一个输入框中的值
    3. 当第2个输入框失去焦点时, 提示这个输入框中的值
 */
  // 1、定义组件 // React中必须要结束标签
  class MyComponent extends React.Component{

    constructor(props){
      super(props)
      this.showInput = this.showInput.bind(this)
      this.handleBlur = this.handleBlur.bind(this)
    }

    showInput(){
      const input = this.refs.content
      // alert(input.value)
      alert(this.input.value)
    }

    handleBlur(event){
      alert(event.target.value)
    }

    render(){
      return(
        &lt;div&gt;
          &lt;input type=&quot;text&quot; ref=&quot;content&quot;/&gt;&amp;nbsp;&amp;nbsp;
          &lt;input type=&quot;text&quot; ref={input =&gt; this.input = input}/&gt;&amp;nbsp;&amp;nbsp;
          &lt;button onClick={this.showInput}&gt;提示输入&lt;/button&gt;&amp;nbsp;&amp;nbsp;
          &lt;input type=&quot;text&quot; placeholder=&quot;失去焦点提示内容&quot; onBlur={this.handleBlur}/&gt;
        &lt;/div&gt;
      )
    }
  }

  // 2、渲染组件标签
  ReactDOM.render(&lt;MyComponent/&gt;, document.getElementById(&#39;example&#39;))
&lt;/script&gt;</code></pre>
<h3 id="2-4-6-区别"><a href="#2-4-6-区别" class="headerlink" title="2.4.6 区别"></a>2.4.6 区别</h3><ol>
<li>state</li>
<li>props</li>
<li>refs</li>
</ol>
<h2 id="2-5-组件的组合"><a href="#2-5-组件的组合" class="headerlink" title="2.5 组件的组合"></a>2.5 组件的组合</h2><h3 id="2-5-1-效果"><a href="#2-5-1-效果" class="headerlink" title="2.5.1 效果"></a>2.5.1 效果</h3><pre><code>功能: 组件化实现此功能
  1. 显示所有todo列表
  2. 输入文本, 点击按钮显示到列表的首位, 并清除输入的文本</code></pre><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/component%E7%BB%84%E5%90%88%E4%BD%BF%E7%94%A8.gif" alt="component组合使用" class="lazyload"></p>
<h3 id="2-5-2-功能界面的组件化编码流程-无比重要"><a href="#2-5-2-功能界面的组件化编码流程-无比重要" class="headerlink" title="2.5.2 功能界面的组件化编码流程(无比重要)"></a>2.5.2 功能界面的组件化编码流程(无比重要)</h3><p>1)     拆分组件: 拆分界面,抽取组件</p>
<p>2)     实现静态组件: 使用组件实现静态页面效果(只有静态界面，没有动态数据和交互)</p>
<p>3)     实现动态组件</p>
<ul>
<li><p>实现初始化数据动态显示</p>
</li>
<li><p>实现交互功能(从绑定事件监听开始)</p>
</li>
</ul>
<h3 id="2-5-3-代码"><a href="#2-5-3-代码" class="headerlink" title="2.5.3 代码"></a>2.5.3 代码</h3><pre><code class="html">&lt;div id=&quot;example&quot;&gt;&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/prop-types.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/babel&quot;&gt;
  // 静态组件——&gt;动态组件
  /*
  * -名称、类型：todos、数组，Add需要、List需要
  * -数据保存在哪个组件内？
  *   放到App
  *   看数据是某个组件需要(给这个)，还是某些组件需要(给共同的父组件)
  * -需要在子组件中改变父组件的状态
  *    子组件中不能直接改变父组件的状态
  *    状态在哪个组件，更新状态的行为就应该定义在哪个组件，由子组件来调用(通过组件属性传递)
  *    父组件定义函数，传递给子组件，子组件调用
  */
  class App extends React.Component{

    constructor(props){
      super(props)
      // 初始化状态
      this.state = {
        todos: [&#39;吃饭&#39;, &#39;睡觉&#39;, &#39;敲代码&#39;, &#39;打游戏&#39;]
      }

      this.addTodo = this.addTodo.bind(this)  // 没定义加上bind
    }

    addTodo(todo){
      // this.state.todos.unshift(todo) // 不能这样做
      const {todos} = this.state
      todos.unshift(todo)
      // 更新状态
      this.setState({todos})
    }

    render(){
      const {todos} = this.state
      return(
        &lt;div&gt;
          &lt;h1&gt;Simple TODO List&lt;/h1&gt;
          &lt;Add count={todos.length} addTodo={this.addTodo}/&gt;
          &lt;List todos={todos}/&gt;
        &lt;/div&gt;
      )
    //  &lt;List todos={this.state.todos}/&gt; 前面赋值了
    }
  }

  class Add extends React.Component{
    constructor(props){
      super(props)
      this.add = this.add.bind(this)
    }
    add(){
      // 1、读取输入的数据
      const todo = this.todoInput.value.trim()
      // 2、检查合法性
      if(!todo){
        return
      }
      // 3、添加
      this.props.addTodo(todo)
      // 4、清除输入
      this.todoInput.value = &#39;&#39;
    }
    render(){
      return(
        &lt;div&gt;
          &lt;input type=&quot;text&quot; ref={input =&gt; this.todoInput=input}/&gt;
          &lt;button onClick={this.add}&gt;add #{this.props.count+1}&lt;/button&gt;
        &lt;/div&gt;
      )
    }
  }
  Add.propTypes = {
    count: PropTypes.number.isRequired,
    addTodo: PropTypes.func.isRequired
  }

  class List extends React.Component{
    render(){
      return(
        &lt;ul&gt;
          {
            this.props.todos.map((todo, index) =&gt; &lt;li key={index}&gt;{todo}&lt;/li&gt;)
          }
        &lt;/ul&gt;
      )
      /*this.props.todos.map((todo, index) =&gt; {return &lt;li key={index}&gt;{todo}&lt;/li&gt;})*/
      /* 加了大括号需要加return */
    }
  }

  List.protoTypes = {
    todos: PropTypes.array.isRequired
  }


  ReactDOM.render(&lt;App /&gt;,document.getElementById(&#39;example&#39;))
&lt;/script&gt;</code></pre>
<h2 id="2-6-收集表单数据"><a href="#2-6-收集表单数据" class="headerlink" title="2.6 收集表单数据"></a>2.6 收集表单数据</h2><h3 id="2-6-1-效果"><a href="#2-6-1-效果" class="headerlink" title="2.6.1 效果"></a>2.6.1 效果</h3><pre><code>需求: 自定义包含表单的组件
  1. 输入用户名密码后, 点击登陆提示输入信息
  3. 不提交表单</code></pre><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/component%E8%A1%A8%E5%8D%95.gif" alt="component表单 (2)" class="lazyload"></p>
<h3 id="2-6-2-理解"><a href="#2-6-2-理解" class="headerlink" title="2.6.2 理解"></a>2.6.2 理解</h3><p>1)     问题: 在react应用中, 如何收集表单输入数据</p>
<p>2)     包含表单的组件分类</p>
<p>a.     受控组件: 表单项输入数据能自动收集成状态</p>
<p>b.     非受控组件: 需要时才手动读取表单输入框中的数据</p>
<h3 id="2-6-3-代码"><a href="#2-6-3-代码" class="headerlink" title="2.6.3 代码"></a>2.6.3 代码</h3><pre><code class="html">&lt;div id=&quot;example&quot;&gt;&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/babel&quot;&gt;
  /*
  需求: 自定义包含表单的组件
    1. 界面如下所示
    2. 输入用户名密码后, 点击登陆提示输入信息
    3. 不提交表单
  */
  class LoginForm extends React.Component{
    constructor(props){
      super(props)
      // 初始化状态
      this.state  = {
        pwd: &#39;&#39;
      }
      this.handleSubmit = this.handleSubmit.bind(this)
      this.handleChange = this.handleChange.bind(this)
    }

    handleSubmit(event){
      const name = this.nameInput.value // 非受控组件
      const {pwd} = this.state // 受控组件
      alert(`准备提交的用户名为${name}，密码为${pwd}`)
      // 阻止事件的默认行为
      event.preventDefault()
    }
    // 当事件和标签是同一个时，使用event更方便

    handleChange(event){
      // 读取输入的值
      const pwd = event.target.value
      // 更新pwd的状态
      this.setState({pwd})
    }

    render(){
      return(
        &lt;form action=&quot;/test&quot; onSubmit={this.handleSubmit}&gt;
          用户名：&lt;input type=&quot;text&quot; ref={input =&gt; this.nameInput = input}/&gt;
          密码：&lt;input type=&quot;password&quot; value={this.state.pwd} onChange={this.handleChange}/&gt;
          &lt;input type=&quot;submit&quot; value=&quot;登录&quot;/&gt;
        &lt;/form&gt;
      )
    }
    // 原生jsonChange事件是在失去焦点时触发，react中是输入则触发
  }

  ReactDOM.render(&lt;LoginForm /&gt;, document.getElementById(&#39;example&#39;))
&lt;/script&gt;</code></pre>
<h2 id="2-7-组件生命周期"><a href="#2-7-组件生命周期" class="headerlink" title="2.7 组件生命周期"></a>2.7 组件生命周期</h2><h3 id="2-7-1-效果"><a href="#2-7-1-效果" class="headerlink" title="2.7.1 效果"></a>2.7.1 效果</h3><pre><code>需求: 自定义组件
  1. 让指定的文本做显示/隐藏的渐变动画
  2. 切换持续时间为2S
  3. 点击按钮从界面中移除组件界面</code></pre><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/component%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.gif" alt="component生命周期" class="lazyload"></p>
<h3 id="2-7-2-理解"><a href="#2-7-2-理解" class="headerlink" title="2.7.2 理解"></a>2.7.2 理解</h3><p>1)     组件对象从创建到死亡它会经历特定的生命周期阶段</p>
<p>2)     React组件对象包含一系列的勾子函数(生命周期回调函数), 在生命周期特定时刻回调</p>
<p>3)     我们在定义组件时, 可以重写特定的生命周期回调函数, 做特定的工作</p>
<h3 id="2-7-3-生命周期流程图"><a href="#2-7-3-生命周期流程图" class="headerlink" title="2.7.3 生命周期流程图"></a>2.7.3 生命周期流程图</h3><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/reactlife.png" alt="生命周期流程图" class="lazyload"></p>
<p>Mount：挂载，将虚拟标签放到容器(页面)中</p>
<p>render()渲染</p>
<p>左边初始化过程，这些方法称为声明周期回调函数，或称为生命周期的勾子，这些方法在特定的时刻调用</p>
<p>(回调函数：你定义的，你没有调用，但是最终执行了；声明式编程,流程设定好,、命令式编程jQuery,每一步自己操作)</p>
<p>will将、did完成</p>
<h3 id="2-7-4-生命周期详述"><a href="#2-7-4-生命周期详述" class="headerlink" title="2.7.4 生命周期详述"></a>2.7.4 生命周期详述</h3><p>1)     组件的三个生命周期状态:</p>
<ul>
<li><p>Mount：插入真实 DOM</p>
</li>
<li><p>Update：被重新渲染</p>
</li>
<li><p>Unmount：被移出真实 DOM</p>
</li>
</ul>
<p>2)     React 为每个状态都提供了勾子(hook)函数，可重写</p>
<ul>
<li><p><code>componentWillMount()</code></p>
</li>
<li><p><code>componentDidMount()</code></p>
</li>
<li><p><code>componentWillUpdate()</code></p>
</li>
<li><p><code>componentDidUpdate()</code></p>
</li>
<li><p><code>componentWillUnmount()</code></p>
</li>
</ul>
<p>3)    生命周期流程:</p>
<p>a.     第一次初始化渲染显示: ReactDOM.render()</p>
<ul>
<li><p>constructor(): 创建对象初始化state</p>
</li>
<li><p>componentWillMount() : 将要插入回调</p>
</li>
<li><p>render() : 用于插入虚拟DOM回调</p>
</li>
<li><p>componentDidMount() : 已经插入回调</p>
</li>
</ul>
<p>b.     每次更新state: this.setSate()</p>
<ul>
<li><p>componentWillUpdate() : 将要更新回调</p>
</li>
<li><p>render() : 更新(重新渲染)</p>
</li>
<li><p>componentDidUpdate() : 已经更新回调</p>
</li>
</ul>
<p>c.     移除组件: ReactDOM.unmountComponentAtNode(containerDom)</p>
<ul>
<li>componentWillUnmount() : 组件将要被移除回调</li>
</ul>
<p>三个阶段，可以都打印一下，看下方法执行的过程(与写的顺序无关)</p>
<h3 id="2-7-5-重要的勾子"><a href="#2-7-5-重要的勾子" class="headerlink" title="2.7.5 重要的勾子"></a>2.7.5 重要的勾子</h3><p>1)     render(): 初始化渲染或更新渲染调用</p>
<p>2)     componentDidMount(): 开启监听, 发送ajax请求</p>
<p>3)     componentWillUnmount(): 做一些收尾工作, 如: 清理定时器</p>
<p>4)     componentWillReceiveProps(): 后面需要时讲</p>
<h3 id="2-7-6-代码"><a href="#2-7-6-代码" class="headerlink" title="2.7.6 代码"></a>2.7.6 代码</h3><pre><code class="html">&lt;div id=&quot;example&quot;&gt;&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/babel&quot;&gt;
  /*
  需求: 自定义组件
    1. 让指定的文本做显示/隐藏的动画
    2. 切换时间为2S
    3. 点击按钮从界面中移除组件界面
   */
  class Life extends React.Component{

    constructor(props){
      super(props)
      // 初始化状态
      this.state = {
        opacity: 1
      }

      this.distroyComponent = this.distroyComponent.bind(this)
    }

    distroyComponent(){
      ReactDOM.unmountComponentAtNode(document.getElementById(&#39;example&#39;))
    }

    // 重写方法
    componentDidMount(){
      // 启动循环定时器
      this.intervalId = setInterval(function () { // 两个函数需要同一个变量，放到上一层共同组件上
        console.log(&#39;定时器执行……&#39;)
        let {opacity} = this.state
        opacity -= 0.1
        if(opacity&lt;=0){
          opacity = 1
        }
        // 更新状态
        this.setState({opacity})
      }.bind(this), 200) // componentDidMount的this
    }
    componentWillUnmount(){
      // 清理定时器
      clearInterval(this.intervalId)
    }

    render(){ // 一旦改变，就会重新调用;永远写在其他下方，构造器在最上方
      const {opacity} = this.state
      return(
        &lt;div&gt;
          &lt;h2 style={{opacity: opacity}}&gt;{this.props.msg}&lt;/h2&gt;
          &lt;button onClick={this.distroyComponent}&gt;不活了&lt;/button&gt;
        &lt;/div&gt;
      )
    }// style中两个大括号，外面的代表写的是js代码，里面的是对象（样式名：值，也可以写ES6）
  }

  ReactDOM.render(&lt;Life msg=&quot;react太难了&quot;/&gt;, document.getElementById(&#39;example&#39;))
&lt;/script&gt;</code></pre>
<h2 id="2-8-虚拟DOM与DOM-Diff算法"><a href="#2-8-虚拟DOM与DOM-Diff算法" class="headerlink" title="2.8 虚拟DOM与DOM Diff算法"></a>2.8 虚拟DOM与DOM Diff算法</h2><p>虚拟DOM：减少操作真实DOM的次数，更新界面次数变少</p>
<p>DOM Diff算法：计算哪里需要更新，哪里不需要更新，减少更新界面的区域</p>
<p>共同提高更新界面的效率</p>
<h3 id="2-8-1-效果"><a href="#2-8-1-效果" class="headerlink" title="2.8.1 效果"></a>2.8.1 效果</h3><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/vDOM.gif" alt="component虚拟DOM" class="lazyload"></p>
<pre><code class="html">&lt;div id=&quot;example&quot;&gt;&lt;/div&gt;
&lt;br&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/babel&quot;&gt;
  /*
  验证:
  虚拟DOM+DOM Diff算法: 最小化页面重绘
  */

  class HelloWorld extends React.Component {
    constructor(props) {
      super(props)
      this.state = {
          date: new Date()
      }
    }

    componentDidMount () {
      setInterval(() =&gt; {
        this.setState({
            date: new Date()
        })
      }, 1000)
    }

    render () {
      console.log(&#39;render()&#39;)
      return (
        &lt;p&gt;
          Hello, &lt;input type=&quot;text&quot; placeholder=&quot;Your name here&quot;/&gt;!&amp;nbsp;
          &lt;span&gt;It is {this.state.date.toTimeString()}&lt;/span&gt;
        &lt;/p&gt;
      )
    }
  }

  ReactDOM.render(
    &lt;HelloWorld/&gt;,
    document.getElementById(&#39;example&#39;)
  )
&lt;/script&gt;</code></pre>
<p> 只有时间更新，其他不更新</p>
<h3 id="2-8-2-基本原理图"><a href="#2-8-2-基本原理图" class="headerlink" title="2.8.2 基本原理图"></a>2.8.2 基本原理图</h3><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react-5.png" alt="基本原理" class="lazyload"></p>
<ul>
<li><p>初始化：虚拟DOM树(div&gt;p&gt;span……)，更新虚拟DOM界面不会变——&gt;更新真实DOM界面才会变化(更新状态)</p>
</li>
<li><p>更新(关键)：调用setState()更新状态(会进行对比)——&gt;根据差异更新真实DOM、重绘页面变化的区域</p>
</li>
</ul>
<h1 id="第3章-react应用-基于react脚手架"><a href="#第3章-react应用-基于react脚手架" class="headerlink" title="第3章 react应用(基于react脚手架)"></a>第3章 react应用(基于react脚手架)</h1><h2 id="3-1-使用create-react-app创建react应用"><a href="#3-1-使用create-react-app创建react应用" class="headerlink" title="3.1 使用create-react-app创建react应用"></a>3.1 使用create-react-app创建react应用</h2><h3 id="3-1-1-react脚手架"><a href="#3-1-1-react脚手架" class="headerlink" title="3.1.1 react脚手架"></a>3.1.1 react脚手架</h3><p>1)     xxx脚手架: 用来帮助程序员快速创建一个基于xxx库的模板项目</p>
<ul>
<li><p>包含了所有需要的配置</p>
</li>
<li><p>指定好了所有的依赖</p>
</li>
<li><p>可以直接安装/编译/运行一个简单效果</p>
</li>
</ul>
<p>2)     react提供了一个用于创建react项目的脚手架库: create-react-app</p>
<p>3)     项目的整体技术架构为: react + webpack + es6 + eslint</p>
<p>4)     使用脚手架开发的项目的特点: 模块化、组件化、工程化</p>
<h3 id="3-1-2-创建项目并启动"><a href="#3-1-2-创建项目并启动" class="headerlink" title="3.1.2 创建项目并启动"></a>3.1.2 创建项目并启动</h3><p><code>npm install -g create-react-app</code> 全局下载</p>
<p><code>create-react-app hello-react</code></p>
<p><code>cd hello-react</code></p>
<p><code>npm start</code></p>
<p>浏览器访问<a href="http://localhost:3000" target="_blank" rel="noopener">http://localhost:3000</a></p>
<p>注：</p>
<p><code>npm root -g</code> 查看全局下载目录<br>C:\Users\Shinelon\AppData\Roaming\npm\node_modules</p>
<h3 id="3-1-3-react脚手架项目结构"><a href="#3-1-3-react脚手架项目结构" class="headerlink" title="3.1.3 react脚手架项目结构"></a>3.1.3 react脚手架项目结构</h3><pre><code>ReactNews

 |--node_modules---第三方依赖模块文件夹

 |--public

   |-- index.html-----------------主页面

 |--scripts

   |-- build.js-------------------build打包引用配置

   |-- start.js-------------------start运行引用配置

 |--src------------源码文件夹

   |--components-----------------react组件

      |-- app.jsx

   |--index.css

   |--index.js-------------------应用入口js(main.js)

 |--.gitignore------git版本管制忽略的配置

 |--package.json----应用包配置文件 

 |--README.md-------应用描述说明的readme文件</code></pre><p> <code>package.json</code></p>
<ul>
<li><code>&quot;dependencies&quot;</code>：运行时依赖</li>
<li><code>&quot;devDependencies&quot;</code>：开发时依赖，编译打包时需要，开发时不需要，编译打包时工具包</li>
</ul>
<p><code>public/index.html</code>主界面</p>
<ul>
<li>只有一个<code>&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</code>，依靠组件</li>
</ul>
<p><code>src/index.js</code>应用入口</p>
<ul>
<li>引入包(<code>import * from &quot;*&quot;</code>)、CSS(<code>import &quot;*.css&quot;</code>)</li>
<li>渲染组件</li>
</ul>
<p><code>README.md</code>对项目的说明文件</p>
<p>SPA(Single Page Application)：单应用</p>
<ul>
<li>index.html</li>
</ul>
<pre><code class="html">&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</code></pre>
<ul>
<li><code>src/components/app.jsx</code></li>
</ul>
<pre><code class="jsx">import React, {Component} from &#39;react&#39;
import logo from &#39;../logo.svg&#39;

export default class App extends Component {
  render() {
    return(
      &lt;div&gt;
        &lt;img className=&#39;logo&#39; src={logo} alt=&quot;logo&quot;/&gt;
        &lt;p className=&quot;title&quot;&gt;react组件&lt;/p&gt;
      &lt;/div&gt;
    )
  }
}</code></pre>
<ul>
<li><code>src/index.js</code></li>
</ul>
<pre><code class="javascript">import React from &#39;react&#39;
import ReactDOM from &#39;react-dom&#39;
import App from &#39;./components/app&#39;

import &#39;./index.css&#39;

ReactDOM.render(&lt;App /&gt;, document.getElementById(&#39;root&#39;))</code></pre>
<ul>
<li><code>src/index.css</code></li>
</ul>
<pre><code class="css">.logo{
  width: 200px;
  height: 200px;
}
.title{
  color: red;
  font-size: 25px;
}</code></pre>
<p><code>cd react_app</code><br><code>npm start</code>或<code>npm run start</code></p>
<h2 id="3-2-demo-评论管理"><a href="#3-2-demo-评论管理" class="headerlink" title="3.2 demo: 评论管理"></a>3.2 demo: 评论管理</h2><h3 id="3-2-1-效果"><a href="#3-2-1-效果" class="headerlink" title="3.2.1 效果"></a>3.2.1 效果</h3><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/demo_comment.gif" alt="demo_comment" class="lazyload"></p>
<h3 id="3-2-2-拆分组件"><a href="#3-2-2-拆分组件" class="headerlink" title="3.2.2 拆分组件"></a>3.2.2 拆分组件</h3><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200708170522553.png" alt="image-20200708170522553" class="lazyload"></p>
<p>应用组件: App</p>
<ul>
<li>state: comments/array</li>
</ul>
<p>添加评论组件: CommentAdd</p>
<ul>
<li><p>state: username/string, content/string</p>
</li>
<li><p>props: add/func</p>
</li>
</ul>
<p>评论列表组件: CommentList</p>
<ul>
<li>props: comment/object, delete/func, index/number</li>
</ul>
<p>评论项组件: CommentItem</p>
<ul>
<li>props: comments/array, delete/func</li>
</ul>
<h3 id="3-2-3-实现静态组件"><a href="#3-2-3-实现静态组件" class="headerlink" title="3.2.3 实现静态组件"></a>3.2.3 实现静态组件</h3><p>render(){return}中的内容</p>
<ul>
<li><code>src/index.js</code></li>
</ul>
<pre><code class="javascript">import React from &#39;react&#39;
import ReactDOM from &#39;react-dom&#39;
import App from &#39;./components/app/app&#39;

ReactDOM.render(&lt;App/&gt;, document.getElementById(&#39;root&#39;))</code></pre>
<ul>
<li><code>src/components/app/app.jsx</code></li>
</ul>
<pre><code class="jsx">import React from &#39;react&#39;
import CommentAdd from &#39;../comment-add/comment-add&#39;
import CommentList from &#39;../comment-list/comment-list&#39;

export default class App extends React.Component {

  constructor (props) {
    super(props)

    this.state = {
      comments: []
    }

    this.delete = this.delete.bind(this)
  }

  componentDidMount () {
    //模拟异步获取数据
    setTimeout(() =&gt; {
      const comments = [
        {
          username: &quot;Tom&quot;,
          content: &quot;ReactJS好难啊!&quot;,
          id: Date.now()
        },
        {
          username: &quot;JACK&quot;,
          content: &quot;ReactJS还不错!&quot;,
          id: Date.now() + 1
        }
      ]
      this.setState({
        comments
      })
    }, 1000)
  }

  add = (comment) =&gt; {
    let comments = this.state.comments
    comments.unshift(comment)
    this.setState({ comments })
  }

  delete (index) {
    let comments = this.state.comments
    comments.splice(index, 1)
    this.setState({ comments })
  }

  render () {
    return (
      &lt;div&gt;
        &lt;header className=&quot;site-header jumbotron&quot;&gt;
          &lt;div className=&quot;container&quot;&gt;
            &lt;div className=&quot;row&quot;&gt;
              &lt;div className=&quot;col-xs-12&quot;&gt;
                &lt;h1&gt;请发表对React的评论&lt;/h1&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/header&gt;
        &lt;div className=&quot;container&quot;&gt;
          &lt;CommentAdd add={this.add}/&gt;
          &lt;CommentList comments={this.state.comments} delete={this.delete}/&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    )
  }
}

// export default App 可以写到上面</code></pre>
<ul>
<li><code>src/components/comment-add/comment-add.jsx</code></li>
</ul>
<pre><code class="jsx">import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;

class CommentAdd extends React.Component {
  constructor (props) {
    super(props)
    this.state = {
      username: &#39;&#39;,
      content: &#39;&#39;
    }
    this.addComment = this.addComment.bind(this)
    this.changeUsername = this.changeUsername.bind(this)
    this.changeContent = this.changeContent.bind(this)
  }

  addComment () {
    // 根据输入的数据创建评论对象
    let { username, content } = this.state
    let comment = { username, content }
    // 添加到comments中, 更新state
    this.props.add(comment)
    // 清除输入的数据
    this.setState({
      username: &#39;&#39;,
      content: &#39;&#39;
    })
  }

  changeUsername (event) {
    this.setState({
      username: event.target.value
    })
  }

  changeContent (event) {
    this.setState({
      content: event.target.value
    })
  }

  render () {
    return (
      &lt;div className=&quot;col-md-4&quot;&gt;
        &lt;form className=&quot;form-horizontal&quot;&gt;
          &lt;div className=&quot;form-group&quot;&gt;
            &lt;label&gt;用户名&lt;/label&gt;
            &lt;input type=&quot;text&quot; className=&quot;form-control&quot; placeholder=&quot;用户名&quot;
                   value={this.state.username} onChange={this.changeUsername}/&gt;
          &lt;/div&gt;
          &lt;div className=&quot;form-group&quot;&gt;
            &lt;label&gt;评论内容&lt;/label&gt;
            &lt;textarea className=&quot;form-control&quot; rows=&quot;6&quot; placeholder=&quot;评论内容&quot;
                      value={this.state.content} onChange={this.changeContent}&gt;&lt;/textarea&gt;
          &lt;/div&gt;
          &lt;div className=&quot;form-group&quot;&gt;
            &lt;div className=&quot;col-sm-offset-2 col-sm-10&quot;&gt;
              &lt;button type=&quot;button&quot; className=&quot;btn btn-default pull-right&quot; onClick={this.addComment}&gt;提交&lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/form&gt;
      &lt;/div&gt;
    )
  }
}
CommentAdd.propTypes = {
  add: PropTypes.func.isRequired
}

export default CommentAdd</code></pre>
<ul>
<li><code>src/components/comment-list/comment-list.css</code></li>
</ul>
<pre><code class="css">.reply {
  margin-top: 0px;
}</code></pre>
<ul>
<li><code>src/components/comment-list/comment-list.jsx</code></li>
</ul>
<pre><code class="jsx">import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;
import CommentItem from &#39;../comment-item/comment-item&#39;
import &#39;./commentList.css&#39;
class CommentList extends React.Component {
  constructor (props) {
    super(props)
  }
  render () {
    let comments = this.props.comments
    let display = comments.length &gt; 0 ? &#39;none&#39; : &#39;block&#39;</code></pre>
<p>下面h2中由于用了双大括号，一直报错，因此请直接到github看源码</p>
<pre><code class="jsx">    return (
      &lt;div className=&quot;col-md-8&quot;&gt;
        &lt;h3 className=&quot;reply&quot;&gt;评论回复：&lt;/h3&gt;
        &lt;h2 style=双大括号 display: display 双大括号&gt;暂无评论，点击左侧添加评论&lt;/h2&gt;
        &lt;ul className=&quot;list-group&quot;&gt;
          {
            comments.map((comment, index) =&gt; {
              console.log(comment)
              return &lt;CommentItem comment={comment} key={index} index={index} delete={this.props.delete}/&gt;
            })
          }
        &lt;/ul&gt;
      &lt;/div&gt;
    )
    }
}
CommentList.propTypes = {
  comments: PropTypes.array.isRequired,
  delete: PropTypes.func.isRequired
}
export default CommentList</code></pre>
<ul>
<li><code>src/components/comment-item/comment-item.css</code></li>
</ul>
<pre><code class="css">li {
  transition: .5s;
  overflow: hidden;
}

.handle {
  width: 40px;
  border: 1px solid #ccc;
  background: #fff;
  position: absolute;
  right: 10px;
  top: 1px;
  text-align: center;
}

.handle a {
  display: block;
  text-decoration: none;
}

.list-group-item .centence {
  padding: 0px 50px;
}

.user {
  font-size: 22px;
}</code></pre>
<ul>
<li><code>src/components/comment-item/comment-item.jsx</code></li>
</ul>
<pre><code class="jsx">import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;
import &#39;./commentItem.css&#39;

class CommentItem extends React.Component {
  constructor (props) {
    super(props)
    this.deleteComment = this.deleteComment.bind(this)
  }

  deleteComment () {
    let username = this.props.comment.username
    if (window.confirm(`确定删除${username}的评论吗?`)) {
      this.props.delete(this.props.index)
    }
  }

  render () {
    let comment = this.props.comment
    return (
      &lt;li className=&quot;list-group-item&quot;&gt;
        &lt;div className=&quot;handle&quot;&gt;
          &lt;a href=&quot;javascript:&quot; onClick={this.deleteComment}&gt;删除&lt;/a&gt;
        &lt;/div&gt;
        &lt;p className=&quot;user&quot;&gt;&lt;span &gt;{comment.username}&lt;/span&gt;&lt;span&gt;说:&lt;/span&gt;&lt;/p&gt;
        &lt;p className=&quot;centence&quot;&gt;{comment.content}&lt;/p&gt;
      &lt;/li&gt;
    )
  }
}
CommentItem.propTypes = {
  comment: PropTypes.object.isRequired,
  index: PropTypes.number.isRequired,
  delete: PropTypes.func.isRequired
}

export default CommentItem</code></pre>
<h3 id="3-2-4-实现动态组件"><a href="#3-2-4-实现动态组件" class="headerlink" title="3.2.4 实现动态组件"></a>3.2.4 实现动态组件</h3><p>动态展示初始化数据</p>
<ul>
<li><p>初始化状态数据</p>
</li>
<li><p>传递属性数据</p>
</li>
</ul>
<p>响应用户操作, 更新组件界面</p>
<ul>
<li><p>绑定事件监听, 并处理</p>
</li>
<li><p>更新state</p>
</li>
</ul>
<h1 id="第4章-react-ajax"><a href="#第4章-react-ajax" class="headerlink" title="第4章 react ajax"></a>第4章 react ajax</h1><h2 id="4-1-理解"><a href="#4-1-理解" class="headerlink" title="4.1 理解"></a>4.1 理解</h2><h3 id="4-1-1-前置说明"><a href="#4-1-1-前置说明" class="headerlink" title="4.1.1 前置说明"></a>4.1.1 前置说明</h3><p>1)     React本身只关注于界面, 并不包含发送ajax请求的代码</p>
<p>2)     前端应用需要通过ajax请求与后台进行交互(json数据)</p>
<p>3)     react应用中需要集成第三方ajax库(或自己封装)</p>
<h3 id="4-1-2-常用的ajax请求库"><a href="#4-1-2-常用的ajax请求库" class="headerlink" title="4.1.2 常用的ajax请求库"></a>4.1.2 常用的ajax请求库</h3><p>1)     jQuery: 比较重, 如果需要另外引入不建议使用</p>
<p>2)     <strong>axios</strong>: 轻量级, 建议使用</p>
<p>​    a.     封装XmlHttpRequest对象的ajax</p>
<p>​    b.     promise风格</p>
<p>​    c.     可以用在浏览器端和node服务器端</p>
<p>3)     fetch: 原生函数, 但老版本浏览器不支持</p>
<p>​    a.     不再使用XmlHttpRequest对象提交ajax请求</p>
<p>​    b.     为了兼容低版本的浏览器, 可以引入兼容库fetch.js</p>
<h3 id="4-1-3-效果"><a href="#4-1-3-效果" class="headerlink" title="4.1.3 效果"></a>4.1.3 效果</h3><pre><code>需求:
  1. 界面效果如下
  2. 根据指定的关键字在github上搜索匹配的最受关注的库
  3. 显示库名, 点击链接查看库
4. 测试接口: https://api.github.com/search/repositories?q=r&amp;sort=stars
</code></pre><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/ajax.gif" alt="ajax" class="lazyload"></p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;title&gt;11_ajax&lt;/title&gt;
  &lt;style&gt;
    h2{
      text-align: center;
      margin-top: 200px;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id=&quot;example&quot;&gt;&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;https://cdn.bootcdn.net/ajax/libs/axios/0.19.2/axios.js&quot;&gt;&lt;/script&gt;

&lt;script type=&quot;text/babel&quot;&gt;
  /*
  需求:
    1. 界面效果如下
    2. 根据指定的关键字在github上搜索匹配的最受关注的库
    3. 显示库名, 点击链接查看库
    4. 测试接口: https://api.github.com/search/repositories?q=r&amp;sort=stars
  */
  class MostStarRepo extends React.Component{
    state = {
      repoName: &#39;&#39;,
      repoUrl: &#39;&#39;
    }

    componentDidMount(){
      // 使用axios发送异步的ajax请求
      const url = `https://api.github.com/search/repositories?q=re&amp;sort=stars`
      axios.get(url)
          .then(response =&gt; {
            const result = response.data
            // console.log(response)
            // 得到数据
            const {name, html_url} = result.items[0]
            // 更新状态
            this.setState({repoName:name, repoUrl: html_url})
          })
          .catch((error) =&gt; {
            alert(error.message)
          })
      // 使用fetch发送异步的ajax请求
      /*fetch(url)
          .then(response =&gt; {
            return response.json()
          })
          .then(data =&gt; {
            // 得到数据
            const {name, html_url} = data.items[0]
            // 更新状态
            this.setState({repoName:name, repoUrl: html_url})
          })
      */
    }

    render(){
      const {repoName, repoUrl} = this.state
      if(!repoName){
        return(
          &lt;h2&gt;LOADING...&lt;/h2&gt;
        )
      }else{
        return(
          &lt;h2&gt;Most star repo is &lt;a href={repoUrl}&gt;{repoName}&lt;/a&gt;&lt;/h2&gt;
        )
      }

    }
  }
  ReactDOM.render(&lt;MostStarRepo /&gt;, document.getElementById(&#39;example&#39;))
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<h2 id="4-2-axios"><a href="#4-2-axios" class="headerlink" title="4.2 axios"></a>4.2 axios</h2><h3 id="4-2-1-文档"><a href="#4-2-1-文档" class="headerlink" title="4.2.1 文档"></a>4.2.1 文档</h3><p><a href="https://github.com/axios/axios" target="_blank" rel="noopener">https://github.com/axios/axios</a></p>
<h3 id="4-2-2-相关API"><a href="#4-2-2-相关API" class="headerlink" title="4.2.2 相关API"></a>4.2.2 相关API</h3><p>1)     GET请求</p>
<pre><code class="javascript">axios.get(&#39;/user?ID=12345&#39;)
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  });

axios.get(&#39;/user&#39;, {
    params: {
      ID: 12345
    }
  })
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  });
</code></pre>
<p>2)     POST请求</p>
<pre><code class="javascript">axios.post(&#39;/user&#39;, {
    firstName: &#39;Fred&#39;,
axios.post(&#39;/user&#39;, {
    firstName: &#39;Fred&#39;,
    lastName: &#39;Flintstone&#39;
})
.then(function (response) {
  console.log(response);
})
.catch(function (error) {
  console.log(error);
});
</code></pre>
<h2 id="4-3-Fetch"><a href="#4-3-Fetch" class="headerlink" title="4.3 Fetch"></a>4.3 Fetch</h2><h3 id="4-3-1-文档"><a href="#4-3-1-文档" class="headerlink" title="4.3.1 文档"></a>4.3.1 文档</h3><p>1)     <a href="https://github.github.io/fetch/" target="_blank" rel="noopener">https://github.github.io/fetch/</a></p>
<p>2)     <a href="https://segmentfault.com/a/1190000003810652" target="_blank" rel="noopener">https://segmentfault.com/a/1190000003810652</a></p>
<h3 id="4-3-2-相关API"><a href="#4-3-2-相关API" class="headerlink" title="4.3.2 相关API"></a>4.3.2 相关API</h3><p>1)     GET请求</p>
<pre><code class="javascript">fetch(url).then(function(response) {
  return response.json()
}).then(function(data) {
  console.log(data)
}).catch(function(e) {
  console.log(e)
});
</code></pre>
<p>2)     POST请求</p>
<pre><code class="javascript">fetch(url, {
  method: &quot;POST&quot;,
  body: JSON.stringify(data),
}).then(function(data) {
  console.log(data)
}).catch(function(e) {
  console.log(e)
})</code></pre>
<h2 id="4-4-demo-github-users"><a href="#4-4-demo-github-users" class="headerlink" title="4.4 demo: github users"></a>4.4 demo: github users</h2><h3 id="4-4-1-效果"><a href="#4-4-1-效果" class="headerlink" title="4.4.1 效果"></a>4.4.1 效果</h3><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/demo_users.gif" alt="demo_users" class="lazyload"></p>
<h3 id="4-4-2-拆分组件"><a href="#4-4-2-拆分组件" class="headerlink" title="4.4.2 拆分组件"></a>4.4.2 拆分组件</h3><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200711091558440.png" alt="image-20200711091558440" class="lazyload"></p>
<p>App</p>
<p>​       * state: searchName/string</p>
<p>  Search</p>
<p>​      * props: setSearchName/func</p>
<p>  List</p>
<p>​      * props: searchName/string</p>
<p>​      * state: firstView/bool, loading/bool, users/array, errMsg/string</p>
<h3 id="4-4-3-编写静态组件"><a href="#4-4-3-编写静态组件" class="headerlink" title="4.4.3 编写静态组件"></a>4.4.3 编写静态组件</h3><h3 id="4-4-4-编写动态组件"><a href="#4-4-4-编写动态组件" class="headerlink" title="4.4.4 编写动态组件"></a>4.4.4 编写动态组件</h3><p>componentWillReceiveProps(nextProps): 监视接收到新的props, 发送ajax</p>
<p>​     使用axios库发送ajax请求</p>
<ul>
<li><code>public/index.html</code></li>
</ul>
<pre><code class="html">&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</code></pre>
<ul>
<li><code>src/index.js</code></li>
</ul>
<pre><code class="javascript">import React from &#39;react&#39;
import { render } from &#39;react-dom&#39;

import App from &#39;./components/app&#39;
import &#39;./index.css&#39;

render(&lt;App /&gt;, document.getElementById(&#39;root&#39;))</code></pre>
<ul>
<li><code>src/index.css</code></li>
</ul>
<pre><code class="css">.album {
  min-height: 50rem; /* Can be removed; just added for demo purposes */
  padding-top: 3rem;
  padding-bottom: 3rem;
  background-color: #f7f7f7;
}

.card {
  float: left;
  width: 33.333%;
  padding: .75rem;
  margin-bottom: 2rem;
  border: 1px solid #efefef;
  text-align: center;
}

.card &gt; img {
  margin-bottom: .75rem;
  border-radius: 100px;
}

.card-text {
  font-size: 85%;
}
</code></pre>
<ul>
<li><code>src/componets/app.jsx</code></li>
</ul>
<pre><code class="jsx">import React from &#39;react&#39;
import Search from &#39;./search&#39;
import UserList from &#39;./user-list&#39;

export default class App extends React.Component {

  state = {
    searchName: &#39;&#39;
  }

  refreshName = (searchName) =&gt; this.setState({searchName})

  render() {
    return (
      &lt;div className=&quot;container&quot;&gt;
        &lt;section className=&quot;jumbotron&quot;&gt;
          &lt;h3 className=&quot;jumbotron-heading&quot;&gt;Search Github Users&lt;/h3&gt;
          &lt;Search refreshName={this.refreshName}/&gt;
        &lt;/section&gt;
        &lt;UserList searchName={this.state.searchName}/&gt;
      &lt;/div&gt;
    )
  }

}
</code></pre>
<ul>
<li><code>src/componets/search.jsx</code></li>
</ul>
<pre><code class="jsx">/**
 * 上部的搜索模块
 */
import React, {Component} from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;

class Search extends Component {

  static propTypes = {
    refreshName: PropTypes.func.isRequired
  }

  search = () =&gt; {
    var name = this.nameInput.value
    this.props.refreshName(name)
  }

  render() {
    return (
      &lt;div&gt;
        &lt;input type=&quot;text&quot; placeholder=&quot;enter the name you search&quot;
               ref={(input =&gt; this.nameInput = input)}/&gt;
        &lt;button onClick={this.search}&gt;Search&lt;/button&gt;
      &lt;/div&gt;
    )
  }
}

export default Search</code></pre>
<ul>
<li><code>src/componets/user-list.jsx</code></li>
</ul>
<pre><code class="jsx">/**
 * 下部的用户列表模块
 */
import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;
import axios from &#39;axios&#39;
// npm install axios --save 

class UserList extends React.Component {

  static propTypes = {
    searchName: PropTypes.string.isRequired
  }

  state = {
    firstView: true,
    loading: false,
    users: null,
    error: null
  }

  async componentWillReceiveProps(nextProps)  {
    let searchName = nextProps.searchName
    console.log(&#39;发送ajax请求&#39;, searchName)
    const url = `https://api.github.com/search/users?q=${searchName}`
    this.setState({ firstView: false, loading: true })

    // 使用axios库
    axios.get(url)
      .then((response) =&gt; {
        console.log(response)
        this.setState({ loading: false, users: response.data.items })
      })
      .catch((error)=&gt;{
        // debugger
        console.log(&#39;error&#39;, error.response.data.message, error.message)
        this.setState({ loading: false, error: error.message })
      })

    try {
      const result = await axios.get(url)
      this.setState({ loading: false, users: result.data.items })
    } catch(err) {
      // debugger
      console.log(&#39;----&#39;, err.message)
    }
  }

  render () {

    if (this.state.firstView) {
      return &lt;h2&gt;Enter name to search&lt;/h2&gt;
    } else if (this.state.loading) {
      return &lt;h2&gt;Loading result...&lt;/h2&gt;
    } else if (this.state.error) {
      return &lt;h2&gt;{this.state.error}&lt;/h2&gt;
    } else {
      return (
        &lt;div className=&quot;row&quot;&gt;
          {
            this.state.users.map((user) =&gt; (
              &lt;div className=&quot;card&quot; key={user.html_url}&gt;
                &lt;a href={user.html_url} target=&quot;_blank&quot;&gt;
                  &lt;img src={user.avatar_url} style={{width: '100px'}} alt=&#39;user&#39;/&gt;
                &lt;/a&gt;
                &lt;p className=&quot;card-text&quot;&gt;{user.login}&lt;/p&gt;
              &lt;/div&gt;
            ))
          }
        &lt;/div&gt;
      )
    }
  }
}

export default UserList</code></pre>
<h1 id="第5章-几个重要技术总结"><a href="#第5章-几个重要技术总结" class="headerlink" title="第5章 几个重要技术总结"></a>第5章 几个重要技术总结</h1><h2 id="5-1-组件间通信"><a href="#5-1-组件间通信" class="headerlink" title="5.1 组件间通信"></a>5.1 组件间通信</h2><h3 id="5-1-1-方式一-通过props传递"><a href="#5-1-1-方式一-通过props传递" class="headerlink" title="5.1.1 方式一: 通过props传递"></a>5.1.1 方式一: 通过props传递</h3><p>1)     共同的数据放在父组件上, 特有的数据放在自己组件内部(state)</p>
<p>2)     通过props可以传递一般数据和函数数据, 只能一层一层传递</p>
<p>3)     一般数据–&gt;父组件传递数据给子组件–&gt;子组件读取数据</p>
<p>4)     函数数据–&gt;子组件传递数据给父组件–&gt;子组件调用函数</p>
<p>父组件传到孙组件、兄弟组件之间不能直接通信，经过子组件、服务器传递</p>
<h3 id="5-1-2-方式二-使用消息订阅-subscribe-发布-publish-机制"><a href="#5-1-2-方式二-使用消息订阅-subscribe-发布-publish-机制" class="headerlink" title="5.1.2 方式二: 使用消息订阅(subscribe)-发布(publish)机制"></a>5.1.2 方式二: 使用消息订阅(subscribe)-发布(publish)机制</h3><p>1)     工具库: PubSubJS</p>
<p>2)     下载: <code>npm install pubsub-js --save</code></p>
<p>3)     使用: </p>
<pre><code class="javascript">import PubSub from &#39;pubsub-js&#39; //引入
PubSub.publish(&#39;delete&#39;, data) //发布消息
// 消息名，消息
PubSub.subscribe(&#39;delete&#39;, function(msg, data){ }); //订阅
// 消息名，回调函数</code></pre>
<p>以上一个demo为例(用户搜索的)，search和userlist(main)之间需要通信，它们是兄弟组件</p>
<p>在这里是通过父组件，利用props进行通信</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200714161016458.png" alt="props-search" class="lazyload"></p>
<p>这是以前的app.ejs</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200714161302225.png" alt="app.ejs" class="lazyload"></p>
<p>现在不通过父组件来通信</p>
<p><code>src/components/app.ejs</code></p>
<pre><code class="ejs">import React from &#39;react&#39;
import Search from &#39;./search&#39;
import UserList from &#39;./user-list&#39;

export default class App extends React.Component {

  render() {
    return (
      &lt;div className=&quot;container&quot;&gt;
        &lt;section className=&quot;jumbotron&quot;&gt;
          &lt;h3 className=&quot;jumbotron-heading&quot;&gt;Search Github Users&lt;/h3&gt;
          &lt;Search/&gt;
        &lt;/section&gt;
        &lt;UserList/&gt;
      &lt;/div&gt;
    )
  }

}</code></pre>
<p><code>src/components/search.ejs</code></p>
<pre><code class="ejs">/**
 * 上部的搜索模块
 */
import React, {Component} from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;
import PubSub from &#39;pubsub-js&#39; //引入
class Search extends Component {
  search = () =&gt; {
    var searchName = this.nameInput.value
    if(searchName){
      // 搜索
      // 发布消息 search
PubSub.publish(&#39;search&#39;, searchName)
    }
  }
  render() {
    return (
      &lt;div&gt;
        &lt;input type=&quot;text&quot; placeholder=&quot;enter the name you search&quot;
               ref={(input =&gt; this.nameInput = input)}/&gt;
        &lt;input type=&quot;submit&quot; value=&quot;Search&quot; onClick={this.search} /&gt;
      &lt;/div&gt;
    )
  }
}
export default Search</code></pre>
<p><code>src/components/user-list.ejs</code></p>
<pre><code class="ejs">/**
 * 下部的用户列表模块
 */
import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;
import axios from &#39;axios&#39;
import PubSub from &#39;pubsub-js&#39; //引入
class UserList extends React.Component {
  static propTypes = {
    searchName: PropTypes.string.isRequired
  }
  state = {
    firstView: true,
    loading: false,
    users: null,
    error: null
  }
  componentDidMount(){
    // 订阅消息 search
   PubSub.subscribe(&#39;search&#39;, (msg, searchName) =&gt; { // 指定了新的name，需要请求    
      this.setState({ firstView: false, loading: true })
      // 使用axios库
      const url = `https://api.github.com/search/users?q=${searchName}`
      axios.get(url)
        .then((response) =&gt; {
    console.log(response)
          this.setState({ loading: false, users: response.data.items })
        })
        .catch((error)=&gt;{
          // debugger       console.log(&#39;error&#39;, error.response.data.message, error.message)
          this.setState({ loading: false, error: error.message })
        })
      try {
        const result = axios.get(url)
        this.setState({ loading: false, users: result.data.items })
      } catch(err) {
        // debugger
        console.log(&#39;----&#39;, err.message)
      }
    })
  }
  render () {
    if (this.state.firstView) {
      return &lt;h2&gt;Enter name to search&lt;/h2&gt;
    } else if (this.state.loading) {
      return &lt;h2&gt;Loading result...&lt;/h2&gt;
    } else if (this.state.error) {
      return &lt;h2&gt;{this.state.error}&lt;/h2&gt;
    } else {
      return (
        &lt;div className=&quot;row&quot;&gt;
          {         this.state.users.map((user) =&gt; (
              &lt;div className=&quot;card&quot; key={user.html_url}&gt;
                &lt;a href={user.html_url} target=&quot;_blank&quot;&gt;
                  &lt;img src={user.avatar_url} style={{width: '100px'}} alt=&#39;user&#39;/&gt;
                &lt;/a&gt;
                &lt;p className=&quot;card-text&quot;&gt;{user.login}&lt;/p&gt;
              &lt;/div&gt;
            ))
          }
        &lt;/div&gt;
      )
    }
  }
}
export default UserList</code></pre>
<p>再以之前的评论的为例</p>
<p>App.ejs中有个删除评论的函数，传给了List组件(并没有用到)，接着传给Item</p>
<pre><code class="jsx">delete={this.delete}</code></pre>
<h3 id="5-1-3-方式三-redux"><a href="#5-1-3-方式三-redux" class="headerlink" title="5.1.3 方式三: redux"></a>5.1.3 方式三: redux</h3><p>后面专门讲解</p>
<h2 id="5-2-事件监听理解"><a href="#5-2-事件监听理解" class="headerlink" title="5.2 事件监听理解"></a>5.2 事件监听理解</h2><h3 id="5-2-1-原生DOM事件"><a href="#5-2-1-原生DOM事件" class="headerlink" title="5.2.1 原生DOM事件"></a>5.2.1 原生DOM事件</h3><p>1)     绑定事件监听</p>
<p>a.     事件名(类型): 只有有限的几个, 不能随便写</p>
<p>b.     回调函数</p>
<p>2)         触发事件</p>
<p>a.     用户操作界面</p>
<p>b.     事件名(类型)</p>
<p>c.     数据</p>
<h3 id="5-2-2-自定义事件-消息机制"><a href="#5-2-2-自定义事件-消息机制" class="headerlink" title="5.2.2 自定义事件(消息机制)"></a>5.2.2 自定义事件(消息机制)</h3><p>1)     绑定事件监听</p>
<p>a.     事件名(类型): 任意</p>
<p>b.     回调函数: 通过形参接收数据, 在函数体处理事件</p>
<p>2)     触发事件(编码)</p>
<p>a.     事件名(类型): 与绑定的事件监听的事件名一致</p>
<p>b.     数据: 会自动传递给回调函数</p>
<h2 id="5-3-ES6常用新语法"><a href="#5-3-ES6常用新语法" class="headerlink" title="5.3 ES6常用新语法"></a>5.3 ES6常用新语法</h2><p>1)     定义常量/变量: <code>const/let</code></p>
<p>2)     解构赋值:<code>let {a, b} = this.props</code>  <code>import {aa} from &#39;xxx&#39;</code></p>
<p>3)     对象的简洁表达: <code>{a, b}</code></p>
<p>4)     箭头函数: </p>
<p>a.     常用场景</p>
<ul>
<li><p>组件的自定义方法: <code>xxx = () =&gt; {}</code></p>
</li>
<li><p>参数匿名函数</p>
</li>
</ul>
<p>b.     优点:</p>
<p>​          * 简洁</p>
<p>​          * 没有自己的this,使用引用this查找的是外部this</p>
<p>5)     扩展(三点)运算符: 拆解对象<code>(const MyProps = {}, &lt;Xxx {...MyProps}&gt;)</code></p>
<p>6)     类: <code>class/extends/constructor/super</code></p>
<p>7)     ES6模块化: <code>export default | import</code></p>
<h1 id="第6章-react-router4"><a href="#第6章-react-router4" class="headerlink" title="第6章 react-router4"></a>第6章 react-router4</h1><h2 id="6-1-相关理解"><a href="#6-1-相关理解" class="headerlink" title="6.1 相关理解"></a>6.1 相关理解</h2><h3 id="6-1-1-react-router的理解"><a href="#6-1-1-react-router的理解" class="headerlink" title="6.1.1 react-router的理解"></a>6.1.1 react-router的理解</h3><p>1)     react的一个插件库(依赖/基于React)</p>
<p>2)     专门用来实现一个SPA应用</p>
<p>3)     基于react的项目基本都会用到此库</p>
<h3 id="6-1-2-SPA的理解"><a href="#6-1-2-SPA的理解" class="headerlink" title="6.1.2 SPA的理解"></a>6.1.2 SPA的理解</h3><p>1)     单页Web应用（single page web application，SPA）</p>
<p>2)     整个应用只有一个完整的页面</p>
<p>3)     点击页面中的链接不会刷新页面, 本身也不会向服务器发请求</p>
<p>4)     当点击路由链接时, 只会做页面的<strong>局部更新</strong></p>
<p>5)     数据都需要通过<strong>ajax请求</strong>获取, 并在前端<strong>异步展现</strong></p>
<h3 id="6-1-3-路由的理解"><a href="#6-1-3-路由的理解" class="headerlink" title="6.1.3 路由的理解"></a>6.1.3 路由的理解</h3><p>1)     什么是路由?</p>
<p>a.     一个路由就是一个<strong>映射关系(key:value)</strong></p>
<p>b.     key为<strong>路由路径(path)</strong>, value可能是function(后台路由)/<strong>component(前台路由)</strong></p>
<p>2)     路由分类</p>
<p>a.     后台路由: node服务器端路由, value是function, 用来处理客户端提交的请求并返回一个响应数据</p>
<p>b.     前台路由: 浏览器端路由, value是component, 当请求的是路由path时, 浏览器端前没有发送http请求, 但界面会更新显示对应的组件 </p>
<p>3)     后台路由</p>
<p>a.     注册路由: <code>router.get(path, function(req, res))</code></p>
<p>b.     当node接收到一个请求时, 根据请求路径找到匹配的路由, 调用路由中的函数来处理请求, 返回响应数据</p>
<p>4)         前端路由</p>
<p>a.     注册路由: <code>&lt;Route path=&quot;/about&quot; component={About}&gt;</code></p>
<p>b.     当浏览器的<strong>hash</strong>变为<code>#about</code>时, 当前路由组件就会变为About组件</p>
<h3 id="6-1-4-前端路由的实现"><a href="#6-1-4-前端路由的实现" class="headerlink" title="6.1.4 前端路由的实现"></a>6.1.4 前端路由的实现</h3><p>(底层实现)</p>
<p>1)     history库</p>
<p>a.     网址: <a href="https://github.com/ReactTraining/history" target="_blank" rel="noopener">https://github.com/ReactTraining/history</a></p>
<p>b.     管理浏览器会话历史(history)的工具库</p>
<p>c.     包装的是原生BOM中<code>window.history</code>和<code>window.location.hash</code></p>
<p>2)     history API</p>
<p>a.     <code>History.createBrowserHistory()</code>: 得到封装window.history的管理对象</p>
<p>b.     <code>History.createHashHistory()</code>: 得到封装window.location.hash的管理对象</p>
<p>c.     <code>history.push()</code>: 添加一个新的历史记录</p>
<p>d.     <code>history.replace()</code>: 用一个新的历史记录替换当前的记录</p>
<p>e.     <code>history.goBack()</code>: 回退到上一个历史记录</p>
<p>f.     <code>history.goForword()</code>: 前进到下一个历史记录</p>
<p>g.     <code>history.listen(function(location){})</code>: 监视历史记录的变化</p>
<p>3)     测试</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/history-%E6%96%B9%E5%BC%8F1.gif" alt="history-方式1" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/history-%E6%96%B9%E5%BC%8F2.gif" alt="history-方式2" class="lazyload"></p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;title&gt;history test&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

  &lt;p&gt;&lt;input type=&quot;text&quot;&gt;&lt;/p&gt;
  &lt;a href=&quot;/test1&quot; onclick=&quot;return push(&#39;/test1&#39;)&quot;&gt;test1&lt;/a&gt;&lt;br&gt;&lt;br&gt;
  &lt;button onClick=&quot;push(&#39;/test2&#39;)&quot;&gt;push test2&lt;/button&gt;&lt;br&gt;&lt;br&gt;
  &lt;button onClick=&quot;back()&quot;&gt;回退&lt;/button&gt;&lt;br&gt;&lt;br&gt;
  &lt;button onClick=&quot;forword()&quot;&gt;前进&lt;/button&gt;&lt;br&gt;&lt;br&gt;
  &lt;button onClick=&quot;replace(&#39;/test3&#39;)&quot;&gt;replace test3&lt;/button&gt;&lt;br&gt;&lt;br&gt;

  &lt;script type=&quot;text/javascript&quot; src=&quot;https://cdn.bootcss.com/history/4.7.2/history.js&quot;&gt;&lt;/script&gt;
  &lt;script type=&quot;text/javascript&quot;&gt;
    let history = History.createBrowserHistory() // 方式一
    history = History.createHashHistory() // 方式二
    // console.log(history)

    function push (to) {
      history.push(to)
      return false
    } // 可以返回

    function back() {
      history.goBack()
    }

    function forword() {
      history.goForward()
    }

    function replace (to) {
      history.replace(to)
    } // 不能返回

    history.listen((location) =&gt; {
      console.log(&#39;请求路由路径变化了&#39;, location)
    })
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<h2 id="6-2-react-router相关API"><a href="#6-2-react-router相关API" class="headerlink" title="6.2 react-router相关API"></a>6.2 react-router相关API</h2><p><a href="https://reactrouter.com/" target="_blank" rel="noopener">react_router</a></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200714181151269.png" alt="react-router" class="lazyload"></p>
<p><a href="https://reactrouter.com/web/guides/quick-start" target="_blank" rel="noopener">web</a></p>
<h3 id="6-2-1-组件"><a href="#6-2-1-组件" class="headerlink" title="6.2.1 组件"></a>6.2.1 组件</h3><p>1)     <code>&lt;BrowserRouter&gt;</code>：BrowserRouter是react路由的容器</p>
<p>2)     <code>&lt;HashRouter&gt;</code>：这个是用来兼容老浏览器的</p>
<p>3)     <code>&lt;Route&gt;</code>：Route的作用就是用来渲染路由匹配的组件。路由渲染有三种方式，每一种方式都可以传递match,location,history对象</p>
<p>4)     <code>&lt;Redirect&gt;</code>：路由重定向</p>
<p>5)     <code>&lt;Link&gt;</code>：Link的作用和a标签类似</p>
<p>6)     <code>&lt;NavLink&gt;</code>：NavLink和Link一样最终都是渲染成a标签，NavLink可以给这个a标签添加额外的属性</p>
<p>7)     <code>&lt;Switch&gt;</code>：Switch组件内部可以是Route或者Redirect，只会渲染第一个匹配的元素</p>
<h3 id="6-2-2-其它"><a href="#6-2-2-其它" class="headerlink" title="6.2.2 其它"></a>6.2.2 其它</h3><p>1)     <strong><code>history</code>对象</strong>：这里的history对象是使用history插件生成的，<a href="http://www.cnblogs.com/ye-hcj/p/7741742.html已经详细讲过了" target="_blank" rel="noopener">http://www.cnblogs.com/ye-hcj/p/7741742.html已经详细讲过了</a><br>记住一点，再使用location做对比的使用，通过history访问的location是动态变化的，最好通过Route访问location</p>
<p>2)     <code>match</code>对象：match对象表示当前的路由地址是怎么跳转过来的</p>
<p>3)     <code>withRouter</code>函数：当一个非路由组件也想访问到当前路由的match,location,history对象，那么withRouter将是一个非常好的选择</p>
<h2 id="6-3-基本路由使用"><a href="#6-3-基本路由使用" class="headerlink" title="6.3 基本路由使用"></a>6.3 基本路由使用</h2><h3 id="6-3-1-效果"><a href="#6-3-1-效果" class="headerlink" title="6.3.1 效果"></a>6.3.1 效果</h3><p>![react-router demo1 (3)](<a href="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react-router" target="_blank" rel="noopener">https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react-router</a> demo1 (3).gif)</p>
<p>并没有刷新页面</p>
<h3 id="6-3-2-准备"><a href="#6-3-2-准备" class="headerlink" title="6.3.2 准备"></a>6.3.2 准备</h3><p>1)     下载react-router: <code>npm install --save react-router@4</code></p>
<p>我们只需要web版本：<code>npm install --save react-router-dom</code></p>
<p>2)     由于使用到了BootStrap，因此在index.html中引入bootstrap.css: <code>&lt;link rel=&quot;stylesheet&quot; href=&quot;/css/bootstrap.css&quot;&gt;</code></p>
<p><code>public/index.html</code></p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;&gt;
    &lt;meta name=&quot;theme-color&quot; content=&quot;#000000&quot;&gt;
    &lt;link rel=&quot;manifest&quot; href=&quot;%PUBLIC_URL%/manifest.json&quot;&gt;
    &lt;link rel=&quot;shortcut icon&quot; href=&quot;%PUBLIC_URL%/favicon.ico&quot;&gt;
    &lt;title&gt;React-router&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/bootstrap.css&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;noscript&gt;
      You need to enable JavaScript to run this app.
    &lt;/noscript&gt;
    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>一般会将路由组件和非路由组件分开写</p>
<p>pages/views存放路由组件</p>
<p>components存放其他组件</p>
<h3 id="6-3-3-路由组件-views-about-jsx"><a href="#6-3-3-路由组件-views-about-jsx" class="headerlink" title="6.3.3 路由组件: views/about.jsx"></a>6.3.3 路由组件: <code>views/about.jsx</code></h3><pre><code class="jsx">import React,{Component} from &#39;react&#39;
export default class About extends Component{
  render(){
    return(
        &lt;div&gt;About组件内容&lt;/div&gt;
      )
  }
}</code></pre>
<h3 id="6-3-4-路由组件-views-home-jsx"><a href="#6-3-4-路由组件-views-home-jsx" class="headerlink" title="6.3.4 路由组件: views/home.jsx"></a>6.3.4 路由组件: <code>views/home.jsx</code></h3><pre><code class="jsx">import React, {Component} from &#39;react&#39;

export default class Home extends Component{
  render(){
    return (
        &lt;div&gt;Home组件内容&lt;/div&gt;
      )
  }
}</code></pre>
<h3 id="6-3-5-包装NavLink组件-components-my-nav-link-jsx"><a href="#6-3-5-包装NavLink组件-components-my-nav-link-jsx" class="headerlink" title="6.3.5 包装NavLink组件: components/my-nav-link.jsx"></a>6.3.5 包装NavLink组件: <code>components/my-nav-link.jsx</code></h3><p>由于每个NavLink都需要自定义active样式(加入属性activeClassName)，因此提出来</p>
<pre><code class="jsx">import React, {Component} from &#39;react&#39;
import {NavLink} from &#39;react-router-dom&#39;

export default class MyNavLink extends Component {
  render(){
    // 利用this.props三点运算符接受所有的属性
    return(
      &lt;NavLink {...this.props} activeClassName=&#39;activeClass&#39;/&gt;
    )
  }
}</code></pre>
<h3 id="6-3-6-应用组件-components-app-jsx"><a href="#6-3-6-应用组件-components-app-jsx" class="headerlink" title="6.3.6 应用组件: components/app.jsx"></a>6.3.6 应用组件: <code>components/app.jsx</code></h3><pre><code class="jsx">import React from &#39;react&#39;
import {NavLink, Route, Switch, Redirect} from &#39;react-router-dom&#39;
import MyNavLink from &#39;./my-nav-link&#39;
import About from &#39;../views/about&#39;
import Home from &#39;../views/home&#39;

export default class App extends React.Component {

  render() {
    return (
      &lt;div&gt;
        &lt;div className=&quot;row&quot;&gt;
          &lt;div className=&quot;col-xs-offset-2 col-xs-8&quot;&gt;
            &lt;div className=&quot;page-header&quot;&gt;
              &lt;h2&gt;React Router Demo&lt;/h2&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div className=&quot;row&quot;&gt;
          &lt;div className=&quot;col-xs-2 col-xs-offset-2&quot;&gt;
            &lt;div className=&quot;list-group&quot;&gt;
              {/*导航路由链接，不能使用a标签，to指向的path*/}
              &lt;MyNavLink className=&quot;list-group-item&quot; to=&#39;/about&#39;&gt;About&lt;/MyNavLink&gt;
              &lt;MyNavLink className=&quot;list-group-item&quot; to=&#39;/home&#39;&gt;Home&lt;/MyNavLink&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;div className=&quot;col-xs-6&quot;&gt;
            &lt;div className=&quot;panel&quot;&gt;
              &lt;div className=&quot;panel-body&quot;&gt;
                {/*可切换的路由组件，使用switch只有匹配才显示，route的path对应上方的to、component对应路由组件，Redirect自动重定向到about、默认到about组件*/}
                &lt;Switch&gt;
                  &lt;Route path=&#39;/about&#39; component={About}/&gt;
                  &lt;Route path=&#39;/home&#39; component={Home}/&gt;
                  &lt;Redirect to=&#39;/about&#39;/&gt;
                &lt;/Switch&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    )
  }
}
</code></pre>
<h3 id="6-3-7-自定义样式-index-css"><a href="#6-3-7-自定义样式-index-css" class="headerlink" title="6.3.7 自定义样式: index.css"></a>6.3.7 自定义样式: <code>index.css</code></h3><pre><code class="css">activeClass{
  color: red !important;
}</code></pre>
<h3 id="6-3-8-入口JS-index-js"><a href="#6-3-8-入口JS-index-js" class="headerlink" title="6.3.8 入口JS: index.js"></a>6.3.8 入口JS: <code>index.js</code></h3><pre><code class="javascript">import React from &#39;react&#39;
//import ReactDOM from &#39;react-dom&#39;
import {render} from &#39;react-dom&#39;
import {BrowserRouter, HashRouter} from &#39;react-router-dom&#39;
import App from &#39;./components/app&#39;

import &#39;./index.css&#39;

// ReactDOM.render(
render(
  (
    &lt;BrowserRouter&gt;
      &lt;App/&gt;
    &lt;/BrowserRouter&gt;
    /* 组件需要用路由器组件包含起来，两者任选一个 */
    /*&lt;HashRouter&gt;
      &lt;App /&gt;
    &lt;/HashRouter&gt;*/
  ),
  document.getElementById(&#39;root&#39;)
)</code></pre>
<p>总结：如何编写路由效果？</p>
<ol>
<li>编写路由组件</li>
<li>在父路由组件中指定<ul>
<li>路由连接：<code>&lt;NavLink&gt;&lt;/NavLink&gt;</code></li>
<li>路由：<code>&lt;Route&gt;&lt;/Route&gt;</code></li>
</ul>
</li>
</ol>
<h2 id="6-4-嵌套路由使用"><a href="#6-4-嵌套路由使用" class="headerlink" title="6.4 嵌套路由使用"></a>6.4 嵌套路由使用</h2><p>嵌套路由——路由组件中的路由</p>
<h3 id="6-4-1-效果"><a href="#6-4-1-效果" class="headerlink" title="6.4.1 效果"></a>6.4.1 效果</h3><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react-router-demo2.gif" alt="react-router demo2" class="lazyload"></p>
<h3 id="6-4-2-二级路由组件-views-news-jsx"><a href="#6-4-2-二级路由组件-views-news-jsx" class="headerlink" title="6.4.2 二级路由组件: views/news.jsx"></a>6.4.2 二级路由组件: <code>views/news.jsx</code></h3><pre><code class="jsx">import React from &#39;react&#39;

export default class News extends React.Component {
  state = {
    newsArr: [&#39;news001&#39;, &#39;news002&#39;, &#39;news003&#39;]
  }

  render () {
    return (
      &lt;div&gt;
        &lt;ul&gt;
          {
            this.state.newsArr.map((news, index) =&gt; &lt;li key={index}&gt;{news}&lt;/li&gt;)
          }
        &lt;/ul&gt;
      &lt;/div&gt;
    )
  }
}</code></pre>
<h3 id="6-4-3-二级路由组件-views-message-jsx"><a href="#6-4-3-二级路由组件-views-message-jsx" class="headerlink" title="6.4.3 二级路由组件: views/message.jsx"></a>6.4.3 二级路由组件: <code>views/message.jsx</code></h3><pre><code class="jsx">import React from &#39;react&#39;
import {Link, Route} from &#39;react-router-dom&#39;

export default class Message extends React.Component {
  state = {
    messages: []
  }

  componentDidMount () {
    // 模拟发送ajax请求
    setTimeout(() =&gt; {
      const data = [
        {id: 1, title: &#39;Message001&#39;},
        {id: 3, title: &#39;Message003&#39;},
        {id: 6, title: &#39;Message006&#39;},
      ]
      this.setState({
        messages: data
      })
    }, 1000)
  }

  render () {
    const path = this.props.match.path

    return (
      &lt;div&gt;
        &lt;ul&gt;
          {
            this.state.messages.map((m, index) =&gt; {
              return (
                &lt;li key={index}&gt;
                   &lt;a href=&#39;???&#39;&gt;{m.title}&lt;/a&gt;
                &lt;/li&gt;
              )
            })
          }
        &lt;/ul&gt;
      &lt;/div&gt;
    )
  }
}</code></pre>
<h3 id="6-4-4-一级路由组件-views-home-jsx"><a href="#6-4-4-一级路由组件-views-home-jsx" class="headerlink" title="6.4.4 一级路由组件: views/home.jsx"></a>6.4.4 一级路由组件: <code>views/home.jsx</code></h3><pre><code class="jsx">import React, {Component} from &#39;react&#39;
import {Switch, Route, Redirect} from &#39;react-router-dom&#39;
import MyNavLink from &#39;../components/my-nav-link&#39;
import News from &#39;./news&#39;
import Message from &#39;./message&#39;

export default class Home extends Component{
  render(){
    return (
      &lt;div&gt;
        &lt;h2&gt;Home组件内容&lt;/h2&gt;
        &lt;div&gt;
          &lt;ul className=&quot;nav nav-tabs&quot;&gt;
            &lt;li&gt;
              &lt;MyNavLink to=&#39;/home/news&#39;&gt;News&lt;/MyNavLink&gt;
            &lt;/li&gt;
            &lt;li&gt;
              &lt;MyNavLink to=&quot;/home/message&quot;&gt;Message&lt;/MyNavLink&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
          &lt;Switch&gt;
            &lt;Route path=&#39;/home/news&#39; component={News} /&gt;
            &lt;Route path=&#39;/home/message&#39; component={Message} /&gt;
            &lt;Redirect to=&#39;/home/news&#39;/&gt;
          &lt;/Switch&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    )
  }
}</code></pre>
<h2 id="6-5-向路由组件传递参数数据"><a href="#6-5-向路由组件传递参数数据" class="headerlink" title="6.5 向路由组件传递参数数据"></a>6.5 向路由组件传递参数数据</h2><p>传递的是id值</p>
<h3 id="6-5-1-效果"><a href="#6-5-1-效果" class="headerlink" title="6.5.1 效果"></a>6.5.1 效果</h3><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react-router-demo3.gif" alt="react-router demo3 (2)" class="lazyload"></p>
<h3 id="6-5-2-三级路由组件-views-message-detail-jsx"><a href="#6-5-2-三级路由组件-views-message-detail-jsx" class="headerlink" title="6.5.2 三级路由组件: views/message-detail.jsx"></a>6.5.2 三级路由组件: <code>views/message-detail.jsx</code></h3><pre><code class="jsx">import React from &#39;react&#39;

const messageDetails = [
  {id: 1, title: &#39;Message001&#39;, content: &#39;中国，你是最棒的&#39;},
  {id: 3, title: &#39;Message003&#39;, content: &#39;对的，没错，非常赞成楼上&#39;},
  {id: 6, title: &#39;Message006&#39;, content: &#39;我也赞成&#39;},
]

// 函数的组件
export default function MessageDetail(props) {

  const id = props.match.params.id
  const md = messageDetails.find(md =&gt; md.id===id*1)

  return (
    &lt;ul&gt;
      &lt;li&gt;ID: {md.id}&lt;/li&gt;
      &lt;li&gt;TITLE: {md.title}&lt;/li&gt;
      &lt;li&gt;CONTENT: {md.content}&lt;/li&gt;
    &lt;/ul&gt;
  )
}</code></pre>
<h3 id="6-5-3-二级路由组件-views-message-jsx"><a href="#6-5-3-二级路由组件-views-message-jsx" class="headerlink" title="6.5.3 二级路由组件: views/message.jsx"></a>6.5.3 二级路由组件: <code>views/message.jsx</code></h3><pre><code class="jsx">import React from &#39;react&#39;
import {Link, Route} from &#39;react-router-dom&#39;
import MessageDetail from &quot;./message-detail&quot;

export default class Message extends React.Component {
  state = {
    messages: []
  }

  componentDidMount () {
    // 模拟发送ajax请求
    setTimeout(() =&gt; {
      const data = [
        {id: 1, title: &#39;Message001&#39;},
        {id: 3, title: &#39;Message003&#39;},
        {id: 6, title: &#39;Message006&#39;},
      ]
      this.setState({
        messages: data
      })
    }, 1000)
  }

  render () {
    const path = this.props.match.path

    return (
      &lt;div&gt;
        &lt;ul&gt;
          {
            this.state.messages.map((m, index) =&gt; {
              return (
                &lt;li key={index}&gt;
                  &lt;Link to={`${path}/${m.id}`}&gt;{m.title}&lt;/Link&gt;
                &lt;/li&gt;
              )
            })
          }
        &lt;/ul&gt;
        &lt;Route path={`${path}/:id`} component={MessageDetail}&gt;&lt;/Route&gt;
      &lt;/div&gt;
    )
  }
}</code></pre>
<p>路由链接与非路由链接：是否发了请求(路由连接不发)</p>
<p><code>&lt;NavLink to=&#39;&#39;&gt;&lt;/NavLink&gt;`` &lt;Link to=&#39;&#39;&gt;&lt;/Link&gt;</code></p>
<p><code>&lt;a href=&quot;&quot;&gt;&lt;/a&gt;</code></p>
<h2 id="6-6-多种路由跳转方式"><a href="#6-6-多种路由跳转方式" class="headerlink" title="6.6 多种路由跳转方式"></a>6.6 多种路由跳转方式</h2><p>前面讲的路由切换都是通过点击链接的方式切换的，不是链接也能够</p>
<h3 id="6-6-1-效果"><a href="#6-6-1-效果" class="headerlink" title="6.6.1 效果"></a>6.6.1 效果</h3><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react-router-demo4.gif" alt="react-router demo4" class="lazyload"></p>
<h3 id="6-6-2-二级路由-views-message-jsx"><a href="#6-6-2-二级路由-views-message-jsx" class="headerlink" title="6.6.2 二级路由: views/message.jsx"></a>6.6.2 二级路由: views/message.jsx</h3><pre><code class="jsx">import React from &#39;react&#39;
import {Link, Route} from &#39;react-router-dom&#39;
import MessageDetail from &quot;./message-detail&quot;

export default class Message extends React.Component {
  state = {
    messages: []
  }

  componentDidMount () {
    // 模拟发送ajax请求
    setTimeout(() =&gt; {
      const data = [
        {id: 1, title: &#39;Message001&#39;},
        {id: 3, title: &#39;Message003&#39;},
        {id: 6, title: &#39;Message006&#39;},
      ]
      this.setState({
        messages: data
      })
    }, 1000)
  }

  // props中有history属性，它由push等方法
  ShowDetail = (id) =&gt; {
    this.props.history.push(`/home/message/${id}`)
  }

  ShowDetail2 = (id) =&gt; {
    this.props.history.replace(`/home/message/${id}`)
  }

  back = () =&gt; {
    this.props.history.goBack()
  }

  forward = () =&gt; {
    this.props.history.goForward()
  }

  render () {
    const path = this.props.match.path

    return (
      &lt;div&gt;
        &lt;ul&gt;
          {
            this.state.messages.map((m, index) =&gt; {
              return (
                &lt;li key={index}&gt;
                  &lt;Link to={`${path}/${m.id}`}&gt;{m.title}&lt;/Link&gt;
                  &amp;nbsp;&amp;nbsp;&amp;nbsp;
                  &lt;button onClick={() =&gt; this.ShowDetail(m.id)}&gt;查看详情(push)&lt;/button&gt;&amp;nbsp;
                  &lt;button onClick={() =&gt; this.ShowDetail2(m.id)}&gt;查看详情(replace)&lt;/button&gt;
                &lt;/li&gt;
              )
            })
          }
        &lt;/ul&gt;
        &lt;p&gt;
          &lt;button onClick={this.back}&gt;返回&lt;/button&gt;&amp;nbsp;
          &lt;button onClick={this.forward}&gt;前进&lt;/button&gt;&amp;nbsp;
        &lt;/p&gt;
        &lt;hr/&gt;
        &lt;Route path={`${path}/:id`} component={MessageDetail}&gt;&lt;/Route&gt;
        {/*&lt;Route path={`home/message/meassagedetail/:id`} component={MessageDetail}&gt;&lt;/Route&gt;*/}
      &lt;/div&gt;
    )
  }
}</code></pre>
<p> 总结：</p>
<ul>
<li>路由器标签<ul>
<li><code>&lt;BrowserRouter&gt;</code>：BrowserRouter是react路由的容器</li>
<li><code>&lt;HashRouter&gt;</code>：多了一个#号</li>
</ul>
</li>
<li>路由<ul>
<li><code>&lt;Route&gt;</code>：Route的作用就是用来渲染路由匹配的组件。路由渲染有三种方式，每一种方式都可以传递match,location,history对象</li>
</ul>
</li>
<li><code>&lt;Redirect&gt;</code>：路由重定向</li>
<li>链接<ul>
<li><code>&lt;Link&gt;</code>：Link的作用和a标签类似</li>
<li><code>&lt;NavLink&gt;</code>：可以添加其他属性，例如activeClassName</li>
</ul>
</li>
<li><ul>
<li><code>&lt;Switch&gt;</code>：Switch组件内部可以是Route或者Redirect，只会渲染第一个匹配的元素</li>
</ul>
</li>
</ul>
<ul>
<li>this.props.<ul>
<li>match<ul>
<li>params</li>
</ul>
</li>
<li>history<ul>
<li>push()</li>
<li>replace()</li>
<li>goback()</li>
<li>goforward()</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="第7章-react-ui"><a href="#第7章-react-ui" class="headerlink" title="第7章 react-ui"></a>第7章 react-ui</h1><h2 id="7-1-最流行的开源React-UI组件库"><a href="#7-1-最流行的开源React-UI组件库" class="headerlink" title="7.1 最流行的开源React UI组件库"></a>7.1 最流行的开源React UI组件库</h2><h3 id="7-1-1-material-ui-国外"><a href="#7-1-1-material-ui-国外" class="headerlink" title="7.1.1 material-ui(国外)"></a>7.1.1 material-ui(国外)</h3><p>1)     官网: <a href="http://www.material-ui.com/#/" target="_blank" rel="noopener">http://www.material-ui.com/#/</a></p>
<p>2)     github: <a href="https://github.com/callemall/material-ui" target="_blank" rel="noopener">https://github.com/callemall/material-ui</a></p>
<h3 id="7-1-2-ant-design-国内蚂蚁金服"><a href="#7-1-2-ant-design-国内蚂蚁金服" class="headerlink" title="7.1.2 ant-design(国内蚂蚁金服)"></a>7.1.2 ant-design(国内蚂蚁金服)</h3><p>1)     PC官网: <a href="https://ant.design/index-cn" target="_blank" rel="noopener">https://ant.design/index-cn</a></p>
<p>2)     移动官网: <a href="https://mobile.ant.design/index-cn" target="_blank" rel="noopener">https://mobile.ant.design/index-cn</a></p>
<p>3)     Github: <a href="https://github.com/ant-design/ant-design/" target="_blank" rel="noopener">https://github.com/ant-design/ant-design/</a></p>
<p>4)     Github: <a href="https://github.com/ant-design/ant-design-mobile/" target="_blank" rel="noopener">https://github.com/ant-design/ant-design-mobile/</a></p>
<h2 id="7-2-ant-design-mobile使用入门"><a href="#7-2-ant-design-mobile使用入门" class="headerlink" title="7.2 ant-design-mobile使用入门"></a>7.2 ant-design-mobile使用入门</h2><h3 id="7-2-1-效果"><a href="#7-2-1-效果" class="headerlink" title="7.2.1 效果"></a>7.2.1 效果</h3><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/antd-mobile.gif" alt="antd-mobile" class="lazyload"></p>
<h3 id="7-2-2-使用create-react-app创建react应用"><a href="#7-2-2-使用create-react-app创建react应用" class="headerlink" title="7.2.2 使用create-react-app创建react应用"></a>7.2.2 使用create-react-app创建react应用</h3><pre><code class="bash">npm install create-react-app -g
create-react-app antm-demo
cd antm-demo
npm start</code></pre>
<h3 id="7-2-3-搭建antd-mobile的基本开发环境"><a href="#7-2-3-搭建antd-mobile的基本开发环境" class="headerlink" title="7.2.3 搭建antd-mobile的基本开发环境"></a>7.2.3 搭建antd-mobile的基本开发环境</h3><p>1)     下载</p>
<p><code>npm install antd-mobile --save</code></p>
<p>2)     <code>src/components/App.jsx</code></p>
<pre><code class="jsx">import React, {Component} from &#39;react&#39;
import {Button, Toast} from &#39;antd-mobile&#39;
export default class App extends Component {
  handleClick = () =&gt; {
    Toast.info(&#39;提交成功&#39;, 2)
  }

  render() {
    return (
        &lt;div&gt;
          &lt;Button type=&quot;primary&quot; onClick={this.handleClick}&gt;提交&lt;/Button&gt;
        &lt;/div&gt;   
      )
  }
  /* type值不同样式不同 */
}</code></pre>
<p>3)     <code>src/index.js</code></p>
<pre><code class="javascript">import React from &#39;react&#39;;
import {render} from &#39;react-dom&#39;
import App from &quot;./components/App&quot;
// 引入整体css
import &#39;antd-mobile/dist/antd-mobile.css&#39;

render(&lt;App /&gt;, document.getElementById(&#39;root&#39;))
</code></pre>
<p>4)     <code>index.html</code></p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no&quot; /&gt;
    &lt;meta name=&quot;theme-color&quot; content=&quot;#000000&quot;&gt;
    &lt;link rel=&quot;manifest&quot; href=&quot;%PUBLIC_URL%/manifest.json&quot;&gt;
    &lt;link rel=&quot;shortcut icon&quot; href=&quot;%PUBLIC_URL%/favicon.ico&quot;&gt;
    &lt;title&gt;React ant design mobile&lt;/title&gt;
    &lt;script src=&quot;https://as.alipayobjects.com/g/component/fastclick/1.0.6/fastclick.js&quot;&gt;&lt;/script&gt;
    &lt;script&gt;
      if (&#39;addEventListener&#39; in document) {
        document.addEventListener(&#39;DOMContentLoaded&#39;, function() {
          FastClick.attach(document.body);
        }, false);
      }
      if(!window.Promise) {
        document.writeln(&#39;&lt;script src=&quot;https://as.alipayobjects.com/g/component/es6-promise/3.2.2/es6-promise.min.js&quot;&#39;+&#39;&gt;&#39;+&#39;&lt;&#39;+&#39;/&#39;+&#39;script&gt;&#39;);
      }
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;noscript&gt;
      You need to enable JavaScript to run this app.
    &lt;/noscript&gt;
    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3 id="7-2-4-实现按需打包-组件js-css"><a href="#7-2-4-实现按需打包-组件js-css" class="headerlink" title="7.2.4 实现按需打包(组件js/css)"></a>7.2.4 实现按需打包(组件js/css)</h3><p>1)     下载依赖包</p>
<pre><code class="bash">yarn add react-app-rewired --dev
yarn add babel-plugin-import --dev</code></pre>
<p>2)     修改默认配置: </p>
<p>l package.json</p>
<pre><code class="json">{
  &quot;name&quot;: &quot;react_ui&quot;,
  &quot;version&quot;: &quot;0.1.0&quot;,
  &quot;private&quot;: true,
  &quot;dependencies&quot;: {
    &quot;antd-mobile&quot;: &quot;^2.1.3&quot;,
    &quot;react&quot;: &quot;^16.2.0&quot;,
    &quot;react-dom&quot;: &quot;^16.2.0&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;babel-plugin-import&quot;: &quot;^1.6.3&quot;,
    &quot;react-app-rewired&quot;: &quot;^1.4.0&quot;,
    &quot;react-scripts&quot;: &quot;1.0.17&quot;
  },
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;react-app-rewired start&quot;,
    &quot;build&quot;: &quot;react-app-rewired build&quot;,
    &quot;test&quot;: &quot;react-app-rewired test --env=jsdom&quot;
  }
}</code></pre>
<p>l config-overrides.js</p>
<pre><code class="javascript">const {injectBabelPlugin} = require(&#39;react-app-rewired&#39;);
module.exports = function override(config, env) {
  config = injectBabelPlugin([&#39;import&#39;, {libraryName: &#39;antd-mobile&#39;, style: &#39;css&#39;}], config);
  return config;
};</code></pre>
<p>3)     编码</p>
<pre><code class="jsx">// import &#39;antd-mobile/dist/antd-mobile.css&#39;
// import Button from &#39;antd-mobile/lib/button&#39;
// import Toast from &#39;antd-mobile/lib/toast&#39; 
import {Button, Toast} from &#39;antd-mobile&#39;</code></pre>
<h1 id="第8章-redux"><a href="#第8章-redux" class="headerlink" title="第8章 redux"></a>第8章 redux</h1><h2 id="8-1-redux理解"><a href="#8-1-redux理解" class="headerlink" title="8.1 redux理解"></a>8.1 redux理解</h2><h3 id="8-1-1-学习文档"><a href="#8-1-1-学习文档" class="headerlink" title="8.1.1 学习文档"></a>8.1.1 学习文档</h3><p>1)     英文文档: <a href="https://redux.js.org/" target="_blank" rel="noopener">https://redux.js.org/</a></p>
<p>2)     中文文档: <a href="http://www.redux.org.cn/" target="_blank" rel="noopener">http://www.redux.org.cn/</a></p>
<p>3)     Github: <a href="https://github.com/reactjs/redux" target="_blank" rel="noopener">https://github.com/reactjs/redux</a></p>
<h3 id="8-1-2-redux是什么"><a href="#8-1-2-redux是什么" class="headerlink" title="8.1.2 redux是什么?"></a>8.1.2 redux是什么?</h3><p>1)     redux是一个独立专门用于做<strong>状态管理</strong>的<strong>JS库</strong>(不是react插件库)</p>
<p>2)     它可以用在react, angular, vue等项目中, 但基本与react配合使用</p>
<p>3)     作用: <strong>集中式管理</strong>react应用中多个组件共享的状态</p>
<h3 id="8-1-3-redux工作流程"><a href="#8-1-3-redux工作流程" class="headerlink" title="8.1.3 redux工作流程"></a>8.1.3 redux工作流程</h3><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200715104120743.png" alt="redux" class="lazyload"></p>
<h3 id="8-1-4-什么情况下需要使用redux"><a href="#8-1-4-什么情况下需要使用redux" class="headerlink" title="8.1.4 什么情况下需要使用redux"></a>8.1.4 什么情况下需要使用redux</h3><p>1)     总体原则: 能不用就不用, 如果不用比较吃力才考虑使用</p>
<p>2)     某个组件的状态，需要共享</p>
<p>3)     某个状态需要在任何地方都可以拿到</p>
<p>4)     一个组件需要改变全局状态</p>
<p>5)     一个组件需要改变另一个组件的状态</p>
<h2 id="8-2-redux的核心API"><a href="#8-2-redux的核心API" class="headerlink" title="8.2 redux的核心API"></a>8.2 redux的核心API</h2><h3 id="8-2-1-createStore"><a href="#8-2-1-createStore" class="headerlink" title="8.2.1 createStore()"></a>8.2.1 <code>createStore()</code></h3><p>1)     作用:  创建包含指定reducer的store对象</p>
<p>2)     编码:</p>
<pre><code>import {createStore} from &#39;redux&#39;
import counter from &#39;./reducers/counter&#39;
const store = createStore(counter)</code></pre><h3 id="8-2-2-store对象"><a href="#8-2-2-store对象" class="headerlink" title="8.2.2 store对象"></a>8.2.2 <code>store</code>对象</h3><p>1)     作用: </p>
<p>redux库最核心的管理对象</p>
<p>2)     它内部维护着:</p>
<ul>
<li><p><code>state</code></p>
</li>
<li><p><code>reducer</code></p>
</li>
</ul>
<p>3)     核心方法:</p>
<ul>
<li><p><code>getState()</code></p>
</li>
<li><p><code>dispatch(action)</code></p>
</li>
<li><p><code>subscribe(listener)</code></p>
</li>
</ul>
<p>4)     编码:</p>
<pre><code>store.getState()
store.dispatch({type:&#39;INCREMENT&#39;, number})
store.subscribe(render)</code></pre><h3 id="8-2-3-applyMiddleware"><a href="#8-2-3-applyMiddleware" class="headerlink" title="8.2.3 applyMiddleware()"></a>8.2.3 <code>applyMiddleware()</code></h3><p>1)     作用:</p>
<p>应用上基于redux的中间件(插件库)</p>
<p>2)     编码:</p>
<pre><code>import {createStore, applyMiddleware} from &#39;redux&#39;
import thunk from &#39;redux-thunk&#39; // redux异步中间件
const store = createStore(
 counter,
 applyMiddleware(thunk) // 应用上异步中间件
)</code></pre><h3 id="8-2-4-combineReducers"><a href="#8-2-4-combineReducers" class="headerlink" title="8.2.4 combineReducers()"></a>8.2.4 <code>combineReducers()</code></h3><p>1)     作用:</p>
<p>合并多个reducer函数</p>
<p>2)     编码:</p>
<pre><code>export default combineReducers({
 user,
 chatUser,
 chat
})</code></pre><h2 id="8-3-redux的三个核心概念"><a href="#8-3-redux的三个核心概念" class="headerlink" title="8.3 redux的三个核心概念"></a>8.3 redux的三个核心概念</h2><h3 id="8-3-1-action"><a href="#8-3-1-action" class="headerlink" title="8.3.1 action"></a>8.3.1 <code>action</code></h3><p>1)     标识要执行行为的对象</p>
<p>2)     包含2个方面的属性</p>
<p>a.     type: 标识属性, 值为字符串, 唯一, 必要属性</p>
<p>b.     xxx: 数据属性, 值类型任意, 可选属性</p>
<p>3)     例子:</p>
<pre><code>const action = {
    type: &#39;INCREMENT&#39;,
    data: 2
}</code></pre><p>4)     Action Creator(创建Action的工厂函数)</p>
<pre><code>const increment = (number) =&gt; ({type: &#39;INCREMENT&#39;, data: number})</code></pre><h3 id="8-3-2-reducer"><a href="#8-3-2-reducer" class="headerlink" title="8.3.2 reducer"></a>8.3.2 <code>reducer</code></h3><p>1)     根据老的state和action, 产生新的state的纯函数</p>
<p>2)     样例</p>
<pre><code>export default function counter(state = 0, action) {
  switch (action.type) {
     case &#39;INCREMENT&#39;:
        return state + action.data
     case &#39;DECREMENT&#39;:
        return state - action.data
     default:
        return state
  }
}</code></pre><p>3)     注意</p>
<p>a.     返回一个新的状态</p>
<p>b.     不要修改原来的状态</p>
<h3 id="8-3-3-store"><a href="#8-3-3-store" class="headerlink" title="8.3.3 store"></a>8.3.3 <code>store</code></h3><p>1)     将state,action与reducer联系在一起的对象</p>
<p>2)     如何得到此对象?</p>
<pre><code>import {createStore} from &#39;redux&#39;
import reducer from &#39;./reducers&#39;
const store = createStore(reducer)</code></pre><p>3)     此对象的功能?</p>
<ul>
<li><p>getState(): 得到state</p>
</li>
<li><p>dispatch(action): 分发action, 触发reducer调用, 产生新的state</p>
</li>
<li><p>subscribe(listener): 注册监听, 当产生了新的state时, 自动调用</p>
</li>
</ul>
<h2 id="8-4-使用redux编写应用"><a href="#8-4-使用redux编写应用" class="headerlink" title="8.4 使用redux编写应用"></a>8.4 使用redux编写应用</h2><h3 id="8-4-1-效果"><a href="#8-4-1-效果" class="headerlink" title="8.4.1 效果"></a>8.4.1 效果</h3><p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/redux.gif" alt="redux" class="lazyload"></p>
<p>使用react实现</p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200715112226383.png" alt="app.jsx" class="lazyload"></p>
<p><img data-sizes="auto" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200715112313127.png" alt="index.js" class="lazyload"></p>
<h3 id="8-4-2-下载依赖包"><a href="#8-4-2-下载依赖包" class="headerlink" title="8.4.2 下载依赖包"></a>8.4.2 下载依赖包</h3><p><code>npm install --save redux</code></p>
<h3 id="8-4-3-src-redux-action-types-js"><a href="#8-4-3-src-redux-action-types-js" class="headerlink" title="8.4.3 src/redux/action-types.js"></a>8.4.3 <code>src/redux/action-types.js</code></h3><pre><code class="javascript">/*
Action对象的type常量名称模块
 */
export const INCREMENT = &#39;increment&#39;
export const DECREMENT = &#39;decrement&#39;</code></pre>
<h3 id="8-4-4-src-redux-actions-js"><a href="#8-4-4-src-redux-actions-js" class="headerlink" title="8.4.4 src/redux/actions.js"></a>8.4.4 <code>src/redux/actions.js</code></h3><pre><code class="javascript">/*
action creator模块
 */
import {INCREMENT, DECREMENT} from &#39;./action-types&#39;

export const increment = number =&gt; ({type: INCREMENT, number})
export const decrement = number =&gt; ({type: DECREMENT, number})</code></pre>
<h3 id="8-4-5-src-redux-reducers-js"><a href="#8-4-5-src-redux-reducers-js" class="headerlink" title="8.4.5 src/redux/reducers.js"></a>8.4.5 <code>src/redux/reducers.js</code></h3><pre><code class="javascript">/*
包含n个reducer函数的模块
根据老的state和指定action, 处理返回一个新的state
 */
import {INCREMENT, DECREMENT} from &#39;./action-types&#39;

export function counter(state = 0, action) {
  console.log(&#39;counter&#39;, state, action)
  switch (action.type) {
    case INCREMENT:
      return state + action.number
    case DECREMENT:
      return state - action.number
    default:
      return state
  }
}</code></pre>
<h3 id="8-4-6-src-components-app-jsx"><a href="#8-4-6-src-components-app-jsx" class="headerlink" title="8.4.6 src/components/app.jsx"></a>8.4.6 <code>src/components/app.jsx</code></h3><pre><code class="jsx">/*
应用组件
 */
import React, {Component} from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;
import * as actions from &#39;../redux/actions&#39;
import { INCREMENT } from &#39;../redux/action-types&#39;

export default class App extends Component {

  static propTypes = {
    store: PropTypes.object.isRequired,
  }

  increment = () =&gt; {
    // 1.得到选择增加数量
    const number = this.refs.numSelect.value * 1
    // 2.调用store的方法更新状态
    this.props.store.dispatch(actions.increment(number))
  }

  decrement = () =&gt; {
    // 1.得到选择减小数量
    const number = this.refs.numSelect.value * 1
    // 2.调用store的方法更新状态
    this.props.store.dispatch(actions.decrement(number))
  }

  incrementIfOdd = () =&gt; {
    // 1.得到选择增加数量
    const number = this.refs.numSelect.value * 1
    // 2.得到原本的count状态
    let count = this.props.store.getState()
    // 判断，满足条件猜更新状态
    if (count % 2 === 1) {
      // 调用store的方法更新状态
      this.props.store.dispatch(actions.increment(number))
    }
  }

  incrementAsync = () =&gt; {
    // 1.得到选择增加数量
    const number = this.refs.numSelect.value * 1
    // 2.启动延时定时器，模拟异步
    setTimeout(() =&gt; {
      // 3.调用store的方法更新状态
      this.props.store.dispatch(actions.increment(number))
    }, 1000)
  }

  render() {
    const count = this.props.store.getState()
    return (
      &lt;div&gt;
        &lt;p&gt;
          click {count} times {&#39; &#39;}
        &lt;/p&gt;
        &lt;select ref=&quot;numSelect&quot;&gt;
          &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;
          &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;
          &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;
        &lt;/select&gt;{&#39; &#39;}
        &lt;button onClick={this.increment}&gt;+&lt;/button&gt;
        {&#39; &#39;}
        &lt;button onClick={this.decrement}&gt;-&lt;/button&gt;
        {&#39; &#39;}
        &lt;button onClick={this.incrementIfOdd}&gt;increment if odd&lt;/button&gt;
        {&#39; &#39;}
        &lt;button onClick={this.incrementAsync}&gt;increment async&lt;/button&gt;
      &lt;/div&gt;
    )
  }
}</code></pre>
<h3 id="8-4-7-src-index-js"><a href="#8-4-7-src-index-js" class="headerlink" title="8.4.7 src/index.js"></a>8.4.7 <code>src/index.js</code></h3><pre><code class="javascript">import React from &#39;react&#39;
import ReactDOM from &#39;react-dom&#39;
import {createStore} from &#39;redux&#39;

import App from &#39;./components/app&#39;
import {counter} from &#39;./redux/reducers&#39;

// 根据counter函数创建store对象
const store = createStore(counter) // 内部会第一次调用reduer函数，得到初始state

// 定义渲染根组件标签的函数
const render = () =&gt; {
  ReactDOM.render(
    &lt;App store={store}/&gt;,
    document.getElementById(&#39;root&#39;)
  )
}
// 初始化渲染
render()

// 注册(订阅)监听, 一旦状态发生改变, 自动重新渲染
store.subscribe(render)</code></pre>
<p>也可以把index.js中store提取出来</p>
<ul>
<li><code>src/redux/store.js</code></li>
</ul>
<pre><code class="javascript">import {createStore} from &#39;redux&#39;
import {counter} from &#39;./reducers&#39;
// 根据counter函数创建store对象
const store = createStore(counter)  // // 内部会第一次调用reduer函数，得到初始state

export default store</code></pre>
<ul>
<li><code>src/index.js</code></li>
</ul>
<pre><code class="javascript">import React from &#39;react&#39;
import ReactDOM from &#39;react-dom&#39;

import App from &#39;./components/app&#39;
import store from &#39;./redux/store&#39;

// 定义渲染根组件标签的函数
const render = () =&gt; {
  ReactDOM.render(
    &lt;App store={store}/&gt;,
    document.getElementById(&#39;root&#39;)
  )
}
// 初始化渲染
render()

// 注册(订阅)监听, 一旦状态发生改变, 自动重新渲染
store.subscribe(render)</code></pre>
<h3 id="8-4-8-问题"><a href="#8-4-8-问题" class="headerlink" title="8.4.8 问题"></a>8.4.8 问题</h3><p>1)     redux与react组件的代码耦合度太高(大多数地方用到store)</p>
<p>2)     编码不够简洁</p>
<h2 id="8-5-react-redux"><a href="#8-5-react-redux" class="headerlink" title="8.5 react-redux"></a>8.5 react-redux</h2><h3 id="8-5-1-理解"><a href="#8-5-1-理解" class="headerlink" title="8.5.1 理解"></a>8.5.1 理解</h3><p>1)     一个<strong>react插件库</strong></p>
<p>2)     专门用来简化react应用中使用redux</p>
<h3 id="8-5-2-React-Redux将所有组件分成两大类"><a href="#8-5-2-React-Redux将所有组件分成两大类" class="headerlink" title="8.5.2 React-Redux将所有组件分成两大类"></a>8.5.2 React-Redux将所有组件分成两大类</h3><p>1)     UI组件</p>
<p>​    a.     只负责 UI 的呈现，不带有任何业务逻辑</p>
<p>​    b.     通过props接收数据(一般数据和函数)</p>
<p>​    c.     不使用任何 Redux 的 API</p>
<p>​    d.     一般保存在<code>components</code>文件夹下</p>
<p>2)     容器组件</p>
<p>​    a.     负责管理数据和业务逻辑，不负责UI的呈现</p>
<p>​    b.     使用 Redux 的 API</p>
<p>​    c.     一般保存在<code>containers</code>文件夹下</p>
<h3 id="8-5-3-相关API"><a href="#8-5-3-相关API" class="headerlink" title="8.5.3 相关API"></a>8.5.3 相关API</h3><p>1)     <code>Provider</code></p>
<p>让所有组件都可以得到state数据</p>
<pre><code>&lt;Provider store={store}&gt;
   &lt;App /&gt;
&lt;/Provider&gt;</code></pre><p>2)     <code>connect()</code></p>
<p>用于包装 UI 组件生成容器组件</p>
<pre><code>import { connect } from &#39;react-redux&#39;
connect(
   mapStateToprops,
   mapDispatchToProps
)(Counter)</code></pre><p>3)     <code>mapStateToprops()</code></p>
<p>将外部的数据（即state对象）转换为UI组件的标签属性</p>
<pre><code>const mapStateToprops = function (state) {
  return {
   value: state
  }
}</code></pre><p>4)     <code>mapDispatchToProps()</code></p>
<p>将分发action的函数转换为UI组件的标签属性</p>
<p>简洁语法可以直接指定为actions对象或包含多个action方法的对象</p>
<h3 id="8-5-4-使用react-redux"><a href="#8-5-4-使用react-redux" class="headerlink" title="8.5.4 使用react-redux"></a>8.5.4 使用react-redux</h3><p>1)     下载依赖包</p>
<p><code>npm install --save react-redux</code></p>
<p>2)     <code>redux/action-types.js</code></p>
<p>不变</p>
<p>3)     <code>redux/actions.js</code></p>
<p>不变</p>
<p>4)     <code>redux/reducers.js</code></p>
<p>不变</p>
<p>5)     <code>components/counter.jsx</code></p>
<pre><code class="jsx">/*
UI组件: 不包含任何redux API
 */
import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;

export default class Counter extends React.Component {

  static propTypes = {
    count: PropTypes.number.isRequired,
    increment: PropTypes.func.isRequired,
    decrement: PropTypes.func.isRequired
  }

  increment = () =&gt; {
    const number = this.refs.numSelect.value * 1
    this.props.increment(number)
  }

  decrement = () =&gt; {
    const number = this.refs.numSelect.value * 1
    this.props.decrement(number)
  }

  incrementIfOdd = () =&gt; {
    const number = this.refs.numSelect.value * 1
    let count = this.props.count
    if (count % 2 === 1) {
      this.props.increment(number)
    }
  }

  incrementAsync = () =&gt; {
    const number = this.refs.numSelect.value * 1
    setTimeout(() =&gt; {
      this.props.increment(number)
    }, 1000)
  }

  render() {
    return (
      &lt;div&gt;
        &lt;p&gt;
          click {this.props.count} times {&#39; &#39;}
        &lt;/p&gt;
        &lt;select ref=&quot;numSelect&quot;&gt;
          &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;
          &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;
          &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;
        &lt;/select&gt;{&#39; &#39;}
        &lt;button onClick={this.increment}&gt;+&lt;/button&gt;
        {&#39; &#39;}
        &lt;button onClick={this.decrement}&gt;-&lt;/button&gt;
        {&#39; &#39;}
        &lt;button onClick={this.incrementIfOdd}&gt;increment if odd&lt;/button&gt;
        {&#39; &#39;}
        &lt;button onClick={this.incrementAsync}&gt;increment async&lt;/button&gt;
      &lt;/div&gt;
    )
  }
}</code></pre>
<p>6)     <code>containters/app.jsx</code></p>
<pre><code class="jsx">/*
包含Counter组件的容器组件
 */
import React from &#39;react&#39;
// 引入连接函数
import {connect} from &#39;react-redux&#39;
// 引入action函数
import {increment, decrement} from &#39;../redux/actions&#39;

import Counter from &#39;../components/counter&#39;

// 向外暴露连接App组件的包装组件
export default connect(
  state =&gt; ({count: state}),
  {increment, decrement}
)(Counter)</code></pre>
<p>7)     <code>store.js</code></p>
<p>不变</p>
<p>8)     <code>index.js</code></p>
<pre><code class="javascript">import React from &#39;react&#39;
import ReactDOM from &#39;react-dom&#39;
import {Provider} from &#39;react-redux&#39;

import App from &#39;./containers/app&#39;
import store from &#39;./redux/store&#39;

// 定义渲染根组件标签的函数
ReactDOM.render(
  (
    &lt;Provider store={store}&gt;
      &lt;App/&gt;
    &lt;/Provider&gt;
  ),
  document.getElementById(&#39;root&#39;)
)</code></pre>
<h3 id="8-5-5-问题"><a href="#8-5-5-问题" class="headerlink" title="8.5.5 问题"></a>8.5.5 问题</h3><p>1)    redux默认是不能进行异步处理的, （前面的都是react实现的）</p>
<p>2)    应用中又需要在redux中执行异步任务(ajax, 定时器)</p>
<h2 id="8-6-redux异步编程"><a href="#8-6-redux异步编程" class="headerlink" title="8.6 redux异步编程"></a>8.6 redux异步编程</h2><h3 id="8-6-1-下载redux插件-异步中间件"><a href="#8-6-1-下载redux插件-异步中间件" class="headerlink" title="8.6.1 下载redux插件(异步中间件)"></a>8.6.1 下载redux插件(异步中间件)</h3><p><code>npm install --save redux-thunk</code></p>
<h3 id="8-6-2-redux-store-js"><a href="#8-6-2-redux-store-js" class="headerlink" title="8.6.2 redux/store.js"></a>8.6.2 <code>redux/store.js</code></h3><pre><code class="javascript">import React from &#39;react&#39;
import {createStore, applyMiddleware} from &#39;redux&#39;
import thunk from &#39;redux-thunk&#39;
import {composeWithDevTools} from &#39;redux-devtools-extension&#39;

import reducers from &#39;./reducers&#39;

// 根据counter函数创建store对象
export default createStore(
  reducers,
  applyMiddleware(thunk) // 应用上异步中间件
)</code></pre>
<h3 id="8-6-3-index-js"><a href="#8-6-3-index-js" class="headerlink" title="8.6.3 index.js"></a>8.6.3 <code>index.js</code></h3><pre><code class="javascript">import React from &#39;react&#39;
import ReactDOM from &#39;react-dom&#39;
import {Provider} from &#39;react-redux&#39;

import App from &#39;./containers/app&#39;
import store from &#39;./redux/store&#39;

// 定义渲染根组件标签的函数
ReactDOM.render(
  (
    &lt;Provider store={store}&gt;
      &lt;App/&gt;
    &lt;/Provider&gt;
  ),
  document.getElementById(&#39;root&#39;)
)</code></pre>
<h3 id="8-6-4-redux-actions-js"><a href="#8-6-4-redux-actions-js" class="headerlink" title="8.6.4 redux/actions.js"></a>8.6.4 <code>redux/actions.js</code></h3><pre><code class="jsx">/*
action creator模块
 */
import {
  INCREMENT,
  DECREMENT
} from &#39;./action-types&#39;

export const increment = number =&gt; ({type: INCREMENT, number})

export const decrement = number =&gt; ({type: DECREMENT, number})

// 异步action creator(返回一个函数)
export const incrementAsync = number =&gt; {
  return dispatch =&gt; { // 要在这返回一个函数，得在store中应用上异步中间件
    // 异步的代码
    setTimeout(() =&gt; {
      // 1s之后才分发一个增加的action
      dispatch(increment(number))
    }, 1000)
  }
}</code></pre>
<p> 同步的action都返回一个对象</p>
<p>异步的action返回的是一个函数</p>
<h3 id="8-6-5-components-counter-jsx"><a href="#8-6-5-components-counter-jsx" class="headerlink" title="8.6.5 components/counter.jsx"></a>8.6.5 <code>components/counter.jsx</code></h3><pre><code class="jsx">/*
包含Counter组件的容器组件
 */
import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;

export default class Counter extends React.Component {

  static propTypes = {
    count: PropTypes.number.isRequired,
    increment: PropTypes.func.isRequired,
    decrement: PropTypes.func.isRequired
  }

  increment = () =&gt; {
    const number = this.refs.numSelect.value*1
    this.props.increment(number)
  }

  decrement = () =&gt; {
    const number = this.refs.numSelect.value*1
    this.props.decrement(number)
  }

  incrementIfOdd = () =&gt; {
    const number = this.refs.numSelect.value*1
    let count = this.props.count
    if(count%2===1) {
      this.props.increment(number)
    }
  }

  // Async
  incrementAsync = () =&gt; {
    const number = this.refs.numSelect.value*1
    this.props.incrementAsync(number)
  }

  render () {
    return (
      &lt;div&gt;
        &lt;p&gt;
          click {this.props.count} times {&#39; &#39;}
        &lt;/p&gt;
        &lt;select ref=&quot;numSelect&quot;&gt;
          &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;
          &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;
          &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;
        &lt;/select&gt;{&#39; &#39;}
        &lt;button onClick={this.increment}&gt;+&lt;/button&gt;{&#39; &#39;}
        &lt;button onClick={this.decrement}&gt;-&lt;/button&gt;{&#39; &#39;}
        &lt;button onClick={this.incrementIfOdd}&gt;increment if odd&lt;/button&gt;{&#39; &#39;}
        &lt;button onClick={this.incrementAsync}&gt;increment async&lt;/button&gt;
      &lt;/div&gt;
    )
  }
}</code></pre>
<h3 id="8-6-6-containers-app-jsx"><a href="#8-6-6-containers-app-jsx" class="headerlink" title="8.6.6 containers/app.jsx"></a>8.6.6 <code>containers/app.jsx</code></h3><pre><code class="jsx">/*
包含Counter组件的容器组件
 */
import React from &#39;react&#39;
// 引入连接函数
import {connect} from &#39;react-redux&#39;
// 引入action函数
import {increment, decrement, incrementAsync} from &#39;../redux/actions&#39;
import Counter from &#39;../components/counter&#39;

// 向外暴露连接App组件的包装组件
export default connect(
  state =&gt; ({count: state.counter}),
  {increment, decrement, incrementAsync}
)(Counter)
</code></pre>
<p><code>redux/action-types.js</code></p>
<pre><code class="javascript">export const INCREMENT = &#39;increment&#39;
export const DECREMENT = &#39;decrement&#39;</code></pre>
<h2 id="8-7-使用上redux调试工具"><a href="#8-7-使用上redux调试工具" class="headerlink" title="8.7 使用上redux调试工具"></a>8.7 使用上redux调试工具</h2><h3 id="8-7-1-安装chrome浏览器插件"><a href="#8-7-1-安装chrome浏览器插件" class="headerlink" title="8.7.1 安装chrome浏览器插件"></a>8.7.1 安装chrome浏览器插件</h3><p><a href="https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd?utm_source=chrome-ntp-icon" target="_blank" rel="noopener">Redux DevTools</a></p>
<h3 id="8-7-2-下载工具依赖包"><a href="#8-7-2-下载工具依赖包" class="headerlink" title="8.7.2 下载工具依赖包"></a>8.7.2 下载工具依赖包</h3><pre><code>npm install --save-dev redux-devtools-extension</code></pre><h3 id="8-7-3-编码"><a href="#8-7-3-编码" class="headerlink" title="8.7.3 编码"></a>8.7.3 编码</h3><pre><code class="javascript">import { composeWithDevTools } from &#39;redux-devtools-extension&#39;
const store = createStore(  counter,  composeWithDevTools(applyMiddleware(thunk))
)</code></pre>
<h2 id="8-8-Redux版评论"><a href="#8-8-Redux版评论" class="headerlink" title="8.8 Redux版评论"></a>8.8 Redux版评论</h2><h3 id="8-8-1-需求"><a href="#8-8-1-需求" class="headerlink" title="8.8.1 需求"></a>8.8.1 需求</h3><p>使用react_redux和中间件实现异步评论功能</p>
<h3 id="8-8-2-安装"><a href="#8-8-2-安装" class="headerlink" title="8.8.2 安装"></a>8.8.2 安装</h3><pre><code class="bash">……
npm install --save react-redux
npm install --save redux-thunk
npm install --save-dev redux-devtools-extension</code></pre>
<h3 id="8-8-3-目录结构"><a href="#8-8-3-目录结构" class="headerlink" title="8.8.3 目录结构"></a>8.8.3 目录结构</h3><blockquote>
<ul>
<li>REACT_REDUX<ul>
<li>public<ul>
<li>css<ul>
<li>bootstrap.css</li>
</ul>
</li>
<li>index.html</li>
</ul>
</li>
<li>src<ul>
<li>components<ul>
<li>app<ul>
<li>app.jsx</li>
</ul>
</li>
<li>comment-add<ul>
<li>comment-add.jsx</li>
</ul>
</li>
<li>comment-item<ul>
<li>comment-item.jsx</li>
<li>comment-item.css</li>
</ul>
</li>
<li>comment-list<ul>
<li>comment-list.jsx</li>
<li>comment-list.css</li>
</ul>
</li>
</ul>
</li>
<li>redux<ul>
<li>action-types.js</li>
<li>actions.js</li>
<li>reducers.js</li>
<li>store.js</li>
</ul>
</li>
<li>index.js</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="8-8-4-文件内容"><a href="#8-8-4-文件内容" class="headerlink" title="8.8.4 文件内容"></a>8.8.4 文件内容</h3><ul>
<li><code>public/index.html</code></li>
</ul>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;&gt;
    &lt;meta name=&quot;theme-color&quot; content=&quot;#000000&quot;&gt;
    &lt;link rel=&quot;manifest&quot; href=&quot;%PUBLIC_URL%/manifest.json&quot;&gt;
    &lt;link rel=&quot;shortcut icon&quot; href=&quot;%PUBLIC_URL%/favicon.ico&quot;&gt;
    &lt;title&gt;React App&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/bootstrap.css&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;noscript&gt;
      You need to enable JavaScript to run this app.
    &lt;/noscript&gt;
    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
<ul>
<li><code>src/index.js</code></li>
</ul>
<pre><code class="javascript">import React from &#39;react&#39;
import ReactDOM from &#39;react-dom&#39;
import {Provider} from &#39;react-redux&#39;

import App from &#39;./components/app/app&#39;
import store from &#39;./redux/store&#39;

// 定义渲染根组件标签的函数
ReactDOM.render(
  (
    &lt;Provider store={store}&gt;
      &lt;App/&gt;
    &lt;/Provider&gt;
  ),
  document.getElementById(&#39;root&#39;)
)
</code></pre>
<ul>
<li><code>src/componets/app/app.jsx</code></li>
</ul>
<pre><code class="jsx">import React from &#39;react&#39;
import {connect} from &#39;react-redux&#39;
import CommentAdd from &#39;../comment-add/comment-add&#39;
import CommentList from &#39;../comment-list/comment-list&#39;
import {getComments} from &#39;../../redux/actions&#39;

class App extends React.Component {

  componentDidMount() {
    //模拟异步获取数据
    this.props.getComments()
  }

  render() {
    return (
      &lt;div&gt;
        &lt;header className=&quot;site-header jumbotron&quot;&gt;
          &lt;div className=&quot;container&quot;&gt;
            &lt;div className=&quot;row&quot;&gt;
              &lt;div className=&quot;col-xs-12&quot;&gt;
                &lt;h1&gt;请发表对React的评论&lt;/h1&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/header&gt;
        &lt;div className=&quot;container&quot;&gt;
          &lt;CommentAdd/&gt;
          &lt;CommentList/&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    )
  }
}

export default connect(
  null,
  {getComments}
)(App)</code></pre>
<ul>
<li><code>src/componets/comment-add/comment-add.jsx</code><pre><code class="jsx">import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;
import {connect} from &#39;react-redux&#39;
import {addComment} from &#39;../../redux/actions&#39;
class CommentAdd extends React.Component {
constructor (props) {
  super(props)
  this.state = {
    username: &#39;&#39;,
    content: &#39;&#39;
  }
  this.addComment = this.addComment.bind(this)
  this.changeUsername = this.changeUsername.bind(this)
  this.changeContent = this.changeContent.bind(this)
}
addComment () {
  // 根据输入的数据创建评论对象
  let { username, content } = this.state
  let comment = { username, content }
  // 添加到comments中, 更新state
  this.props.addComment(comment)
  // 清除输入的数据
  this.setState({
    username: &#39;&#39;,
    content: &#39;&#39;
  })
}
changeUsername (event) {
  this.setState({
    username: event.target.value
  })
}
changeContent (event) {
  this.setState({
    content: event.target.value
  })
}
render () {
  return (
    &lt;div className=&quot;col-md-4&quot;&gt;
      &lt;form className=&quot;form-horizontal&quot;&gt;
        &lt;div className=&quot;form-group&quot;&gt;
          &lt;label&gt;用户名&lt;/label&gt;
          &lt;input type=&quot;text&quot; className=&quot;form-control&quot; placeholder=&quot;用户名&quot;
                 value={this.state.username} onChange={this.changeUsername}/&gt;
        &lt;/div&gt;
        &lt;div className=&quot;form-group&quot;&gt;
          &lt;label&gt;评论内容&lt;/label&gt;
          &lt;textarea className=&quot;form-control&quot; rows=&quot;6&quot; placeholder=&quot;评论内容&quot;
                    value={this.state.content} onChange={this.changeContent}&gt;&lt;/textarea&gt;
        &lt;/div&gt;
        &lt;div className=&quot;form-group&quot;&gt;
          &lt;div className=&quot;col-sm-offset-2 col-sm-10&quot;&gt;
            &lt;button type=&quot;button&quot; className=&quot;btn btn-default pull-right&quot; onClick={this.addComment}&gt;提交&lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/form&gt;
    &lt;/div&gt;
  )
}
}
CommentAdd.propTypes = {
addComment: PropTypes.func.isRequired
}
export default connect(
null,
{addComment}
)(CommentAdd)</code></pre>
</li>
</ul>
<ul>
<li><code>src/componets/comment-item/comment-item.jsx</code><pre><code class="jsx">import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;
import {connect} from &#39;react-redux&#39;
import &#39;./commentItem.css&#39;
import {deleteComment} from &#39;../../redux/actions&#39;
class CommentItem extends React.Component {
constructor(props) {
  super(props)
}
deleteComment = () =&gt; {
  let username = this.props.comment.username
  if (window.confirm(`确定删除${username}的评论吗?`)) {
    this.props.deleteComment(this.props.index)
  }
}
render() {
  let comment = this.props.comment
  return (
    &lt;li className=&quot;list-group-item&quot;&gt;
      &lt;div className=&quot;handle&quot;&gt;
        &lt;a href=&quot;javascript:&quot; onClick={this.deleteComment}&gt;删除&lt;/a&gt;
      &lt;/div&gt;
      &lt;p className=&quot;user&quot;&gt;&lt;span&gt;{comment.username}&lt;/span&gt;&lt;span&gt;说:&lt;/span&gt;&lt;/p&gt;
      &lt;p className=&quot;centence&quot;&gt;{comment.content}&lt;/p&gt;
    &lt;/li&gt;
  )
}
}
CommentItem.propTypes = {
comment: PropTypes.object.isRequired,
index: PropTypes.number.isRequired,
deleteComment: PropTypes.func.isRequired
}
export default connect(
null,
{deleteComment}
)(CommentItem)
</code></pre>
</li>
</ul>
<pre><code>






- `src/componets/comment-item/comment-item.css`
```css
li {
  transition: .5s;
  overflow: hidden;
}
.handle {
  width: 40px;
  border: 1px solid #ccc;
  background: #fff;
  position: absolute;
  right: 10px;
  top: 1px;
  text-align: center;
}
.handle a {
  display: block;
  text-decoration: none;
}
.list-group-item .centence {
  padding: 0px 50px;
}
.user {
  font-size: 22px;
}</code></pre><ul>
<li><code>src/componets/comment-list/comment-list.jsx</code><pre><code class="jsx">import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;
import {connect} from &#39;react-redux&#39;
import CommentItem from &#39;../comment-item/comment-item&#39;
import &#39;./commentList.css&#39;
class CommentList extends React.Component {
render () {
  let comments = this.props.comments
  let display = comments.length &gt; 0 ? &#39;none&#39; : &#39;block&#39;
  return (
    &lt;div className=&quot;col-md-8&quot;&gt;
      &lt;h3 className=&quot;reply&quot;&gt;评论回复：&lt;/h3&gt;
      &lt;h2 style=双大括号 display: display 双大括号&gt;暂无评论，点击左侧添加评论！！！&lt;/h2&gt;
      &lt;ul className=&quot;list-group&quot;&gt;
        {
          comments.map((comment, index) =&gt; {
            console.log(comment)
            return &lt;CommentItem comment={comment} key={index} index={index}/&gt;
          })
        }
      &lt;/ul&gt;
    &lt;/div&gt;
  )
}
}
CommentList.propTypes = {
comments: PropTypes.array.isRequired,
}
export default connect(
state =&gt; ({comments: state.comments})
)(CommentList)</code></pre>
</li>
</ul>
<ul>
<li><code>src/componets/comment-list/comment-list.css</code><pre><code class="css">.reply {
margin-top: 0px;
}</code></pre>
</li>
</ul>
<ul>
<li><code>redux/action-types.js</code><pre><code class="javascript">export const ADD_COMMENT = &#39;ADD_COMMENT&#39;
export const DELETE_COMMENT = &#39;DELETE_COMMENT&#39;
export const RECEIVE_COMMENTS = &#39;RECEIVE_COMMENTS&#39;</code></pre>
</li>
</ul>
<ul>
<li><code>redux/actions.js</code><pre><code class="javascript">import {
ADD_COMMENT,
DELETE_COMMENT,
RECEIVE_COMMENTS
} from &#39;./action-types&#39;
export const addComment = (comment) =&gt; ({type: ADD_COMMENT, data: comment})
export const deleteComment = (index) =&gt; ({type: DELETE_COMMENT, data: index})
const receiveComments = (comments) =&gt; ({type: RECEIVE_COMMENTS, data: comments})
export const getComments = () =&gt; {
return dispatch =&gt; {
  setTimeout(() =&gt; {
    const comments = [
      {
        username: &quot;Tom&quot;,
        content: &quot;ReactJS好难啊!&quot;,
        id: Date.now()
      },
      {
        username: &quot;JACK&quot;,
        content: &quot;ReactJS还不错!&quot;,
        id: Date.now() + 1
      }
    ]
    dispatch(receiveComments(comments))
  }, 1000)
}
}</code></pre>
</li>
</ul>
<ul>
<li><code>redux/reducers.js</code></li>
</ul>
<pre><code class="javascript">import {combineReducers} from &#39;redux&#39;
import {
  ADD_COMMENT,
  DELETE_COMMENT,
  RECEIVE_COMMENTS
} from &#39;./action-types&#39;
const initComments = []
function comments(state = initComments, action) {
  switch (action.type) {
    case ADD_COMMENT:
      return [...state, action.data]
    case DELETE_COMMENT:
      return state.filter((c, index) =&gt; index !== action.data)
    case RECEIVE_COMMENTS:
      return action.data
    default:
      return state
  }
}
export default combineReducers({
  comments
})</code></pre>
<ul>
<li><code>redux/store.js</code></li>
</ul>
<pre><code class="javascript">import React from &#39;react&#39;
import {createStore, applyMiddleware} from &#39;redux&#39;
import thunk from &#39;redux-thunk&#39;
import {composeWithDevTools} from &#39;redux-devtools-extension&#39;
import reducers from &#39;./reducers&#39;
// 根据counter函数创建store对象
export default createStore(
  reducers,
  composeWithDevTools(applyMiddleware(thunk)) // 应用上异步中间件
)</code></pre>
<h2 id="8-9-相关重要知识-纯函数和高阶函数"><a href="#8-9-相关重要知识-纯函数和高阶函数" class="headerlink" title="8.9 相关重要知识: 纯函数和高阶函数"></a>8.9 相关重要知识: 纯函数和高阶函数</h2><h3 id="8-9-1-纯函数"><a href="#8-9-1-纯函数" class="headerlink" title="8.9.1 纯函数"></a>8.9.1 纯函数</h3><p>1)     一类特别的函数: 只要是同样的输入，必定得到同样的输出</p>
<p>2)    必须遵守以下一些约束 </p>
<p>a.    不得改写参数</p>
<p>b.    不能调用系统 I/O 的API</p>
<p>c.    能调用Date.now()或者Math.random()等不纯的方法 </p>
<p>3)     reducer函数必须是一个纯函数</p>
<h3 id="8-9-2-高阶函数"><a href="#8-9-2-高阶函数" class="headerlink" title="8.9.2 高阶函数"></a>8.9.2 高阶函数</h3><p>4)     理解: 一类特别的函数</p>
<p>a.     情况1: 参数是函数</p>
<p>b.     情况2: 返回是函数</p>
<p>5)         常见的高阶函数: </p>
<p>a.     定时器设置函数</p>
<p>b.     数组的map()/filter()/reduce()/find()/bind()</p>
<p>c.     react-redux中的connect函数</p>
<p>6)         作用: </p>
<p>​     能实现更加动态, 更加可扩展的功能</p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">
  </article>

  <div class="nexmoe-post-meta">
    
        <a class="nexmoefont icon-appstore-fill -link" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a><a class="nexmoefont icon-appstore-fill -link" href="/categories/%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/">前端</a>
    
    
        <a class="nexmoefont icon-tag-fill -link" href="/tags/React/" rel="tag">React</a> <a class="nexmoefont icon-tag-fill -link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a> <a class="nexmoefont icon-tag-fill -link" href="/tags/%E6%A1%86%E6%9E%B6/" rel="tag">框架</a>
    
</div>

  <div class="nexmoe-post-footer">
    <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
      <!-- 
  <div class="nexmoe-post-copyright">
    <strong>本文作者：</strong>Luwang<br>
    <strong>本文链接：</strong><a href="https://blog.wallleap.cn/2020/07/12/React/" title="https:&#x2F;&#x2F;blog.wallleap.cn&#x2F;2020&#x2F;07&#x2F;12&#x2F;React&#x2F;" target="_blank" rel="noopener">https:&#x2F;&#x2F;blog.wallleap.cn&#x2F;2020&#x2F;07&#x2F;12&#x2F;React&#x2F;</a><br>
    
      <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可
    
  </div>
 -->

  <div class="my_post_copyright">
    <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script> 
    <script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <p><span>本文标题:</span>React全家桶(技术栈)学习笔记</a></p>
    <p><span>文章作者:</span><a href="/" title="访问 {{ theme.author }} 的个人博客">luwang</a></p>
    <p><span>发布时间:</span>2020年07月12日 - 16:07</p>
    <p><span>最后更新:</span>2020年07月15日 - 18:07</p>
    <p><span>原始链接:</span><a href="/2020/07/12/React/" title="React全家桶(技术栈)学习笔记">https://blog.wallleap.cn/2020/07/12/React/</a>
    <span class="copy-path"  title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="https://blog.wallleap.cn/2020/07/12/React/"  aria-label="复制成功！"></i></span>
    </p>
    <p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p>  
  </div>
  <script> 
      var clipboard = new Clipboard('.fa-clipboard');
        $(".fa-clipboard").click(function(){
        clipboard.on('success', function(){
          swal({   
            title: "",   
            text: '复制成功',
            icon: "success", 
            showConfirmButton: true
            });
          });
      });  
    </script>
  

  
    
    <!-- <div style="text-align:center;color: #ccc;font-size:14px;margin-top: 46px;">-------------喜欢就分享<i class="fa fa-paw"></i>疼爱就打赏-------------</div>
    <div style="text-align:center; width: 100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div>
    <footer class="post-footer">
        <div class="post-lincenses"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a></div>
        <div class="post-tags">
        </div>
        <div class="post-share">
          <div class="social-share sharehidden share-component"></div>
          <i class="iconfont show-share icon-forward"></i>
        </div>
      </footer>.entry-footer -->
    
      <style>
/* .list, .list li, .list-left li {
	list-style: none;
	list-style-type: none;
	margin: 0px;
	padding: 0px;
} 
.pos-f {
	position: fixed;
} 
*/

.left-100 {
	width: 100%;
    height: 100%;
    float: left;
}
.blur {
	-webkit-filter: blur(3px);
	filter: blur(3px);
}
.tr3, .list li {
	transition: all .3s;
}
.hidden {
    display: none;
}
.click-cursor, .icon-donate, .list li {
    cursor: pointer;
}
#drinks-box .opacity-show {
    opacity: 1;
}
#drinks-box {
    width: 320px;
    height: 240px;
    margin: 0 auto;
	text-align: center;
	/* left: calc(50% - 160px);
	top: calc(50% - 120px);
    position: fixed; */
    position: relative;
    top:0;
    left: 0;
}
#drinks-icons {
    background: no-repeat center center url(https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/images/donate/drinks/text.png);
}
.drinks-button>div {
    position: absolute;
    top: 0;
    left: 0;
	transition: all 0.3s;
	transform-style: preserve-3d;
    transform-origin: center center;
}
.icon-donate {
    width: 64px;
    height: 64px;
    position: absolute;
	left: calc(50% - 32px);
	top: calc(50% - 32px);
}
.icon-donate img {
    max-width: 64px;
    max-height: 64px;
}
#drinks-button-box {
    display: none;
    opacity: 0;
    transform: scale(1.3,1.3);
}
#drinks-button-bg {
    position: absolute;
    top: 70px;
    left: 0;
    height: 100px;
    opacity: 0;
}
#donate-buttons {
    position: absolute;
    overflow: hidden;
    top: calc(50% - 14px);
    left: 20px;
    height: 28px;
    border-radius: 6px;
    background-color: #ff006e;
    box-shadow: 0 10px 20px 1px rgba(255, 0, 110, 0.5);
}
#donate-buttons a, #github-box a {
    display: block;
}
li[id$="_donate"] {
    position: relative;
    float: left;
    width: 70px;
    height: 28px;
    line-height: 600px;
    overflow: hidden;
	cursor: pointer;
	background: no-repeat center center;
    background-size: 45px;
    text-align: center;
}
li[id$="_donate"]::after {
    content: "";
    position: absolute;
    top: -5px;
    left: calc(50% - 5px);
    height: 0;
    width: 0;
    opacity: 0;
	border: 5px solid #fff;
	border-color: #fff transparent transparent transparent;
    transition: all .3s;
}
li[id$="_donate"]:hover::after {
    opacity: 1;
    top: 0px;
}
#github-box {
    width: 32px;
    height: 32px;
    position: absolute;
    top: calc(50% - 16px);
    background: no-repeat center center url(https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/images/donate/drinks/github.svg);
    background-size: contain;
    right: 72px;
    line-height: 600px;
    overflow: hidden;
    transform: rotatez(20deg );
    opacity: 0;
    transition: all .3s ease-out;
}
#drinks-button-box:hover #github-box, #drinks-button-box.Mobile #github-box {
    top: calc(50% - 40px);
    right: 64px;
    transform: rotatez(5deg );
    opacity: 0.8;
}
#paypal_donate {
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjIsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iUGF5UGFsIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDUxMiAxNDUiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiAxNDU7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsOiNGRkZGRkY7fQ0KPC9zdHlsZT4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00OS41LDcyLjljLTMuNywwLTcuMywwLTExLDBjLTEuOCwwLTMuMSwwLjctMy42LDIuNmMtMS4yLDQuMi02LjMsMjIuOS03LjYsMjguMWMtMC43LDIuNy0yLjEsMy44LTQuOSwzLjgNCgljLTUuNywwLTExLjUsMC0xNy4yLDBjLTMuMSwwLTQuNC0xLjQtMy45LTQuNGMwLjQtMi42LDE1LjQtNjcuMiwyMi4zLTk2LjlDMjQuNiwyLjMsMjYuMiwxLDMwLjIsMWMxMC43LDAsNDMuNCwwLjIsNDkuMSwwLjINCglDOTMuNywxLjMsMTA1LjUsMTIuNywxMDYsMjdjMC4zLDkuNi0xLjUsMTguNy02LjksMjYuOGMtNS4zLDcuOS0xMi44LDEyLjgtMjEuNywxNS43QzY4LjMsNzIuNSw1OSw3My40LDQ5LjUsNzIuOXogTTUwLjIsNTMNCgljMi42LTAuMiw0LjctMC4zLDYuOC0wLjVjNS4zLTAuNiwxMC40LTIsMTQuOC01LjNjNS0zLjgsNi43LTksNS43LTE1LjFjLTAuOS01LjYtNC42LTguNi05LjctMTAuM0M2Mi42LDIwLDU3LjIsMjAsNTEuOCwyMC40DQoJYy0yLjcsMC4yLTQuNSwxLjctNS4yLDQuNWMtMC42LDIuNi0xLjUsNS4yLTIuMSw3LjhjLTEuMSw0LjgtMi4yLDkuNy0zLjEsMTQuNmMtMC42LDMuMSwwLjUsNC43LDMuNSw1LjINCglDNDYuOCw1Mi45LDQ4LjcsNTIuOSw1MC4yLDUzeiIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTIwMywxNDMuNmMzLjEsMCw2LjItMC4xLDkuMywwYzIsMC4xLDMuNS0wLjUsNC43LTIuMmMxLjktMi44LDYzLjQtMTAyLjksNjguNS0xMTEuN2MxLjMtMi4yLDAuNS00LTEuOS00DQoJYy02LjctMC4xLTEzLjUsMC0yMC4yLDAuMWMtMS43LDAtMywwLjktNCwyLjVjLTQuOCw3LjgtMjQuMywzOS4yLTI5LjMsNDcuMmMtMC4zLDAuNS0xLjEsMS0xLjUsMC45Yy0wLjYtMC4xLTEuMS0wLjgtMS41LTEuMw0KCWMtMC4yLTAuMy0wLjItMC43LTAuMy0xLjFjLTAuNy0zLjgtNS4zLTMyLjEtNy00Mi40Yy0wLjctNC40LTIuOS02LjEtNy4zLTYuMWMtNC42LDAtOS4yLDAuMi0xMy44LDAuM2MtMy42LDAuMS01LjYsMi40LTUuMSw1LjkNCgljMC4zLDEuOSwxMi40LDY2LjcsMTQuNSw3Ny40YzAuMSwwLjUsMC4yLDEsMC4xLDEuNGMtMC41LDEuNC0wLjksMi44LTEuNiw0Yy00LjcsNy41LTkuNSwxNS0xNC4yLDIyLjVjLTAuNCwwLjctMC45LDEuNC0xLjEsMi4xDQoJYy0wLjYsMi41LTAuOCw0LjIsMi45LDQuMkMxOTcsMTQzLjMsMjAzLDE0My41LDIwMywxNDMuNnoiLz4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xNDkuOCw5OS4yYy0xLjYsMC45LTIuOCwxLjUtMy45LDIuMWMtMi45LDEuNi01LjcsMy4xLTguNiw0LjhjLTUuNCwzLjItMTEuMywzLjktMTcuMywzLjcNCgljLTMuMS0wLjEtNi4yLTAuNC05LjEtMS4yYy03LjctMi0xMi4zLTctMTMuMi0xNS4xYy0wLjgtNi42LTAuMS0xMy4xLDMuMy0xOWMzLjgtNi43LDkuOS0xMC4zLDE2LjktMTIuNmM2LjMtMi4xLDEyLjktMi42LDE5LjUtMi43DQoJYzUuMi0wLjEsMTAuNC0wLjMsMTUuNy0wLjRjMC42LDAsMS4yLTAuMiwxLjgtMC4xYzIuNSwwLjEsMy42LTEuNSw0LTMuNmMwLjMtMS43LDAuNi0zLjYsMC40LTUuM2MtMC40LTMuNS0yLjMtNS43LTUuOC02DQoJYy00LjMtMC41LTguNi0wLjctMTIuOS0wLjZjLTYuMywwLjItMTIuNSwxLTE4LjUsMi44Yy0wLjksMC4zLTEuOCwwLjctMi44LDEuMWMtMi40LDEtNC42LTAuMi00LjQtMi43YzAuMy00LjEsMC44LTguMiwxLjctMTIuMg0KCWMwLjUtMi4yLDIuNC0zLjYsNC43LTRjNy44LTEuNiwxNS43LTIuNCwyMy43LTIuN2M2LjUtMC4yLDEyLjksMCwxOS4yLDEuNWM1LjgsMS4zLDEwLjYsNC4zLDE0LjcsOC41YzQuNCw0LjYsNS45LDEwLjIsNC44LDE2LjMNCgljLTIuMSwxMS4zLTkuNCw0NS41LTEwLjcsNTEuNGMtMC42LDIuOS0yLjMsNC40LTUuMyw0LjVjLTUuNSwwLjItMTEsMC4yLTE2LjUsMC4zYy0xLjYsMC0yLjEtMC42LTItMi4yDQoJQzE0OS41LDEwMy41LDE0OS43LDEwMS42LDE0OS44LDk5LjJ6IE0xNDcuNyw3MC4xYzAsMCwwLDAuMSwwLDAuMWMtMi41LDAuMi00LjksMC4zLTcuNCwwLjVjLTQuMSwwLjQtOC4xLDEuMS0xMS44LDIuOQ0KCWMtNC45LDIuNC02LjksNS44LTYuNiwxMS4zYzAuMyw0LjksMy4zLDguMSw4LjIsOC43YzQsMC41LDcuOSwwLjEsMTEuNy0wLjdjMy4xLTAuNiw1LjktMiw3LjktNC41YzMuOC00LjcsNS0xMC4yLDUtMTYuMQ0KCWMwLTEuNC0wLjktMi4xLTIuMy0yLjJDMTUwLjksNzAuMSwxNDkuMyw3MC4xLDE0Ny43LDcwLjF6Ii8+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzI1LjksNzIuOWMtMy42LDAtNy4zLDAtMTEsMGMtMS44LDAtMy4xLDAuNy0zLjYsMi42Yy0xLjIsNC4yLTYuMywyMi45LTcuNiwyOC4xYy0wLjcsMi43LTIuMSwzLjgtNC45LDMuOA0KCWMtNS43LDAtMTEuNSwwLTE3LjIsMGMtMy4xLDAtNC40LTEuNC0zLjktNC40YzAuNC0yLjYsMTUuNC02Ny4yLDIyLjMtOTYuOWMwLjktMy45LDIuNi01LjIsNi42LTUuMmMxMC43LDAsNDMuNCwwLjIsNDkuMSwwLjINCglDMzcwLDEuMywzODEuOCwxMi43LDM4Mi4zLDI3YzAuMyw5LjYtMS41LDE4LjctNi45LDI2LjhjLTUuMyw3LjktMTIuOCwxMi44LTIxLjcsMTUuN0MzNDQuNiw3Mi41LDMzNS4zLDczLjQsMzI1LjksNzIuOXogTTMyNi41LDUzDQoJYzIuNi0wLjIsNC43LTAuMyw2LjgtMC41YzUuMy0wLjYsMTAuNC0yLDE0LjgtNS4zYzUtMy44LDYuNy05LDUuNy0xNS4xYy0wLjktNS42LTQuNi04LjYtOS43LTEwLjNjLTUuMi0xLjctMTAuNi0xLjgtMTYuMS0xLjMNCgljLTIuNywwLjItNC41LDEuNy01LjIsNC41Yy0wLjYsMi42LTEuNSw1LjItMi4xLDcuOGMtMS4xLDQuOC0yLjIsOS43LTMuMSwxNC42Yy0wLjYsMy4xLDAuNSw0LjcsMy41LDUuMg0KCUMzMjMuMSw1Mi45LDMyNSw1Mi45LDMyNi41LDUzeiIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTQyNS41LDk5LjJjLTEsMC40LTEuNiwwLjYtMi4yLDAuOWMtNC41LDIuNC05LjEsNC44LTEzLjYsNy4yYy00LjQsMi4zLTkuMiwyLjYtMTQsMi42Yy00LDAtOC0wLjUtMTEuOC0yLjENCgljLTYuNi0yLjgtMTAtNy45LTEwLjctMTQuOWMtMC41LTQuOS0wLjEtOS44LDEuNi0xNC40YzIuOC03LjksOC44LTEyLjcsMTYuNC0xNS43YzYuOS0yLjYsMTQtMy40LDIxLjMtMy41DQoJYzUuNi0wLjEsMTEuMy0wLjMsMTYuOS0wLjVjMy41LTAuMSw0LjMtMC43LDUuMS00LjFjMC40LTEuNywwLjUtMy41LDAuNC01LjJjLTAuMy0zLjItMi4zLTUuNC01LjctNS45Yy0zLjctMC41LTcuNS0wLjgtMTEuMi0wLjcNCgljLTcsMC4yLTEzLjksMS0yMC42LDIuOWMtMC44LDAuMi0xLjYsMC42LTIuNCwxYy0yLjYsMS4yLTQuOCwwLTQuNS0yLjhjMC4zLTMuOCwwLjgtNy42LDEuNS0xMS40YzAuNC0yLjMsMi0zLjksNC40LTQuMw0KCWM0LjgtMC44LDkuNi0xLjgsMTQuNS0yLjFjNi4xLTAuNSwxMi4zLTAuNywxOC41LTAuNmM4LDAuMiwxNS42LDEuNywyMi4xLDdjMy45LDMuMiw2LjksNi45LDcuOCwxMmMwLjYsMy42LDAuMiw3LjItMC41LDEwLjcNCgljLTMuMywxNS41LTYuNiwzMS05LjksNDYuNWMtMC45LDQuMS0yLjMsNS40LTYuNCw1LjVjLTUuMSwwLjItMTAuMiwwLjItMTUuMiwwLjNjLTEuOCwwLTIuMi0wLjQtMi4xLTIuMg0KCUM0MjUuMywxMDMuNSw0MjUuNCwxMDEuNiw0MjUuNSw5OS4yeiBNNDI1LjgsNzAuMWMtMy4yLDAuMi02LjcsMC4zLTEwLjIsMC43Yy00LDAuNC03LjksMS4yLTExLjQsMy4xYy0zLjMsMS43LTUuNiw0LjMtNiw4LjENCgljLTAuNiw1LjMsMS4yLDEwLjksOC40LDExLjdjNC4zLDAuNSw4LjQsMC4xLDEyLjUtMC45YzMuOC0wLjksNi44LTMuMiw4LjctNi42YzIuMy00LDMuMi04LjQsMy40LTEyLjljMC4xLTIuMy0wLjktMy4xLTMuMi0zLjINCglDNDI3LjQsNzAsNDI2LjcsNzAuMSw0MjUuOCw3MC4xeiIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTQ4NC40LDEwNy40YzIuMy0wLjEsMi44LTAuNSwzLjMtMi41YzIuMS04LjcsMTcuNS03NC4xLDIzLjItOTguMWMwLjYtMi42LTEuMi00LjktNC00LjkNCgljLTUuNCwwLTEwLjgtMC4xLTE2LjItMC4xYy0zLjMsMC00LjksMS4yLTUuNiw0LjRjLTEuMiw0LjgtMjAuNyw5My45LTIxLjMsOThjLTAuMywyLDAuOCwyLjksMi45LDIuOQ0KCUM0NjkuNSwxMDcuMiw0ODIuOSwxMDcuNCw0ODQuNCwxMDcuNHoiLz4NCjwvc3ZnPg0K);
}
#btc_donate{
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjIsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAxMzAzLjYgMjc0LjYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEzMDMuNiAyNzQuNjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9DQo8L3N0eWxlPg0KPGc+DQoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEzNi42LDkzLjZsLTcuNSwzMC4xYzguNSwyLjEsMzQuNywxMC44LDM5LTYuMkMxNzIuNSw5OS43LDE0NS4xLDk1LjcsMTM2LjYsOTMuNnoiLz4NCgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTcwLjUsNC4xQzk3LTE0LjIsMjIuNSwzMC41LDQuMiwxMDQuMWMtMTguMyw3My41LDI2LjQsMTQ4LDk5LjksMTY2LjNjNzMuNiwxOC4zLDE0OC0yNi40LDE2Ni40LTk5LjkNCgkJQzI4OC44LDk2LjksMjQ0LDIyLjQsMTcwLjUsNC4xeiBNMTk3LjgsMTE3LjdjLTIsMTMuNC05LjQsMTkuOC0xOS4yLDIyLjFjMTMuNSw3LDIwLjQsMTcuOCwxMy44LDM2LjUNCgkJYy04LjEsMjMuMi0yNy40LDI1LjItNTMuMSwyMC4zbC02LjIsMjVsLTE1LjEtMy44bDYuMS0yNC42Yy0zLjktMS03LjktMi0xMi0zLjFsLTYuMiwyNC44bC0xNS0zLjhsNi4yLTI1DQoJCWMtMy41LTAuOS03LjEtMS45LTEwLjctMi44bC0xOS42LTQuOWw3LjUtMTcuMmMwLDAsMTEuMSwyLjksMTAuOSwyLjdjNC4zLDEuMSw2LjItMS43LDYuOS0zLjZsOS45LTM5LjVjMC42LDAuMSwxLjEsMC4zLDEuNiwwLjQNCgkJYy0wLjYtMC4yLTEuMS0wLjQtMS42LTAuNWw3LTI4LjJjMC4yLTMuMi0wLjktNy4yLTctOC44YzAuMi0wLjItMTAuOS0yLjctMTAuOS0yLjdsNC0xNi4xbDIwLjgsNS4ydjAuMWMzLjEsMC44LDYuMywxLjUsOS42LDIuMw0KCQlsNi4yLTI0LjdsMTUuMSwzLjhsLTYsMjQuM2M0LDAuOSw4LjEsMS45LDEyLjEsMi44bDYtMjQuMWwxNS4xLDMuOEwxNjcuNiw4M0MxODYuNiw4OS42LDIwMC41LDk5LjQsMTk3LjgsMTE3Ljd6Ii8+DQoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEyOTQuMiwxMDcuMmMtMTAuMy0xNS43LTI4LjktMjMuNS01NS45LTIzLjVjLTkuMiwwLTE3LjUsMC40LTI0LjcsMS4yYy03LjMsMC44LTEzLjksMS44LTE5LjcsMy4xDQoJCWMtNS45LDEuMi0xMS4yLDIuNi0xNS45LDQuMWMtNC43LDEuNS05LjEsMi45LTEyLjksNGwtNDEuOSwxNzMuNmg1MS41bDMzLjYtMTQwLjdjNi45LTEuNCwxMy43LTIuMSwyMC40LTIuMWM2LjksMCwxMiwxLjMsMTUuNCw0DQoJCWMzLjMsMi43LDUuNSw2LjIsNi40LDEwLjRjMSw0LjMsMSw5LjIsMC4yLDE0LjlzLTEuOSwxMS41LTMuMywxNy41bC0yMi44LDk2LjFoNTEuNWwyMy41LTk4LjINCgkJQzEzMDYuMywxNDQuNCwxMzA0LjUsMTIyLjksMTI5NC4yLDEwNy4yeiIvPg0KCTxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iMTA3Ni42LDg3LjkgMTAzMy40LDI2OS44IDEwODQuNiwyNjkuOCAxMTI4LjIsODcuOSAJIi8+DQoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEwOTAuMiw1OS4zYzUuNyw0LjMsMTIuMiw2LjQsMTkuMyw2LjRjNC45LDAsOS40LTAuOSwxMy43LTIuOGM0LjMtMS44LDgtNC4zLDExLjItNy40DQoJCWMzLjItMy4xLDUuOC02LjgsNy44LTExLjFjMS45LTQuMywzLTguOCwzLTEzLjdjMC04LjctMi45LTE1LjMtOC43LTE5LjVjLTUuOC00LjMtMTIuMi02LjQtMTkuNC02LjRjLTQuOCwwLTkuNCwwLjktMTMuNiwyLjgNCgkJcy04LDQuMy0xMS4yLDcuNHMtNS44LDYuOC03LjgsMTEuMXMtMi45LDguOC0yLjksMTMuNkMxMDgxLjUsNDguNiwxMDg0LjQsNTUuMSwxMDkwLjIsNTkuM3oiLz4NCgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNTIwLjYsNTkuM2M1LjcsNC4zLDEyLjIsNi40LDE5LjQsNi40YzQuOCwwLDkuNC0wLjksMTMuNy0yLjhjNC4yLTEuOCw4LTQuMywxMS4yLTcuNA0KCQljMy4yLTMuMSw1LjgtNi44LDcuOC0xMS4xczIuOS04LjgsMi45LTEzLjdjMC04LjctMi45LTE1LjMtOC42LTE5LjVjLTUuOC00LjMtMTIuMi02LjQtMTkuMy02LjRjLTQuOSwwLTkuNCwwLjktMTMuNywyLjgNCgkJcy04LDQuMy0xMS4yLDcuNHMtNS44LDYuOC03LjgsMTEuMWMtMiw0LjMtMyw4LjktMywxMy43QzUxMiw0OC42LDUxNC45LDU1LjEsNTIwLjYsNTkuM3oiLz4NCgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTI1LjMsMTM4LjhMMTE3LDE3MmMxMC4yLDIuNSw0MS43LDEyLjcsNDYuNC02LjFDMTY4LjIsMTQ2LjQsMTM1LjUsMTQxLjQsMTI1LjMsMTM4Ljh6Ii8+DQoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTgwOC4xLDEyNi42YzcuMiwwLDEzLjIsMC43LDE4LjIsMi4zYzUsMS41LDkuNywzLjEsMTQuNCw1bDE3LjctNDAuMWMtNi43LTMuMi0xNC4xLTUuOC0yMi4zLTcuOA0KCQlzLTE3LjQtMy0yNy44LTNjLTE2LjYsMC0zMS43LDMtNDUuMSw5Yy0xMy41LDYtMjUsMTQuMi0zNC40LDI0LjVjLTkuNSwxMC40LTE2LjcsMjIuNS0yMS44LDM2LjNjLTUuMSwxMy44LTcuNiwyOC42LTcuNiw0NC4zDQoJCWMwLDEwLjQsMS41LDIwLjMsNC4zLDI5LjdjMi45LDkuNSw3LjUsMTcuNywxNCwyNC43YzYuNSw3LDE0LjYsMTIuNiwyNC41LDE2LjhjOS45LDQuMSwyMiw2LjIsMzYuMyw2LjJjMTAuOCwwLDIwLjItMSwyOC0yLjkNCgkJYzcuOC0yLDE1LTQuMywyMS40LTYuOGwtMy44LTQxLjFjLTQuOSwyLjEtMTAuNCwzLjgtMTYuNiw1LjJjLTYuMiwxLjQtMTIuNywyLjEtMTkuNCwyLjFjLTEzLjYsMC0yMi45LTMuNi0yOC0xMC45DQoJCWMtNS4xLTcuMy03LjYtMTYuOC03LjYtMjguNWMwLTE5LjgsNS0zNS42LDE1LjEtNDcuNEM3NzcuNSwxMzIuNSw3OTEsMTI2LjYsODA4LjEsMTI2LjZ6Ii8+DQoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMTEuMSwxMDQuMWMtNS45LTYuNy0xMy40LTExLjktMjIuNS0xNS42cy0xOS43LTUuNi0zMS43LTUuNmMtMTYuMywwLTMwLjksMy41LTQzLjUsMTAuNQ0KCQljLTEyLjcsNy4xLTIzLjQsMTYuMS0zMi4xLDI3LjJjLTguOCwxMS4xLTE1LjQsMjMuNS0xOS45LDM3LjNzLTYuNywyNy43LTYuNyw0MS41YzAsMTEsMS41LDIxLjEsNC41LDMwLjJjMyw5LjEsNy40LDE3LDEzLjMsMjMuNw0KCQljNS45LDYuNywxMy4zLDExLjksMjIuMywxNS42YzksMy43LDE5LjYsNS41LDMxLjgsNS41YzE2LjgsMCwzMS43LTMuNSw0NC40LTEwLjZjMTIuOC03LDIzLjUtMTYuMSwzMi0yNy4xDQoJCWM4LjUtMTEuMSwxNS0yMy41LDE5LjQtMzcuM2M0LjQtMTMuOSw2LjYtMjcuNyw2LjYtNDEuNWMwLTExLjEtMS41LTIxLjItNC41LTMwLjJDMTAyMS40LDExOC43LDEwMTYuOSwxMTAuOCwxMDExLjEsMTA0LjF6DQoJCSBNOTc0LjgsMTg1LjljLTIsOC00LjksMTUuMy04LjgsMjJjLTMuOSw2LjctOC44LDEyLjItMTQuNSwxNi42Yy01LjgsNC40LTEyLjQsNi42LTIwLjEsNi42Yy05LjcsMC0xNi40LTMuMi0yMC4xLTkuNw0KCQljLTMuNy02LjUtNS41LTE1LjUtNS41LTI3YzAtNy4yLDEtMTQuNywyLjktMjIuNmMyLTcuOSw0LjktMTUuMyw4LjgtMjJjMy45LTYuNyw4LjctMTIuMiwxNC41LTE2LjZjNS43LTQuNCwxMi40LTYuNiwyMC02LjYNCgkJYzkuNywwLDE2LjQsMy4yLDIwLjEsOS43YzMuNyw2LjUsNS42LDE1LjUsNS42LDI3Qzk3Ny43LDE3MC40LDk3Ni43LDE3OCw5NzQuOCwxODUuOXoiLz4NCgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNjE4LjgsMTkzLjdsMTUuMi02My42aDU3bDEwLjQtNDIuMkg2NDRsMTMuMi01My42bC01My42LDguM2wtMzMuOSwxNDMuMmMtMi44LDExLjgtNC40LDIyLjktNC44LDMzLjUNCgkJYy0wLjUsMTAuNiwxLjIsMjAsNC44LDI4LjJjMy43LDguMiw5LjksMTQuNywxOC43LDE5LjRjOC44LDQuNywyMS4xLDcuMSwzNyw3LjFjMTEuMSwwLDIwLjYtMC45LDI4LjctMi44YzguMS0xLjgsMTUuNi00LDIyLjUtNi42DQoJCWwtMy44LTM5LjRjLTUuMywxLjktMTAuNSwzLjMtMTUuNyw0LjNzLTEwLjYsMS42LTE2LjEsMS42Yy02LjcsMC0xMS44LTAuOS0xNS40LTIuOGMtMy42LTEuOC02LjEtNC40LTcuNC03LjgNCgkJYy0xLjQtMy4zLTItNy4zLTEuNy0xMS45QzYxNi42LDIwMy45LDYxNy40LDE5OSw2MTguOCwxOTMuN3oiLz4NCgk8cG9seWdvbiBjbGFzcz0ic3QwIiBwb2ludHM9IjQ2My45LDI2OS44IDUxNS4xLDI2OS44IDU1OC43LDg3LjkgNTA3LjEsODcuOSAJIi8+DQoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTQ0NCwxMDUuOGMtNS40LTYuNy0xMi0xMi0yMC4xLTE1LjljLTgtMy45LTE3LjYtNS45LTI4LjctNS45Yy01LjMsMC0xMC4yLDAuNi0xNC45LDEuNw0KCQljLTQuNiwxLjItOS4yLDIuOC0xMy44LDQuOGwyMS40LTg5LjJsLTUzLjYsOC4zTDI3NC41LDI2MWM2LjcsMy4yLDEzLjgsNS44LDIxLjMsNy42YzcuNSwxLjksMTQuNiwzLjIsMjEuMyw0LjINCgkJYzYuNywwLjksMTIuNiwxLjQsMTcuOCwxLjVjNS4yLDAuMSw4LjgsMC4yLDEwLjksMC4yYzE2LjEsMCwzMS4xLTMuMSw0NC45LTkuMnMyNS44LTE0LjQsMzYtMjQuOXMxOC4yLTIyLjgsMjQtMzcNCgkJYzUuOS0xNC4yLDguOC0yOS4yLDguOC00NS4xYzAtMTAuNC0xLjMtMjAtMy44LTI5QzQ1My4yLDEyMC40LDQ0OS4zLDExMi41LDQ0NCwxMDUuOHogTTQwMy45LDE4OC4xYy0zLDguMy03LjEsMTUuNy0xMi4zLDIyLjMNCgkJYy01LjIsNi42LTExLjQsMTEuOC0xOC41LDE1LjdzLTE0LjcsNS45LTIyLjgsNS45Yy0yLjUsMC00LjYsMC02LjIsMHMtMy0wLjEtNC4yLTAuMmMtMS4xLTAuMS0yLjItMC4zLTMuMy0wLjUNCgkJYy0xLTAuMi0yLjMtMC40LTMuNi0wLjdsMjIuOC05NC43YzQuMi0zLjcsOC44LTYuMSwxNC03LjNjNS4yLTEuMSw5LjQtMS43LDEyLjYtMS43YzkuOSwwLDE2LjcsMy4xLDIwLjQsOS4zDQoJCWMzLjcsNi4yLDUuNSwxNC45LDUuNSwyNS45QzQwOC40LDE3MS4yLDQwNi45LDE3OS44LDQwMy45LDE4OC4xeiIvPg0KPC9nPg0KPC9zdmc+DQo=);
}
#alipay_donate{
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjIsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDQ0OC41IDE0NS41IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDguNSAxNDUuNTsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2VuYWJsZS1iYWNrZ3JvdW5kOm5ldyAgICA7fQ0KCS5zdDF7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojRkZGRkZGO30NCjwvc3R5bGU+DQo8ZyBpZD0i5Zu+5bGCXzIiPg0KPC9nPg0KPGcgaWQ9IuWbvuWxgl8xIj4NCgk8ZyBpZD0i5qSt5ZyGXzJfMV8iIGNsYXNzPSJzdDAiPg0KCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTA1LjYsMEg4MS44djE4LjdoLTQ4djkuOGg0OHYxOEg0OC4xdjExLjFoNjcuNGMwLDAsMCwxNS45LTIwLjMsMzcuNlM2Ny40LDEyMC4yLDU3LjgsMTIzcy0yNiwyLjQtMzEuNS0xLjUNCgkJCXMtMTEuOC04LjktMTEuMy0xOFMyNi45LDg0LjEsMzMuOSw4M2MwLDAtMjAtMi4yLTI0LjUsMTguMWMtMy41LDE1LjYsNi42LDIzLjMsMTIuNCwyNy4yczE4LjIsOC41LDI2LjMsOXMyNS44LTAuNiw0Mi43LTEyLjgNCgkJCWMxNi44LTEyLjIsMzcuMy0zNi43LDQzLjUtNTEuOHM4LjktMjEuMyw5LjgtMjYuMmgtMzguNHYtMThoNTAuMnYtOS44aC01MC4yVjAiLz4NCgkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTE4NiwwYzAsMC0yLjUsMjEuNS0zMy44LDQ1bDMuNiw1LjNjMCwwLDEzLjktNS41LDE3LjQtOC4zdjgwLjNIMTk4VjI1LjVjMCwwLDEyLTEyLjUsMTItMjUuNQ0KCQkJQzIxMCwwLDE4NiwwLDE4NiwweiIvPg0KCQk8cG9seWdvbiBjbGFzcz0ic3QxIiBwb2ludHM9IjI0NiwwIDI0NiwyNyAyMDIuNSwyNyAyMDIuNSwzNi4xIDI0NiwzNi4xIDI0NiwxMjEuNSAyNzAuMSwxMjEuNSAyNzAuMSwzNi4xIDI4MS4zLDM2LjEgMjgxLjMsMjcgDQoJCQkyNzAuMSwyNyAyNzAuMSwwIAkJIi8+DQoJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zNjQuNSwwdjExLjJINDExdjcuNWMwLDIyLjEtMTQuMiwyNC44LTE0LjIsMjQuOGgtMzIuM1Y2M2gzMi4zdjkuOGgtMzIuM3Y0NS44aC0yNC43VjcyLjhoLTM0LjZWNjNoMzQuNg0KCQkJVjQzLjVoLTQ5LjVWOC4zaDIzLjF2M2gyNi40VjBIMzY0LjV6IE0zMTMuMywyMS41djEzaDc3LjR2LTEzSDMxMy4zeiIvPg0KCTwvZz4NCgk8ZyBpZD0i5qSt5ZyGXzFfMV8iIGNsYXNzPSJzdDAiPg0KCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDQuMSwxMzYuN2MwLDAtMjIuNS0zLjctMzIuMS0yMC41Yy0zLjctNi40LTQtMTkuMyw2LTI3LjhjOC40LTcuMSwxOS41LTYuNiwzMy44LTNzMjQuNCw4LjEsNDIuOCwxNy4zDQoJCQljMTguNSw5LjMsNDQuOSwyMi41LDc4LjcsMjkuNmMzMy43LDcuMSw1Mi4zLDkuNCw3Mi44LDEwLjljMzUuNCwyLjYsMTQ5LjQtMi40LDE2NS02bDM3LjUtMzljMCwwLTExMi45LDE3LjQtMTgzLjgsMTgNCgkJCWMtNzAuOCwwLjYtNzguOC0zLjctOTUuMy02LjhTMTA5LjYsOTIuMyw5Ni44LDg3Yy02LjMtMi42LTQxLjctMTYuMy02My0xNC4zUzEuMiw4NCwwLjgsOTguM1M1LjgsMTMyLjIsNDQuMSwxMzYuN3oiLz4NCgkJDQoJCQk8cmVjdCB4PSIyMDYuNiIgeT0iNDYuNyIgdHJhbnNmb3JtPSJtYXRyaXgoMC43MDcxIC0wLjcwNzEgMC43MDcxIDAuNzA3MSAyMS4zNjgzIDE3NC42Mzk3KSIgY2xhc3M9InN0MSIgd2lkdGg9IjI5LjciIGhlaWdodD0iMjkuNyIvPg0KCQkNCgkJCTxyZWN0IHg9IjM3OC40IiB5PSI3OC45IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjcwNzEgLTAuNzA3MSAwLjcwNzEgMC43MDcxIDUwLjc0MDMgMzAxLjE0OTEpIiBjbGFzcz0ic3QxIiB3aWR0aD0iMjAuOSIgaGVpZ2h0PSIyMC45Ii8+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=);
}
#wechat_donate{
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjIsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i5Zu+5bGCXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgNTMxLjIgMTYxLjciIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUzMS4yIDE2MS43OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDojRkZGRkZGO30NCjwvc3R5bGU+DQo8Zz4NCgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNjguNiwwQzMxLjEtMC42LDAsMjcsMCw1OS41YzAsMTguOCw4LjgsMzUsMjUuOSw0N2MwLDAtNi4zLDIwLjctNi4yLDIxLjFjMC4xLDAuNCwxLjUsMS4yLDEuOSwxDQoJCWMwLjQtMC4yLDIyLjYtMTMuNSwyMi42LTEzLjVjMTcsNS44LDI2LjksMy45LDI3LjQsMy45Yy0xLjctNS0yLjgtMTIuNy0xLjUtMjBjNi42LTM4LjEsNDUuNi01MCw2Ny00Ny45DQoJCUMxMzEuMiwyMy40LDEwNS42LDAuNSw2OC42LDB6IE00Mi41LDQ5LjFjLTQuOSwwLTguOS00LTguOS04LjlzNC04LjksOC45LTguOXM4LjksNCw4LjksOC45UzQ3LjQsNDkuMSw0Mi41LDQ5LjF6IE05Ni40LDQ5LjENCgkJYy00LjksMC04LjktNC04LjktOC45czQtOC45LDguOS04LjlzOC45LDQsOC45LDguOVMxMDEuNCw0OS4xLDk2LjQsNDkuMXoiLz4NCgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTkyLDEwNC43YzAtMjcuOC0yNi45LTQ5LjItNTguMS00OS4yYy0zMy4xLDAtNTkuNCwyMS44LTU5LjQsNDkuNmMwLDI3LjksMjUuMSw1MSw1OS41LDUxLjINCgkJYzYuOSwwLDE3LjItMS43LDI0LjItNC42YzAsMCwxNi42LDEwLjEsMTcuNSwxMHMxLjQtMC44LDEuNC0xLjRzLTUuMy0xNi40LTUuMy0xNi40QzE4NiwxMzIuNywxOTIsMTIwLjQsMTkyLDEwNC43eiBNMTEyLjEsOTQuNA0KCQljLTQuNCwwLTcuOS0zLjUtNy45LTcuOXMzLjUtNy45LDcuOS03LjlzNy45LDMuNSw3LjksNy45UzExNi40LDk0LjQsMTEyLjEsOTQuNHogTTE1NC4yLDk0LjRjLTQuNCwwLTcuOS0zLjUtNy45LTcuOQ0KCQlzMy41LTcuOSw3LjktNy45czcuOSwzLjUsNy45LDcuOVMxNTguNiw5NC40LDE1NC4yLDk0LjR6Ii8+DQo8L2c+DQo8Zz4NCgk8Zz4NCgkJPHBvbHlnb24gY2xhc3M9InN0MCIgcG9pbnRzPSIyNzcuNiw2Ni41IDI2NS43LDExNS41IDI1NS43LDY2LjUgMjQwLjUsNjYuNSAyMzAuNSwxMTUuNSAyMTguNiw2Ni41IDIwMy44LDY2LjUgMjIzLjcsMTM2IA0KCQkJMjM3LjIsMTM2IDI0OCw4Mi44IDI1OC44LDEzNiAyNzIuNCwxMzYgMjkyLjMsNjYuNSAJCSIvPg0KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzI4LjMsODkuOGMtNC4zLTQuNy0xMC4zLTcuMS0xOC4yLTcuMWMtNy40LDAtMTMuMiwyLjUtMTcuNSw3LjNjLTQuMyw0LjktNi40LDExLjUtNi40LDE5LjkNCgkJCWMwLDguNiwyLjIsMTUuMyw2LjUsMjAuM3MxMC4yLDcuNSwxNy42LDcuNWM2LDAsMTEuMS0xLjUsMTUuMy00LjZjNC4yLTMuMSw3LTcuMyw4LjQtMTIuN2gtMTMuNmMtMC45LDEuOS0yLjEsMy40LTMuNiw0LjENCgkJCWMtMS41LDAuOS0zLjQsMS40LTUuOCwxLjRjLTMuNCwwLTUuOS0xLjEtNy43LTMuMWMtMS43LTItMi43LTUuMS0yLjktOS4xaDM0LjJjMC0wLjQsMC4xLTAuOSwwLjEtMS40czAtMS4yLDAtMi4yDQoJCQlDMzM0LjcsMTAxLjMsMzMyLjYsOTQuNSwzMjguMyw4OS44eiBNMzAwLjQsMTA0LjljMC4zLTMuNCwxLjMtNiwzLTcuOWMxLjctMS44LDQtMi43LDctMi43YzMuMiwwLDUuNywwLjksNy40LDIuNw0KCQkJYzEuOCwxLjgsMi43LDQuNCwyLjgsNy45SDMwMC40eiIvPg0KCTwvZz4NCgk8Zz4NCgkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTQwMi43LDExMi4yTDQwMi43LDExMi4yQzQwMi43LDExMi4xLDQwMi43LDExMi4yLDQwMi43LDExMi4yTDQwMi43LDExMi4yeiIvPg0KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzgzLjQsMTIxLjdjLTIuOCwyLjItNi40LDMuMy0xMC43LDMuM2MtNiwwLTEwLjYtMi4xLTEzLjktNi4ycy00LjktMTAtNC45LTE3LjVjMC03LjgsMS42LTEzLjcsNC45LTE3LjgNCgkJCWMzLjItNC4xLDgtNi4xLDE0LjMtNi4xYzQuNSwwLDgsMSwxMC42LDMuMXM0LjIsNS4xLDQuOCw5aDE0LjFjLTAuNS03LjktMy40LTE0LTguNS0xOC4zcy0xMi4xLTYuNS0yMS02LjUNCgkJCWMtMTAuOSwwLTE5LjMsMy4xLTI1LjEsOS40cy04LjcsMTUuNC04LjcsMjcuMmMwLDExLjYsMi45LDIwLjYsOC42LDI3czEzLjcsOS42LDI0LDkuNmM4LjksMCwxNi4yLTIuMywyMS43LTcNCgkJCWM1LjUtNC42LDguNi0xMC44LDkuMS0xOC43aC0xMy45QzM4OCwxMTYuMywzODYuMiwxMTkuNSwzODMuNCwxMjEuN3oiLz4NCgkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTQ0OC41LDg5LjNjLTEuNS0xLjktMy41LTMuNC01LjktNC40Yy0yLjUtMS4xLTUuMi0xLjYtOC4yLTEuNmMtMy4yLDAtNi4xLDAuNi04LjYsMS44DQoJCQljLTIuNSwxLjItNC43LDMtNi42LDUuM1Y2Ni41aC0xMy42djY5LjNoMTMuNnYtMzAuNGMwLTMuMywwLjktNiwyLjgtNy45czQuNS0yLjksNy43LTIuOWMzLDAsNS4yLDAuNyw2LjMsMi40DQoJCQljMS4xLDEuNywxLjcsNS43LDEuNywxMnYyNi44aDEzLjZ2LTMzLjJ2LTAuOWMwLTMuNy0wLjItNi4zLTAuNi04QzQ1MC4zLDkyLjEsNDQ5LjUsOTAuNiw0NDguNSw4OS4zeiIvPg0KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNTAwLjcsMTMxLjRjLTAuNS0xLjEtMC43LTIuNy0wLjctNC44Vjk3LjVjMC00LjctMS45LTguMy01LjctMTAuOFM0ODUsODMsNDc3LjgsODMNCgkJCWMtNi42LDAtMTEuNywxLjUtMTUuNCw0LjVzLTUuNiw3LjEtNS42LDEyLjR2MC45aDEyLjhWMTAwYzAtMiwwLjctMy42LDIuMi00LjdzMy42LTEuNyw2LjQtMS43YzMuMSwwLDUuMiwwLjQsNi41LDEuMw0KCQkJczEuOSwyLjQsMS45LDQuNWMwLDIuNi0yLjksNC4yLTguNyw1Yy0yLjMsMC4zLTQuMiwwLjYtNS42LDAuOGMtNi4yLDAuOS0xMC42LDIuNy0xMy4zLDUuMmMtMi43LDIuNi00LDYuMy00LDExLjENCgkJCWMwLDUuMiwxLjMsOS4zLDQsMTIuMWMyLjcsMi44LDYuNSw0LjIsMTEuNSw0LjJjMy43LDAsNy0wLjcsOS44LTIuMXM1LjEtMy40LDYuOC02LjFjMCwxLjIsMC4yLDIuNCwwLjQsMy42YzAuMywxLDAuNiwyLDEuMSwyLjkNCgkJCWgxNC4zdi0yLjNDNTAxLjksMTMzLjIsNTAxLjEsMTMyLjUsNTAwLjcsMTMxLjR6IE00ODYuOSwxMTUuNmMwLDMuNy0xLjEsNi41LTMuMiw4LjZzLTUsMy4xLTguNywzLjFjLTIuMSwwLTMuOC0wLjYtNS0xLjcNCgkJCXMtMS44LTIuNi0xLjgtNC41YzAtMS44LDAuNC0zLjMsMS40LTQuM3MyLjctMS45LDUuMS0yLjZjMC4xLDAsMS42LTAuNCw0LjUtMXM1LjUtMS41LDcuNy0yLjVWMTE1LjZ6Ii8+DQoJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik01MzEuMiw5NC40di05LjZoLTcuOXYtMTRoLTEzLjZ2MTRoLTYuOHY5LjZoNi44djI3LjdjMCw1LjgsMSw5LjYsMi45LDExLjZjMiwxLjksNS41LDIuOSwxMC44LDIuOQ0KCQkJYzAuNCwwLDEuNiwwLDMuMy0wLjFjMS43LTAuMSwzLjItMC4yLDQuNS0wLjJsMCwwdi0xMC4yaC0zLjNjLTEuOSwwLTMuMS0wLjItMy43LTAuNmMtMC42LTAuNS0wLjktMS4zLTAuOS0yLjdWOTQuNEw1MzEuMiw5NC40DQoJCQlMNTMxLjIsOTQuNHoiLz4NCgk8L2c+DQo8L2c+DQo8L3N2Zz4NCg==);
}
#drinks-qrcodes {
    display: none;
}
#drinks-qrcode {
    position: absolute;
    top: calc(50% - 90px);
    left: calc(50% - 90px);
    width: 180px;
    height: 180px;
	background: #fff no-repeat center center url(https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/images/donate/WeChatSQ.png);
    background-size: 160px;
    border-radius: 6px;
    cursor: pointer;
    box-shadow: 0 10px 20px rgba(255, 0, 110, 0.5);
}

/* 动画 */
#drinks-icons, #drinks-button-box {filter: blur(0px);}
.donate-animation-1>#drinks-icons, .donate-animation-4>#drinks-icons,.donate-animation-3>#drinks-button-box {
    transform: scale(0.7,0.7);
    filter: blur(2px);
    display: block;
    opacity: 1;
}
.donate-animation-1>#drinks-button-box,.donate-animation-4>#drinks-button-box,.donate-animation-3>#drinks-qrcodes {
    display: block;
    opacity: 1;
    transform: scale(1,1);
}
.donate-animation-2>#drinks-button-box,.donate-animation-4>#drinks-qrcodes, .hideBox {
    display: block;
    transform: scale(1,1);
    animation-name:hideBox;
    animation-duration:0.3s;
    animation-timing-function:ease-in-out;
    animation-iteration-count:1;
    animation-fill-mode:forwards;
}

.donate-animation-3>#drinks-icons {
    transform: scale(0.4,0.4);
    filter: blur(2px);
}
.showBox {
    animation-name:showBox;
    animation-duration:0.3s;
    animation-timing-function:ease-in-out;
    animation-iteration-count:1;
    animation-fill-mode:forwards;
}
@keyframes showBox {
	from {
        opacity: 0;
        transform: scale(1.3,1.3);
	}
	to {
        opacity: 1;
        transform: scale(1,1);
	}
}
@keyframes hideBox {
	from {
        opacity: 1;
        transform: scale(1,1);
	}
	to {
        opacity: 0;
        transform: scale(1.3,1.3);
	}
}
</style>
<section id="drinks-box">
    <section id="drinks-box-s" class="drinks-button left-100">
        <div id="drinks-icons" class="left-100 tr3">
            <div id="coffee-donate" class="icon-donate"><img src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/images/donate/drinks/coffee.png" alt="coffee" data-creative
                ="https://www.zcool.com.cn/work/ZMjQ3NTE2MA==.html"></div>
        </div>
        <div id="drinks-button-box" class="tr3 left-100">
            <div id="drinks-button-bg" class="left-100"></div>
            <div id="github-box"><a href="https://github.com/Kaiyuan/donate-page/" target="_blank">Github</a></div>
            <ul id="donate-buttons" class="list tr3">
                <li id="paypal_donate"><a href="https://www.paypal.me/wallleap" target="_blank">Paypal</a></li>
                <!-- <li id="btc_donate" class="donate-button">Bitcoin</li> -->
                <li id="alipay_donate" class="donate-button">AliPay</li>
                <li id="wechat_donate" class="donate-button">WeChat</li>
            </ul>
        </div>
        <div id="drinks-qrcodes" class="left-100 tr3">
            <div id="drinks-qrcode"></div>
        </div>
    </section>
</section>

<script>
jQuery(document).ready(function () {

    var thisPage = $('body');
    var drink_box = $('#donate-box');
    var drink_box_s = $('#drinks-box-s');
    var icon_donate = $('.icon-donate');
    var donate_button = $('.donate-button');
    var donate_buttons = $('#drinks-button-box');
    var donate_button_bg = $('#drinks-button-bg');
    var drinks_qrcodes = $('#drinks-qrcodes');
    var drinks_qrcode = $('#drinks-qrcode');
    var isMobile = /Android|webOS|iPhone|iPad|BlackBerry/i.test(navigator.userAgent);
    
    var GithubLink  =   "https://github.com/wallleap/sponsor-page/";
    var PayPalLink  =   "https://www.paypal.me/wallleap";
    $('#paypal-donate>a').href = PayPalLink;
    $('#github-box>a').href = GithubLink;
    var qrcodes = {
        // 'btc_donate'	:	'https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/images/BTCQR.png',	// 二维码路径
        'alipay_donate'	:	'https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/custom/donate/AliPayQR.jpg',	// 支付宝二维码
        // 'alipay_donate_link'   :   'https://qr.alipay.com/3272611934645308',   // 支付宝二维码上的链接，必须换成自己的连接！！！手机点击会自动跳转到支付宝。
        'wechat_donate'	:	'https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/custom/donate/WeChatSQ.jpg'
    };
    
    var drinks_an = new Object();
    // 动画有 4 种状态，不同状态给对应 DOM 添加 css 动画
    drinks_an[0] = function(){
        drink_box_s.removeClass('donate-animation-2 donate-animation-3').addClass('donate-animation-1');
        donate_buttons.addClass('showBox');
        setTimeout(() => {
            donate_buttons.removeClass('showBox');
        }, 300);
        // console.log('donate-animation-1');
    }
    drinks_an[1] = function(){
        drink_box_s.removeClass('donate-animation-1 donate-animation-3').addClass('donate-animation-2');
        setTimeout(() => {
            drink_box_s.removeClass('donate-animation-2');
        }, 300);
        // console.log('donate-animation-2');
    }
    drinks_an[2] = function(){
        drink_box_s.removeClass('donate-animation-2 donate-animation-1').addClass('donate-animation-3');
        drinks_qrcodes.addClass('showBox');
        setTimeout(() => {
            drinks_qrcodes.removeClass('showBox');
        }, 300);
        // console.log('donate-animation-3');
    }
    drinks_an[3] = function(){
        drink_box_s.removeClass('donate-animation-3 donate-animation-2').addClass('donate-animation-4');
        setTimeout(() => {
            drink_box_s.removeClass('donate-animation-4');
            drink_box_s.addClass('donate-animation-1');
        }, 300);
        // console.log('donate-animation-4');
    }
    
    if (isMobile) {
        donate_buttons.addClass('Mobile');
    }
    
    icon_donate.on('click',drinks_an[0]); // drinks 图标点击
    
    donate_button_bg.on('click',drinks_an[1]); // 隐藏 donate box
    
    donate_button.on('click',function(){
        var thisID = $(this).attr("id");
        if (isMobile && thisID === 'alipay_donate') {
            // 当前网页在手机端打开跳转到支付宝 App
            window.open(qrcodes['alipay_donate_link']);
        } else {
            // 当前网页在PC端打开
        drinks_qrcode.css({'background-image' : 'url('+qrcodes[thisID]+')'});
        drinks_an[2]();
        // 显示二维码
        }
    });
    
    drinks_qrcode.on('click',drinks_an[3]); // 隐藏二维码
    //
    })
</script>
    
    <section class="nexmoe-comment">
    <div class="valine" id="vcomments"></div>
<!-- <script src='https://cdn.jsdelivr.net/npm/valine@1.3.9/dist/Valine.min.js'></script> -->
<script type="text/javascript">
    loadComments();
    function loadComments() {
      if (typeof Valine === 'undefined') {
        var getScript = (options) => {
          var script = document.createElement('script');
          script.defer = true;
          script.crossOrigin = 'anonymous';
          Object.keys(options).forEach((key) => {
              script[key] = options[key];
          });
          document.body.appendChild(script);
        };
        getScript({
          src: '//unpkg.com/valine/dist/Valine.min.js',
          onload: () => {
            newValine();
          }
        });
      } else {
        newValine();
      }
    }
    function newValine() {
      new Valine({
        el: '.valine',
        appId: 'GOPlqD10uwQGshDFcsr8Cxik-gzGzoHsz',
        appKey: 'vpzGg4wzHHLRPNOlPHf0UEDS',
        placeholder: '欢迎访问本站，评论一下留个足迹👣呗',
        notify: false,
        verify: true,
        avatar: 'mp',
        meta: ['nick','mail','link'],
        pageSize: 10,
        recordIP: true,
        enableQQ: true,
        // 设置Bilibili表情包地址
        emojiCDN: '//cdn.jsdelivr.net/gh/wallleap/cdn@latest/emote/cool/', 
        // 表情title和图片映射
        emojiMaps: {
            "cool_coolapk_emotion_100_qqdoge": "coolapk_emotion_100_qqdoge.png",
            "cool_coolapk_emotion_1010": "coolapk_emotion_1010.png",
            "cool_coolapk_emotion_1011": "coolapk_emotion_1011.png",
            "cool_coolapk_emotion_1012": "coolapk_emotion_1012.png",
            "cool_coolapk_emotion_1013": "coolapk_emotion_1013.png",
            "cool_coolapk_emotion_1014": "coolapk_emotion_1014.png",
            "cool_coolapk_emotion_1015": "coolapk_emotion_1015.png",
            "cool_coolapk_emotion_1016": "coolapk_emotion_1016.png",
            "cool_coolapk_emotion_1017": "coolapk_emotion_1017.png",
            "cool_coolapk_emotion_1018": "coolapk_emotion_1018.png",
            "cool_coolapk_emotion_1019": "coolapk_emotion_1019.png",
            "cool_coolapk_emotion_101_pyjiaoyi": "coolapk_emotion_101_pyjiaoyi.png",
            "cool_coolapk_emotion_1020": "coolapk_emotion_1020.png",
            "cool_coolapk_emotion_1021": "coolapk_emotion_1021.png",
            "cool_coolapk_emotion_102_fadai": "coolapk_emotion_102_fadai.png",
            "cool_coolapk_emotion_103_nb": "coolapk_emotion_103_nb.png",
            "cool_coolapk_emotion_104": "coolapk_emotion_104.png",
            "cool_coolapk_emotion_105": "coolapk_emotion_105.png",
            "cool_coolapk_emotion_106": "coolapk_emotion_106.png",
            "cool_coolapk_emotion_107": "coolapk_emotion_107.png",
            "cool_coolapk_emotion_108": "coolapk_emotion_108.png",
            "cool_coolapk_emotion_109": "coolapk_emotion_109.png",
            "cool_coolapk_emotion_10_aoman": "coolapk_emotion_10_aoman.png",
            "cool_coolapk_emotion_11_yiwen": "coolapk_emotion_11_yiwen.png",
            "cool_coolapk_emotion_12_wuyu": "coolapk_emotion_12_wuyu.png",
            "cool_coolapk_emotion_13_huaixiao": "coolapk_emotion_13_huaixiao.png",
            "cool_coolapk_emotion_14_bishi": "coolapk_emotion_14_bishi.png",
            "cool_coolapk_emotion_15_fanu": "coolapk_emotion_15_fanu.png",
            "cool_coolapk_emotion_16_tuosai": "coolapk_emotion_16_tuosai.png",
            "cool_coolapk_emotion_17_tushe": "coolapk_emotion_17_tushe.png",
            "cool_coolapk_emotion_18_han": "coolapk_emotion_18_han.png",
            "cool_coolapk_emotion_19_koubi": "coolapk_emotion_19_koubi.png",
            "cool_coolapk_emotion_1_hahaha": "coolapk_emotion_1_hahaha.png",
            "cool_coolapk_emotion_20_qinqin": "coolapk_emotion_20_qinqin.png",
            "cool_coolapk_emotion_21_penxue": "coolapk_emotion_21_penxue.png",
            "cool_coolapk_emotion_22_xiaoyan": "coolapk_emotion_22_xiaoyan.png",
            "cool_coolapk_emotion_23_shui": "coolapk_emotion_23_shui.png",
            "cool_coolapk_emotion_24_wuzuixiao": "coolapk_emotion_24_wuzuixiao.png",
            "cool_coolapk_emotion_25_zaijian": "coolapk_emotion_25_zaijian.png",
            "cool_coolapk_emotion_26_kelian": "coolapk_emotion_26_kelian.png",
            "cool_coolapk_emotion_27_qiang": "coolapk_emotion_27_qiang.png",
            "cool_coolapk_emotion_28_ruo": "coolapk_emotion_28_ruo.png",
            "cool_coolapk_emotion_29_baoquan": "coolapk_emotion_29_baoquan.png",
            "cool_coolapk_emotion_2_jingya": "coolapk_emotion_2_jingya.png",
            "cool_coolapk_emotion_30_ok": "coolapk_emotion_30_ok.png",
            "cool_coolapk_emotion_31_xiaoku": "coolapk_emotion_31_xiaoku.png",
            "cool_coolapk_emotion_32_heiha": "coolapk_emotion_32_heiha.png",
            "cool_coolapk_emotion_33_wulian": "coolapk_emotion_33_wulian.png",
            "cool_coolapk_emotion_34_jizhi": "coolapk_emotion_34_jizhi.png",
            "cool_coolapk_emotion_35_ye": "coolapk_emotion_35_ye.png",
            "cool_coolapk_emotion_36_ku": "coolapk_emotion_36_ku.png",
            "cool_coolapk_emotion_37_doge": "coolapk_emotion_37_doge.png",
            "cool_coolapk_emotion_38_wozuimei": "coolapk_emotion_38_wozuimei.png",
            "cool_coolapk_emotion_39_caidao": "coolapk_emotion_39_caidao.png",
            "cool_coolapk_emotion_3_ciya": "coolapk_emotion_3_ciya.png",
            "cool_coolapk_emotion_40_aixin": "coolapk_emotion_40_aixin.png",
            "cool_coolapk_emotion_41_meigui": "coolapk_emotion_41_meigui.png",
            "cool_coolapk_emotion_42_diaoxie": "coolapk_emotion_42_diaoxie.png",
            "cool_coolapk_emotion_43_heixian": "coolapk_emotion_43_heixian.png",
            "cool_coolapk_emotion_44_pen": "coolapk_emotion_44_pen.png",
            "cool_coolapk_emotion_45_yinxian": "coolapk_emotion_45_yinxian.png",
            "cool_coolapk_emotion_46_nanguo": "coolapk_emotion_46_nanguo.png",
            "cool_coolapk_emotion_47_weiqu": "coolapk_emotion_47_weiqu.png",
            "cool_coolapk_emotion_48_weiweiyixiao": "coolapk_emotion_48_weiweiyixiao.png",
            "cool_coolapk_emotion_49_huanhu": "coolapk_emotion_49_huanhu.png",
            "cool_coolapk_emotion_4_liulei": "coolapk_emotion_4_liulei.png",
            "cool_coolapk_emotion_50_xinsui": "coolapk_emotion_50_xinsui.png",
            "cool_coolapk_emotion_51_chigua": "coolapk_emotion_51_chigua.png",
            "cool_coolapk_emotion_52_hejiu": "coolapk_emotion_52_hejiu.png",
            "cool_coolapk_emotion_53_pu": "coolapk_emotion_53_pu.png",
            "cool_coolapk_emotion_54_hongyaowan": "coolapk_emotion_54_hongyaowan.png",
            "cool_coolapk_emotion_55_lvyaowan": "coolapk_emotion_55_lvyaowan.png",
            "cool_coolapk_emotion_56_dogexiaoku": "coolapk_emotion_56_dogexiaoku.png",
            "cool_coolapk_emotion_57_dogehechi": "coolapk_emotion_57_dogehechi.png",
            "cool_coolapk_emotion_58_dogeyuanliangta": "coolapk_emotion_58_dogeyuanliangta.png",
            "cool_coolapk_emotion_59_erha": "coolapk_emotion_59_erha.png",
            "cool_coolapk_emotion_5_keai": "coolapk_emotion_5_keai.png",
            "cool_coolapk_emotion_61_lvmao": "coolapk_emotion_61_lvmao.png",
            "cool_coolapk_emotion_62_huaji": "coolapk_emotion_62_huaji.png",
            "cool_coolapk_emotion_60_kuan": "coolapk_emotion_60_kuan.png",
            "cool_coolapk_emotion_63_liuhanhuaji": "coolapk_emotion_63_liuhanhuaji.png",
            "cool_coolapk_emotion_64_shounuehuaji": "coolapk_emotion_64_shounuehuaji.png",
            "cool_coolapk_emotion_65_coshuaji": "coolapk_emotion_65_coshuaji.png",
            "cool_coolapk_emotion_66_doujiyanhuaji": "coolapk_emotion_66_doujiyanhuaji.png",
            "cool_coolapk_emotion_67_mojinghuaji": "coolapk_emotion_67_mojinghuaji.png",
            "cool_coolapk_emotion_68": "coolapk_emotion_68.png",
            "cool_coolapk_emotion_69": "coolapk_emotion_69.png",
            "cool_coolapk_emotion_6_weixiao": "coolapk_emotion_6_weixiao.png",
            "cool_coolapk_emotion_70": "coolapk_emotion_70.png",
            "cool_coolapk_emotion_71": "coolapk_emotion_71.png",
            "cool_coolapk_emotion_72": "coolapk_emotion_72.png",
            "cool_coolapk_emotion_73": "coolapk_emotion_73.png",
            "cool_coolapk_emotion_74": "coolapk_emotion_74.png",
            "cool_coolapk_emotion_75": "coolapk_emotion_75.png",
            "cool_coolapk_emotion_76": "coolapk_emotion_76.png",
            "cool_coolapk_emotion_77": "coolapk_emotion_77.png",
            "cool_coolapk_emotion_78": "coolapk_emotion_78.png",
            "cool_coolapk_emotion_79": "coolapk_emotion_79.png",
            "cool_coolapk_emotion_7_hehe": "coolapk_emotion_7_hehe.png",
            "cool_coolapk_emotion_80": "coolapk_emotion_80.png",
            "cool_coolapk_emotion_81_naikezui": "coolapk_emotion_81_naikezui.png",
            "cool_coolapk_emotion_82_miaomiao": "coolapk_emotion_82_miaomiao.png",
            "cool_coolapk_emotion_83_huoba": "coolapk_emotion_83_huoba.png",
            "cool_coolapk_emotion_84_baiyan": "coolapk_emotion_84_baiyan.png",
            "cool_coolapk_emotion_85": "coolapk_emotion_85.png",
            "cool_coolapk_emotion_86": "coolapk_emotion_86.png",
            "cool_coolapk_emotion_87": "coolapk_emotion_87.png",
            "cool_coolapk_emotion_88": "coolapk_emotion_88.png",
            "cool_coolapk_emotion_89": "coolapk_emotion_89.png",
            "cool_coolapk_emotion_8_piezui": "coolapk_emotion_8_piezui.png",
            "cool_coolapk_emotion_90": "coolapk_emotion_90.png",
            "cool_coolapk_emotion_91": "coolapk_emotion_91.png",
            "cool_coolapk_emotion_92": "coolapk_emotion_92.png",
            "cool_coolapk_emotion_93": "coolapk_emotion_93.png",
            "cool_coolapk_emotion_94": "coolapk_emotion_94.png",
            "cool_coolapk_emotion_95_erhading": "coolapk_emotion_95_erhading.png",
            "cool_coolapk_emotion_96_kuanlvmao": "coolapk_emotion_96_kuanlvmao.png",
            "cool_coolapk_emotion_97_haixiu": "coolapk_emotion_97_haixiu.png",
            "cool_coolapk_emotion_98_wunai": "coolapk_emotion_98_wunai.png",
            "cool_coolapk_emotion_99_zhoumei": "coolapk_emotion_99_zhoumei.png",
            "cool_coolapk_emotion_9_se": "coolapk_emotion_9_se.png",
            "cool_c_coolb": "c_coolb.png",
            "cool_c_fived": "c_fived.png",
            "cool_c_fivef": "c_fivef.png",
            "cool_c_fivem": "c_fivem.png",
            "cool_c_fiveo": "c_fiveo.png",
            "cool_c_fivey": "c_fivey.png",
            "cool_c_fy": "c_fy.png",
            "cool_c_oned": "c_oned.png",
            "cool_c_onef": "c_onef.png",
            "cool_c_onem": "c_onem.png",
            "cool_c_oneo": "c_oneo.png",
            "cool_c_oney": "c_oney.png",
            "cool_c_oy": "c_oy.png",
            "cool_c_teny": "c_teny.png",
            "cool_c_twod": "c_twod.png",
            "cool_c_twof": "c_twof.png",
            "cool_c_twom": "c_twom.png",
            "cool_c_twoo": "c_twoo.png",
            "cool_c_twoy": "c_twoy.png",
            "cool_c_ty": "c_ty.png",
            // ... 更多表情
        } 
      });
    }
</script>

<!-- <script>
    document.body.addEventListener('click', function(e) {
    if (e.target.classList.contains('vsubmit')) {
        const email = document.querySelector('input[type=email]');
        const nick = document.querySelector('input[name=nick]');
        const reg = /^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;
        if (!email.value || !nick.value || !reg.test(email.value)) {
            const str = `<div class="valert txt-center"><div class="vtext">请填写正确的昵称和邮箱！</div></div>`;
            const vmark = document.querySelector('.vmark');
            vmark.innerHTML = str;
            vmark.style.display = 'block';

            setTimeout(function() {
                vmark.style.display = 'none';
                vmark.innerHTML = '';
            }, 2500);
        }
      }
    });
</script> -->
<!-- <script>
$(document).ready(function(){
  $('.vemoji-btn').text('😀');
	$("#vcomments").on('click', 'span.vat',function(){
		$(this).parent('div.vmeta').next("div.vcontent").after($("div.vwrap"));
		$('textarea#veditor').focus();
	})
})
</script> -->
<style>
@keyframes valineBg{
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}
#vcomments .vwrap{
  padding: 20px 20px 44px;
  background: linear-gradient(-45deg, rgba(255, 206, 255, .3), rgba(237, 156, 253 ,.3), rgba(173, 214, 251, .3), rgba(192, 255, 208, .3));
  background-size: 400% 400%;
  animation: valineBg 15s ease infinite;
}
#veditor{
  background-image: url(https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/other/comment-bg.png);
  background-size: contain;
  background-repeat: no-repeat;
  background-position: right;
  background-color: rgba(255,255,255,0);
  /* resize: vertical; */
  resize:none;
  min-height:7rem;
}
textarea[id='veditor']::placeholder{color:#b3b3b3;font-size:15px;text-align:center;line-height:6rem;}
.v .vwrap .vheader{width: 80%;bottom:0;position: absolute;}
.v .vinput{padding:10px 15px;border-bottom:0px;background-color: rgba(255, 0, 110, .1);}
.v .vwrap .vedit .vctrl{margin-top:-44px;right:0;position:absolute;margin-right:-3px;}
.v .vwrap .vcontrol{ position:absolute;right:0;bottom:0;width:20%;padding-top:0px;}
.v .vwrap .vcol-30{
  position: absolute;left: 4px;bottom: 5px;width: 20px !important;
}
.v .vwrap .vcontrol .col.col-80{width: 100%;}
.v .vbtn.vsubmit{
  padding: 0;
  position:absolute; bottom: 0; right: 0; 
  color: #fff; height: 42px; line-height: 42px; width:150px; text-align: center;
  border: none;border-radius:22px;background:#fe1b73;
}
.v .vbtn.vsubmit:hover{box-shadow: 0 2px 12px #ff4e6a;}
.v .vwrap .vedit .vctrl span{
  margin-top: 30px;
}
.v .vwrap .vcontrol .col.col-20,.v .vlist .vcard .vhead .vsys{
  display:none;
}
@media screen and (max-width: 520px){
  .v .vwrap .vcol-30{display: none !important;}
  textarea[id='veditor']::placeholder{color:#b3b3b3;font-size:14px;text-align:center;line-height: 1;}
  .vemojis{margin-bottom: 100px;}
  .v .vwrap .vheader .vinput{width: 33.33%;padding:10px 5px;}
  .v .vbtn.vsubmit{bottom: 10px;left: 0;right: 0;margin: 0 auto;}
}
@media screen and (min-width: 520px;) (max-width: 750px){
  /* #vcomments .vwrap{height: 400px;} */
  .v .vwrap .vcol-30{display: none !important;}
  .v .vwrap .item3{bottom: 60px;}
  .vemojis{margin-bottom: 200px;}
  textarea[id='veditor']::placeholder{color:#b3b3b3;font-size:14px;text-align:center;line-height: 1;}
	.v .vwrap .vheader .vinput{width: 33.33%;padding:10px 5px;}
  .v .vbtn.vsubmit{bottom: 10px;left: 0;right: 0;margin: 0 auto;}
}
.vcard .vhead .vsys:nth-of-type(1){
  display: inline-block;
  background-color: rgba(247, 210, 247, .5);
}
.vcard .vhead .vsys:nth-of-type(2){
  display: inline-block;
  background-color: rgba(224, 235, 247, .5);
}
</style>
    <div style="text-align:center;font-size: 12px;color: #888;">
            <div class="site-info">
                
             
              <div class="footertext">
                <p><a href="#" style="color: #b9b9b9;" >Blog wallleap</a>
                  , Copyright &copy; 2019-2020 
                  by Luwang All Rights Reserved.</p>
              </div>

              <!-- <a style="color: #b9b9b9;" href="//beian.miit.gov.cn" target="_blank">	
                <img src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/logo/ICP.png" style="vertical-align: text-bottom; width: 17px;" />
                赣ICP备20000895号-1
              </a> -->
              
              <span style="padding-left: 20px;">
                <i class="fa fa-clock-o" aria-hidden="true"></i>
                <span id="time" align="center">载入时间中...</span>
                <script>
                  var now = new Date(); 
                  function createtime() { 
                    var grt= new Date("08/08/2019 17:38:00");//在此处修改你的建站时间
                    now.setTime(now.getTime()+250); 
                    days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
                    hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
                    if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
                    mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
                    seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
                    snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
                    document.getElementById("time").innerHTML = "小站已经苟活 "+dnum+" 天 "+hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
                 } 
                 setInterval("createtime()",250);
                </script>
              <span style="padding-left: 20px;><i class="fa fa-cog fa-spin" aria-hidden="true"></i></span>
                <script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1278079074'%3E%3C/span%3E%3Cscript src='https://s4.cnzz.com/z_stat.php%3Fid%3D1278079074%26online%3D2' type='text/javascript'%3E%3C/script%3E"));</script>
              </span>
              
              <div style="text-align:center; padding-top: 20px;">
                <div class="github-badge">
                  <a rel="license" href="https://hexo.io/" target="_blank" title="由Hexo强力驱动">
                  <span class="badge-subject"><i class="fa fa-fire" aria-hidden="true"></i> Powered</span><span class="badge-value bg-blue">Hexo</span></a>
                </div>
                <div class="github-badge">
                    <a rel="license" href="https://coding.net/" target="_blank" title="静态网页托管于CODING">
                    <span class="badge-subject"><i class="fa fa-heart" aria-hidden="true"></i> Hosted</span>
                    <span class="badge-value bg-gray">CODING</span></a>
                  </div>
                <div class="github-badge">
                    <a rel="license" href="https://www.jsdelivr.com/" target="_blank" title="jsDelivr提供CDN加速服务">
                    <span class="badge-subject"><i class="fa fa-firefox fa-spin" aria-hidden="true"></i> CND</span><span class="badge-value bg-cdn">Github&jsDelivr</span></a>
                </div>
                <div class="github-badge">
                    <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="本站点采用知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议进行许可">
                    <span class="badge-subject"><i class="fa fa-copyright"></i></span><span class="badge-value bg-lightgrey">BY-NC-SA 4.0</span></a>
                </div>
              </div>  
          
              
            </div><!-- .site-info -->
          </div>
</section>
  </div>
</div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/combine/npm/lazysizes@5.1.0/lazysizes.min.js,gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js,npm/mdui@0.4.3/dist/js/mdui.min.js,gh/nexmoe/nexmoe.github.io@latest/js/app.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!--<script src="/js/app.js?v=1599833537171"></script>-->


    <script src="https://cdn.jsdelivr.net/gh/xtaodada/xtaodada.github.io@0.0.2/copy.js"></script>


 
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/shehuizhuyi.js"></script>
<script> 
!function(e,t,a){function n(){c(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"),o(),r()}function r(){for(var e=0;e<d.length;e++)d[e].alpha<=0?(t.body.removeChild(d[e].el),d.splice(e,1)):(d[e].y--,d[e].scale+=.004,d[e].alpha-=.013,d[e].el.style.cssText="left:"+d[e].x+"px;top:"+d[e].y+"px;opacity:"+d[e].alpha+";transform:scale("+d[e].scale+","+d[e].scale+") rotate(45deg);background:"+d[e].color+";z-index:99999");requestAnimationFrame(r)}function o(){var t="function"==typeof e.onclick&&e.onclick;e.onclick=function(e){t&&t(),i(e)}}function i(e){var a=t.createElement("div");a.className="heart",d.push({el:a,x:e.clientX-5,y:e.clientY-5,scale:1,alpha:1,color:s()}),t.body.appendChild(a)}function c(e){var a=t.createElement("style");a.type="text/css";try{a.appendChild(t.createTextNode(e))}catch(t){a.styleSheet.cssText=e}t.getElementsByTagName("head")[0].appendChild(a)}function s(){return"rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")"}var d=[];e.requestAnimationFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)}}(),n()}(window,document);
</script>

  





</body>

</html>
